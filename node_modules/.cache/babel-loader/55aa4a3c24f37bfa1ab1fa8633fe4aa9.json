{"remainingRequest":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/thread-loader/dist/cjs.js!/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/babel-loader/lib/index.js!/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/bootstrap-vue/esm/components/time/time.js","dependencies":[{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/bootstrap-vue/esm/components/time/time.js","mtime":499162500000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZyb20uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuZGVzY3JpcHRpb24uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwoKdmFyIF93YXRjaDsKCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgewogIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOwogICAgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgewogICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsKICAgIH0pOwogICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOwogIH0KCiAgcmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwoKICAgIGlmIChpICUgMikgewogICAgICBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsKICAgICAgfSk7CiAgICB9CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOwp9CgpmdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7CiAgaWYgKCFvKSByZXR1cm47CiAgaWYgKHR5cGVvZiBvID09PSAic3RyaW5nIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7CiAgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOwogIGlmIChuID09PSAiT2JqZWN0IiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOwogIGlmIChuID09PSAiTWFwIiB8fCBuID09PSAiU2V0IikgcmV0dXJuIEFycmF5LmZyb20obyk7CiAgaWYgKG4gPT09ICJBcmd1bWVudHMiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsKfQoKZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsKICBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsKCiAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7CiAgICBhcnIyW2ldID0gYXJyW2ldOwogIH0KCiAgcmV0dXJuIGFycjI7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsKICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gInVuZGVmaW5lZCIgfHwgIShTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpKSByZXR1cm47CiAgdmFyIF9hcnIgPSBbXTsKICB2YXIgX24gPSB0cnVlOwogIHZhciBfZCA9IGZhbHNlOwogIHZhciBfZSA9IHVuZGVmaW5lZDsKCiAgdHJ5IHsKICAgIGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsKICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTsKCiAgICAgIGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsKICAgIH0KICB9IGNhdGNoIChlcnIpIHsKICAgIF9kID0gdHJ1ZTsKICAgIF9lID0gZXJyOwogIH0gZmluYWxseSB7CiAgICB0cnkgewogICAgICBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSAhPSBudWxsKSBfaVsicmV0dXJuIl0oKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGlmIChfZCkgdGhyb3cgX2U7CiAgICB9CiAgfQoKICByZXR1cm4gX2FycjsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7Cn0gLy8gQlRpbWUgY29udHJvbCAobm90IGZvcm0gaW5wdXQgY29udHJvbCkKCgppbXBvcnQgeyBWdWUgfSBmcm9tICcuLi8uLi92dWUnOwppbXBvcnQgeyBOQU1FX1RJTUUgfSBmcm9tICcuLi8uLi9jb25zdGFudHMvY29tcG9uZW50cyc7CmltcG9ydCB7IEVWRU5UX05BTUVfQ09OVEVYVCB9IGZyb20gJy4uLy4uL2NvbnN0YW50cy9ldmVudHMnOwppbXBvcnQgeyBDT0RFX0xFRlQsIENPREVfUklHSFQgfSBmcm9tICcuLi8uLi9jb25zdGFudHMva2V5LWNvZGVzJzsKaW1wb3J0IHsgUFJPUF9UWVBFX0FSUkFZX1NUUklORywgUFJPUF9UWVBFX0JPT0xFQU4sIFBST1BfVFlQRV9OVU1CRVJfU1RSSU5HLCBQUk9QX1RZUEVfU1RSSU5HIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzL3Byb3BzJzsKaW1wb3J0IHsgUlhfVElNRSB9IGZyb20gJy4uLy4uL2NvbnN0YW50cy9yZWdleCc7CmltcG9ydCB7IGNvbmNhdCB9IGZyb20gJy4uLy4uL3V0aWxzL2FycmF5JzsKaW1wb3J0IHsgY3JlYXRlRGF0ZSwgY3JlYXRlRGF0ZUZvcm1hdHRlciB9IGZyb20gJy4uLy4uL3V0aWxzL2RhdGUnOwppbXBvcnQgeyBhdHRlbXB0Qmx1ciwgYXR0ZW1wdEZvY3VzLCBjb250YWlucywgZ2V0QWN0aXZlRWxlbWVudCwgcmVxdWVzdEFGIH0gZnJvbSAnLi4vLi4vdXRpbHMvZG9tJzsKaW1wb3J0IHsgc3RvcEV2ZW50IH0gZnJvbSAnLi4vLi4vdXRpbHMvZXZlbnRzJzsKaW1wb3J0IHsgaWRlbnRpdHkgfSBmcm9tICcuLi8uLi91dGlscy9pZGVudGl0eSc7CmltcG9ydCB7IGlzTnVsbCwgaXNVbmRlZmluZWRPck51bGwgfSBmcm9tICcuLi8uLi91dGlscy9pbnNwZWN0JzsKaW1wb3J0IHsgbG9vc2VFcXVhbCB9IGZyb20gJy4uLy4uL3V0aWxzL2xvb3NlLWVxdWFsJzsKaW1wb3J0IHsgaXNMb2NhbGVSVEwgfSBmcm9tICcuLi8uLi91dGlscy9sb2NhbGUnOwppbXBvcnQgeyBtYWtlTW9kZWxNaXhpbiB9IGZyb20gJy4uLy4uL3V0aWxzL21vZGVsJzsKaW1wb3J0IHsgdG9JbnRlZ2VyIH0gZnJvbSAnLi4vLi4vdXRpbHMvbnVtYmVyJzsKaW1wb3J0IHsgcGljaywgc29ydEtleXMgfSBmcm9tICcuLi8uLi91dGlscy9vYmplY3QnOwppbXBvcnQgeyBtYWtlUHJvcCwgbWFrZVByb3BzQ29uZmlndXJhYmxlIH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJvcHMnOwppbXBvcnQgeyB0b1N0cmluZyB9IGZyb20gJy4uLy4uL3V0aWxzL3N0cmluZyc7CmltcG9ydCB7IGlkTWl4aW4sIHByb3BzIGFzIGlkUHJvcHMgfSBmcm9tICcuLi8uLi9taXhpbnMvaWQnOwppbXBvcnQgeyBub3JtYWxpemVTbG90TWl4aW4gfSBmcm9tICcuLi8uLi9taXhpbnMvbm9ybWFsaXplLXNsb3QnOwppbXBvcnQgeyBCRm9ybVNwaW5idXR0b24sIHByb3BzIGFzIEJGb3JtU3BpbmJ1dHRvblByb3BzIH0gZnJvbSAnLi4vZm9ybS1zcGluYnV0dG9uL2Zvcm0tc3BpbmJ1dHRvbic7CmltcG9ydCB7IEJJY29uQ2lyY2xlRmlsbCwgQkljb25DaGV2cm9uVXAgfSBmcm9tICcuLi8uLi9pY29ucy9pY29ucyc7IC8vIC0tLSBDb25zdGFudHMgLS0tCgp2YXIgX21ha2VNb2RlbE1peGluID0gbWFrZU1vZGVsTWl4aW4oJ3ZhbHVlJywgewogIHR5cGU6IFBST1BfVFlQRV9TVFJJTkcsCiAgZGVmYXVsdFZhbHVlOiAnJwp9KSwKICAgIG1vZGVsTWl4aW4gPSBfbWFrZU1vZGVsTWl4aW4ubWl4aW4sCiAgICBtb2RlbFByb3BzID0gX21ha2VNb2RlbE1peGluLnByb3BzLAogICAgTU9ERUxfUFJPUF9OQU1FID0gX21ha2VNb2RlbE1peGluLnByb3AsCiAgICBNT0RFTF9FVkVOVF9OQU1FID0gX21ha2VNb2RlbE1peGluLmV2ZW50OwoKdmFyIE5VTUVSSUMgPSAnbnVtZXJpYyc7IC8vIC0tLSBIZWxwZXIgbWV0aG9kcyAtLS0KCnZhciBwYWRMZWZ0WmVyb3MgPSBmdW5jdGlvbiBwYWRMZWZ0WmVyb3ModmFsdWUpIHsKICByZXR1cm4gIjAwIi5jb25jYXQodmFsdWUgfHwgJycpLnNsaWNlKC0yKTsKfTsKCnZhciBwYXJzZUhNUyA9IGZ1bmN0aW9uIHBhcnNlSE1TKHZhbHVlKSB7CiAgdmFsdWUgPSB0b1N0cmluZyh2YWx1ZSk7CiAgdmFyIGhoID0gbnVsbCwKICAgICAgbW0gPSBudWxsLAogICAgICBzcyA9IG51bGw7CgogIGlmIChSWF9USU1FLnRlc3QodmFsdWUpKSB7CiAgICA7CgogICAgdmFyIF92YWx1ZSRzcGxpdCRtYXAgPSB2YWx1ZS5zcGxpdCgnOicpLm1hcChmdW5jdGlvbiAodikgewogICAgICByZXR1cm4gdG9JbnRlZ2VyKHYsIG51bGwpOwogICAgfSk7CgogICAgdmFyIF92YWx1ZSRzcGxpdCRtYXAyID0gX3NsaWNlZFRvQXJyYXkoX3ZhbHVlJHNwbGl0JG1hcCwgMyk7CgogICAgaGggPSBfdmFsdWUkc3BsaXQkbWFwMlswXTsKICAgIG1tID0gX3ZhbHVlJHNwbGl0JG1hcDJbMV07CiAgICBzcyA9IF92YWx1ZSRzcGxpdCRtYXAyWzJdOwogIH0KCiAgcmV0dXJuIHsKICAgIGhvdXJzOiBpc1VuZGVmaW5lZE9yTnVsbChoaCkgPyBudWxsIDogaGgsCiAgICBtaW51dGVzOiBpc1VuZGVmaW5lZE9yTnVsbChtbSkgPyBudWxsIDogbW0sCiAgICBzZWNvbmRzOiBpc1VuZGVmaW5lZE9yTnVsbChzcykgPyBudWxsIDogc3MsCiAgICBhbXBtOiBpc1VuZGVmaW5lZE9yTnVsbChoaCkgfHwgaGggPCAxMiA/IDAgOiAxCiAgfTsKfTsKCnZhciBmb3JtYXRITVMgPSBmdW5jdGlvbiBmb3JtYXRITVMoX3JlZikgewogIHZhciBob3VycyA9IF9yZWYuaG91cnMsCiAgICAgIG1pbnV0ZXMgPSBfcmVmLm1pbnV0ZXMsCiAgICAgIHNlY29uZHMgPSBfcmVmLnNlY29uZHM7CiAgdmFyIHJlcXVpcmVTZWNvbmRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTsKCiAgaWYgKGlzTnVsbChob3VycykgfHwgaXNOdWxsKG1pbnV0ZXMpIHx8IHJlcXVpcmVTZWNvbmRzICYmIGlzTnVsbChzZWNvbmRzKSkgewogICAgcmV0dXJuICcnOwogIH0KCiAgdmFyIGhtcyA9IFtob3VycywgbWludXRlcywgcmVxdWlyZVNlY29uZHMgPyBzZWNvbmRzIDogMF07CiAgcmV0dXJuIGhtcy5tYXAocGFkTGVmdFplcm9zKS5qb2luKCc6Jyk7Cn07IC8vIC0tLSBQcm9wcyAtLS0KCgpleHBvcnQgdmFyIHByb3BzID0gbWFrZVByb3BzQ29uZmlndXJhYmxlKHNvcnRLZXlzKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGlkUHJvcHMpLCBtb2RlbFByb3BzKSwgcGljayhCRm9ybVNwaW5idXR0b25Qcm9wcywgWydsYWJlbEluY3JlbWVudCcsICdsYWJlbERlY3JlbWVudCddKSksIHt9LCB7CiAgLy8gSUQgb2YgbGFiZWwgZWxlbWVudAogIGFyaWFMYWJlbGxlZGJ5OiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HKSwKICBkaXNhYmxlZDogbWFrZVByb3AoUFJPUF9UWVBFX0JPT0xFQU4sIGZhbHNlKSwKICBoaWRkZW46IG1ha2VQcm9wKFBST1BfVFlQRV9CT09MRUFOLCBmYWxzZSksCiAgaGlkZUhlYWRlcjogbWFrZVByb3AoUFJPUF9UWVBFX0JPT0xFQU4sIGZhbHNlKSwKICAvLyBFeHBsaWNpdGx5IGZvcmNlIDEyIG9yIDI0IGhvdXIgdGltZQogIC8vIERlZmF1bHQgaXMgdG8gdXNlIHJlc29sdmVkIGxvY2FsZSBmb3IgMTIvMjQgaG91ciBkaXNwbGF5CiAgLy8gVHJpLXN0YXRlOiBgdHJ1ZWAgPSAxMiwgYGZhbHNlYCA9IDI0LCBgbnVsbGAgPSBhdXRvCiAgaG91cjEyOiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgbnVsbCksCiAgbGFiZWxBbTogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORywgJ0FNJyksCiAgbGFiZWxBbXBtOiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HLCAnQU0vUE0nKSwKICBsYWJlbEhvdXJzOiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HLCAnSG91cnMnKSwKICBsYWJlbE1pbnV0ZXM6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcsICdNaW51dGVzJyksCiAgbGFiZWxOb1RpbWVTZWxlY3RlZDogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORywgJ05vIHRpbWUgc2VsZWN0ZWQnKSwKICBsYWJlbFBtOiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HLCAnUE0nKSwKICBsYWJlbFNlY29uZHM6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcsICdTZWNvbmRzJyksCiAgbGFiZWxTZWxlY3RlZDogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORywgJ1NlbGVjdGVkIHRpbWUnKSwKICBsb2NhbGU6IG1ha2VQcm9wKFBST1BfVFlQRV9BUlJBWV9TVFJJTkcpLAogIG1pbnV0ZXNTdGVwOiBtYWtlUHJvcChQUk9QX1RZUEVfTlVNQkVSX1NUUklORywgMSksCiAgcmVhZG9ubHk6IG1ha2VQcm9wKFBST1BfVFlQRV9CT09MRUFOLCBmYWxzZSksCiAgc2Vjb25kc1N0ZXA6IG1ha2VQcm9wKFBST1BfVFlQRV9OVU1CRVJfU1RSSU5HLCAxKSwKICAvLyBJZiBgdHJ1ZWAsIHNob3cgdGhlIHNlY29uZCBzcGluYnV0dG9uCiAgc2hvd1NlY29uZHM6IG1ha2VQcm9wKFBST1BfVFlQRV9CT09MRUFOLCBmYWxzZSkKfSkpLCBOQU1FX1RJTUUpOyAvLyAtLS0gTWFpbiBjb21wb25lbnQgLS0tCi8vIEB2dWUvY29tcG9uZW50CgpleHBvcnQgdmFyIEJUaW1lID0gLyojX19QVVJFX18qL1Z1ZS5leHRlbmQoewogIG5hbWU6IE5BTUVfVElNRSwKICBtaXhpbnM6IFtpZE1peGluLCBtb2RlbE1peGluLCBub3JtYWxpemVTbG90TWl4aW5dLAogIHByb3BzOiBwcm9wcywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgdmFyIHBhcnNlZCA9IHBhcnNlSE1TKHRoaXNbTU9ERUxfUFJPUF9OQU1FXSB8fCAnJyk7CiAgICByZXR1cm4gewogICAgICAvLyBTcGluIGJ1dHRvbiBtb2RlbHMKICAgICAgbW9kZWxIb3VyczogcGFyc2VkLmhvdXJzLAogICAgICBtb2RlbE1pbnV0ZXM6IHBhcnNlZC5taW51dGVzLAogICAgICBtb2RlbFNlY29uZHM6IHBhcnNlZC5zZWNvbmRzLAogICAgICBtb2RlbEFtcG06IHBhcnNlZC5hbXBtLAogICAgICAvLyBJbnRlcm5hbCBmbGFnIHRvIGVuYWJsZSBhcmlhLWxpdmUgcmVnaW9ucwogICAgICBpc0xpdmU6IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGNvbXB1dGVkSE1TOiBmdW5jdGlvbiBjb21wdXRlZEhNUygpIHsKICAgICAgdmFyIGhvdXJzID0gdGhpcy5tb2RlbEhvdXJzOwogICAgICB2YXIgbWludXRlcyA9IHRoaXMubW9kZWxNaW51dGVzOwogICAgICB2YXIgc2Vjb25kcyA9IHRoaXMubW9kZWxTZWNvbmRzOwogICAgICByZXR1cm4gZm9ybWF0SE1TKHsKICAgICAgICBob3VyczogaG91cnMsCiAgICAgICAgbWludXRlczogbWludXRlcywKICAgICAgICBzZWNvbmRzOiBzZWNvbmRzCiAgICAgIH0sIHRoaXMuc2hvd1NlY29uZHMpOwogICAgfSwKICAgIHJlc29sdmVkT3B0aW9uczogZnVuY3Rpb24gcmVzb2x2ZWRPcHRpb25zKCkgewogICAgICAvLyBSZXNvbHZlZCBsb2NhbGUgb3B0aW9ucwogICAgICB2YXIgbG9jYWxlID0gY29uY2F0KHRoaXMubG9jYWxlKS5maWx0ZXIoaWRlbnRpdHkpOwogICAgICB2YXIgb3B0aW9ucyA9IHsKICAgICAgICBob3VyOiBOVU1FUklDLAogICAgICAgIG1pbnV0ZTogTlVNRVJJQywKICAgICAgICBzZWNvbmQ6IE5VTUVSSUMKICAgICAgfTsKCiAgICAgIGlmICghaXNVbmRlZmluZWRPck51bGwodGhpcy5ob3VyMTIpKSB7CiAgICAgICAgLy8gRm9yY2UgMTIgb3IgMjQgaG91ciBjbG9jawogICAgICAgIG9wdGlvbnMuaG91cjEyID0gISF0aGlzLmhvdXIxMjsKICAgICAgfQoKICAgICAgdmFyIGR0ZiA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KGxvY2FsZSwgb3B0aW9ucyk7CiAgICAgIHZhciByZXNvbHZlZCA9IGR0Zi5yZXNvbHZlZE9wdGlvbnMoKTsKICAgICAgdmFyIGhvdXIxMiA9IHJlc29sdmVkLmhvdXIxMiB8fCBmYWxzZTsgLy8gSUUgMTEgZG9lc24ndCByZXNvbHZlIHRoZSBob3VyQ3ljbGUsIHNvIHdlIG1ha2UKICAgICAgLy8gYW4gYXNzdW1wdGlvbiBhbmQgZmFsbCBiYWNrIHRvIGNvbW1vbiB2YWx1ZXMKCiAgICAgIHZhciBob3VyQ3ljbGUgPSByZXNvbHZlZC5ob3VyQ3ljbGUgfHwgKGhvdXIxMiA/ICdoMTInIDogJ2gyMycpOwogICAgICByZXR1cm4gewogICAgICAgIGxvY2FsZTogcmVzb2x2ZWQubG9jYWxlLAogICAgICAgIGhvdXIxMjogaG91cjEyLAogICAgICAgIGhvdXJDeWNsZTogaG91ckN5Y2xlCiAgICAgIH07CiAgICB9LAogICAgY29tcHV0ZWRMb2NhbGU6IGZ1bmN0aW9uIGNvbXB1dGVkTG9jYWxlKCkgewogICAgICByZXR1cm4gdGhpcy5yZXNvbHZlZE9wdGlvbnMubG9jYWxlOwogICAgfSwKICAgIGNvbXB1dGVkTGFuZzogZnVuY3Rpb24gY29tcHV0ZWRMYW5nKCkgewogICAgICByZXR1cm4gKHRoaXMuY29tcHV0ZWRMb2NhbGUgfHwgJycpLnJlcGxhY2UoLy11LS4qJC8sICcnKTsKICAgIH0sCiAgICBjb21wdXRlZFJUTDogZnVuY3Rpb24gY29tcHV0ZWRSVEwoKSB7CiAgICAgIHJldHVybiBpc0xvY2FsZVJUTCh0aGlzLmNvbXB1dGVkTGFuZyk7CiAgICB9LAogICAgY29tcHV0ZWRIb3VyQ3ljbGU6IGZ1bmN0aW9uIGNvbXB1dGVkSG91ckN5Y2xlKCkgewogICAgICAvLyBoMTEsIGgxMiwgaDIzLCBvciBoMjQKICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvTG9jYWxlL2hvdXJDeWNsZQogICAgICAvLyBoMTIgLSBIb3VyIHN5c3RlbSB1c2luZyAx4oCTMTIuIENvcnJlc3BvbmRzIHRvICdoJyBpbiBwYXR0ZXJucy4gVGhlIDEyIGhvdXIgY2xvY2ssIHdpdGggbWlkbmlnaHQgc3RhcnRpbmcgYXQgMTI6MDAgYW0KICAgICAgLy8gaDIzIC0gSG91ciBzeXN0ZW0gdXNpbmcgMOKAkzIzLiBDb3JyZXNwb25kcyB0byAnSCcgaW4gcGF0dGVybnMuIFRoZSAyNCBob3VyIGNsb2NrLCB3aXRoIG1pZG5pZ2h0IHN0YXJ0aW5nIGF0IDA6MDAKICAgICAgLy8gaDExIC0gSG91ciBzeXN0ZW0gdXNpbmcgMOKAkzExLiBDb3JyZXNwb25kcyB0byAnSycgaW4gcGF0dGVybnMuIFRoZSAxMiBob3VyIGNsb2NrLCB3aXRoIG1pZG5pZ2h0IHN0YXJ0aW5nIGF0IDA6MDAgYW0KICAgICAgLy8gaDI0IC0gSG91ciBzeXN0ZW0gdXNpbmcgMeKAkzI0LiBDb3JyZXNwb25kcyB0byAnaycgaW4gcGF0dGVybi4gVGhlIDI0IGhvdXIgY2xvY2ssIHdpdGggbWlkbmlnaHQgc3RhcnRpbmcgYXQgMjQ6MDAKICAgICAgLy8gRm9yIGgxMiBvciBoMjQsIHdlIHZpc3VhbGx5IGZvcm1hdCAwMCBob3VycyBhcyAxMgogICAgICByZXR1cm4gdGhpcy5yZXNvbHZlZE9wdGlvbnMuaG91ckN5Y2xlOwogICAgfSwKICAgIGlzMTJIb3VyOiBmdW5jdGlvbiBpczEySG91cigpIHsKICAgICAgcmV0dXJuICEhdGhpcy5yZXNvbHZlZE9wdGlvbnMuaG91cjEyOwogICAgfSwKICAgIGNvbnRleHQ6IGZ1bmN0aW9uIGNvbnRleHQoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgbG9jYWxlOiB0aGlzLmNvbXB1dGVkTG9jYWxlLAogICAgICAgIGlzUlRMOiB0aGlzLmNvbXB1dGVkUlRMLAogICAgICAgIGhvdXJDeWNsZTogdGhpcy5jb21wdXRlZEhvdXJDeWNsZSwKICAgICAgICBob3VyMTI6IHRoaXMuaXMxMkhvdXIsCiAgICAgICAgaG91cnM6IHRoaXMubW9kZWxIb3VycywKICAgICAgICBtaW51dGVzOiB0aGlzLm1vZGVsTWludXRlcywKICAgICAgICBzZWNvbmRzOiB0aGlzLnNob3dTZWNvbmRzID8gdGhpcy5tb2RlbFNlY29uZHMgOiAwLAogICAgICAgIHZhbHVlOiB0aGlzLmNvbXB1dGVkSE1TLAogICAgICAgIGZvcm1hdHRlZDogdGhpcy5mb3JtYXR0ZWRUaW1lU3RyaW5nCiAgICAgIH07CiAgICB9LAogICAgdmFsdWVJZDogZnVuY3Rpb24gdmFsdWVJZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuc2FmZUlkKCkgfHwgbnVsbDsKICAgIH0sCiAgICBjb21wdXRlZEFyaWFMYWJlbGxlZGJ5OiBmdW5jdGlvbiBjb21wdXRlZEFyaWFMYWJlbGxlZGJ5KCkgewogICAgICByZXR1cm4gW3RoaXMuYXJpYUxhYmVsbGVkYnksIHRoaXMudmFsdWVJZF0uZmlsdGVyKGlkZW50aXR5KS5qb2luKCcgJykgfHwgbnVsbDsKICAgIH0sCiAgICB0aW1lRm9ybWF0dGVyOiBmdW5jdGlvbiB0aW1lRm9ybWF0dGVyKCkgewogICAgICAvLyBSZXR1cm5zIGEgZm9ybWF0dGVyIGZ1bmN0aW9uIHJlZmVyZW5jZQogICAgICAvLyBUaGUgZm9ybWF0dGVyIGNvbnZlcnRzIHRoZSB0aW1lIHRvIGEgbG9jYWxpemVkIHN0cmluZwogICAgICB2YXIgb3B0aW9ucyA9IHsKICAgICAgICBob3VyMTI6IHRoaXMuaXMxMkhvdXIsCiAgICAgICAgaG91ckN5Y2xlOiB0aGlzLmNvbXB1dGVkSG91ckN5Y2xlLAogICAgICAgIGhvdXI6IE5VTUVSSUMsCiAgICAgICAgbWludXRlOiBOVU1FUklDLAogICAgICAgIHRpbWVab25lOiAnVVRDJwogICAgICB9OwoKICAgICAgaWYgKHRoaXMuc2hvd1NlY29uZHMpIHsKICAgICAgICBvcHRpb25zLnNlY29uZCA9IE5VTUVSSUM7CiAgICAgIH0gLy8gRm9ybWF0cyB0aGUgdGltZSBhcyBhIGxvY2FsaXplZCBzdHJpbmcKCgogICAgICByZXR1cm4gY3JlYXRlRGF0ZUZvcm1hdHRlcih0aGlzLmNvbXB1dGVkTG9jYWxlLCBvcHRpb25zKTsKICAgIH0sCiAgICBudW1iZXJGb3JtYXR0ZXI6IGZ1bmN0aW9uIG51bWJlckZvcm1hdHRlcigpIHsKICAgICAgLy8gUmV0dXJucyBhIGZvcm1hdHRlciBmdW5jdGlvbiByZWZlcmVuY2UKICAgICAgLy8gVGhlIGZvcm1hdHRlciBhbHdheXMgZm9ybWF0cyBhcyAyIGRpZ2l0cyBhbmQgaXMgbG9jYWxpemVkCiAgICAgIHZhciBuZiA9IG5ldyBJbnRsLk51bWJlckZvcm1hdCh0aGlzLmNvbXB1dGVkTG9jYWxlLCB7CiAgICAgICAgc3R5bGU6ICdkZWNpbWFsJywKICAgICAgICBtaW5pbXVtSW50ZWdlckRpZ2l0czogMiwKICAgICAgICBtaW5pbXVtRnJhY3Rpb25EaWdpdHM6IDAsCiAgICAgICAgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiAwLAogICAgICAgIG5vdGF0aW9uOiAnc3RhbmRhcmQnCiAgICAgIH0pOwogICAgICByZXR1cm4gbmYuZm9ybWF0OwogICAgfSwKICAgIGZvcm1hdHRlZFRpbWVTdHJpbmc6IGZ1bmN0aW9uIGZvcm1hdHRlZFRpbWVTdHJpbmcoKSB7CiAgICAgIHZhciBob3VycyA9IHRoaXMubW9kZWxIb3VyczsKICAgICAgdmFyIG1pbnV0ZXMgPSB0aGlzLm1vZGVsTWludXRlczsKICAgICAgdmFyIHNlY29uZHMgPSB0aGlzLnNob3dTZWNvbmRzID8gdGhpcy5tb2RlbFNlY29uZHMgfHwgMCA6IDA7CgogICAgICBpZiAodGhpcy5jb21wdXRlZEhNUykgewogICAgICAgIHJldHVybiB0aGlzLnRpbWVGb3JtYXR0ZXIoY3JlYXRlRGF0ZShEYXRlLlVUQygwLCAwLCAxLCBob3VycywgbWludXRlcywgc2Vjb25kcykpKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMubGFiZWxOb1RpbWVTZWxlY3RlZCB8fCAnICc7CiAgICB9LAogICAgc3BpblNjb3BlZFNsb3RzOiBmdW5jdGlvbiBzcGluU2NvcGVkU2xvdHMoKSB7CiAgICAgIHZhciBoID0gdGhpcy4kY3JlYXRlRWxlbWVudDsKICAgICAgcmV0dXJuIHsKICAgICAgICBpbmNyZW1lbnQ6IGZ1bmN0aW9uIGluY3JlbWVudChfcmVmMikgewogICAgICAgICAgdmFyIGhhc0ZvY3VzID0gX3JlZjIuaGFzRm9jdXM7CiAgICAgICAgICByZXR1cm4gaChCSWNvbkNoZXZyb25VcCwgewogICAgICAgICAgICBwcm9wczogewogICAgICAgICAgICAgIHNjYWxlOiBoYXNGb2N1cyA/IDEuNSA6IDEuMjUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAnYXJpYS1oaWRkZW4nOiAndHJ1ZScKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBkZWNyZW1lbnQ6IGZ1bmN0aW9uIGRlY3JlbWVudChfcmVmMykgewogICAgICAgICAgdmFyIGhhc0ZvY3VzID0gX3JlZjMuaGFzRm9jdXM7CiAgICAgICAgICByZXR1cm4gaChCSWNvbkNoZXZyb25VcCwgewogICAgICAgICAgICBwcm9wczogewogICAgICAgICAgICAgIGZsaXBWOiB0cnVlLAogICAgICAgICAgICAgIHNjYWxlOiBoYXNGb2N1cyA/IDEuNSA6IDEuMjUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAnYXJpYS1oaWRkZW4nOiAndHJ1ZScKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9OwogICAgfQogIH0sCiAgd2F0Y2g6IChfd2F0Y2ggPSB7fSwgX2RlZmluZVByb3BlcnR5KF93YXRjaCwgTU9ERUxfUFJPUF9OQU1FLCBmdW5jdGlvbiAobmV3VmFsdWUsIG9sZFZhbHVlKSB7CiAgICBpZiAobmV3VmFsdWUgIT09IG9sZFZhbHVlICYmICFsb29zZUVxdWFsKHBhcnNlSE1TKG5ld1ZhbHVlKSwgcGFyc2VITVModGhpcy5jb21wdXRlZEhNUykpKSB7CiAgICAgIHZhciBfcGFyc2VITVMgPSBwYXJzZUhNUyhuZXdWYWx1ZSksCiAgICAgICAgICBob3VycyA9IF9wYXJzZUhNUy5ob3VycywKICAgICAgICAgIG1pbnV0ZXMgPSBfcGFyc2VITVMubWludXRlcywKICAgICAgICAgIHNlY29uZHMgPSBfcGFyc2VITVMuc2Vjb25kcywKICAgICAgICAgIGFtcG0gPSBfcGFyc2VITVMuYW1wbTsKCiAgICAgIHRoaXMubW9kZWxIb3VycyA9IGhvdXJzOwogICAgICB0aGlzLm1vZGVsTWludXRlcyA9IG1pbnV0ZXM7CiAgICAgIHRoaXMubW9kZWxTZWNvbmRzID0gc2Vjb25kczsKICAgICAgdGhpcy5tb2RlbEFtcG0gPSBhbXBtOwogICAgfQogIH0pLCBfZGVmaW5lUHJvcGVydHkoX3dhdGNoLCAiY29tcHV0ZWRITVMiLCBmdW5jdGlvbiBjb21wdXRlZEhNUyhuZXdWYWx1ZSwgb2xkVmFsdWUpIHsKICAgIGlmIChuZXdWYWx1ZSAhPT0gb2xkVmFsdWUpIHsKICAgICAgdGhpcy4kZW1pdChNT0RFTF9FVkVOVF9OQU1FLCBuZXdWYWx1ZSk7CiAgICB9CiAgfSksIF9kZWZpbmVQcm9wZXJ0eShfd2F0Y2gsICJjb250ZXh0IiwgZnVuY3Rpb24gY29udGV4dChuZXdWYWx1ZSwgb2xkVmFsdWUpIHsKICAgIGlmICghbG9vc2VFcXVhbChuZXdWYWx1ZSwgb2xkVmFsdWUpKSB7CiAgICAgIHRoaXMuJGVtaXQoRVZFTlRfTkFNRV9DT05URVhULCBuZXdWYWx1ZSk7CiAgICB9CiAgfSksIF9kZWZpbmVQcm9wZXJ0eShfd2F0Y2gsICJtb2RlbEFtcG0iLCBmdW5jdGlvbiBtb2RlbEFtcG0obmV3VmFsdWUsIG9sZFZhbHVlKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIGlmIChuZXdWYWx1ZSAhPT0gb2xkVmFsdWUpIHsKICAgICAgdmFyIGhvdXJzID0gaXNOdWxsKHRoaXMubW9kZWxIb3VycykgPyAwIDogdGhpcy5tb2RlbEhvdXJzOwogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKG5ld1ZhbHVlID09PSAwICYmIGhvdXJzID4gMTEpIHsKICAgICAgICAgIC8vIFN3aXRjaGVkIHRvIEFNCiAgICAgICAgICBfdGhpcy5tb2RlbEhvdXJzID0gaG91cnMgLSAxMjsKICAgICAgICB9IGVsc2UgaWYgKG5ld1ZhbHVlID09PSAxICYmIGhvdXJzIDwgMTIpIHsKICAgICAgICAgIC8vIFN3aXRjaGVkIHRvIFBNCiAgICAgICAgICBfdGhpcy5tb2RlbEhvdXJzID0gaG91cnMgKyAxMjsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0pLCBfZGVmaW5lUHJvcGVydHkoX3dhdGNoLCAibW9kZWxIb3VycyIsIGZ1bmN0aW9uIG1vZGVsSG91cnMobmV3SG91cnMsIG9sZEhvdXJzKSB7CiAgICBpZiAobmV3SG91cnMgIT09IG9sZEhvdXJzKSB7CiAgICAgIHRoaXMubW9kZWxBbXBtID0gbmV3SG91cnMgPiAxMSA/IDEgOiAwOwogICAgfQogIH0pLCBfd2F0Y2gpLAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzMi4kZW1pdChFVkVOVF9OQU1FX0NPTlRFWFQsIF90aGlzMi5jb250ZXh0KTsKICAgIH0pOwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuc2V0TGl2ZSh0cnVlKTsKICB9LAoKICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwogIGFjdGl2YXRlZDogZnVuY3Rpb24gYWN0aXZhdGVkKCkgewogICAgdGhpcy5zZXRMaXZlKHRydWUpOwogIH0sCgogIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uIGRlYWN0aXZhdGVkKCkgewogICAgdGhpcy5zZXRMaXZlKGZhbHNlKTsKICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICB0aGlzLnNldExpdmUoZmFsc2UpOwogIH0sCiAgbWV0aG9kczogewogICAgLy8gUHVibGljIG1ldGhvZHMKICAgIGZvY3VzOiBmdW5jdGlvbiBmb2N1cygpIHsKICAgICAgaWYgKCF0aGlzLmRpc2FibGVkKSB7CiAgICAgICAgLy8gV2UgZm9jdXMgdGhlIGZpcnN0IHNwaW4gYnV0dG9uCiAgICAgICAgYXR0ZW1wdEZvY3VzKHRoaXMuJHJlZnMuc3Bpbm5lcnNbMF0pOwogICAgICB9CiAgICB9LAogICAgYmx1cjogZnVuY3Rpb24gYmx1cigpIHsKICAgICAgaWYgKCF0aGlzLmRpc2FibGVkKSB7CiAgICAgICAgdmFyIGFjdGl2ZUVsZW1lbnQgPSBnZXRBY3RpdmVFbGVtZW50KCk7CgogICAgICAgIGlmIChjb250YWlucyh0aGlzLiRlbCwgYWN0aXZlRWxlbWVudCkpIHsKICAgICAgICAgIGF0dGVtcHRCbHVyKGFjdGl2ZUVsZW1lbnQpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIC8vIEZvcm1hdHRlcnMgZm9yIHRoZSBzcGluIGJ1dHRvbnMKICAgIGZvcm1hdEhvdXJzOiBmdW5jdGlvbiBmb3JtYXRIb3VycyhoaCkgewogICAgICB2YXIgaG91ckN5Y2xlID0gdGhpcy5jb21wdXRlZEhvdXJDeWNsZTsgLy8gV2UgYWx3YXlzIHN0b3JlIDAtMjMsIGJ1dCBmb3JtYXQgYmFzZWQgb24gaDExL2gxMi9oMjMvaDI0IGZvcm1hdHMKCiAgICAgIGhoID0gdGhpcy5pczEySG91ciAmJiBoaCA+IDEyID8gaGggLSAxMiA6IGhoOyAvLyBEZXRlcm1pbmUgaG93IDAwOjAwIGFuZCAxMjowMCBhcmUgc2hvd24KCiAgICAgIGhoID0gaGggPT09IDAgJiYgaG91ckN5Y2xlID09PSAnaDEyJyA/IDEyIDogaGggPT09IDAgJiYgaG91ckN5Y2xlID09PSAnaDI0JyA/CiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgICAgIDI0IDogaGggPT09IDEyICYmIGhvdXJDeWNsZSA9PT0gJ2gxMScgPwogICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwogICAgICAwIDogaGg7CiAgICAgIHJldHVybiB0aGlzLm51bWJlckZvcm1hdHRlcihoaCk7CiAgICB9LAogICAgZm9ybWF0TWludXRlczogZnVuY3Rpb24gZm9ybWF0TWludXRlcyhtbSkgewogICAgICByZXR1cm4gdGhpcy5udW1iZXJGb3JtYXR0ZXIobW0pOwogICAgfSwKICAgIGZvcm1hdFNlY29uZHM6IGZ1bmN0aW9uIGZvcm1hdFNlY29uZHMoc3MpIHsKICAgICAgcmV0dXJuIHRoaXMubnVtYmVyRm9ybWF0dGVyKHNzKTsKICAgIH0sCiAgICBmb3JtYXRBbXBtOiBmdW5jdGlvbiBmb3JtYXRBbXBtKGFtcG0pIHsKICAgICAgLy8gVGhlc2Ugc2hvdWxkIGNvbWUgZnJvbSBsYWJlbCBwcm9wcz8/PwogICAgICAvLyBgYW1wbWAgc2hvdWxkIGFsd2F5cyBiZSBhIHZhbHVlIG9mIGAwYCBvciBgMWAKICAgICAgcmV0dXJuIGFtcG0gPT09IDAgPyB0aGlzLmxhYmVsQW0gOiBhbXBtID09PSAxID8gdGhpcy5sYWJlbFBtIDogJyc7CiAgICB9LAogICAgLy8gU3BpbmJ1dHRvbiBvbiBjaGFuZ2UgaGFuZGxlcnMKICAgIHNldEhvdXJzOiBmdW5jdGlvbiBzZXRIb3Vycyh2YWx1ZSkgewogICAgICB0aGlzLm1vZGVsSG91cnMgPSB2YWx1ZTsKICAgIH0sCiAgICBzZXRNaW51dGVzOiBmdW5jdGlvbiBzZXRNaW51dGVzKHZhbHVlKSB7CiAgICAgIHRoaXMubW9kZWxNaW51dGVzID0gdmFsdWU7CiAgICB9LAogICAgc2V0U2Vjb25kczogZnVuY3Rpb24gc2V0U2Vjb25kcyh2YWx1ZSkgewogICAgICB0aGlzLm1vZGVsU2Vjb25kcyA9IHZhbHVlOwogICAgfSwKICAgIHNldEFtcG06IGZ1bmN0aW9uIHNldEFtcG0odmFsdWUpIHsKICAgICAgdGhpcy5tb2RlbEFtcG0gPSB2YWx1ZTsKICAgIH0sCiAgICBvblNwaW5MZWZ0UmlnaHQ6IGZ1bmN0aW9uIG9uU3BpbkxlZnRSaWdodCgpIHsKICAgICAgdmFyIGV2ZW50ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKICAgICAgdmFyIHR5cGUgPSBldmVudC50eXBlLAogICAgICAgICAga2V5Q29kZSA9IGV2ZW50LmtleUNvZGU7CgogICAgICBpZiAoIXRoaXMuZGlzYWJsZWQgJiYgdHlwZSA9PT0gJ2tleWRvd24nICYmIChrZXlDb2RlID09PSBDT0RFX0xFRlQgfHwga2V5Q29kZSA9PT0gQ09ERV9SSUdIVCkpIHsKICAgICAgICBzdG9wRXZlbnQoZXZlbnQpOwogICAgICAgIHZhciBzcGlubmVycyA9IHRoaXMuJHJlZnMuc3Bpbm5lcnMgfHwgW107CiAgICAgICAgdmFyIGluZGV4ID0gc3Bpbm5lcnMubWFwKGZ1bmN0aW9uIChjbXApIHsKICAgICAgICAgIHJldHVybiAhIWNtcC5oYXNGb2N1czsKICAgICAgICB9KS5pbmRleE9mKHRydWUpOwogICAgICAgIGluZGV4ID0gaW5kZXggKyAoa2V5Q29kZSA9PT0gQ09ERV9MRUZUID8gLTEgOiAxKTsKICAgICAgICBpbmRleCA9IGluZGV4ID49IHNwaW5uZXJzLmxlbmd0aCA/IDAgOiBpbmRleCA8IDAgPyBzcGlubmVycy5sZW5ndGggLSAxIDogaW5kZXg7CiAgICAgICAgYXR0ZW1wdEZvY3VzKHNwaW5uZXJzW2luZGV4XSk7CiAgICAgIH0KICAgIH0sCiAgICBzZXRMaXZlOiBmdW5jdGlvbiBzZXRMaXZlKG9uKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgaWYgKG9uKSB7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgcmVxdWVzdEFGKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMzLmlzTGl2ZSA9IHRydWU7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmlzTGl2ZSA9IGZhbHNlOwogICAgICB9CiAgICB9CiAgfSwKICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihoKSB7CiAgICB2YXIgX3RoaXM0ID0gdGhpczsKICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwoKCiAgICBpZiAodGhpcy5oaWRkZW4pIHsKICAgICAgLy8gSWYgaGlkZGVuLCB3ZSBqdXN0IHJlbmRlciBhIHBsYWNlaG9sZGVyIGNvbW1lbnQKICAgICAgcmV0dXJuIGgoKTsKICAgIH0KCiAgICB2YXIgdmFsdWVJZCA9IHRoaXMudmFsdWVJZDsKICAgIHZhciBjb21wdXRlZEFyaWFMYWJlbGxlZGJ5ID0gdGhpcy5jb21wdXRlZEFyaWFMYWJlbGxlZGJ5OwogICAgdmFyIHNwaW5JZHMgPSBbXTsgLy8gSGVscGVyIG1ldGhvZCB0byByZW5kZXIgYSBzcGluYnV0dG9uCgogICAgdmFyIG1ha2VTcGluYnV0dG9uID0gZnVuY3Rpb24gbWFrZVNwaW5idXR0b24oaGFuZGxlciwga2V5LCBjbGFzc2VzKSB7CiAgICAgIHZhciBzcGluYnV0dG9uUHJvcHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IHt9OwogICAgICB2YXIgaWQgPSBfdGhpczQuc2FmZUlkKCJfc3BpbmJ1dHRvbl8iLmNvbmNhdChrZXksICJfIikpIHx8IG51bGw7CiAgICAgIHNwaW5JZHMucHVzaChpZCk7CiAgICAgIHJldHVybiBoKEJGb3JtU3BpbmJ1dHRvbiwgewogICAgICAgIGNsYXNzOiBjbGFzc2VzLAogICAgICAgIHByb3BzOiBfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgIGlkOiBpZCwKICAgICAgICAgIHBsYWNlaG9sZGVyOiAnLS0nLAogICAgICAgICAgdmVydGljYWw6IHRydWUsCiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIGRpc2FibGVkOiBfdGhpczQuZGlzYWJsZWQsCiAgICAgICAgICByZWFkb25seTogX3RoaXM0LnJlYWRvbmx5LAogICAgICAgICAgbG9jYWxlOiBfdGhpczQuY29tcHV0ZWRMb2NhbGUsCiAgICAgICAgICBsYWJlbEluY3JlbWVudDogX3RoaXM0LmxhYmVsSW5jcmVtZW50LAogICAgICAgICAgbGFiZWxEZWNyZW1lbnQ6IF90aGlzNC5sYWJlbERlY3JlbWVudCwKICAgICAgICAgIHdyYXA6IHRydWUsCiAgICAgICAgICBhcmlhQ29udHJvbHM6IHZhbHVlSWQsCiAgICAgICAgICBtaW46IDAKICAgICAgICB9LCBzcGluYnV0dG9uUHJvcHMpLAogICAgICAgIHNjb3BlZFNsb3RzOiBfdGhpczQuc3BpblNjb3BlZFNsb3RzLAogICAgICAgIG9uOiB7CiAgICAgICAgICAvLyBXZSB1c2UgYGNoYW5nZWAgZXZlbnQgdG8gbWluaW1pemUgU1IgdmVyYm9zaXR5CiAgICAgICAgICAvLyBBcyB0aGUgc3BpbmJ1dHRvbiB3aWxsIGFubm91bmNlIGVhY2ggdmFsdWUgY2hhbmdlCiAgICAgICAgICAvLyBhbmQgd2UgZG9uJ3Qgd2FudCB0aGUgZm9ybWF0dGVkIHRpbWUgdG8gYmUgYW5ub3VuY2VkCiAgICAgICAgICAvLyBvbiBlYWNoIHZhbHVlIGlucHV0IGlmIHJlcGVhdCBpcyBoYXBwZW5pbmcKICAgICAgICAgIGNoYW5nZTogaGFuZGxlcgogICAgICAgIH0sCiAgICAgICAga2V5OiBrZXksCiAgICAgICAgcmVmOiAnc3Bpbm5lcnMnLAogICAgICAgIHJlZkluRm9yOiB0cnVlCiAgICAgIH0pOwogICAgfTsgLy8gSGVscGVyIG1ldGhvZCB0byByZXR1cm4gYSAiY29sb24iIHNlcGFyYXRvcgoKCiAgICB2YXIgbWFrZUNvbG9uID0gZnVuY3Rpb24gbWFrZUNvbG9uKCkgewogICAgICByZXR1cm4gaCgnZGl2JywgewogICAgICAgIHN0YXRpY0NsYXNzOiAnZC1mbGV4IGZsZXgtY29sdW1uJywKICAgICAgICBjbGFzczogewogICAgICAgICAgJ3RleHQtbXV0ZWQnOiBfdGhpczQuZGlzYWJsZWQgfHwgX3RoaXM0LnJlYWRvbmx5CiAgICAgICAgfSwKICAgICAgICBhdHRyczogewogICAgICAgICAgJ2FyaWEtaGlkZGVuJzogJ3RydWUnCiAgICAgICAgfQogICAgICB9LCBbaChCSWNvbkNpcmNsZUZpbGwsIHsKICAgICAgICBwcm9wczogewogICAgICAgICAgc2hpZnRWOiA0LAogICAgICAgICAgc2NhbGU6IDAuNQogICAgICAgIH0KICAgICAgfSksIGgoQkljb25DaXJjbGVGaWxsLCB7CiAgICAgICAgcHJvcHM6IHsKICAgICAgICAgIHNoaWZ0VjogLTQsCiAgICAgICAgICBzY2FsZTogMC41CiAgICAgICAgfQogICAgICB9KV0pOwogICAgfTsKCiAgICB2YXIgJHNwaW5uZXJzID0gW107IC8vIEhvdXJzCgogICAgJHNwaW5uZXJzLnB1c2gobWFrZVNwaW5idXR0b24odGhpcy5zZXRIb3VycywgJ2hvdXJzJywgJ2ItdGltZS1ob3VycycsIHsKICAgICAgdmFsdWU6IHRoaXMubW9kZWxIb3VycywKICAgICAgbWF4OiAyMywKICAgICAgc3RlcDogMSwKICAgICAgZm9ybWF0dGVyRm46IHRoaXMuZm9ybWF0SG91cnMsCiAgICAgIGFyaWFMYWJlbDogdGhpcy5sYWJlbEhvdXJzCiAgICB9KSk7IC8vIFNwYWNlcgoKICAgICRzcGlubmVycy5wdXNoKG1ha2VDb2xvbigpKTsgLy8gTWludXRlcwoKICAgICRzcGlubmVycy5wdXNoKG1ha2VTcGluYnV0dG9uKHRoaXMuc2V0TWludXRlcywgJ21pbnV0ZXMnLCAnYi10aW1lLW1pbnV0ZXMnLCB7CiAgICAgIHZhbHVlOiB0aGlzLm1vZGVsTWludXRlcywKICAgICAgbWF4OiA1OSwKICAgICAgc3RlcDogdGhpcy5taW51dGVzU3RlcCB8fCAxLAogICAgICBmb3JtYXR0ZXJGbjogdGhpcy5mb3JtYXRNaW51dGVzLAogICAgICBhcmlhTGFiZWw6IHRoaXMubGFiZWxNaW51dGVzCiAgICB9KSk7CgogICAgaWYgKHRoaXMuc2hvd1NlY29uZHMpIHsKICAgICAgLy8gU3BhY2VyCiAgICAgICRzcGlubmVycy5wdXNoKG1ha2VDb2xvbigpKTsgLy8gU2Vjb25kcwoKICAgICAgJHNwaW5uZXJzLnB1c2gobWFrZVNwaW5idXR0b24odGhpcy5zZXRTZWNvbmRzLCAnc2Vjb25kcycsICdiLXRpbWUtc2Vjb25kcycsIHsKICAgICAgICB2YWx1ZTogdGhpcy5tb2RlbFNlY29uZHMsCiAgICAgICAgbWF4OiA1OSwKICAgICAgICBzdGVwOiB0aGlzLnNlY29uZHNTdGVwIHx8IDEsCiAgICAgICAgZm9ybWF0dGVyRm46IHRoaXMuZm9ybWF0U2Vjb25kcywKICAgICAgICBhcmlhTGFiZWw6IHRoaXMubGFiZWxTZWNvbmRzCiAgICAgIH0pKTsKICAgIH0gLy8gQU0vUE0gPwoKCiAgICBpZiAodGhpcy5pczEySG91cikgewogICAgICAvLyBUT0RPOgogICAgICAvLyAgIElmIGxvY2FsZSBpcyBSVEwsIHVuc2hpZnQgdGhpcyBpbnN0ZWFkIG9mIHB1c2g/CiAgICAgIC8vICAgQW5kIHN3aXRjaCBjbGFzcyBgbWwtMmAgdG8gYG1yLTJgCiAgICAgIC8vICAgTm90ZSBzb21lIExUUiBsb2NhbGVzIChpLmUuIHpoKSBhbHNvIHBsYWNlIEFNL1BNIHRvIHRoZSBsZWZ0CiAgICAgICRzcGlubmVycy5wdXNoKG1ha2VTcGluYnV0dG9uKHRoaXMuc2V0QW1wbSwgJ2FtcG0nLCAnYi10aW1lLWFtcG0nLCB7CiAgICAgICAgdmFsdWU6IHRoaXMubW9kZWxBbXBtLAogICAgICAgIG1heDogMSwKICAgICAgICBmb3JtYXR0ZXJGbjogdGhpcy5mb3JtYXRBbXBtLAogICAgICAgIGFyaWFMYWJlbDogdGhpcy5sYWJlbEFtcG0sCiAgICAgICAgLy8gV2Ugc2V0IGByZXF1aXJlZGAgYXMgYGZhbHNlYCwgc2luY2UgdGhpcyBhbHdheXMgaGFzIGEgdmFsdWUKICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgfSkpOwogICAgfSAvLyBBc3NlbWJsZSBzcGlubmVycwoKCiAgICAkc3Bpbm5lcnMgPSBoKCdkaXYnLCB7CiAgICAgIHN0YXRpY0NsYXNzOiAnZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIG14LWF1dG8nLAogICAgICBhdHRyczogewogICAgICAgIHJvbGU6ICdncm91cCcsCiAgICAgICAgdGFiaW5kZXg6IHRoaXMuZGlzYWJsZWQgfHwgdGhpcy5yZWFkb25seSA/IG51bGwgOiAnLTEnLAogICAgICAgICdhcmlhLWxhYmVsbGVkYnknOiBjb21wdXRlZEFyaWFMYWJlbGxlZGJ5CiAgICAgIH0sCiAgICAgIG9uOiB7CiAgICAgICAga2V5ZG93bjogdGhpcy5vblNwaW5MZWZ0UmlnaHQsCiAgICAgICAgY2xpY2s6CiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KICAgICAgICBmdW5jdGlvbiBjbGljayhldmVudCkgewogICAgICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gZXZlbnQuY3VycmVudFRhcmdldCkgewogICAgICAgICAgICBfdGhpczQuZm9jdXMoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0sICRzcGlubmVycyk7IC8vIFNlbGVjdGVkIHR5cGUgZGlzcGxheQoKICAgIHZhciAkdmFsdWUgPSBoKCdvdXRwdXQnLCB7CiAgICAgIHN0YXRpY0NsYXNzOiAnZm9ybS1jb250cm9sIGZvcm0tY29udHJvbC1zbSB0ZXh0LWNlbnRlcicsCiAgICAgIGNsYXNzOiB7CiAgICAgICAgZGlzYWJsZWQ6IHRoaXMuZGlzYWJsZWQgfHwgdGhpcy5yZWFkb25seQogICAgICB9LAogICAgICBhdHRyczogewogICAgICAgIGlkOiB2YWx1ZUlkLAogICAgICAgIHJvbGU6ICdzdGF0dXMnLAogICAgICAgIGZvcjogc3Bpbklkcy5maWx0ZXIoaWRlbnRpdHkpLmpvaW4oJyAnKSB8fCBudWxsLAogICAgICAgIHRhYmluZGV4OiB0aGlzLmRpc2FibGVkID8gbnVsbCA6ICctMScsCiAgICAgICAgJ2FyaWEtbGl2ZSc6IHRoaXMuaXNMaXZlID8gJ3BvbGl0ZScgOiAnb2ZmJywKICAgICAgICAnYXJpYS1hdG9taWMnOiAndHJ1ZScKICAgICAgfSwKICAgICAgb246IHsKICAgICAgICAvLyBUcmFuc2ZlciBmb2N1cy9jbGljayB0byBmb2N1cyBob3VycyBzcGlubmVyCiAgICAgICAgY2xpY2s6IHRoaXMuZm9jdXMsCiAgICAgICAgZm9jdXM6IHRoaXMuZm9jdXMKICAgICAgfQogICAgfSwgW2goJ2JkaScsIHRoaXMuZm9ybWF0dGVkVGltZVN0cmluZyksIHRoaXMuY29tcHV0ZWRITVMgPyBoKCdzcGFuJywgewogICAgICBzdGF0aWNDbGFzczogJ3NyLW9ubHknCiAgICB9LCAiICgiLmNvbmNhdCh0aGlzLmxhYmVsU2VsZWN0ZWQsICIpICIpKSA6ICcnXSk7CiAgICB2YXIgJGhlYWRlciA9IGgoJ2hlYWRlcicsIHsKICAgICAgc3RhdGljQ2xhc3M6ICdiLXRpbWUtaGVhZGVyJywKICAgICAgY2xhc3M6IHsKICAgICAgICAnc3Itb25seSc6IHRoaXMuaGlkZUhlYWRlcgogICAgICB9CiAgICB9LCBbJHZhbHVlXSk7IC8vIE9wdGlvbmFsIGJvdHRvbSBzbG90CgogICAgdmFyICRzbG90ID0gdGhpcy5ub3JtYWxpemVTbG90KCk7CiAgICAkc2xvdCA9ICRzbG90ID8gaCgnZm9vdGVyJywgewogICAgICBzdGF0aWNDbGFzczogJ2ItdGltZS1mb290ZXInCiAgICB9LCAkc2xvdCkgOiBoKCk7CiAgICByZXR1cm4gaCgnZGl2JywgewogICAgICBzdGF0aWNDbGFzczogJ2ItdGltZSBkLWlubGluZS1mbGV4IGZsZXgtY29sdW1uIHRleHQtY2VudGVyJywKICAgICAgYXR0cnM6IHsKICAgICAgICByb2xlOiAnZ3JvdXAnLAogICAgICAgIGxhbmc6IHRoaXMuY29tcHV0ZWRMYW5nIHx8IG51bGwsCiAgICAgICAgJ2FyaWEtbGFiZWxsZWRieSc6IGNvbXB1dGVkQXJpYUxhYmVsbGVkYnkgfHwgbnVsbCwKICAgICAgICAnYXJpYS1kaXNhYmxlZCc6IHRoaXMuZGlzYWJsZWQgPyAndHJ1ZScgOiBudWxsLAogICAgICAgICdhcmlhLXJlYWRvbmx5JzogdGhpcy5yZWFkb25seSAmJiAhdGhpcy5kaXNhYmxlZCA/ICd0cnVlJyA6IG51bGwKICAgICAgfQogICAgfSwgWyRoZWFkZXIsICRzcGlubmVycywgJHNsb3RdKTsKICB9Cn0pOw=="},null]}