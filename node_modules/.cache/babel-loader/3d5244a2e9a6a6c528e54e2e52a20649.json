{"remainingRequest":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/babel-loader/lib/index.js!/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/bootstrap-vue/esm/components/form-tags/form-tags.js","dependencies":[{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/bootstrap-vue/esm/components/form-tags/form-tags.js","mtime":499162500000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZyb20uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuZGVzY3JpcHRpb24uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwoKdmFyIF93YXRjaDsKCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsKICByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7Cn0KCmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsKICBpZiAoIW8pIHJldHVybjsKICBpZiAodHlwZW9mIG8gPT09ICJzdHJpbmciKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsKICB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7CiAgaWYgKG4gPT09ICJPYmplY3QiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7CiAgaWYgKG4gPT09ICJNYXAiIHx8IG4gPT09ICJTZXQiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsKICBpZiAobiA9PT0gIkFyZ3VtZW50cyIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsKICBpZiAodHlwZW9mIFN5bWJvbCAhPT0gInVuZGVmaW5lZCIgJiYgU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChpdGVyKSkgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkoYXJyKTsKfQoKZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsKICBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsKCiAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7CiAgICBhcnIyW2ldID0gYXJyW2ldOwogIH0KCiAgcmV0dXJuIGFycjI7Cn0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgewogIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOwogICAgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgewogICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsKICAgIH0pOwogICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOwogIH0KCiAgcmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwoKICAgIGlmIChpICUgMikgewogICAgICBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsKICAgICAgfSk7CiAgICB9CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfSAvLyBUYWdnZWQgaW5wdXQgZm9ybSBjb250cm9sCi8vIEJhc2VkIGxvb3NlbHkgb24gaHR0cHM6Ly9hZGFtd2F0aGFuLm1lL3JlbmRlcmxlc3MtY29tcG9uZW50cy1pbi12dWVqcy8KCgppbXBvcnQgeyBWdWUgfSBmcm9tICcuLi8uLi92dWUnOwppbXBvcnQgeyBOQU1FX0ZPUk1fVEFHUyB9IGZyb20gJy4uLy4uL2NvbnN0YW50cy9jb21wb25lbnRzJzsKaW1wb3J0IHsgRVZFTlRfTkFNRV9UQUdfU1RBVEUsIEVWRU5UX09QVElPTlNfUEFTU0lWRSwgSE9PS19FVkVOVF9OQU1FX0JFRk9SRV9ERVNUUk9ZIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzL2V2ZW50cyc7CmltcG9ydCB7IENPREVfQkFDS1NQQUNFLCBDT0RFX0RFTEVURSwgQ09ERV9FTlRFUiB9IGZyb20gJy4uLy4uL2NvbnN0YW50cy9rZXktY29kZXMnOwppbXBvcnQgeyBQUk9QX1RZUEVfQVJSQVksIFBST1BfVFlQRV9BUlJBWV9PQkpFQ1RfU1RSSU5HLCBQUk9QX1RZUEVfQVJSQVlfU1RSSU5HLCBQUk9QX1RZUEVfQk9PTEVBTiwgUFJPUF9UWVBFX0ZVTkNUSU9OLCBQUk9QX1RZUEVfTlVNQkVSLCBQUk9QX1RZUEVfT0JKRUNULCBQUk9QX1RZUEVfU1RSSU5HIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzL3Byb3BzJzsKaW1wb3J0IHsgUlhfU1BBQ0VTIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzL3JlZ2V4JzsKaW1wb3J0IHsgU0xPVF9OQU1FX0RFRkFVTFQsIFNMT1RfTkFNRV9BRERfQlVUVE9OX1RFWFQgfSBmcm9tICcuLi8uLi9jb25zdGFudHMvc2xvdHMnOwppbXBvcnQgeyBhcnJheUluY2x1ZGVzLCBjb25jYXQgfSBmcm9tICcuLi8uLi91dGlscy9hcnJheSc7CmltcG9ydCB7IGNzc0VzY2FwZSB9IGZyb20gJy4uLy4uL3V0aWxzL2Nzcy1lc2NhcGUnOwppbXBvcnQgeyBhdHRlbXB0Qmx1ciwgYXR0ZW1wdEZvY3VzLCBjbG9zZXN0LCBpc0FjdGl2ZUVsZW1lbnQsIG1hdGNoZXMsIHJlcXVlc3RBRiwgc2VsZWN0IH0gZnJvbSAnLi4vLi4vdXRpbHMvZG9tJzsKaW1wb3J0IHsgZXZlbnRPbiwgZXZlbnRPZmYsIHN0b3BFdmVudCB9IGZyb20gJy4uLy4uL3V0aWxzL2V2ZW50cyc7CmltcG9ydCB7IGlkZW50aXR5IH0gZnJvbSAnLi4vLi4vdXRpbHMvaWRlbnRpdHknOwppbXBvcnQgeyBpc0V2ZW50LCBpc051bWJlciwgaXNTdHJpbmcgfSBmcm9tICcuLi8uLi91dGlscy9pbnNwZWN0JzsKaW1wb3J0IHsgbG9vc2VFcXVhbCB9IGZyb20gJy4uLy4uL3V0aWxzL2xvb3NlLWVxdWFsJzsKaW1wb3J0IHsgbWFrZU1vZGVsTWl4aW4gfSBmcm9tICcuLi8uLi91dGlscy9tb2RlbCc7CmltcG9ydCB7IHBpY2ssIHNvcnRLZXlzIH0gZnJvbSAnLi4vLi4vdXRpbHMvb2JqZWN0JzsKaW1wb3J0IHsgaGFzUHJvcEZ1bmN0aW9uLCBtYWtlUHJvcCwgbWFrZVByb3BzQ29uZmlndXJhYmxlIH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJvcHMnOwppbXBvcnQgeyBlc2NhcGVSZWdFeHAsIHRvU3RyaW5nLCB0cmltLCB0cmltTGVmdCB9IGZyb20gJy4uLy4uL3V0aWxzL3N0cmluZyc7CmltcG9ydCB7IGZvcm1Db250cm9sTWl4aW4sIHByb3BzIGFzIGZvcm1Db250cm9sUHJvcHMgfSBmcm9tICcuLi8uLi9taXhpbnMvZm9ybS1jb250cm9sJzsKaW1wb3J0IHsgZm9ybVNpemVNaXhpbiwgcHJvcHMgYXMgZm9ybVNpemVQcm9wcyB9IGZyb20gJy4uLy4uL21peGlucy9mb3JtLXNpemUnOwppbXBvcnQgeyBmb3JtU3RhdGVNaXhpbiwgcHJvcHMgYXMgZm9ybVN0YXRlUHJvcHMgfSBmcm9tICcuLi8uLi9taXhpbnMvZm9ybS1zdGF0ZSc7CmltcG9ydCB7IGlkTWl4aW4sIHByb3BzIGFzIGlkUHJvcHMgfSBmcm9tICcuLi8uLi9taXhpbnMvaWQnOwppbXBvcnQgeyBub3JtYWxpemVTbG90TWl4aW4gfSBmcm9tICcuLi8uLi9taXhpbnMvbm9ybWFsaXplLXNsb3QnOwppbXBvcnQgeyBCQnV0dG9uIH0gZnJvbSAnLi4vYnV0dG9uL2J1dHRvbic7CmltcG9ydCB7IEJGb3JtSW52YWxpZEZlZWRiYWNrIH0gZnJvbSAnLi4vZm9ybS9mb3JtLWludmFsaWQtZmVlZGJhY2snOwppbXBvcnQgeyBCRm9ybVRleHQgfSBmcm9tICcuLi9mb3JtL2Zvcm0tdGV4dCc7CmltcG9ydCB7IEJGb3JtVGFnIH0gZnJvbSAnLi9mb3JtLXRhZyc7IC8vIC0tLSBDb25zdGFudHMgLS0tCgp2YXIgX21ha2VNb2RlbE1peGluID0gbWFrZU1vZGVsTWl4aW4oJ3ZhbHVlJywgewogIHR5cGU6IFBST1BfVFlQRV9BUlJBWSwKICBkZWZhdWx0VmFsdWU6IFtdCn0pLAogICAgbW9kZWxNaXhpbiA9IF9tYWtlTW9kZWxNaXhpbi5taXhpbiwKICAgIG1vZGVsUHJvcHMgPSBfbWFrZU1vZGVsTWl4aW4ucHJvcHMsCiAgICBNT0RFTF9QUk9QX05BTUUgPSBfbWFrZU1vZGVsTWl4aW4ucHJvcCwKICAgIE1PREVMX0VWRU5UX05BTUUgPSBfbWFrZU1vZGVsTWl4aW4uZXZlbnQ7IC8vIFN1cHBvcnRlZCBpbnB1dCB0eXBlcyAoZm9yIGJ1aWx0IGluIGlucHV0KQoKCnZhciBUWVBFUyA9IFsndGV4dCcsICdlbWFpbCcsICd0ZWwnLCAndXJsJywgJ251bWJlciddOyAvLyBEZWZhdWx0IGlnbm9yZSBpbnB1dCBmb2N1cyBzZWxlY3RvcgoKdmFyIERFRkFVTFRfSU5QVVRfRk9DVVNfU0VMRUNUT1IgPSBbJy5iLWZvcm0tdGFnJywgJ2J1dHRvbicsICdpbnB1dCcsICdzZWxlY3QnXS5qb2luKCcgJyk7IC8vIC0tLSBIZWxwZXIgbWV0aG9kcyAtLS0KLy8gRXNjYXBlIHNwZWNpYWwgY2hhcnMgaW4gc3RyaW5nIGFuZCByZXBsYWNlCi8vIGNvbnRpZ3VvdXMgc3BhY2VzIHdpdGggYSB3aGl0ZXNwYWNlIG1hdGNoCgp2YXIgZXNjYXBlUmVnRXhwQ2hhcnMgPSBmdW5jdGlvbiBlc2NhcGVSZWdFeHBDaGFycyhzdHIpIHsKICByZXR1cm4gZXNjYXBlUmVnRXhwKHN0cikucmVwbGFjZShSWF9TUEFDRVMsICdcXHMnKTsKfTsgLy8gUmVtb3ZlIGxlYWRpbmcvdHJhaWxpbmcgc3BhY2VzIGZyb20gYXJyYXkgb2YgdGFncyBhbmQgcmVtb3ZlIGR1cGxpY2F0ZXMKCgp2YXIgY2xlYW5UYWdzID0gZnVuY3Rpb24gY2xlYW5UYWdzKHRhZ3MpIHsKICByZXR1cm4gY29uY2F0KHRhZ3MpLm1hcChmdW5jdGlvbiAodGFnKSB7CiAgICByZXR1cm4gdHJpbSh0b1N0cmluZyh0YWcpKTsKICB9KS5maWx0ZXIoZnVuY3Rpb24gKHRhZywgaW5kZXgsIGFycikgewogICAgcmV0dXJuIHRhZy5sZW5ndGggPiAwICYmIGFyci5pbmRleE9mKHRhZykgPT09IGluZGV4OwogIH0pOwp9OyAvLyBQcm9jZXNzZXMgYW4gaW5wdXQvY2hhbmdlIGV2ZW50LCBub3JtYWxpemluZyBzdHJpbmcgb3IgZXZlbnQgYXJndW1lbnQKCgp2YXIgcHJvY2Vzc0V2ZW50VmFsdWUgPSBmdW5jdGlvbiBwcm9jZXNzRXZlbnRWYWx1ZShldmVudCkgewogIHJldHVybiBpc1N0cmluZyhldmVudCkgPyBldmVudCA6IGlzRXZlbnQoZXZlbnQpID8gZXZlbnQudGFyZ2V0LnZhbHVlIHx8ICcnIDogJyc7Cn07IC8vIFJldHVybnMgYSBmcmVzaCBlbXB0eSBgdGFnc1N0YXRlYCBvYmplY3QKCgp2YXIgY2xlYW5UYWdzU3RhdGUgPSBmdW5jdGlvbiBjbGVhblRhZ3NTdGF0ZSgpIHsKICByZXR1cm4gewogICAgYWxsOiBbXSwKICAgIHZhbGlkOiBbXSwKICAgIGludmFsaWQ6IFtdLAogICAgZHVwbGljYXRlOiBbXQogIH07Cn07IC8vIC0tLSBQcm9wcyAtLS0KCgp2YXIgcHJvcHMgPSBtYWtlUHJvcHNDb25maWd1cmFibGUoc29ydEtleXMoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGlkUHJvcHMpLCBtb2RlbFByb3BzKSwgZm9ybUNvbnRyb2xQcm9wcyksIGZvcm1TaXplUHJvcHMpLCBmb3JtU3RhdGVQcm9wcyksIHt9LCB7CiAgYWRkQnV0dG9uVGV4dDogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORywgJ0FkZCcpLAogIGFkZEJ1dHRvblZhcmlhbnQ6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcsICdvdXRsaW5lLXNlY29uZGFyeScpLAogIC8vIEVuYWJsZSBjaGFuZ2UgZXZlbnQgdHJpZ2dlcmluZyB0YWcgYWRkaXRpb24KICAvLyBIYW5keSBpZiB1c2luZyA8c2VsZWN0PiBhcyB0aGUgaW5wdXQKICBhZGRPbkNoYW5nZTogbWFrZVByb3AoUFJPUF9UWVBFX0JPT0xFQU4sIGZhbHNlKSwKICBkdXBsaWNhdGVUYWdUZXh0OiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HLCAnRHVwbGljYXRlIHRhZyhzKScpLAogIC8vIERpc2FibGUgdGhlIGlucHV0IGZvY3VzIGJlaGF2aW9yIHdoZW4gY2xpY2tpbmcKICAvLyBvbiBlbGVtZW50IG1hdGNoaW5nIHRoZSBzZWxlY3RvciAob3Igc2VsZWN0b3JzKQogIGlnbm9yZUlucHV0Rm9jdXNTZWxlY3RvcjogbWFrZVByb3AoUFJPUF9UWVBFX0FSUkFZX1NUUklORywgREVGQVVMVF9JTlBVVF9GT0NVU19TRUxFQ1RPUiksCiAgLy8gQWRkaXRpb25hbCBhdHRyaWJ1dGVzIHRvIGFkZCB0byB0aGUgaW5wdXQgZWxlbWVudAogIGlucHV0QXR0cnM6IG1ha2VQcm9wKFBST1BfVFlQRV9PQkpFQ1QsIHt9KSwKICBpbnB1dENsYXNzOiBtYWtlUHJvcChQUk9QX1RZUEVfQVJSQVlfT0JKRUNUX1NUUklORyksCiAgaW5wdXRJZDogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORyksCiAgaW5wdXRUeXBlOiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HLCAndGV4dCcsIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgcmV0dXJuIGFycmF5SW5jbHVkZXMoVFlQRVMsIHZhbHVlKTsKICB9KSwKICBpbnZhbGlkVGFnVGV4dDogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORywgJ0ludmFsaWQgdGFnKHMpJyksCiAgbGltaXQ6IG1ha2VQcm9wKFBST1BfVFlQRV9OVU1CRVIpLAogIGxpbWl0VGFnc1RleHQ6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcsICdUYWcgbGltaXQgcmVhY2hlZCcpLAogIC8vIERpc2FibGUgRU5URVIga2V5IGZyb20gdHJpZ2dlcmluZyB0YWcgYWRkaXRpb24KICBub0FkZE9uRW50ZXI6IG1ha2VQcm9wKFBST1BfVFlQRV9CT09MRUFOLCBmYWxzZSksCiAgLy8gRGlzYWJsZSB0aGUgZm9jdXMgcmluZyBvbiB0aGUgcm9vdCBlbGVtZW50CiAgbm9PdXRlckZvY3VzOiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIG5vVGFnUmVtb3ZlOiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIHBsYWNlaG9sZGVyOiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HLCAnQWRkIHRhZy4uLicpLAogIC8vIEVuYWJsZSBkZWxldGluZyBsYXN0IHRhZyBpbiBsaXN0IHdoZW4gQ09ERV9CQUNLU1BBQ0UgaXMKICAvLyBwcmVzc2VkIGFuZCBpbnB1dCBpcyBlbXB0eQogIHJlbW92ZU9uRGVsZXRlOiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIC8vIENoYXJhY3RlciAob3IgY2hhcmFjdGVycykgdGhhdCB0cmlnZ2VyIGFkZGluZyB0YWdzCiAgc2VwYXJhdG9yOiBtYWtlUHJvcChQUk9QX1RZUEVfQVJSQVlfU1RSSU5HKSwKICB0YWdDbGFzczogbWFrZVByb3AoUFJPUF9UWVBFX0FSUkFZX09CSkVDVF9TVFJJTkcpLAogIHRhZ1BpbGxzOiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIHRhZ1JlbW92ZUxhYmVsOiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HLCAnUmVtb3ZlIHRhZycpLAogIHRhZ1JlbW92ZWRMYWJlbDogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORywgJ1RhZyByZW1vdmVkJyksCiAgdGFnVmFsaWRhdG9yOiBtYWtlUHJvcChQUk9QX1RZUEVfRlVOQ1RJT04pLAogIHRhZ1ZhcmlhbnQ6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcsICdzZWNvbmRhcnknKQp9KSksIE5BTUVfRk9STV9UQUdTKTsgLy8gLS0tIE1haW4gY29tcG9uZW50IC0tLQovLyBAdnVlL2NvbXBvbmVudAoKZXhwb3J0IHZhciBCRm9ybVRhZ3MgPSAvKiNfX1BVUkVfXyovVnVlLmV4dGVuZCh7CiAgbmFtZTogTkFNRV9GT1JNX1RBR1MsCiAgbWl4aW5zOiBbaWRNaXhpbiwgbW9kZWxNaXhpbiwgZm9ybUNvbnRyb2xNaXhpbiwgZm9ybVNpemVNaXhpbiwgZm9ybVN0YXRlTWl4aW4sIG5vcm1hbGl6ZVNsb3RNaXhpbl0sCiAgcHJvcHM6IHByb3BzLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBoYXNGb2N1czogZmFsc2UsCiAgICAgIG5ld1RhZzogJycsCiAgICAgIHRhZ3M6IFtdLAogICAgICAvLyBUYWdzIHRoYXQgd2VyZSByZW1vdmVkCiAgICAgIHJlbW92ZWRUYWdzOiBbXSwKICAgICAgLy8gUG9wdWxhdGVkIHdoZW4gdGFncyBhcmUgcGFyc2VkCiAgICAgIHRhZ3NTdGF0ZTogY2xlYW5UYWdzU3RhdGUoKQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBjb21wdXRlZElucHV0SWQ6IGZ1bmN0aW9uIGNvbXB1dGVkSW5wdXRJZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaW5wdXRJZCB8fCB0aGlzLnNhZmVJZCgnX19pbnB1dF9fJyk7CiAgICB9LAogICAgY29tcHV0ZWRJbnB1dFR5cGU6IGZ1bmN0aW9uIGNvbXB1dGVkSW5wdXRUeXBlKCkgewogICAgICAvLyBXZSBvbmx5IGFsbG93IGNlcnRhaW4gdHlwZXMKICAgICAgcmV0dXJuIGFycmF5SW5jbHVkZXMoVFlQRVMsIHRoaXMuaW5wdXRUeXBlKSA/IHRoaXMuaW5wdXRUeXBlIDogJ3RleHQnOwogICAgfSwKICAgIGNvbXB1dGVkSW5wdXRBdHRyczogZnVuY3Rpb24gY29tcHV0ZWRJbnB1dEF0dHJzKCkgewogICAgICB2YXIgZGlzYWJsZWQgPSB0aGlzLmRpc2FibGVkLAogICAgICAgICAgZm9ybSA9IHRoaXMuZm9ybTsKICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdGhpcy5pbnB1dEF0dHJzKSwge30sIHsKICAgICAgICAvLyBNdXN0IGhhdmUgYXR0cmlidXRlcwogICAgICAgIGlkOiB0aGlzLmNvbXB1dGVkSW5wdXRJZCwKICAgICAgICB2YWx1ZTogdGhpcy5uZXdUYWcsCiAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkLAogICAgICAgIGZvcm06IGZvcm0KICAgICAgfSk7CiAgICB9LAogICAgY29tcHV0ZWRJbnB1dEhhbmRsZXJzOiBmdW5jdGlvbiBjb21wdXRlZElucHV0SGFuZGxlcnMoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgaW5wdXQ6IHRoaXMub25JbnB1dElucHV0LAogICAgICAgIGNoYW5nZTogdGhpcy5vbklucHV0Q2hhbmdlLAogICAgICAgIGtleWRvd246IHRoaXMub25JbnB1dEtleWRvd24sCiAgICAgICAgcmVzZXQ6IHRoaXMucmVzZXQKICAgICAgfTsKICAgIH0sCiAgICBjb21wdXRlZFNlcGFyYXRvcjogZnVuY3Rpb24gY29tcHV0ZWRTZXBhcmF0b3IoKSB7CiAgICAgIC8vIE1lcmdlIHRoZSBhcnJheSBpbnRvIGEgc3RyaW5nCiAgICAgIHJldHVybiBjb25jYXQodGhpcy5zZXBhcmF0b3IpLmZpbHRlcihpc1N0cmluZykuZmlsdGVyKGlkZW50aXR5KS5qb2luKCcnKTsKICAgIH0sCiAgICBjb21wdXRlZFNlcGFyYXRvclJlZ0V4cDogZnVuY3Rpb24gY29tcHV0ZWRTZXBhcmF0b3JSZWdFeHAoKSB7CiAgICAgIC8vIFdlIHVzZSBhIGNvbXB1dGVkIHByb3AgaGVyZSB0byBwcmVjb21waWxlIHRoZSBSZWdFeHAKICAgICAgLy8gVGhlIFJlZ0V4cCBpcyBhIGNoYXJhY3RlciBjbGFzcyBSRSBpbiB0aGUgZm9ybSBvZiBgL1thYmNdKy9gCiAgICAgIC8vIHdoZXJlIGEsIGIsIGFuZCBjIGFyZSB0aGUgdmFsaWQgc2VwYXJhdG9yIGNoYXJhY3RlcnMKICAgICAgLy8gLT4gYHRhZ3MgPSBzdHIuc3BsaXQoL1thYmNdKy8pLmZpbHRlcih0ID0+IHQpYAogICAgICB2YXIgc2VwYXJhdG9yID0gdGhpcy5jb21wdXRlZFNlcGFyYXRvcjsKICAgICAgcmV0dXJuIHNlcGFyYXRvciA/IG5ldyBSZWdFeHAoIlsiLmNvbmNhdChlc2NhcGVSZWdFeHBDaGFycyhzZXBhcmF0b3IpLCAiXSsiKSkgOiBudWxsOwogICAgfSwKICAgIGNvbXB1dGVkSm9pbmVyOiBmdW5jdGlvbiBjb21wdXRlZEpvaW5lcigpIHsKICAgICAgLy8gV2hlbiB0YWcocykgYXJlIGludmFsaWQgb3IgZHVwbGljYXRlLCB3ZSBsZWF2ZSB0aGVtCiAgICAgIC8vIGluIHRoZSBpbnB1dCBzbyB0aGF0IHRoZSB1c2VyIGNhbiBzZWUgdGhlbQogICAgICAvLyBJZiB0aGVyZSBhcmUgbW9yZSB0aGFuIG9uZSB0YWcgaW4gdGhlIGlucHV0LCB3ZSB1c2UgdGhlCiAgICAgIC8vIGZpcnN0IHNlcGFyYXRvciBjaGFyYWN0ZXIgYXMgdGhlIHNlcGFyYXRvciBpbiB0aGUgaW5wdXQKICAgICAgLy8gV2UgYXBwZW5kIGEgc3BhY2UgaWYgdGhlIGZpcnN0IHNlcGFyYXRvciBpcyBub3QgYSBzcGFjZQogICAgICB2YXIgam9pbmVyID0gdGhpcy5jb21wdXRlZFNlcGFyYXRvci5jaGFyQXQoMCk7CiAgICAgIHJldHVybiBqb2luZXIgIT09ICcgJyA/ICIiLmNvbmNhdChqb2luZXIsICIgIikgOiBqb2luZXI7CiAgICB9LAogICAgY29tcHV0ZUlnbm9yZUlucHV0Rm9jdXNTZWxlY3RvcjogZnVuY3Rpb24gY29tcHV0ZUlnbm9yZUlucHV0Rm9jdXNTZWxlY3RvcigpIHsKICAgICAgLy8gTm9ybWFsaXplIHRvIGFuIHNpbmdsZSBzZWxlY3RvciB3aXRoIHNlbGVjdG9ycyBzZXBhcmF0ZWQgYnkgYCxgCiAgICAgIHJldHVybiBjb25jYXQodGhpcy5pZ25vcmVJbnB1dEZvY3VzU2VsZWN0b3IpLmZpbHRlcihpZGVudGl0eSkuam9pbignLCcpLnRyaW0oKTsKICAgIH0sCiAgICBkaXNhYmxlQWRkQnV0dG9uOiBmdW5jdGlvbiBkaXNhYmxlQWRkQnV0dG9uKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOyAvLyBJZiAnQWRkJyBidXR0b24gc2hvdWxkIGJlIGRpc2FibGVkCiAgICAgIC8vIElmIHRoZSBpbnB1dCBjb250YWlucyBhdCBsZWFzdCBvbmUgdGFnIHRoYXQgY2FuCiAgICAgIC8vIGJlIGFkZGVkLCB0aGVuIHRoZSAnQWRkJyBidXR0b24gc2hvdWxkIGJlIGVuYWJsZWQKCgogICAgICB2YXIgbmV3VGFnID0gdHJpbSh0aGlzLm5ld1RhZyk7CiAgICAgIHJldHVybiBuZXdUYWcgPT09ICcnIHx8ICF0aGlzLnNwbGl0VGFncyhuZXdUYWcpLnNvbWUoZnVuY3Rpb24gKHQpIHsKICAgICAgICByZXR1cm4gIWFycmF5SW5jbHVkZXMoX3RoaXMudGFncywgdCkgJiYgX3RoaXMudmFsaWRhdGVUYWcodCk7CiAgICAgIH0pOwogICAgfSwKICAgIGR1cGxpY2F0ZVRhZ3M6IGZ1bmN0aW9uIGR1cGxpY2F0ZVRhZ3MoKSB7CiAgICAgIHJldHVybiB0aGlzLnRhZ3NTdGF0ZS5kdXBsaWNhdGU7CiAgICB9LAogICAgaGFzRHVwbGljYXRlVGFnczogZnVuY3Rpb24gaGFzRHVwbGljYXRlVGFncygpIHsKICAgICAgcmV0dXJuIHRoaXMuZHVwbGljYXRlVGFncy5sZW5ndGggPiAwOwogICAgfSwKICAgIGludmFsaWRUYWdzOiBmdW5jdGlvbiBpbnZhbGlkVGFncygpIHsKICAgICAgcmV0dXJuIHRoaXMudGFnc1N0YXRlLmludmFsaWQ7CiAgICB9LAogICAgaGFzSW52YWxpZFRhZ3M6IGZ1bmN0aW9uIGhhc0ludmFsaWRUYWdzKCkgewogICAgICByZXR1cm4gdGhpcy5pbnZhbGlkVGFncy5sZW5ndGggPiAwOwogICAgfSwKICAgIGlzTGltaXRSZWFjaGVkOiBmdW5jdGlvbiBpc0xpbWl0UmVhY2hlZCgpIHsKICAgICAgdmFyIGxpbWl0ID0gdGhpcy5saW1pdDsKICAgICAgcmV0dXJuIGlzTnVtYmVyKGxpbWl0KSAmJiBsaW1pdCA+PSAwICYmIHRoaXMudGFncy5sZW5ndGggPj0gbGltaXQ7CiAgICB9CiAgfSwKICB3YXRjaDogKF93YXRjaCA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX3dhdGNoLCBNT0RFTF9QUk9QX05BTUUsIGZ1bmN0aW9uIChuZXdWYWx1ZSkgewogICAgdGhpcy50YWdzID0gY2xlYW5UYWdzKG5ld1ZhbHVlKTsKICB9KSwgX2RlZmluZVByb3BlcnR5KF93YXRjaCwgInRhZ3MiLCBmdW5jdGlvbiB0YWdzKG5ld1ZhbHVlLCBvbGRWYWx1ZSkgewogICAgLy8gVXBkYXRlIHRoZSBgdi1tb2RlbGAgKGlmIGl0IGRpZmZlcnMgZnJvbSB0aGUgdmFsdWUgcHJvcCkKICAgIGlmICghbG9vc2VFcXVhbChuZXdWYWx1ZSwgdGhpc1tNT0RFTF9QUk9QX05BTUVdKSkgewogICAgICB0aGlzLiRlbWl0KE1PREVMX0VWRU5UX05BTUUsIG5ld1ZhbHVlKTsKICAgIH0KCiAgICBpZiAoIWxvb3NlRXF1YWwobmV3VmFsdWUsIG9sZFZhbHVlKSkgewogICAgICBuZXdWYWx1ZSA9IGNvbmNhdChuZXdWYWx1ZSkuZmlsdGVyKGlkZW50aXR5KTsKICAgICAgb2xkVmFsdWUgPSBjb25jYXQob2xkVmFsdWUpLmZpbHRlcihpZGVudGl0eSk7CiAgICAgIHRoaXMucmVtb3ZlZFRhZ3MgPSBvbGRWYWx1ZS5maWx0ZXIoZnVuY3Rpb24gKG9sZCkgewogICAgICAgIHJldHVybiAhYXJyYXlJbmNsdWRlcyhuZXdWYWx1ZSwgb2xkKTsKICAgICAgfSk7CiAgICB9CiAgfSksIF9kZWZpbmVQcm9wZXJ0eShfd2F0Y2gsICJ0YWdzU3RhdGUiLCBmdW5jdGlvbiB0YWdzU3RhdGUobmV3VmFsdWUsIG9sZFZhbHVlKSB7CiAgICAvLyBFbWl0IGEgdGFnLXN0YXRlIGV2ZW50IHdoZW4gdGhlIGB0YWdzU3RhdGVgIG9iamVjdCBjaGFuZ2VzCiAgICBpZiAoIWxvb3NlRXF1YWwobmV3VmFsdWUsIG9sZFZhbHVlKSkgewogICAgICB0aGlzLiRlbWl0KEVWRU5UX05BTUVfVEFHX1NUQVRFLCBuZXdWYWx1ZS52YWxpZCwgbmV3VmFsdWUuaW52YWxpZCwgbmV3VmFsdWUuZHVwbGljYXRlKTsKICAgIH0KICB9KSwgX3dhdGNoKSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgLy8gV2UgZG8gdGhpcyBpbiBjcmVhdGVkIHRvIG1ha2Ugc3VyZSBhbiBpbnB1dCBldmVudCBlbWl0cwogICAgLy8gaWYgdGhlIGNsZWFuZWQgdGFncyBhcmUgbm90IGVxdWFsIHRvIHRoZSB2YWx1ZSBwcm9wCiAgICB0aGlzLnRhZ3MgPSBjbGVhblRhZ3ModGhpc1tNT0RFTF9QUk9QX05BTUVdKTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsgLy8gTGlzdGVuIGZvciBmb3JtIHJlc2V0IGV2ZW50cywgdG8gcmVzZXQgdGhlIHRhZ3MgaW5wdXQKCgogICAgdmFyICRmb3JtID0gY2xvc2VzdCgnZm9ybScsIHRoaXMuJGVsKTsKCiAgICBpZiAoJGZvcm0pIHsKICAgICAgZXZlbnRPbigkZm9ybSwgJ3Jlc2V0JywgdGhpcy5yZXNldCwgRVZFTlRfT1BUSU9OU19QQVNTSVZFKTsKICAgICAgdGhpcy4kb24oSE9PS19FVkVOVF9OQU1FX0JFRk9SRV9ERVNUUk9ZLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgZXZlbnRPZmYoJGZvcm0sICdyZXNldCcsIF90aGlzMi5yZXNldCwgRVZFTlRfT1BUSU9OU19QQVNTSVZFKTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBhZGRUYWc6IGZ1bmN0aW9uIGFkZFRhZyhuZXdUYWcpIHsKICAgICAgbmV3VGFnID0gaXNTdHJpbmcobmV3VGFnKSA/IG5ld1RhZyA6IHRoaXMubmV3VGFnOwogICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwoKICAgICAgaWYgKHRoaXMuZGlzYWJsZWQgfHwgdHJpbShuZXdUYWcpID09PSAnJyB8fCB0aGlzLmlzTGltaXRSZWFjaGVkKSB7CiAgICAgICAgLy8gRWFybHkgZXhpdAogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHBhcnNlZCA9IHRoaXMucGFyc2VUYWdzKG5ld1RhZyk7IC8vIEFkZCBhbnkgbmV3IHRhZ3MgdG8gdGhlIGB0YWdzYCBhcnJheSwgb3IgaWYgdGhlCiAgICAgIC8vIGFycmF5IG9mIGBhbGxUYWdzYCBpcyBlbXB0eSwgd2UgY2xlYXIgdGhlIGlucHV0CgogICAgICBpZiAocGFyc2VkLnZhbGlkLmxlbmd0aCA+IDAgfHwgcGFyc2VkLmFsbC5sZW5ndGggPT09IDApIHsKICAgICAgICAvLyBDbGVhciB0aGUgdXNlciBpbnB1dCBlbGVtZW50IChhbmQgbGVhdmUgaW4gYW55IGludmFsaWQvZHVwbGljYXRlIHRhZyhzKQoKICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWY6IGZ1bGwgdGVzdGluZyB0byBiZSBhZGRlZCBsYXRlciAqLwogICAgICAgIGlmIChtYXRjaGVzKHRoaXMuZ2V0SW5wdXQoKSwgJ3NlbGVjdCcpKSB7CiAgICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGlzIG5lZWRlZCB0byBwcm9wZXJseQogICAgICAgICAgLy8gd29yayB3aXRoIGA8c2VsZWN0PmAgZWxlbWVudHMKICAgICAgICAgIHRoaXMubmV3VGFnID0gJyc7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBpbnZhbGlkQW5kRHVwbGljYXRlcyA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkocGFyc2VkLmludmFsaWQpLCBfdG9Db25zdW1hYmxlQXJyYXkocGFyc2VkLmR1cGxpY2F0ZSkpOwogICAgICAgICAgdGhpcy5uZXdUYWcgPSBwYXJzZWQuYWxsLmZpbHRlcihmdW5jdGlvbiAodGFnKSB7CiAgICAgICAgICAgIHJldHVybiBhcnJheUluY2x1ZGVzKGludmFsaWRBbmREdXBsaWNhdGVzLCB0YWcpOwogICAgICAgICAgfSkuam9pbih0aGlzLmNvbXB1dGVkSm9pbmVyKS5jb25jYXQoaW52YWxpZEFuZER1cGxpY2F0ZXMubGVuZ3RoID4gMCA/IHRoaXMuY29tcHV0ZWRKb2luZXIuY2hhckF0KDApIDogJycpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHBhcnNlZC52YWxpZC5sZW5ndGggPiAwKSB7CiAgICAgICAgLy8gV2UgYWRkIHRoZSBuZXcgdGFncyBpbiBvbmUgYXRvbWljIG9wZXJhdGlvbgogICAgICAgIC8vIHRvIHRyaWdnZXIgcmVhY3Rpdml0eSBvbmNlIChpbnN0ZWFkIG9mIG9uY2UgcGVyIHRhZykKICAgICAgICAvLyBXZSBkbyB0aGlzIGFmdGVyIHdlIHVwZGF0ZSB0aGUgbmV3IHRhZyBpbnB1dCB2YWx1ZQogICAgICAgIC8vIGBjb25jYXQoKWAgY2FuIGJlIGZhc3RlciB0aGFuIGFycmF5IHNwcmVhZCwgd2hlbiBib3RoIGFyZ3MgYXJlIGFycmF5cwogICAgICAgIHRoaXMudGFncyA9IGNvbmNhdCh0aGlzLnRhZ3MsIHBhcnNlZC52YWxpZCk7CiAgICAgIH0KCiAgICAgIHRoaXMudGFnc1N0YXRlID0gcGFyc2VkOyAvLyBBdHRlbXB0IHRvIHJlLWZvY3VzIHRoZSBpbnB1dCAoc3BlY2lmaWNhbGx5IGZvciB3aGVuIHVzaW5nIHRoZSBBZGQKICAgICAgLy8gYnV0dG9uLCBhcyB0aGUgYnV0dG9uIGRpc2FwcGVhcnMgYWZ0ZXIgc3VjY2Vzc2Z1bGx5IGFkZGluZyBhIHRhZwoKICAgICAgdGhpcy5mb2N1cygpOwogICAgfSwKICAgIHJlbW92ZVRhZzogZnVuY3Rpb24gcmVtb3ZlVGFnKHRhZykgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KCgogICAgICBpZiAodGhpcy5kaXNhYmxlZCkgewogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBUT0RPOgogICAgICAvLyAgIEFkZCBgb25SZW1vdmVUYWcodGFnKWAgdXNlciBtZXRob2QsIHdoaWNoIGlmIHJldHVybnMgYGZhbHNlYAogICAgICAvLyAgIHdpbGwgcHJldmVudCB0aGUgdGFnIGZyb20gYmVpbmcgcmVtb3ZlZCAoaS5lLiBjb25maXJtYXRpb24pCiAgICAgIC8vICAgT3IgZW1pdCBjYW5jZWxhYmxlIGBCdkV2ZW50YAoKCiAgICAgIHRoaXMudGFncyA9IHRoaXMudGFncy5maWx0ZXIoZnVuY3Rpb24gKHQpIHsKICAgICAgICByZXR1cm4gdCAhPT0gdGFnOwogICAgICB9KTsgLy8gUmV0dXJuIGZvY3VzIHRvIHRoZSBpbnB1dCAoaWYgcG9zc2libGUpCgogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMzLmZvY3VzKCk7CiAgICAgIH0pOwogICAgfSwKICAgIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB0aGlzLm5ld1RhZyA9ICcnOwogICAgICB0aGlzLnRhZ3MgPSBbXTsKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNC5yZW1vdmVkVGFncyA9IFtdOwogICAgICAgIF90aGlzNC50YWdzU3RhdGUgPSBjbGVhblRhZ3NTdGF0ZSgpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyAtLS0gSW5wdXQgZWxlbWVudCBldmVudCBoYW5kbGVycyAtLS0KICAgIG9uSW5wdXRJbnB1dDogZnVuY3Rpb24gb25JbnB1dElucHV0KGV2ZW50KSB7CiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0OiBoYXJkIHRvIHRlc3QgY29tcG9zaXRpb24gZXZlbnRzICovCiAgICAgIGlmICh0aGlzLmRpc2FibGVkIHx8IGlzRXZlbnQoZXZlbnQpICYmIGV2ZW50LnRhcmdldC5jb21wb3NpbmcpIHsKICAgICAgICAvLyBgZXZlbnQudGFyZ2V0LmNvbXBvc2luZ2AgaXMgc2V0IGJ5IFZ1ZSAoYHYtbW9kZWxgIGRpcmVjdGl2ZSkKICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvdnVlL2Jsb2IvZGV2L3NyYy9wbGF0Zm9ybXMvd2ViL3J1bnRpbWUvZGlyZWN0aXZlcy9tb2RlbC5qcwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIG5ld1RhZyA9IHByb2Nlc3NFdmVudFZhbHVlKGV2ZW50KTsKICAgICAgdmFyIHNlcGFyYXRvclJlID0gdGhpcy5jb21wdXRlZFNlcGFyYXRvclJlZ0V4cDsKCiAgICAgIGlmICh0aGlzLm5ld1RhZyAhPT0gbmV3VGFnKSB7CiAgICAgICAgdGhpcy5uZXdUYWcgPSBuZXdUYWc7CiAgICAgIH0gLy8gV2UgaWdub3JlIGxlYWRpbmcgd2hpdGVzcGFjZSBmb3IgdGhlIGZvbGxvd2luZwoKCiAgICAgIG5ld1RhZyA9IHRyaW1MZWZ0KG5ld1RhZyk7CgogICAgICBpZiAoc2VwYXJhdG9yUmUgJiYgc2VwYXJhdG9yUmUudGVzdChuZXdUYWcuc2xpY2UoLTEpKSkgewogICAgICAgIC8vIEEgdHJhaWxpbmcgc2VwYXJhdG9yIGNoYXJhY3RlciB3YXMgZW50ZXJlZCwgc28gYWRkIHRoZSB0YWcocykKICAgICAgICAvLyBOb3RlOiBNb3JlIHRoYW4gb25lIHRhZyBvbiBpbnB1dCBldmVudCBpcyBwb3NzaWJsZSB2aWEgY29weS9wYXN0ZQogICAgICAgIHRoaXMuYWRkVGFnKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gVmFsaWRhdGUgKHBhcnNlIHRhZ3MpIG9uIGlucHV0IGV2ZW50CiAgICAgICAgdGhpcy50YWdzU3RhdGUgPSBuZXdUYWcgPT09ICcnID8gY2xlYW5UYWdzU3RhdGUoKSA6IHRoaXMucGFyc2VUYWdzKG5ld1RhZyk7CiAgICAgIH0KICAgIH0sCiAgICBvbklucHV0Q2hhbmdlOiBmdW5jdGlvbiBvbklucHV0Q2hhbmdlKGV2ZW50KSB7CiAgICAgIC8vIENoYW5nZSBpcyB0cmlnZ2VyZWQgb24gYDxpbnB1dD5gIGJsdXIsIG9yIGA8c2VsZWN0PmAgc2VsZWN0ZWQKICAgICAgLy8gVGhpcyBldmVudCBpcyBvcHQtaW4KICAgICAgaWYgKCF0aGlzLmRpc2FibGVkICYmIHRoaXMuYWRkT25DaGFuZ2UpIHsKICAgICAgICB2YXIgbmV3VGFnID0gcHJvY2Vzc0V2ZW50VmFsdWUoZXZlbnQpOwogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCgogICAgICAgIGlmICh0aGlzLm5ld1RhZyAhPT0gbmV3VGFnKSB7CiAgICAgICAgICB0aGlzLm5ld1RhZyA9IG5ld1RhZzsKICAgICAgICB9CgogICAgICAgIHRoaXMuYWRkVGFnKCk7CiAgICAgIH0KICAgIH0sCiAgICBvbklucHV0S2V5ZG93bjogZnVuY3Rpb24gb25JbnB1dEtleWRvd24oZXZlbnQpIHsKICAgICAgLy8gRWFybHkgZXhpdAoKICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KICAgICAgaWYgKHRoaXMuZGlzYWJsZWQgfHwgIWlzRXZlbnQoZXZlbnQpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIga2V5Q29kZSA9IGV2ZW50LmtleUNvZGU7CiAgICAgIHZhciB2YWx1ZSA9IGV2ZW50LnRhcmdldC52YWx1ZSB8fCAnJzsKICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2U6IHRlc3RpbmcgdG8gYmUgYWRkZWQgbGF0ZXIgKi8KCiAgICAgIGlmICghdGhpcy5ub0FkZE9uRW50ZXIgJiYga2V5Q29kZSA9PT0gQ09ERV9FTlRFUikgewogICAgICAgIC8vIEF0dGVtcHQgdG8gYWRkIHRoZSB0YWcgd2hlbiB1c2VyIHByZXNzZXMgZW50ZXIKICAgICAgICBzdG9wRXZlbnQoZXZlbnQsIHsKICAgICAgICAgIHByb3BhZ2F0aW9uOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIHRoaXMuYWRkVGFnKCk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5yZW1vdmVPbkRlbGV0ZSAmJiAoa2V5Q29kZSA9PT0gQ09ERV9CQUNLU1BBQ0UgfHwga2V5Q29kZSA9PT0gQ09ERV9ERUxFVEUpICYmIHZhbHVlID09PSAnJykgewogICAgICAgIC8vIFJlbW92ZSB0aGUgbGFzdCB0YWcgaWYgdGhlIHVzZXIgcHJlc3NlZCBiYWNrc3BhY2UvZGVsZXRlIGFuZCB0aGUgaW5wdXQgaXMgZW1wdHkKICAgICAgICBzdG9wRXZlbnQoZXZlbnQsIHsKICAgICAgICAgIHByb3BhZ2F0aW9uOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIHRoaXMudGFncyA9IHRoaXMudGFncy5zbGljZSgwLCAtMSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyAtLS0gV3JhcHBlciBldmVudCBoYW5kbGVycyAtLS0KICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZXZlbnQpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB2YXIgaWdub3JlRm9jdXNTZWxlY3RvciA9IHRoaXMuY29tcHV0ZUlnbm9yZUlucHV0Rm9jdXNTZWxlY3RvcjsKICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldDsKCiAgICAgIGlmICghdGhpcy5kaXNhYmxlZCAmJiAhaXNBY3RpdmVFbGVtZW50KHRhcmdldCkgJiYgKCFpZ25vcmVGb2N1c1NlbGVjdG9yIHx8ICFjbG9zZXN0KGlnbm9yZUZvY3VzU2VsZWN0b3IsIHRhcmdldCwgdHJ1ZSkpKSB7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXM1LmZvY3VzKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBvbkZvY3VzaW46IGZ1bmN0aW9uIG9uRm9jdXNpbigpIHsKICAgICAgdGhpcy5oYXNGb2N1cyA9IHRydWU7CiAgICB9LAogICAgb25Gb2N1c291dDogZnVuY3Rpb24gb25Gb2N1c291dCgpIHsKICAgICAgdGhpcy5oYXNGb2N1cyA9IGZhbHNlOwogICAgfSwKICAgIGhhbmRsZUF1dG9mb2N1czogZnVuY3Rpb24gaGFuZGxlQXV0b2ZvY3VzKCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXF1ZXN0QUYoZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKF90aGlzNi5hdXRvZm9jdXMgJiYgIV90aGlzNi5kaXNhYmxlZCkgewogICAgICAgICAgICBfdGhpczYuZm9jdXMoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLy8gLS0tIFB1YmxpYyBtZXRob2RzIC0tLQogICAgZm9jdXM6IGZ1bmN0aW9uIGZvY3VzKCkgewogICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHsKICAgICAgICBhdHRlbXB0Rm9jdXModGhpcy5nZXRJbnB1dCgpKTsKICAgICAgfQogICAgfSwKICAgIGJsdXI6IGZ1bmN0aW9uIGJsdXIoKSB7CiAgICAgIGlmICghdGhpcy5kaXNhYmxlZCkgewogICAgICAgIGF0dGVtcHRCbHVyKHRoaXMuZ2V0SW5wdXQoKSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyAtLS0gUHJpdmF0ZSBtZXRob2RzIC0tLQogICAgc3BsaXRUYWdzOiBmdW5jdGlvbiBzcGxpdFRhZ3MobmV3VGFnKSB7CiAgICAgIC8vIFNwbGl0IHRoZSBpbnB1dCBpbnRvIGFuIGFycmF5IG9mIHJhdyB0YWdzCiAgICAgIG5ld1RhZyA9IHRvU3RyaW5nKG5ld1RhZyk7CiAgICAgIHZhciBzZXBhcmF0b3JSZSA9IHRoaXMuY29tcHV0ZWRTZXBhcmF0b3JSZWdFeHA7IC8vIFNwbGl0IHRoZSB0YWcocykgdmlhIHRoZSBvcHRpb25hbCBzZXBhcmF0b3IKICAgICAgLy8gTm9ybWFsbHkgb25seSBhIHNpbmdsZSB0YWcgaXMgcHJvdmlkZWQsIGJ1dCBjb3B5L3Bhc3RlCiAgICAgIC8vIGNhbiBlbnRlciBtdWx0aXBsZSB0YWdzIGluIGEgc2luZ2xlIG9wZXJhdGlvbgoKICAgICAgcmV0dXJuIChzZXBhcmF0b3JSZSA/IG5ld1RhZy5zcGxpdChzZXBhcmF0b3JSZSkgOiBbbmV3VGFnXSkubWFwKHRyaW0pLmZpbHRlcihpZGVudGl0eSk7CiAgICB9LAogICAgcGFyc2VUYWdzOiBmdW5jdGlvbiBwYXJzZVRhZ3MobmV3VGFnKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOyAvLyBUYWtlcyBgbmV3VGFnYCB2YWx1ZSBhbmQgcGFyc2VzIGl0IGludG8gYHZhbGlkVGFnc2AsCiAgICAgIC8vIGBpbnZhbGlkVGFnc2AsIGFuZCBkdXBsaWNhdGUgdGFncyBhcyBhbiBvYmplY3QKICAgICAgLy8gU3BsaXQgdGhlIGlucHV0IGludG8gcmF3IHRhZ3MKCgogICAgICB2YXIgdGFncyA9IHRoaXMuc3BsaXRUYWdzKG5ld1RhZyk7IC8vIEJhc2UgcmVzdWx0cwoKICAgICAgdmFyIHBhcnNlZCA9IHsKICAgICAgICBhbGw6IHRhZ3MsCiAgICAgICAgdmFsaWQ6IFtdLAogICAgICAgIGludmFsaWQ6IFtdLAogICAgICAgIGR1cGxpY2F0ZTogW10KICAgICAgfTsgLy8gUGFyc2UgdGhlIHVuaXF1ZSB0YWdzCgogICAgICB0YWdzLmZvckVhY2goZnVuY3Rpb24gKHRhZykgewogICAgICAgIGlmIChhcnJheUluY2x1ZGVzKF90aGlzNy50YWdzLCB0YWcpIHx8IGFycmF5SW5jbHVkZXMocGFyc2VkLnZhbGlkLCB0YWcpKSB7CiAgICAgICAgICAvLyBVbmlxdWUgZHVwbGljYXRlIHRhZ3MKICAgICAgICAgIGlmICghYXJyYXlJbmNsdWRlcyhwYXJzZWQuZHVwbGljYXRlLCB0YWcpKSB7CiAgICAgICAgICAgIHBhcnNlZC5kdXBsaWNhdGUucHVzaCh0YWcpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoX3RoaXM3LnZhbGlkYXRlVGFnKHRhZykpIHsKICAgICAgICAgIC8vIFdlIG9ubHkgYWRkIHVuaXF1ZS92YWxpZCB0YWdzCiAgICAgICAgICBwYXJzZWQudmFsaWQucHVzaCh0YWcpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBVbmlxdWUgaW52YWxpZCB0YWdzCiAgICAgICAgICBpZiAoIWFycmF5SW5jbHVkZXMocGFyc2VkLmludmFsaWQsIHRhZykpIHsKICAgICAgICAgICAgcGFyc2VkLmludmFsaWQucHVzaCh0YWcpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiBwYXJzZWQ7CiAgICB9LAogICAgdmFsaWRhdGVUYWc6IGZ1bmN0aW9uIHZhbGlkYXRlVGFnKHRhZykgewogICAgICB2YXIgdGFnVmFsaWRhdG9yID0gdGhpcy50YWdWYWxpZGF0b3I7CiAgICAgIHJldHVybiBoYXNQcm9wRnVuY3Rpb24odGFnVmFsaWRhdG9yKSA/IHRhZ1ZhbGlkYXRvcih0YWcpIDogdHJ1ZTsKICAgIH0sCiAgICBnZXRJbnB1dDogZnVuY3Rpb24gZ2V0SW5wdXQoKSB7CiAgICAgIC8vIFJldHVybnMgdGhlIGlucHV0IGVsZW1lbnQgcmVmZXJlbmNlIChvciBudWxsIGlmIG5vdCBmb3VuZCkKICAgICAgLy8gV2UgbmVlZCB0byBlc2NhcGUgYGNvbXB1dGVkSW5wdXRJZGAgc2luY2UgaXQgY2FuIGJlIHVzZXItcHJvdmlkZWQKICAgICAgcmV0dXJuIHNlbGVjdCgiIyIuY29uY2F0KGNzc0VzY2FwZSh0aGlzLmNvbXB1dGVkSW5wdXRJZCkpLCB0aGlzLiRlbCk7CiAgICB9LAogICAgLy8gRGVmYXVsdCBVc2VyIEludGVyZmFjZSByZW5kZXIKICAgIGRlZmF1bHRSZW5kZXI6IGZ1bmN0aW9uIGRlZmF1bHRSZW5kZXIoX3JlZikgewogICAgICB2YXIgYWRkQnV0dG9uVGV4dCA9IF9yZWYuYWRkQnV0dG9uVGV4dCwKICAgICAgICAgIGFkZEJ1dHRvblZhcmlhbnQgPSBfcmVmLmFkZEJ1dHRvblZhcmlhbnQsCiAgICAgICAgICBhZGRUYWcgPSBfcmVmLmFkZFRhZywKICAgICAgICAgIGRpc2FibGVBZGRCdXR0b24gPSBfcmVmLmRpc2FibGVBZGRCdXR0b24sCiAgICAgICAgICBkaXNhYmxlZCA9IF9yZWYuZGlzYWJsZWQsCiAgICAgICAgICBkdXBsaWNhdGVUYWdUZXh0ID0gX3JlZi5kdXBsaWNhdGVUYWdUZXh0LAogICAgICAgICAgaW5wdXRBdHRycyA9IF9yZWYuaW5wdXRBdHRycywKICAgICAgICAgIGlucHV0Q2xhc3MgPSBfcmVmLmlucHV0Q2xhc3MsCiAgICAgICAgICBpbnB1dEhhbmRsZXJzID0gX3JlZi5pbnB1dEhhbmRsZXJzLAogICAgICAgICAgaW5wdXRUeXBlID0gX3JlZi5pbnB1dFR5cGUsCiAgICAgICAgICBpbnZhbGlkVGFnVGV4dCA9IF9yZWYuaW52YWxpZFRhZ1RleHQsCiAgICAgICAgICBpc0R1cGxpY2F0ZSA9IF9yZWYuaXNEdXBsaWNhdGUsCiAgICAgICAgICBpc0ludmFsaWQgPSBfcmVmLmlzSW52YWxpZCwKICAgICAgICAgIGlzTGltaXRSZWFjaGVkID0gX3JlZi5pc0xpbWl0UmVhY2hlZCwKICAgICAgICAgIGxpbWl0VGFnc1RleHQgPSBfcmVmLmxpbWl0VGFnc1RleHQsCiAgICAgICAgICBub1RhZ1JlbW92ZSA9IF9yZWYubm9UYWdSZW1vdmUsCiAgICAgICAgICBwbGFjZWhvbGRlciA9IF9yZWYucGxhY2Vob2xkZXIsCiAgICAgICAgICByZW1vdmVUYWcgPSBfcmVmLnJlbW92ZVRhZywKICAgICAgICAgIHRhZ0NsYXNzID0gX3JlZi50YWdDbGFzcywKICAgICAgICAgIHRhZ1BpbGxzID0gX3JlZi50YWdQaWxscywKICAgICAgICAgIHRhZ1JlbW92ZUxhYmVsID0gX3JlZi50YWdSZW1vdmVMYWJlbCwKICAgICAgICAgIHRhZ1ZhcmlhbnQgPSBfcmVmLnRhZ1ZhcmlhbnQsCiAgICAgICAgICB0YWdzID0gX3JlZi50YWdzOwogICAgICB2YXIgaCA9IHRoaXMuJGNyZWF0ZUVsZW1lbnQ7IC8vIE1ha2UgdGhlIGxpc3Qgb2YgdGFncwoKICAgICAgdmFyICR0YWdzID0gdGFncy5tYXAoZnVuY3Rpb24gKHRhZykgewogICAgICAgIHRhZyA9IHRvU3RyaW5nKHRhZyk7CiAgICAgICAgcmV0dXJuIGgoQkZvcm1UYWcsIHsKICAgICAgICAgIGNsYXNzOiB0YWdDbGFzcywKICAgICAgICAgIC8vIGBCRm9ybVRhZ2Agd2lsbCBhdXRvIGdlbmVyYXRlIGFuIElECiAgICAgICAgICAvLyBzbyB3ZSBkbyBub3QgbmVlZCB0byBzZXQgdGhlIElEIHByb3AKICAgICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCwKICAgICAgICAgICAgbm9SZW1vdmU6IG5vVGFnUmVtb3ZlLAogICAgICAgICAgICBwaWxsOiB0YWdQaWxscywKICAgICAgICAgICAgcmVtb3ZlTGFiZWw6IHRhZ1JlbW92ZUxhYmVsLAogICAgICAgICAgICB0YWc6ICdsaScsCiAgICAgICAgICAgIHRpdGxlOiB0YWcsCiAgICAgICAgICAgIHZhcmlhbnQ6IHRhZ1ZhcmlhbnQKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVtb3ZlVGFnKHRhZyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBrZXk6ICJ0YWdzXyIuY29uY2F0KHRhZykKICAgICAgICB9LCB0YWcpOwogICAgICB9KTsgLy8gRmVlZGJhY2sgSURzIGlmIG5lZWRlZAoKICAgICAgdmFyIGludmFsaWRGZWVkYmFja0lkID0gaW52YWxpZFRhZ1RleHQgJiYgaXNJbnZhbGlkID8gdGhpcy5zYWZlSWQoJ19faW52YWxpZF9mZWVkYmFja19fJykgOiBudWxsOwogICAgICB2YXIgZHVwbGljYXRlRmVlZGJhY2tJZCA9IGR1cGxpY2F0ZVRhZ1RleHQgJiYgaXNEdXBsaWNhdGUgPyB0aGlzLnNhZmVJZCgnX19kdXBsaWNhdGVfZmVlZGJhY2tfXycpIDogbnVsbDsKICAgICAgdmFyIGxpbWl0RmVlZGJhY2tJZCA9IGxpbWl0VGFnc1RleHQgJiYgaXNMaW1pdFJlYWNoZWQgPyB0aGlzLnNhZmVJZCgnX19saW1pdF9mZWVkYmFja19fJykgOiBudWxsOyAvLyBDb21wdXRlIHRoZSBgYXJpYS1kZXNjcmliZWRieWAgYXR0cmlidXRlIHZhbHVlCgogICAgICB2YXIgYXJpYURlc2NyaWJlZGJ5ID0gW2lucHV0QXR0cnNbJ2FyaWEtZGVzY3JpYmVkYnknXSwgaW52YWxpZEZlZWRiYWNrSWQsIGR1cGxpY2F0ZUZlZWRiYWNrSWQsIGxpbWl0RmVlZGJhY2tJZF0uZmlsdGVyKGlkZW50aXR5KS5qb2luKCcgJyk7IC8vIElucHV0CgogICAgICB2YXIgJGlucHV0ID0gaCgnaW5wdXQnLCB7CiAgICAgICAgc3RhdGljQ2xhc3M6ICdiLWZvcm0tdGFncy1pbnB1dCB3LTEwMCBmbGV4LWdyb3ctMSBwLTAgbS0wIGJnLXRyYW5zcGFyZW50IGJvcmRlci0wJywKICAgICAgICBjbGFzczogaW5wdXRDbGFzcywKICAgICAgICBzdHlsZTogewogICAgICAgICAgb3V0bGluZTogMCwKICAgICAgICAgIG1pbldpZHRoOiAnNXJlbScKICAgICAgICB9LAogICAgICAgIGF0dHJzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGlucHV0QXR0cnMpLCB7fSwgewogICAgICAgICAgJ2FyaWEtZGVzY3JpYmVkYnknOiBhcmlhRGVzY3JpYmVkYnkgfHwgbnVsbCwKICAgICAgICAgIHR5cGU6IGlucHV0VHlwZSwKICAgICAgICAgIHBsYWNlaG9sZGVyOiBwbGFjZWhvbGRlciB8fCBudWxsCiAgICAgICAgfSksCiAgICAgICAgZG9tUHJvcHM6IHsKICAgICAgICAgIHZhbHVlOiBpbnB1dEF0dHJzLnZhbHVlCiAgICAgICAgfSwKICAgICAgICBvbjogaW5wdXRIYW5kbGVycywKICAgICAgICAvLyBEaXJlY3RpdmUgbmVlZGVkIHRvIGdldCBgZXZlbnQudGFyZ2V0LmNvbXBvc2luZ2Agc2V0IChpZiBuZWVkZWQpCiAgICAgICAgZGlyZWN0aXZlczogW3sKICAgICAgICAgIG5hbWU6ICdtb2RlbCcsCiAgICAgICAgICB2YWx1ZTogaW5wdXRBdHRycy52YWx1ZQogICAgICAgIH1dLAogICAgICAgIHJlZjogJ2lucHV0JwogICAgICB9KTsgLy8gQWRkIGJ1dHRvbgoKICAgICAgdmFyICRidXR0b24gPSBoKEJCdXR0b24sIHsKICAgICAgICBzdGF0aWNDbGFzczogJ2ItZm9ybS10YWdzLWJ1dHRvbiBweS0wJywKICAgICAgICBjbGFzczogewogICAgICAgICAgLy8gT25seSBzaG93IHRoZSBidXR0b24gaWYgdGhlIHRhZyBjYW4gYmUgYWRkZWQKICAgICAgICAgIC8vIFdlIHVzZSB0aGUgYGludmlzaWJsZWAgY2xhc3MgaW5zdGVhZCBvZiBub3QgcmVuZGVyaW5nCiAgICAgICAgICAvLyB0aGUgYnV0dG9uLCBzbyB0aGF0IHdlIG1haW50YWluIGxheW91dCB0byBwcmV2ZW50CiAgICAgICAgICAvLyB0aGUgdXNlciBpbnB1dCBmcm9tIGp1bXBpbmcgYXJvdW5kCiAgICAgICAgICBpbnZpc2libGU6IGRpc2FibGVBZGRCdXR0b24KICAgICAgICB9LAogICAgICAgIHN0eWxlOiB7CiAgICAgICAgICBmb250U2l6ZTogJzkwJScKICAgICAgICB9LAogICAgICAgIHByb3BzOiB7CiAgICAgICAgICBkaXNhYmxlZDogZGlzYWJsZUFkZEJ1dHRvbiB8fCBpc0xpbWl0UmVhY2hlZCwKICAgICAgICAgIHZhcmlhbnQ6IGFkZEJ1dHRvblZhcmlhbnQKICAgICAgICB9LAogICAgICAgIG9uOiB7CiAgICAgICAgICBjbGljazogZnVuY3Rpb24gY2xpY2soKSB7CiAgICAgICAgICAgIHJldHVybiBhZGRUYWcoKTsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHJlZjogJ2J1dHRvbicKICAgICAgfSwgW3RoaXMubm9ybWFsaXplU2xvdChTTE9UX05BTUVfQUREX0JVVFRPTl9URVhUKSB8fCBhZGRCdXR0b25UZXh0XSk7IC8vIElEIG9mIHRoZSB0YWdzICsgaW5wdXQgYDx1bD5gIGxpc3QKICAgICAgLy8gTm90ZSB3ZSBjb3VsZCBjb25jYXRlbmF0ZSBgaW5wdXRBdHRycy5pZGAgd2l0aCAnX190YWdfbGlzdF9fJwogICAgICAvLyBidXQgYGlucHV0SWRgIG1heSBiZSBgbnVsbGAgdW50aWwgYWZ0ZXIgbW91bnQKICAgICAgLy8gYHNhZmVJZCgpYCByZXR1cm5zIGBudWxsYCwgaWYgbm8gdXNlciBwcm92aWRlZCBJRCwKICAgICAgLy8gdW50aWwgYWZ0ZXIgbW91bnQgd2hlbiBhIHVuaXF1ZSBJRCBpcyBnZW5lcmF0ZWQKCiAgICAgIHZhciB0YWdMaXN0SWQgPSB0aGlzLnNhZmVJZCgnX190YWdfbGlzdF9fJyk7CiAgICAgIHZhciAkZmllbGQgPSBoKCdsaScsIHsKICAgICAgICBzdGF0aWNDbGFzczogJ2ItZnJvbS10YWdzLWZpZWxkIGZsZXgtZ3Jvdy0xJywKICAgICAgICBhdHRyczogewogICAgICAgICAgcm9sZTogJ25vbmUnLAogICAgICAgICAgJ2FyaWEtbGl2ZSc6ICdvZmYnLAogICAgICAgICAgJ2FyaWEtY29udHJvbHMnOiB0YWdMaXN0SWQKICAgICAgICB9LAogICAgICAgIGtleTogJ3RhZ3NfZmllbGQnCiAgICAgIH0sIFtoKCdkaXYnLCB7CiAgICAgICAgc3RhdGljQ2xhc3M6ICdkLWZsZXgnLAogICAgICAgIGF0dHJzOiB7CiAgICAgICAgICByb2xlOiAnZ3JvdXAnCiAgICAgICAgfQogICAgICB9LCBbJGlucHV0LCAkYnV0dG9uXSldKTsgLy8gV3JhcCBpbiBhbiB1bm9yZGVyZWQgbGlzdCBlbGVtZW50ICh3ZSB1c2UgYSBsaXN0IGZvciBhY2Nlc3NpYmlsaXR5KQoKICAgICAgdmFyICR1bCA9IGgoJ3VsJywgewogICAgICAgIHN0YXRpY0NsYXNzOiAnYi1mb3JtLXRhZ3MtbGlzdCBsaXN0LXVuc3R5bGVkIG1iLTAgZC1mbGV4IGZsZXgtd3JhcCBhbGlnbi1pdGVtcy1jZW50ZXInLAogICAgICAgIGF0dHJzOiB7CiAgICAgICAgICBpZDogdGFnTGlzdElkCiAgICAgICAgfSwKICAgICAgICBrZXk6ICd0YWdzX2xpc3QnCiAgICAgIH0sIFskdGFncywgJGZpZWxkXSk7IC8vIEFzc2VtYmxlIHRoZSBmZWVkYmFjawoKICAgICAgdmFyICRmZWVkYmFjayA9IGgoKTsKCiAgICAgIGlmIChpbnZhbGlkVGFnVGV4dCB8fCBkdXBsaWNhdGVUYWdUZXh0IHx8IGxpbWl0VGFnc1RleHQpIHsKICAgICAgICAvLyBBZGQgYW4gYXJpYSBsaXZlIHJlZ2lvbiBmb3IgdGhlIGludmFsaWQvZHVwbGljYXRlIHRhZwogICAgICAgIC8vIG1lc3NhZ2VzIGlmIHRoZSB1c2VyIGhhcyBub3QgZGlzYWJsZWQgdGhlIG1lc3NhZ2VzCiAgICAgICAgdmFyIGpvaW5lciA9IHRoaXMuY29tcHV0ZWRKb2luZXI7IC8vIEludmFsaWQgdGFnIGZlZWRiYWNrIGlmIG5lZWRlZCAoZXJyb3IpCgogICAgICAgIHZhciAkaW52YWxpZCA9IGgoKTsKCiAgICAgICAgaWYgKGludmFsaWRGZWVkYmFja0lkKSB7CiAgICAgICAgICAkaW52YWxpZCA9IGgoQkZvcm1JbnZhbGlkRmVlZGJhY2ssIHsKICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICBpZDogaW52YWxpZEZlZWRiYWNrSWQsCiAgICAgICAgICAgICAgZm9yY2VTaG93OiB0cnVlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGtleTogJ3RhZ3NfaW52YWxpZF9mZWVkYmFjaycKICAgICAgICAgIH0sIFt0aGlzLmludmFsaWRUYWdUZXh0LCAnOiAnLCB0aGlzLmludmFsaWRUYWdzLmpvaW4oam9pbmVyKV0pOwogICAgICAgIH0gLy8gRHVwbGljYXRlIHRhZyBmZWVkYmFjayBpZiBuZWVkZWQgKHdhcm5pbmcsIG5vdCBlcnJvcikKCgogICAgICAgIHZhciAkZHVwbGljYXRlID0gaCgpOwoKICAgICAgICBpZiAoZHVwbGljYXRlRmVlZGJhY2tJZCkgewogICAgICAgICAgJGR1cGxpY2F0ZSA9IGgoQkZvcm1UZXh0LCB7CiAgICAgICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgICAgaWQ6IGR1cGxpY2F0ZUZlZWRiYWNrSWQKICAgICAgICAgICAgfSwKICAgICAgICAgICAga2V5OiAndGFnc19kdXBsaWNhdGVfZmVlZGJhY2snCiAgICAgICAgICB9LCBbdGhpcy5kdXBsaWNhdGVUYWdUZXh0LCAnOiAnLCB0aGlzLmR1cGxpY2F0ZVRhZ3Muam9pbihqb2luZXIpXSk7CiAgICAgICAgfSAvLyBMaW1pdCB0YWdzIGZlZWRiYWNrIGlmIG5lZWRlZCAod2FybmluZywgbm90IGVycm9yKQoKCiAgICAgICAgdmFyICRsaW1pdCA9IGgoKTsKCiAgICAgICAgaWYgKGxpbWl0RmVlZGJhY2tJZCkgewogICAgICAgICAgJGxpbWl0ID0gaChCRm9ybVRleHQsIHsKICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICBpZDogbGltaXRGZWVkYmFja0lkCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGtleTogJ3RhZ3NfbGltaXRfZmVlZGJhY2snCiAgICAgICAgICB9LCBbbGltaXRUYWdzVGV4dF0pOwogICAgICAgIH0KCiAgICAgICAgJGZlZWRiYWNrID0gaCgnZGl2JywgewogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgJ2FyaWEtbGl2ZSc6ICdwb2xpdGUnLAogICAgICAgICAgICAnYXJpYS1hdG9taWMnOiAndHJ1ZScKICAgICAgICAgIH0sCiAgICAgICAgICBrZXk6ICd0YWdzX2ZlZWRiYWNrJwogICAgICAgIH0sIFskaW52YWxpZCwgJGR1cGxpY2F0ZSwgJGxpbWl0XSk7CiAgICAgIH0gLy8gUmV0dXJuIHRoZSBjb250ZW50CgoKICAgICAgcmV0dXJuIFskdWwsICRmZWVkYmFja107CiAgICB9CiAgfSwKICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihoKSB7CiAgICB2YXIgbmFtZSA9IHRoaXMubmFtZSwKICAgICAgICBkaXNhYmxlZCA9IHRoaXMuZGlzYWJsZWQsCiAgICAgICAgcmVxdWlyZWQgPSB0aGlzLnJlcXVpcmVkLAogICAgICAgIGZvcm0gPSB0aGlzLmZvcm0sCiAgICAgICAgdGFncyA9IHRoaXMudGFncywKICAgICAgICBjb21wdXRlZElucHV0SWQgPSB0aGlzLmNvbXB1dGVkSW5wdXRJZCwKICAgICAgICBoYXNGb2N1cyA9IHRoaXMuaGFzRm9jdXMsCiAgICAgICAgbm9PdXRlckZvY3VzID0gdGhpcy5ub091dGVyRm9jdXM7IC8vIFNjb3BlZCBzbG90IHByb3BlcnRpZXMKCiAgICB2YXIgc2NvcGUgPSBfb2JqZWN0U3ByZWFkKHsKICAgICAgLy8gQXJyYXkgb2YgdGFncyAoc2hhbGxvdyBjb3B5IHRvIHByZXZlbnQgbXV0YXRpb25zKQogICAgICB0YWdzOiB0YWdzLnNsaWNlKCksCiAgICAgIC8vIDxpbnB1dD4gdi1iaW5kOmlucHV0QXR0cnMKICAgICAgaW5wdXRBdHRyczogdGhpcy5jb21wdXRlZElucHV0QXR0cnMsCiAgICAgIC8vIFdlIGRvbid0IGluY2x1ZGUgdGhpcyBpbiB0aGUgYXR0cnMsIGFzIHVzZXJzIG1heSB3YW50IHRvIG92ZXJyaWRlIHRoaXMKICAgICAgaW5wdXRUeXBlOiB0aGlzLmNvbXB1dGVkSW5wdXRUeXBlLAogICAgICAvLyA8aW5wdXQ+IHYtb246aW5wdXRIYW5kbGVycwogICAgICBpbnB1dEhhbmRsZXJzOiB0aGlzLmNvbXB1dGVkSW5wdXRIYW5kbGVycywKICAgICAgLy8gTWV0aG9kcwogICAgICByZW1vdmVUYWc6IHRoaXMucmVtb3ZlVGFnLAogICAgICBhZGRUYWc6IHRoaXMuYWRkVGFnLAogICAgICByZXNldDogdGhpcy5yZXNldCwKICAgICAgLy8gPGlucHV0PiA6aWQ9ImlucHV0SWQiCiAgICAgIGlucHV0SWQ6IGNvbXB1dGVkSW5wdXRJZCwKICAgICAgLy8gSW52YWxpZC9EdXBsaWNhdGUgc3RhdGUgaW5mb3JtYXRpb24KICAgICAgaXNJbnZhbGlkOiB0aGlzLmhhc0ludmFsaWRUYWdzLAogICAgICBpbnZhbGlkVGFnczogdGhpcy5pbnZhbGlkVGFncy5zbGljZSgpLAogICAgICBpc0R1cGxpY2F0ZTogdGhpcy5oYXNEdXBsaWNhdGVUYWdzLAogICAgICBkdXBsaWNhdGVUYWdzOiB0aGlzLmR1cGxpY2F0ZVRhZ3Muc2xpY2UoKSwKICAgICAgaXNMaW1pdFJlYWNoZWQ6IHRoaXMuaXNMaW1pdFJlYWNoZWQsCiAgICAgIC8vIElmIHRoZSAnQWRkJyBidXR0b24gc2hvdWxkIGJlIGRpc2FibGVkCiAgICAgIGRpc2FibGVBZGRCdXR0b246IHRoaXMuZGlzYWJsZUFkZEJ1dHRvbgogICAgfSwgcGljayh0aGlzLiRwcm9wcywgWydhZGRCdXR0b25UZXh0JywgJ2FkZEJ1dHRvblZhcmlhbnQnLCAnZGlzYWJsZWQnLCAnZHVwbGljYXRlVGFnVGV4dCcsICdmb3JtJywgJ2lucHV0Q2xhc3MnLCAnaW52YWxpZFRhZ1RleHQnLCAnbGltaXQnLCAnbGltaXRUYWdzVGV4dCcsICdub1RhZ1JlbW92ZScsICdwbGFjZWhvbGRlcicsICdyZXF1aXJlZCcsICdzZXBhcmF0b3InLCAnc2l6ZScsICdzdGF0ZScsICd0YWdDbGFzcycsICd0YWdQaWxscycsICd0YWdSZW1vdmVMYWJlbCcsICd0YWdWYXJpYW50J10pKTsgLy8gR2VuZXJhdGUgdGhlIHVzZXIgaW50ZXJmYWNlCgoKICAgIHZhciAkY29udGVudCA9IHRoaXMubm9ybWFsaXplU2xvdChTTE9UX05BTUVfREVGQVVMVCwgc2NvcGUpIHx8IHRoaXMuZGVmYXVsdFJlbmRlcihzY29wZSk7IC8vIEdlbmVyYXRlIHRoZSBgYXJpYS1saXZlYCByZWdpb24gZm9yIHRoZSBjdXJyZW50IHZhbHVlKHMpCgogICAgdmFyICRvdXRwdXQgPSBoKCdvdXRwdXQnLCB7CiAgICAgIHN0YXRpY0NsYXNzOiAnc3Itb25seScsCiAgICAgIGF0dHJzOiB7CiAgICAgICAgaWQ6IHRoaXMuc2FmZUlkKCdfX3NlbGVjdGVkX3RhZ3NfXycpLAogICAgICAgIHJvbGU6ICdzdGF0dXMnLAogICAgICAgIGZvcjogY29tcHV0ZWRJbnB1dElkLAogICAgICAgICdhcmlhLWxpdmUnOiBoYXNGb2N1cyA/ICdwb2xpdGUnIDogJ29mZicsCiAgICAgICAgJ2FyaWEtYXRvbWljJzogJ3RydWUnLAogICAgICAgICdhcmlhLXJlbGV2YW50JzogJ2FkZGl0aW9ucyB0ZXh0JwogICAgICB9CiAgICB9LCB0aGlzLnRhZ3Muam9pbignLCAnKSk7IC8vIFJlbW92ZWQgdGFnIGxpdmUgcmVnaW9uCgogICAgdmFyICRyZW1vdmVkID0gaCgnZGl2JywgewogICAgICBzdGF0aWNDbGFzczogJ3NyLW9ubHknLAogICAgICBhdHRyczogewogICAgICAgIGlkOiB0aGlzLnNhZmVJZCgnX19yZW1vdmVkX3RhZ3NfXycpLAogICAgICAgIHJvbGU6ICdzdGF0dXMnLAogICAgICAgICdhcmlhLWxpdmUnOiBoYXNGb2N1cyA/ICdhc3NlcnRpdmUnIDogJ29mZicsCiAgICAgICAgJ2FyaWEtYXRvbWljJzogJ3RydWUnCiAgICAgIH0KICAgIH0sIHRoaXMucmVtb3ZlZFRhZ3MubGVuZ3RoID4gMCA/ICIoIi5jb25jYXQodGhpcy50YWdSZW1vdmVkTGFiZWwsICIpICIpLmNvbmNhdCh0aGlzLnJlbW92ZWRUYWdzLmpvaW4oJywgJykpIDogJycpOyAvLyBBZGQgaGlkZGVuIGlucHV0cyBmb3IgZm9ybSBzdWJtaXNzaW9uCgogICAgdmFyICRoaWRkZW4gPSBoKCk7CgogICAgaWYgKG5hbWUgJiYgIWRpc2FibGVkKSB7CiAgICAgIC8vIFdlIGFkZCBoaWRkZW4gaW5wdXRzIGZvciBlYWNoIHRhZyBpZiBhIG5hbWUgaXMgcHJvdmlkZWQKICAgICAgLy8gV2hlbiB0aGVyZSBhcmUgY3VycmVudGx5IG5vIHRhZ3MsIGEgdmlzdWFsbHkgaGlkZGVuIGlucHV0CiAgICAgIC8vIHdpdGggZW1wdHkgdmFsdWUgaXMgcmVuZGVyZWQgZm9yIHByb3BlciByZXF1aXJlZCBoYW5kbGluZwogICAgICB2YXIgaGFzVGFncyA9IHRhZ3MubGVuZ3RoID4gMDsKICAgICAgJGhpZGRlbiA9IChoYXNUYWdzID8gdGFncyA6IFsnJ10pLm1hcChmdW5jdGlvbiAodGFnKSB7CiAgICAgICAgcmV0dXJuIGgoJ2lucHV0JywgewogICAgICAgICAgY2xhc3M6IHsKICAgICAgICAgICAgJ3NyLW9ubHknOiAhaGFzVGFncwogICAgICAgICAgfSwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgIHR5cGU6IGhhc1RhZ3MgPyAnaGlkZGVuJyA6ICd0ZXh0JywKICAgICAgICAgICAgdmFsdWU6IHRhZywKICAgICAgICAgICAgcmVxdWlyZWQ6IHJlcXVpcmVkLAogICAgICAgICAgICBuYW1lOiBuYW1lLAogICAgICAgICAgICBmb3JtOiBmb3JtCiAgICAgICAgICB9LAogICAgICAgICAga2V5OiAidGFnX2lucHV0XyIuY29uY2F0KHRhZykKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9IC8vIFJldHVybiB0aGUgcmVuZGVyZWQgb3V0cHV0CgoKICAgIHJldHVybiBoKCdkaXYnLCB7CiAgICAgIHN0YXRpY0NsYXNzOiAnYi1mb3JtLXRhZ3MgZm9ybS1jb250cm9sIGgtYXV0bycsCiAgICAgIGNsYXNzOiBbewogICAgICAgIGZvY3VzOiBoYXNGb2N1cyAmJiAhbm9PdXRlckZvY3VzICYmICFkaXNhYmxlZCwKICAgICAgICBkaXNhYmxlZDogZGlzYWJsZWQKICAgICAgfSwgdGhpcy5zaXplRm9ybUNsYXNzLCB0aGlzLnN0YXRlQ2xhc3NdLAogICAgICBhdHRyczogewogICAgICAgIGlkOiB0aGlzLnNhZmVJZCgpLAogICAgICAgIHJvbGU6ICdncm91cCcsCiAgICAgICAgdGFiaW5kZXg6IGRpc2FibGVkIHx8IG5vT3V0ZXJGb2N1cyA/IG51bGwgOiAnLTEnLAogICAgICAgICdhcmlhLWRlc2NyaWJlZGJ5JzogdGhpcy5zYWZlSWQoJ19fc2VsZWN0ZWRfdGFnc19fJykKICAgICAgfSwKICAgICAgb246IHsKICAgICAgICBjbGljazogdGhpcy5vbkNsaWNrLAogICAgICAgIGZvY3VzaW46IHRoaXMub25Gb2N1c2luLAogICAgICAgIGZvY3Vzb3V0OiB0aGlzLm9uRm9jdXNvdXQKICAgICAgfQogICAgfSwgWyRvdXRwdXQsICRyZW1vdmVkLCAkY29udGVudCwgJGhpZGRlbl0pOwogIH0KfSk7"},{"version":3,"sources":["/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/bootstrap-vue/esm/components/form-tags/form-tags.js"],"names":["_watch","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","Array","from","test","iter","Symbol","iterator","isArray","len","length","i","arr2","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","arguments","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","configurable","writable","Vue","NAME_FORM_TAGS","EVENT_NAME_TAG_STATE","EVENT_OPTIONS_PASSIVE","HOOK_EVENT_NAME_BEFORE_DESTROY","CODE_BACKSPACE","CODE_DELETE","CODE_ENTER","PROP_TYPE_ARRAY","PROP_TYPE_ARRAY_OBJECT_STRING","PROP_TYPE_ARRAY_STRING","PROP_TYPE_BOOLEAN","PROP_TYPE_FUNCTION","PROP_TYPE_NUMBER","PROP_TYPE_OBJECT","PROP_TYPE_STRING","RX_SPACES","SLOT_NAME_DEFAULT","SLOT_NAME_ADD_BUTTON_TEXT","arrayIncludes","concat","cssEscape","attemptBlur","attemptFocus","closest","isActiveElement","matches","requestAF","select","eventOn","eventOff","stopEvent","identity","isEvent","isNumber","isString","looseEqual","makeModelMixin","pick","sortKeys","hasPropFunction","makeProp","makePropsConfigurable","escapeRegExp","trim","trimLeft","formControlMixin","props","formControlProps","formSizeMixin","formSizeProps","formStateMixin","formStateProps","idMixin","idProps","normalizeSlotMixin","BButton","BFormInvalidFeedback","BFormText","BFormTag","_makeModelMixin","type","defaultValue","modelMixin","mixin","modelProps","MODEL_PROP_NAME","prop","MODEL_EVENT_NAME","event","TYPES","DEFAULT_INPUT_FOCUS_SELECTOR","join","escapeRegExpChars","str","replace","cleanTags","tags","map","tag","index","indexOf","processEventValue","cleanTagsState","all","valid","invalid","duplicate","addButtonText","addButtonVariant","addOnChange","duplicateTagText","ignoreInputFocusSelector","inputAttrs","inputClass","inputId","inputType","invalidTagText","limit","limitTagsText","noAddOnEnter","noOuterFocus","noTagRemove","placeholder","removeOnDelete","separator","tagClass","tagPills","tagRemoveLabel","tagRemovedLabel","tagValidator","tagVariant","BFormTags","extend","mixins","data","hasFocus","newTag","removedTags","tagsState","computed","computedInputId","safeId","computedInputType","computedInputAttrs","disabled","form","id","computedInputHandlers","input","onInputInput","change","onInputChange","keydown","onInputKeydown","reset","computedSeparator","computedSeparatorRegExp","RegExp","computedJoiner","joiner","charAt","computeIgnoreInputFocusSelector","disableAddButton","_this","splitTags","some","t","validateTag","duplicateTags","hasDuplicateTags","invalidTags","hasInvalidTags","isLimitReached","watch","newValue","oldValue","$emit","old","created","mounted","_this2","$form","$el","$on","methods","addTag","parsed","parseTags","getInput","invalidAndDuplicates","focus","removeTag","_this3","$nextTick","_this4","composing","separatorRe","keyCode","propagation","onClick","_this5","ignoreFocusSelector","onFocusin","onFocusout","handleAutofocus","_this6","autofocus","blur","split","_this7","defaultRender","_ref","inputHandlers","isDuplicate","isInvalid","h","$createElement","$tags","class","noRemove","pill","removeLabel","title","variant","on","remove","invalidFeedbackId","duplicateFeedbackId","limitFeedbackId","ariaDescribedby","$input","staticClass","style","outline","minWidth","attrs","domProps","directives","ref","$button","invisible","fontSize","click","normalizeSlot","tagListId","$field","role","$ul","$feedback","$invalid","forceShow","$duplicate","$limit","render","required","scope","$props","$content","$output","for","$removed","$hidden","hasTags","sizeFormClass","stateClass","tabindex","focusin","focusout"],"mappings":"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","sourcesContent":["var _watch;\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// Tagged input form control\n// Based loosely on https://adamwathan.me/renderless-components-in-vuejs/\nimport { Vue } from '../../vue';\nimport { NAME_FORM_TAGS } from '../../constants/components';\nimport { EVENT_NAME_TAG_STATE, EVENT_OPTIONS_PASSIVE, HOOK_EVENT_NAME_BEFORE_DESTROY } from '../../constants/events';\nimport { CODE_BACKSPACE, CODE_DELETE, CODE_ENTER } from '../../constants/key-codes';\nimport { PROP_TYPE_ARRAY, PROP_TYPE_ARRAY_OBJECT_STRING, PROP_TYPE_ARRAY_STRING, PROP_TYPE_BOOLEAN, PROP_TYPE_FUNCTION, PROP_TYPE_NUMBER, PROP_TYPE_OBJECT, PROP_TYPE_STRING } from '../../constants/props';\nimport { RX_SPACES } from '../../constants/regex';\nimport { SLOT_NAME_DEFAULT, SLOT_NAME_ADD_BUTTON_TEXT } from '../../constants/slots';\nimport { arrayIncludes, concat } from '../../utils/array';\nimport { cssEscape } from '../../utils/css-escape';\nimport { attemptBlur, attemptFocus, closest, isActiveElement, matches, requestAF, select } from '../../utils/dom';\nimport { eventOn, eventOff, stopEvent } from '../../utils/events';\nimport { identity } from '../../utils/identity';\nimport { isEvent, isNumber, isString } from '../../utils/inspect';\nimport { looseEqual } from '../../utils/loose-equal';\nimport { makeModelMixin } from '../../utils/model';\nimport { pick, sortKeys } from '../../utils/object';\nimport { hasPropFunction, makeProp, makePropsConfigurable } from '../../utils/props';\nimport { escapeRegExp, toString, trim, trimLeft } from '../../utils/string';\nimport { formControlMixin, props as formControlProps } from '../../mixins/form-control';\nimport { formSizeMixin, props as formSizeProps } from '../../mixins/form-size';\nimport { formStateMixin, props as formStateProps } from '../../mixins/form-state';\nimport { idMixin, props as idProps } from '../../mixins/id';\nimport { normalizeSlotMixin } from '../../mixins/normalize-slot';\nimport { BButton } from '../button/button';\nimport { BFormInvalidFeedback } from '../form/form-invalid-feedback';\nimport { BFormText } from '../form/form-text';\nimport { BFormTag } from './form-tag'; // --- Constants ---\n\nvar _makeModelMixin = makeModelMixin('value', {\n  type: PROP_TYPE_ARRAY,\n  defaultValue: []\n}),\n    modelMixin = _makeModelMixin.mixin,\n    modelProps = _makeModelMixin.props,\n    MODEL_PROP_NAME = _makeModelMixin.prop,\n    MODEL_EVENT_NAME = _makeModelMixin.event; // Supported input types (for built in input)\n\n\nvar TYPES = ['text', 'email', 'tel', 'url', 'number']; // Default ignore input focus selector\n\nvar DEFAULT_INPUT_FOCUS_SELECTOR = ['.b-form-tag', 'button', 'input', 'select'].join(' '); // --- Helper methods ---\n// Escape special chars in string and replace\n// contiguous spaces with a whitespace match\n\nvar escapeRegExpChars = function escapeRegExpChars(str) {\n  return escapeRegExp(str).replace(RX_SPACES, '\\\\s');\n}; // Remove leading/trailing spaces from array of tags and remove duplicates\n\n\nvar cleanTags = function cleanTags(tags) {\n  return concat(tags).map(function (tag) {\n    return trim(toString(tag));\n  }).filter(function (tag, index, arr) {\n    return tag.length > 0 && arr.indexOf(tag) === index;\n  });\n}; // Processes an input/change event, normalizing string or event argument\n\n\nvar processEventValue = function processEventValue(event) {\n  return isString(event) ? event : isEvent(event) ? event.target.value || '' : '';\n}; // Returns a fresh empty `tagsState` object\n\n\nvar cleanTagsState = function cleanTagsState() {\n  return {\n    all: [],\n    valid: [],\n    invalid: [],\n    duplicate: []\n  };\n}; // --- Props ---\n\n\nvar props = makePropsConfigurable(sortKeys(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({}, idProps), modelProps), formControlProps), formSizeProps), formStateProps), {}, {\n  addButtonText: makeProp(PROP_TYPE_STRING, 'Add'),\n  addButtonVariant: makeProp(PROP_TYPE_STRING, 'outline-secondary'),\n  // Enable change event triggering tag addition\n  // Handy if using <select> as the input\n  addOnChange: makeProp(PROP_TYPE_BOOLEAN, false),\n  duplicateTagText: makeProp(PROP_TYPE_STRING, 'Duplicate tag(s)'),\n  // Disable the input focus behavior when clicking\n  // on element matching the selector (or selectors)\n  ignoreInputFocusSelector: makeProp(PROP_TYPE_ARRAY_STRING, DEFAULT_INPUT_FOCUS_SELECTOR),\n  // Additional attributes to add to the input element\n  inputAttrs: makeProp(PROP_TYPE_OBJECT, {}),\n  inputClass: makeProp(PROP_TYPE_ARRAY_OBJECT_STRING),\n  inputId: makeProp(PROP_TYPE_STRING),\n  inputType: makeProp(PROP_TYPE_STRING, 'text', function (value) {\n    return arrayIncludes(TYPES, value);\n  }),\n  invalidTagText: makeProp(PROP_TYPE_STRING, 'Invalid tag(s)'),\n  limit: makeProp(PROP_TYPE_NUMBER),\n  limitTagsText: makeProp(PROP_TYPE_STRING, 'Tag limit reached'),\n  // Disable ENTER key from triggering tag addition\n  noAddOnEnter: makeProp(PROP_TYPE_BOOLEAN, false),\n  // Disable the focus ring on the root element\n  noOuterFocus: makeProp(PROP_TYPE_BOOLEAN, false),\n  noTagRemove: makeProp(PROP_TYPE_BOOLEAN, false),\n  placeholder: makeProp(PROP_TYPE_STRING, 'Add tag...'),\n  // Enable deleting last tag in list when CODE_BACKSPACE is\n  // pressed and input is empty\n  removeOnDelete: makeProp(PROP_TYPE_BOOLEAN, false),\n  // Character (or characters) that trigger adding tags\n  separator: makeProp(PROP_TYPE_ARRAY_STRING),\n  tagClass: makeProp(PROP_TYPE_ARRAY_OBJECT_STRING),\n  tagPills: makeProp(PROP_TYPE_BOOLEAN, false),\n  tagRemoveLabel: makeProp(PROP_TYPE_STRING, 'Remove tag'),\n  tagRemovedLabel: makeProp(PROP_TYPE_STRING, 'Tag removed'),\n  tagValidator: makeProp(PROP_TYPE_FUNCTION),\n  tagVariant: makeProp(PROP_TYPE_STRING, 'secondary')\n})), NAME_FORM_TAGS); // --- Main component ---\n// @vue/component\n\nexport var BFormTags = /*#__PURE__*/Vue.extend({\n  name: NAME_FORM_TAGS,\n  mixins: [idMixin, modelMixin, formControlMixin, formSizeMixin, formStateMixin, normalizeSlotMixin],\n  props: props,\n  data: function data() {\n    return {\n      hasFocus: false,\n      newTag: '',\n      tags: [],\n      // Tags that were removed\n      removedTags: [],\n      // Populated when tags are parsed\n      tagsState: cleanTagsState()\n    };\n  },\n  computed: {\n    computedInputId: function computedInputId() {\n      return this.inputId || this.safeId('__input__');\n    },\n    computedInputType: function computedInputType() {\n      // We only allow certain types\n      return arrayIncludes(TYPES, this.inputType) ? this.inputType : 'text';\n    },\n    computedInputAttrs: function computedInputAttrs() {\n      var disabled = this.disabled,\n          form = this.form;\n      return _objectSpread(_objectSpread({}, this.inputAttrs), {}, {\n        // Must have attributes\n        id: this.computedInputId,\n        value: this.newTag,\n        disabled: disabled,\n        form: form\n      });\n    },\n    computedInputHandlers: function computedInputHandlers() {\n      return {\n        input: this.onInputInput,\n        change: this.onInputChange,\n        keydown: this.onInputKeydown,\n        reset: this.reset\n      };\n    },\n    computedSeparator: function computedSeparator() {\n      // Merge the array into a string\n      return concat(this.separator).filter(isString).filter(identity).join('');\n    },\n    computedSeparatorRegExp: function computedSeparatorRegExp() {\n      // We use a computed prop here to precompile the RegExp\n      // The RegExp is a character class RE in the form of `/[abc]+/`\n      // where a, b, and c are the valid separator characters\n      // -> `tags = str.split(/[abc]+/).filter(t => t)`\n      var separator = this.computedSeparator;\n      return separator ? new RegExp(\"[\".concat(escapeRegExpChars(separator), \"]+\")) : null;\n    },\n    computedJoiner: function computedJoiner() {\n      // When tag(s) are invalid or duplicate, we leave them\n      // in the input so that the user can see them\n      // If there are more than one tag in the input, we use the\n      // first separator character as the separator in the input\n      // We append a space if the first separator is not a space\n      var joiner = this.computedSeparator.charAt(0);\n      return joiner !== ' ' ? \"\".concat(joiner, \" \") : joiner;\n    },\n    computeIgnoreInputFocusSelector: function computeIgnoreInputFocusSelector() {\n      // Normalize to an single selector with selectors separated by `,`\n      return concat(this.ignoreInputFocusSelector).filter(identity).join(',').trim();\n    },\n    disableAddButton: function disableAddButton() {\n      var _this = this;\n\n      // If 'Add' button should be disabled\n      // If the input contains at least one tag that can\n      // be added, then the 'Add' button should be enabled\n      var newTag = trim(this.newTag);\n      return newTag === '' || !this.splitTags(newTag).some(function (t) {\n        return !arrayIncludes(_this.tags, t) && _this.validateTag(t);\n      });\n    },\n    duplicateTags: function duplicateTags() {\n      return this.tagsState.duplicate;\n    },\n    hasDuplicateTags: function hasDuplicateTags() {\n      return this.duplicateTags.length > 0;\n    },\n    invalidTags: function invalidTags() {\n      return this.tagsState.invalid;\n    },\n    hasInvalidTags: function hasInvalidTags() {\n      return this.invalidTags.length > 0;\n    },\n    isLimitReached: function isLimitReached() {\n      var limit = this.limit;\n      return isNumber(limit) && limit >= 0 && this.tags.length >= limit;\n    }\n  },\n  watch: (_watch = {}, _defineProperty(_watch, MODEL_PROP_NAME, function (newValue) {\n    this.tags = cleanTags(newValue);\n  }), _defineProperty(_watch, \"tags\", function tags(newValue, oldValue) {\n    // Update the `v-model` (if it differs from the value prop)\n    if (!looseEqual(newValue, this[MODEL_PROP_NAME])) {\n      this.$emit(MODEL_EVENT_NAME, newValue);\n    }\n\n    if (!looseEqual(newValue, oldValue)) {\n      newValue = concat(newValue).filter(identity);\n      oldValue = concat(oldValue).filter(identity);\n      this.removedTags = oldValue.filter(function (old) {\n        return !arrayIncludes(newValue, old);\n      });\n    }\n  }), _defineProperty(_watch, \"tagsState\", function tagsState(newValue, oldValue) {\n    // Emit a tag-state event when the `tagsState` object changes\n    if (!looseEqual(newValue, oldValue)) {\n      this.$emit(EVENT_NAME_TAG_STATE, newValue.valid, newValue.invalid, newValue.duplicate);\n    }\n  }), _watch),\n  created: function created() {\n    // We do this in created to make sure an input event emits\n    // if the cleaned tags are not equal to the value prop\n    this.tags = cleanTags(this[MODEL_PROP_NAME]);\n  },\n  mounted: function mounted() {\n    var _this2 = this;\n\n    // Listen for form reset events, to reset the tags input\n    var $form = closest('form', this.$el);\n\n    if ($form) {\n      eventOn($form, 'reset', this.reset, EVENT_OPTIONS_PASSIVE);\n      this.$on(HOOK_EVENT_NAME_BEFORE_DESTROY, function () {\n        eventOff($form, 'reset', _this2.reset, EVENT_OPTIONS_PASSIVE);\n      });\n    }\n  },\n  methods: {\n    addTag: function addTag(newTag) {\n      newTag = isString(newTag) ? newTag : this.newTag;\n      /* istanbul ignore next */\n\n      if (this.disabled || trim(newTag) === '' || this.isLimitReached) {\n        // Early exit\n        return;\n      }\n\n      var parsed = this.parseTags(newTag); // Add any new tags to the `tags` array, or if the\n      // array of `allTags` is empty, we clear the input\n\n      if (parsed.valid.length > 0 || parsed.all.length === 0) {\n        // Clear the user input element (and leave in any invalid/duplicate tag(s)\n\n        /* istanbul ignore if: full testing to be added later */\n        if (matches(this.getInput(), 'select')) {\n          // The following is needed to properly\n          // work with `<select>` elements\n          this.newTag = '';\n        } else {\n          var invalidAndDuplicates = [].concat(_toConsumableArray(parsed.invalid), _toConsumableArray(parsed.duplicate));\n          this.newTag = parsed.all.filter(function (tag) {\n            return arrayIncludes(invalidAndDuplicates, tag);\n          }).join(this.computedJoiner).concat(invalidAndDuplicates.length > 0 ? this.computedJoiner.charAt(0) : '');\n        }\n      }\n\n      if (parsed.valid.length > 0) {\n        // We add the new tags in one atomic operation\n        // to trigger reactivity once (instead of once per tag)\n        // We do this after we update the new tag input value\n        // `concat()` can be faster than array spread, when both args are arrays\n        this.tags = concat(this.tags, parsed.valid);\n      }\n\n      this.tagsState = parsed; // Attempt to re-focus the input (specifically for when using the Add\n      // button, as the button disappears after successfully adding a tag\n\n      this.focus();\n    },\n    removeTag: function removeTag(tag) {\n      var _this3 = this;\n\n      /* istanbul ignore next */\n      if (this.disabled) {\n        return;\n      } // TODO:\n      //   Add `onRemoveTag(tag)` user method, which if returns `false`\n      //   will prevent the tag from being removed (i.e. confirmation)\n      //   Or emit cancelable `BvEvent`\n\n\n      this.tags = this.tags.filter(function (t) {\n        return t !== tag;\n      }); // Return focus to the input (if possible)\n\n      this.$nextTick(function () {\n        _this3.focus();\n      });\n    },\n    reset: function reset() {\n      var _this4 = this;\n\n      this.newTag = '';\n      this.tags = [];\n      this.$nextTick(function () {\n        _this4.removedTags = [];\n        _this4.tagsState = cleanTagsState();\n      });\n    },\n    // --- Input element event handlers ---\n    onInputInput: function onInputInput(event) {\n      /* istanbul ignore next: hard to test composition events */\n      if (this.disabled || isEvent(event) && event.target.composing) {\n        // `event.target.composing` is set by Vue (`v-model` directive)\n        // https://github.com/vuejs/vue/blob/dev/src/platforms/web/runtime/directives/model.js\n        return;\n      }\n\n      var newTag = processEventValue(event);\n      var separatorRe = this.computedSeparatorRegExp;\n\n      if (this.newTag !== newTag) {\n        this.newTag = newTag;\n      } // We ignore leading whitespace for the following\n\n\n      newTag = trimLeft(newTag);\n\n      if (separatorRe && separatorRe.test(newTag.slice(-1))) {\n        // A trailing separator character was entered, so add the tag(s)\n        // Note: More than one tag on input event is possible via copy/paste\n        this.addTag();\n      } else {\n        // Validate (parse tags) on input event\n        this.tagsState = newTag === '' ? cleanTagsState() : this.parseTags(newTag);\n      }\n    },\n    onInputChange: function onInputChange(event) {\n      // Change is triggered on `<input>` blur, or `<select>` selected\n      // This event is opt-in\n      if (!this.disabled && this.addOnChange) {\n        var newTag = processEventValue(event);\n        /* istanbul ignore next */\n\n        if (this.newTag !== newTag) {\n          this.newTag = newTag;\n        }\n\n        this.addTag();\n      }\n    },\n    onInputKeydown: function onInputKeydown(event) {\n      // Early exit\n\n      /* istanbul ignore next */\n      if (this.disabled || !isEvent(event)) {\n        return;\n      }\n\n      var keyCode = event.keyCode;\n      var value = event.target.value || '';\n      /* istanbul ignore else: testing to be added later */\n\n      if (!this.noAddOnEnter && keyCode === CODE_ENTER) {\n        // Attempt to add the tag when user presses enter\n        stopEvent(event, {\n          propagation: false\n        });\n        this.addTag();\n      } else if (this.removeOnDelete && (keyCode === CODE_BACKSPACE || keyCode === CODE_DELETE) && value === '') {\n        // Remove the last tag if the user pressed backspace/delete and the input is empty\n        stopEvent(event, {\n          propagation: false\n        });\n        this.tags = this.tags.slice(0, -1);\n      }\n    },\n    // --- Wrapper event handlers ---\n    onClick: function onClick(event) {\n      var _this5 = this;\n\n      var ignoreFocusSelector = this.computeIgnoreInputFocusSelector;\n      var target = event.target;\n\n      if (!this.disabled && !isActiveElement(target) && (!ignoreFocusSelector || !closest(ignoreFocusSelector, target, true))) {\n        this.$nextTick(function () {\n          _this5.focus();\n        });\n      }\n    },\n    onFocusin: function onFocusin() {\n      this.hasFocus = true;\n    },\n    onFocusout: function onFocusout() {\n      this.hasFocus = false;\n    },\n    handleAutofocus: function handleAutofocus() {\n      var _this6 = this;\n\n      this.$nextTick(function () {\n        requestAF(function () {\n          if (_this6.autofocus && !_this6.disabled) {\n            _this6.focus();\n          }\n        });\n      });\n    },\n    // --- Public methods ---\n    focus: function focus() {\n      if (!this.disabled) {\n        attemptFocus(this.getInput());\n      }\n    },\n    blur: function blur() {\n      if (!this.disabled) {\n        attemptBlur(this.getInput());\n      }\n    },\n    // --- Private methods ---\n    splitTags: function splitTags(newTag) {\n      // Split the input into an array of raw tags\n      newTag = toString(newTag);\n      var separatorRe = this.computedSeparatorRegExp; // Split the tag(s) via the optional separator\n      // Normally only a single tag is provided, but copy/paste\n      // can enter multiple tags in a single operation\n\n      return (separatorRe ? newTag.split(separatorRe) : [newTag]).map(trim).filter(identity);\n    },\n    parseTags: function parseTags(newTag) {\n      var _this7 = this;\n\n      // Takes `newTag` value and parses it into `validTags`,\n      // `invalidTags`, and duplicate tags as an object\n      // Split the input into raw tags\n      var tags = this.splitTags(newTag); // Base results\n\n      var parsed = {\n        all: tags,\n        valid: [],\n        invalid: [],\n        duplicate: []\n      }; // Parse the unique tags\n\n      tags.forEach(function (tag) {\n        if (arrayIncludes(_this7.tags, tag) || arrayIncludes(parsed.valid, tag)) {\n          // Unique duplicate tags\n          if (!arrayIncludes(parsed.duplicate, tag)) {\n            parsed.duplicate.push(tag);\n          }\n        } else if (_this7.validateTag(tag)) {\n          // We only add unique/valid tags\n          parsed.valid.push(tag);\n        } else {\n          // Unique invalid tags\n          if (!arrayIncludes(parsed.invalid, tag)) {\n            parsed.invalid.push(tag);\n          }\n        }\n      });\n      return parsed;\n    },\n    validateTag: function validateTag(tag) {\n      var tagValidator = this.tagValidator;\n      return hasPropFunction(tagValidator) ? tagValidator(tag) : true;\n    },\n    getInput: function getInput() {\n      // Returns the input element reference (or null if not found)\n      // We need to escape `computedInputId` since it can be user-provided\n      return select(\"#\".concat(cssEscape(this.computedInputId)), this.$el);\n    },\n    // Default User Interface render\n    defaultRender: function defaultRender(_ref) {\n      var addButtonText = _ref.addButtonText,\n          addButtonVariant = _ref.addButtonVariant,\n          addTag = _ref.addTag,\n          disableAddButton = _ref.disableAddButton,\n          disabled = _ref.disabled,\n          duplicateTagText = _ref.duplicateTagText,\n          inputAttrs = _ref.inputAttrs,\n          inputClass = _ref.inputClass,\n          inputHandlers = _ref.inputHandlers,\n          inputType = _ref.inputType,\n          invalidTagText = _ref.invalidTagText,\n          isDuplicate = _ref.isDuplicate,\n          isInvalid = _ref.isInvalid,\n          isLimitReached = _ref.isLimitReached,\n          limitTagsText = _ref.limitTagsText,\n          noTagRemove = _ref.noTagRemove,\n          placeholder = _ref.placeholder,\n          removeTag = _ref.removeTag,\n          tagClass = _ref.tagClass,\n          tagPills = _ref.tagPills,\n          tagRemoveLabel = _ref.tagRemoveLabel,\n          tagVariant = _ref.tagVariant,\n          tags = _ref.tags;\n      var h = this.$createElement; // Make the list of tags\n\n      var $tags = tags.map(function (tag) {\n        tag = toString(tag);\n        return h(BFormTag, {\n          class: tagClass,\n          // `BFormTag` will auto generate an ID\n          // so we do not need to set the ID prop\n          props: {\n            disabled: disabled,\n            noRemove: noTagRemove,\n            pill: tagPills,\n            removeLabel: tagRemoveLabel,\n            tag: 'li',\n            title: tag,\n            variant: tagVariant\n          },\n          on: {\n            remove: function remove() {\n              return removeTag(tag);\n            }\n          },\n          key: \"tags_\".concat(tag)\n        }, tag);\n      }); // Feedback IDs if needed\n\n      var invalidFeedbackId = invalidTagText && isInvalid ? this.safeId('__invalid_feedback__') : null;\n      var duplicateFeedbackId = duplicateTagText && isDuplicate ? this.safeId('__duplicate_feedback__') : null;\n      var limitFeedbackId = limitTagsText && isLimitReached ? this.safeId('__limit_feedback__') : null; // Compute the `aria-describedby` attribute value\n\n      var ariaDescribedby = [inputAttrs['aria-describedby'], invalidFeedbackId, duplicateFeedbackId, limitFeedbackId].filter(identity).join(' '); // Input\n\n      var $input = h('input', {\n        staticClass: 'b-form-tags-input w-100 flex-grow-1 p-0 m-0 bg-transparent border-0',\n        class: inputClass,\n        style: {\n          outline: 0,\n          minWidth: '5rem'\n        },\n        attrs: _objectSpread(_objectSpread({}, inputAttrs), {}, {\n          'aria-describedby': ariaDescribedby || null,\n          type: inputType,\n          placeholder: placeholder || null\n        }),\n        domProps: {\n          value: inputAttrs.value\n        },\n        on: inputHandlers,\n        // Directive needed to get `event.target.composing` set (if needed)\n        directives: [{\n          name: 'model',\n          value: inputAttrs.value\n        }],\n        ref: 'input'\n      }); // Add button\n\n      var $button = h(BButton, {\n        staticClass: 'b-form-tags-button py-0',\n        class: {\n          // Only show the button if the tag can be added\n          // We use the `invisible` class instead of not rendering\n          // the button, so that we maintain layout to prevent\n          // the user input from jumping around\n          invisible: disableAddButton\n        },\n        style: {\n          fontSize: '90%'\n        },\n        props: {\n          disabled: disableAddButton || isLimitReached,\n          variant: addButtonVariant\n        },\n        on: {\n          click: function click() {\n            return addTag();\n          }\n        },\n        ref: 'button'\n      }, [this.normalizeSlot(SLOT_NAME_ADD_BUTTON_TEXT) || addButtonText]); // ID of the tags + input `<ul>` list\n      // Note we could concatenate `inputAttrs.id` with '__tag_list__'\n      // but `inputId` may be `null` until after mount\n      // `safeId()` returns `null`, if no user provided ID,\n      // until after mount when a unique ID is generated\n\n      var tagListId = this.safeId('__tag_list__');\n      var $field = h('li', {\n        staticClass: 'b-from-tags-field flex-grow-1',\n        attrs: {\n          role: 'none',\n          'aria-live': 'off',\n          'aria-controls': tagListId\n        },\n        key: 'tags_field'\n      }, [h('div', {\n        staticClass: 'd-flex',\n        attrs: {\n          role: 'group'\n        }\n      }, [$input, $button])]); // Wrap in an unordered list element (we use a list for accessibility)\n\n      var $ul = h('ul', {\n        staticClass: 'b-form-tags-list list-unstyled mb-0 d-flex flex-wrap align-items-center',\n        attrs: {\n          id: tagListId\n        },\n        key: 'tags_list'\n      }, [$tags, $field]); // Assemble the feedback\n\n      var $feedback = h();\n\n      if (invalidTagText || duplicateTagText || limitTagsText) {\n        // Add an aria live region for the invalid/duplicate tag\n        // messages if the user has not disabled the messages\n        var joiner = this.computedJoiner; // Invalid tag feedback if needed (error)\n\n        var $invalid = h();\n\n        if (invalidFeedbackId) {\n          $invalid = h(BFormInvalidFeedback, {\n            props: {\n              id: invalidFeedbackId,\n              forceShow: true\n            },\n            key: 'tags_invalid_feedback'\n          }, [this.invalidTagText, ': ', this.invalidTags.join(joiner)]);\n        } // Duplicate tag feedback if needed (warning, not error)\n\n\n        var $duplicate = h();\n\n        if (duplicateFeedbackId) {\n          $duplicate = h(BFormText, {\n            props: {\n              id: duplicateFeedbackId\n            },\n            key: 'tags_duplicate_feedback'\n          }, [this.duplicateTagText, ': ', this.duplicateTags.join(joiner)]);\n        } // Limit tags feedback if needed (warning, not error)\n\n\n        var $limit = h();\n\n        if (limitFeedbackId) {\n          $limit = h(BFormText, {\n            props: {\n              id: limitFeedbackId\n            },\n            key: 'tags_limit_feedback'\n          }, [limitTagsText]);\n        }\n\n        $feedback = h('div', {\n          attrs: {\n            'aria-live': 'polite',\n            'aria-atomic': 'true'\n          },\n          key: 'tags_feedback'\n        }, [$invalid, $duplicate, $limit]);\n      } // Return the content\n\n\n      return [$ul, $feedback];\n    }\n  },\n  render: function render(h) {\n    var name = this.name,\n        disabled = this.disabled,\n        required = this.required,\n        form = this.form,\n        tags = this.tags,\n        computedInputId = this.computedInputId,\n        hasFocus = this.hasFocus,\n        noOuterFocus = this.noOuterFocus; // Scoped slot properties\n\n    var scope = _objectSpread({\n      // Array of tags (shallow copy to prevent mutations)\n      tags: tags.slice(),\n      // <input> v-bind:inputAttrs\n      inputAttrs: this.computedInputAttrs,\n      // We don't include this in the attrs, as users may want to override this\n      inputType: this.computedInputType,\n      // <input> v-on:inputHandlers\n      inputHandlers: this.computedInputHandlers,\n      // Methods\n      removeTag: this.removeTag,\n      addTag: this.addTag,\n      reset: this.reset,\n      // <input> :id=\"inputId\"\n      inputId: computedInputId,\n      // Invalid/Duplicate state information\n      isInvalid: this.hasInvalidTags,\n      invalidTags: this.invalidTags.slice(),\n      isDuplicate: this.hasDuplicateTags,\n      duplicateTags: this.duplicateTags.slice(),\n      isLimitReached: this.isLimitReached,\n      // If the 'Add' button should be disabled\n      disableAddButton: this.disableAddButton\n    }, pick(this.$props, ['addButtonText', 'addButtonVariant', 'disabled', 'duplicateTagText', 'form', 'inputClass', 'invalidTagText', 'limit', 'limitTagsText', 'noTagRemove', 'placeholder', 'required', 'separator', 'size', 'state', 'tagClass', 'tagPills', 'tagRemoveLabel', 'tagVariant'])); // Generate the user interface\n\n\n    var $content = this.normalizeSlot(SLOT_NAME_DEFAULT, scope) || this.defaultRender(scope); // Generate the `aria-live` region for the current value(s)\n\n    var $output = h('output', {\n      staticClass: 'sr-only',\n      attrs: {\n        id: this.safeId('__selected_tags__'),\n        role: 'status',\n        for: computedInputId,\n        'aria-live': hasFocus ? 'polite' : 'off',\n        'aria-atomic': 'true',\n        'aria-relevant': 'additions text'\n      }\n    }, this.tags.join(', ')); // Removed tag live region\n\n    var $removed = h('div', {\n      staticClass: 'sr-only',\n      attrs: {\n        id: this.safeId('__removed_tags__'),\n        role: 'status',\n        'aria-live': hasFocus ? 'assertive' : 'off',\n        'aria-atomic': 'true'\n      }\n    }, this.removedTags.length > 0 ? \"(\".concat(this.tagRemovedLabel, \") \").concat(this.removedTags.join(', ')) : ''); // Add hidden inputs for form submission\n\n    var $hidden = h();\n\n    if (name && !disabled) {\n      // We add hidden inputs for each tag if a name is provided\n      // When there are currently no tags, a visually hidden input\n      // with empty value is rendered for proper required handling\n      var hasTags = tags.length > 0;\n      $hidden = (hasTags ? tags : ['']).map(function (tag) {\n        return h('input', {\n          class: {\n            'sr-only': !hasTags\n          },\n          attrs: {\n            type: hasTags ? 'hidden' : 'text',\n            value: tag,\n            required: required,\n            name: name,\n            form: form\n          },\n          key: \"tag_input_\".concat(tag)\n        });\n      });\n    } // Return the rendered output\n\n\n    return h('div', {\n      staticClass: 'b-form-tags form-control h-auto',\n      class: [{\n        focus: hasFocus && !noOuterFocus && !disabled,\n        disabled: disabled\n      }, this.sizeFormClass, this.stateClass],\n      attrs: {\n        id: this.safeId(),\n        role: 'group',\n        tabindex: disabled || noOuterFocus ? null : '-1',\n        'aria-describedby': this.safeId('__selected_tags__')\n      },\n      on: {\n        click: this.onClick,\n        focusin: this.onFocusin,\n        focusout: this.onFocusout\n      }\n    }, [$output, $removed, $content, $hidden]);\n  }\n});"]}]}