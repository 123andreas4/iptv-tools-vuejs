{"remainingRequest":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/thread-loader/dist/cjs.js!/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/babel-loader/lib/index.js!/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/bootstrap-vue/esm/components/form-tags/form-tags.js","dependencies":[{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/bootstrap-vue/esm/components/form-tags/form-tags.js","mtime":499162500000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZyb20uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuZGVzY3JpcHRpb24uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwoKdmFyIF93YXRjaDsKCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsKICByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7Cn0KCmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsKICBpZiAoIW8pIHJldHVybjsKICBpZiAodHlwZW9mIG8gPT09ICJzdHJpbmciKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsKICB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7CiAgaWYgKG4gPT09ICJPYmplY3QiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7CiAgaWYgKG4gPT09ICJNYXAiIHx8IG4gPT09ICJTZXQiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsKICBpZiAobiA9PT0gIkFyZ3VtZW50cyIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsKICBpZiAodHlwZW9mIFN5bWJvbCAhPT0gInVuZGVmaW5lZCIgJiYgU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChpdGVyKSkgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkoYXJyKTsKfQoKZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsKICBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsKCiAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7CiAgICBhcnIyW2ldID0gYXJyW2ldOwogIH0KCiAgcmV0dXJuIGFycjI7Cn0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgewogIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOwogICAgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgewogICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsKICAgIH0pOwogICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOwogIH0KCiAgcmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwoKICAgIGlmIChpICUgMikgewogICAgICBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsKICAgICAgfSk7CiAgICB9CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfSAvLyBUYWdnZWQgaW5wdXQgZm9ybSBjb250cm9sCi8vIEJhc2VkIGxvb3NlbHkgb24gaHR0cHM6Ly9hZGFtd2F0aGFuLm1lL3JlbmRlcmxlc3MtY29tcG9uZW50cy1pbi12dWVqcy8KCgppbXBvcnQgeyBWdWUgfSBmcm9tICcuLi8uLi92dWUnOwppbXBvcnQgeyBOQU1FX0ZPUk1fVEFHUyB9IGZyb20gJy4uLy4uL2NvbnN0YW50cy9jb21wb25lbnRzJzsKaW1wb3J0IHsgRVZFTlRfTkFNRV9UQUdfU1RBVEUsIEVWRU5UX09QVElPTlNfUEFTU0lWRSwgSE9PS19FVkVOVF9OQU1FX0JFRk9SRV9ERVNUUk9ZIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzL2V2ZW50cyc7CmltcG9ydCB7IENPREVfQkFDS1NQQUNFLCBDT0RFX0RFTEVURSwgQ09ERV9FTlRFUiB9IGZyb20gJy4uLy4uL2NvbnN0YW50cy9rZXktY29kZXMnOwppbXBvcnQgeyBQUk9QX1RZUEVfQVJSQVksIFBST1BfVFlQRV9BUlJBWV9PQkpFQ1RfU1RSSU5HLCBQUk9QX1RZUEVfQVJSQVlfU1RSSU5HLCBQUk9QX1RZUEVfQk9PTEVBTiwgUFJPUF9UWVBFX0ZVTkNUSU9OLCBQUk9QX1RZUEVfTlVNQkVSLCBQUk9QX1RZUEVfT0JKRUNULCBQUk9QX1RZUEVfU1RSSU5HIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzL3Byb3BzJzsKaW1wb3J0IHsgUlhfU1BBQ0VTIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzL3JlZ2V4JzsKaW1wb3J0IHsgU0xPVF9OQU1FX0RFRkFVTFQsIFNMT1RfTkFNRV9BRERfQlVUVE9OX1RFWFQgfSBmcm9tICcuLi8uLi9jb25zdGFudHMvc2xvdHMnOwppbXBvcnQgeyBhcnJheUluY2x1ZGVzLCBjb25jYXQgfSBmcm9tICcuLi8uLi91dGlscy9hcnJheSc7CmltcG9ydCB7IGNzc0VzY2FwZSB9IGZyb20gJy4uLy4uL3V0aWxzL2Nzcy1lc2NhcGUnOwppbXBvcnQgeyBhdHRlbXB0Qmx1ciwgYXR0ZW1wdEZvY3VzLCBjbG9zZXN0LCBpc0FjdGl2ZUVsZW1lbnQsIG1hdGNoZXMsIHJlcXVlc3RBRiwgc2VsZWN0IH0gZnJvbSAnLi4vLi4vdXRpbHMvZG9tJzsKaW1wb3J0IHsgZXZlbnRPbiwgZXZlbnRPZmYsIHN0b3BFdmVudCB9IGZyb20gJy4uLy4uL3V0aWxzL2V2ZW50cyc7CmltcG9ydCB7IGlkZW50aXR5IH0gZnJvbSAnLi4vLi4vdXRpbHMvaWRlbnRpdHknOwppbXBvcnQgeyBpc0V2ZW50LCBpc051bWJlciwgaXNTdHJpbmcgfSBmcm9tICcuLi8uLi91dGlscy9pbnNwZWN0JzsKaW1wb3J0IHsgbG9vc2VFcXVhbCB9IGZyb20gJy4uLy4uL3V0aWxzL2xvb3NlLWVxdWFsJzsKaW1wb3J0IHsgbWFrZU1vZGVsTWl4aW4gfSBmcm9tICcuLi8uLi91dGlscy9tb2RlbCc7CmltcG9ydCB7IHBpY2ssIHNvcnRLZXlzIH0gZnJvbSAnLi4vLi4vdXRpbHMvb2JqZWN0JzsKaW1wb3J0IHsgaGFzUHJvcEZ1bmN0aW9uLCBtYWtlUHJvcCwgbWFrZVByb3BzQ29uZmlndXJhYmxlIH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJvcHMnOwppbXBvcnQgeyBlc2NhcGVSZWdFeHAsIHRvU3RyaW5nLCB0cmltLCB0cmltTGVmdCB9IGZyb20gJy4uLy4uL3V0aWxzL3N0cmluZyc7CmltcG9ydCB7IGZvcm1Db250cm9sTWl4aW4sIHByb3BzIGFzIGZvcm1Db250cm9sUHJvcHMgfSBmcm9tICcuLi8uLi9taXhpbnMvZm9ybS1jb250cm9sJzsKaW1wb3J0IHsgZm9ybVNpemVNaXhpbiwgcHJvcHMgYXMgZm9ybVNpemVQcm9wcyB9IGZyb20gJy4uLy4uL21peGlucy9mb3JtLXNpemUnOwppbXBvcnQgeyBmb3JtU3RhdGVNaXhpbiwgcHJvcHMgYXMgZm9ybVN0YXRlUHJvcHMgfSBmcm9tICcuLi8uLi9taXhpbnMvZm9ybS1zdGF0ZSc7CmltcG9ydCB7IGlkTWl4aW4sIHByb3BzIGFzIGlkUHJvcHMgfSBmcm9tICcuLi8uLi9taXhpbnMvaWQnOwppbXBvcnQgeyBub3JtYWxpemVTbG90TWl4aW4gfSBmcm9tICcuLi8uLi9taXhpbnMvbm9ybWFsaXplLXNsb3QnOwppbXBvcnQgeyBCQnV0dG9uIH0gZnJvbSAnLi4vYnV0dG9uL2J1dHRvbic7CmltcG9ydCB7IEJGb3JtSW52YWxpZEZlZWRiYWNrIH0gZnJvbSAnLi4vZm9ybS9mb3JtLWludmFsaWQtZmVlZGJhY2snOwppbXBvcnQgeyBCRm9ybVRleHQgfSBmcm9tICcuLi9mb3JtL2Zvcm0tdGV4dCc7CmltcG9ydCB7IEJGb3JtVGFnIH0gZnJvbSAnLi9mb3JtLXRhZyc7IC8vIC0tLSBDb25zdGFudHMgLS0tCgp2YXIgX21ha2VNb2RlbE1peGluID0gbWFrZU1vZGVsTWl4aW4oJ3ZhbHVlJywgewogIHR5cGU6IFBST1BfVFlQRV9BUlJBWSwKICBkZWZhdWx0VmFsdWU6IFtdCn0pLAogICAgbW9kZWxNaXhpbiA9IF9tYWtlTW9kZWxNaXhpbi5taXhpbiwKICAgIG1vZGVsUHJvcHMgPSBfbWFrZU1vZGVsTWl4aW4ucHJvcHMsCiAgICBNT0RFTF9QUk9QX05BTUUgPSBfbWFrZU1vZGVsTWl4aW4ucHJvcCwKICAgIE1PREVMX0VWRU5UX05BTUUgPSBfbWFrZU1vZGVsTWl4aW4uZXZlbnQ7IC8vIFN1cHBvcnRlZCBpbnB1dCB0eXBlcyAoZm9yIGJ1aWx0IGluIGlucHV0KQoKCnZhciBUWVBFUyA9IFsndGV4dCcsICdlbWFpbCcsICd0ZWwnLCAndXJsJywgJ251bWJlciddOyAvLyBEZWZhdWx0IGlnbm9yZSBpbnB1dCBmb2N1cyBzZWxlY3RvcgoKdmFyIERFRkFVTFRfSU5QVVRfRk9DVVNfU0VMRUNUT1IgPSBbJy5iLWZvcm0tdGFnJywgJ2J1dHRvbicsICdpbnB1dCcsICdzZWxlY3QnXS5qb2luKCcgJyk7IC8vIC0tLSBIZWxwZXIgbWV0aG9kcyAtLS0KLy8gRXNjYXBlIHNwZWNpYWwgY2hhcnMgaW4gc3RyaW5nIGFuZCByZXBsYWNlCi8vIGNvbnRpZ3VvdXMgc3BhY2VzIHdpdGggYSB3aGl0ZXNwYWNlIG1hdGNoCgp2YXIgZXNjYXBlUmVnRXhwQ2hhcnMgPSBmdW5jdGlvbiBlc2NhcGVSZWdFeHBDaGFycyhzdHIpIHsKICByZXR1cm4gZXNjYXBlUmVnRXhwKHN0cikucmVwbGFjZShSWF9TUEFDRVMsICdcXHMnKTsKfTsgLy8gUmVtb3ZlIGxlYWRpbmcvdHJhaWxpbmcgc3BhY2VzIGZyb20gYXJyYXkgb2YgdGFncyBhbmQgcmVtb3ZlIGR1cGxpY2F0ZXMKCgp2YXIgY2xlYW5UYWdzID0gZnVuY3Rpb24gY2xlYW5UYWdzKHRhZ3MpIHsKICByZXR1cm4gY29uY2F0KHRhZ3MpLm1hcChmdW5jdGlvbiAodGFnKSB7CiAgICByZXR1cm4gdHJpbSh0b1N0cmluZyh0YWcpKTsKICB9KS5maWx0ZXIoZnVuY3Rpb24gKHRhZywgaW5kZXgsIGFycikgewogICAgcmV0dXJuIHRhZy5sZW5ndGggPiAwICYmIGFyci5pbmRleE9mKHRhZykgPT09IGluZGV4OwogIH0pOwp9OyAvLyBQcm9jZXNzZXMgYW4gaW5wdXQvY2hhbmdlIGV2ZW50LCBub3JtYWxpemluZyBzdHJpbmcgb3IgZXZlbnQgYXJndW1lbnQKCgp2YXIgcHJvY2Vzc0V2ZW50VmFsdWUgPSBmdW5jdGlvbiBwcm9jZXNzRXZlbnRWYWx1ZShldmVudCkgewogIHJldHVybiBpc1N0cmluZyhldmVudCkgPyBldmVudCA6IGlzRXZlbnQoZXZlbnQpID8gZXZlbnQudGFyZ2V0LnZhbHVlIHx8ICcnIDogJyc7Cn07IC8vIFJldHVybnMgYSBmcmVzaCBlbXB0eSBgdGFnc1N0YXRlYCBvYmplY3QKCgp2YXIgY2xlYW5UYWdzU3RhdGUgPSBmdW5jdGlvbiBjbGVhblRhZ3NTdGF0ZSgpIHsKICByZXR1cm4gewogICAgYWxsOiBbXSwKICAgIHZhbGlkOiBbXSwKICAgIGludmFsaWQ6IFtdLAogICAgZHVwbGljYXRlOiBbXQogIH07Cn07IC8vIC0tLSBQcm9wcyAtLS0KCgp2YXIgcHJvcHMgPSBtYWtlUHJvcHNDb25maWd1cmFibGUoc29ydEtleXMoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGlkUHJvcHMpLCBtb2RlbFByb3BzKSwgZm9ybUNvbnRyb2xQcm9wcyksIGZvcm1TaXplUHJvcHMpLCBmb3JtU3RhdGVQcm9wcyksIHt9LCB7CiAgYWRkQnV0dG9uVGV4dDogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORywgJ0FkZCcpLAogIGFkZEJ1dHRvblZhcmlhbnQ6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcsICdvdXRsaW5lLXNlY29uZGFyeScpLAogIC8vIEVuYWJsZSBjaGFuZ2UgZXZlbnQgdHJpZ2dlcmluZyB0YWcgYWRkaXRpb24KICAvLyBIYW5keSBpZiB1c2luZyA8c2VsZWN0PiBhcyB0aGUgaW5wdXQKICBhZGRPbkNoYW5nZTogbWFrZVByb3AoUFJPUF9UWVBFX0JPT0xFQU4sIGZhbHNlKSwKICBkdXBsaWNhdGVUYWdUZXh0OiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HLCAnRHVwbGljYXRlIHRhZyhzKScpLAogIC8vIERpc2FibGUgdGhlIGlucHV0IGZvY3VzIGJlaGF2aW9yIHdoZW4gY2xpY2tpbmcKICAvLyBvbiBlbGVtZW50IG1hdGNoaW5nIHRoZSBzZWxlY3RvciAob3Igc2VsZWN0b3JzKQogIGlnbm9yZUlucHV0Rm9jdXNTZWxlY3RvcjogbWFrZVByb3AoUFJPUF9UWVBFX0FSUkFZX1NUUklORywgREVGQVVMVF9JTlBVVF9GT0NVU19TRUxFQ1RPUiksCiAgLy8gQWRkaXRpb25hbCBhdHRyaWJ1dGVzIHRvIGFkZCB0byB0aGUgaW5wdXQgZWxlbWVudAogIGlucHV0QXR0cnM6IG1ha2VQcm9wKFBST1BfVFlQRV9PQkpFQ1QsIHt9KSwKICBpbnB1dENsYXNzOiBtYWtlUHJvcChQUk9QX1RZUEVfQVJSQVlfT0JKRUNUX1NUUklORyksCiAgaW5wdXRJZDogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORyksCiAgaW5wdXRUeXBlOiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HLCAndGV4dCcsIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgcmV0dXJuIGFycmF5SW5jbHVkZXMoVFlQRVMsIHZhbHVlKTsKICB9KSwKICBpbnZhbGlkVGFnVGV4dDogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORywgJ0ludmFsaWQgdGFnKHMpJyksCiAgbGltaXQ6IG1ha2VQcm9wKFBST1BfVFlQRV9OVU1CRVIpLAogIGxpbWl0VGFnc1RleHQ6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcsICdUYWcgbGltaXQgcmVhY2hlZCcpLAogIC8vIERpc2FibGUgRU5URVIga2V5IGZyb20gdHJpZ2dlcmluZyB0YWcgYWRkaXRpb24KICBub0FkZE9uRW50ZXI6IG1ha2VQcm9wKFBST1BfVFlQRV9CT09MRUFOLCBmYWxzZSksCiAgLy8gRGlzYWJsZSB0aGUgZm9jdXMgcmluZyBvbiB0aGUgcm9vdCBlbGVtZW50CiAgbm9PdXRlckZvY3VzOiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIG5vVGFnUmVtb3ZlOiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIHBsYWNlaG9sZGVyOiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HLCAnQWRkIHRhZy4uLicpLAogIC8vIEVuYWJsZSBkZWxldGluZyBsYXN0IHRhZyBpbiBsaXN0IHdoZW4gQ09ERV9CQUNLU1BBQ0UgaXMKICAvLyBwcmVzc2VkIGFuZCBpbnB1dCBpcyBlbXB0eQogIHJlbW92ZU9uRGVsZXRlOiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIC8vIENoYXJhY3RlciAob3IgY2hhcmFjdGVycykgdGhhdCB0cmlnZ2VyIGFkZGluZyB0YWdzCiAgc2VwYXJhdG9yOiBtYWtlUHJvcChQUk9QX1RZUEVfQVJSQVlfU1RSSU5HKSwKICB0YWdDbGFzczogbWFrZVByb3AoUFJPUF9UWVBFX0FSUkFZX09CSkVDVF9TVFJJTkcpLAogIHRhZ1BpbGxzOiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIHRhZ1JlbW92ZUxhYmVsOiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HLCAnUmVtb3ZlIHRhZycpLAogIHRhZ1JlbW92ZWRMYWJlbDogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORywgJ1RhZyByZW1vdmVkJyksCiAgdGFnVmFsaWRhdG9yOiBtYWtlUHJvcChQUk9QX1RZUEVfRlVOQ1RJT04pLAogIHRhZ1ZhcmlhbnQ6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcsICdzZWNvbmRhcnknKQp9KSksIE5BTUVfRk9STV9UQUdTKTsgLy8gLS0tIE1haW4gY29tcG9uZW50IC0tLQovLyBAdnVlL2NvbXBvbmVudAoKZXhwb3J0IHZhciBCRm9ybVRhZ3MgPSAvKiNfX1BVUkVfXyovVnVlLmV4dGVuZCh7CiAgbmFtZTogTkFNRV9GT1JNX1RBR1MsCiAgbWl4aW5zOiBbaWRNaXhpbiwgbW9kZWxNaXhpbiwgZm9ybUNvbnRyb2xNaXhpbiwgZm9ybVNpemVNaXhpbiwgZm9ybVN0YXRlTWl4aW4sIG5vcm1hbGl6ZVNsb3RNaXhpbl0sCiAgcHJvcHM6IHByb3BzLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBoYXNGb2N1czogZmFsc2UsCiAgICAgIG5ld1RhZzogJycsCiAgICAgIHRhZ3M6IFtdLAogICAgICAvLyBUYWdzIHRoYXQgd2VyZSByZW1vdmVkCiAgICAgIHJlbW92ZWRUYWdzOiBbXSwKICAgICAgLy8gUG9wdWxhdGVkIHdoZW4gdGFncyBhcmUgcGFyc2VkCiAgICAgIHRhZ3NTdGF0ZTogY2xlYW5UYWdzU3RhdGUoKQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBjb21wdXRlZElucHV0SWQ6IGZ1bmN0aW9uIGNvbXB1dGVkSW5wdXRJZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaW5wdXRJZCB8fCB0aGlzLnNhZmVJZCgnX19pbnB1dF9fJyk7CiAgICB9LAogICAgY29tcHV0ZWRJbnB1dFR5cGU6IGZ1bmN0aW9uIGNvbXB1dGVkSW5wdXRUeXBlKCkgewogICAgICAvLyBXZSBvbmx5IGFsbG93IGNlcnRhaW4gdHlwZXMKICAgICAgcmV0dXJuIGFycmF5SW5jbHVkZXMoVFlQRVMsIHRoaXMuaW5wdXRUeXBlKSA/IHRoaXMuaW5wdXRUeXBlIDogJ3RleHQnOwogICAgfSwKICAgIGNvbXB1dGVkSW5wdXRBdHRyczogZnVuY3Rpb24gY29tcHV0ZWRJbnB1dEF0dHJzKCkgewogICAgICB2YXIgZGlzYWJsZWQgPSB0aGlzLmRpc2FibGVkLAogICAgICAgICAgZm9ybSA9IHRoaXMuZm9ybTsKICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdGhpcy5pbnB1dEF0dHJzKSwge30sIHsKICAgICAgICAvLyBNdXN0IGhhdmUgYXR0cmlidXRlcwogICAgICAgIGlkOiB0aGlzLmNvbXB1dGVkSW5wdXRJZCwKICAgICAgICB2YWx1ZTogdGhpcy5uZXdUYWcsCiAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkLAogICAgICAgIGZvcm06IGZvcm0KICAgICAgfSk7CiAgICB9LAogICAgY29tcHV0ZWRJbnB1dEhhbmRsZXJzOiBmdW5jdGlvbiBjb21wdXRlZElucHV0SGFuZGxlcnMoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgaW5wdXQ6IHRoaXMub25JbnB1dElucHV0LAogICAgICAgIGNoYW5nZTogdGhpcy5vbklucHV0Q2hhbmdlLAogICAgICAgIGtleWRvd246IHRoaXMub25JbnB1dEtleWRvd24sCiAgICAgICAgcmVzZXQ6IHRoaXMucmVzZXQKICAgICAgfTsKICAgIH0sCiAgICBjb21wdXRlZFNlcGFyYXRvcjogZnVuY3Rpb24gY29tcHV0ZWRTZXBhcmF0b3IoKSB7CiAgICAgIC8vIE1lcmdlIHRoZSBhcnJheSBpbnRvIGEgc3RyaW5nCiAgICAgIHJldHVybiBjb25jYXQodGhpcy5zZXBhcmF0b3IpLmZpbHRlcihpc1N0cmluZykuZmlsdGVyKGlkZW50aXR5KS5qb2luKCcnKTsKICAgIH0sCiAgICBjb21wdXRlZFNlcGFyYXRvclJlZ0V4cDogZnVuY3Rpb24gY29tcHV0ZWRTZXBhcmF0b3JSZWdFeHAoKSB7CiAgICAgIC8vIFdlIHVzZSBhIGNvbXB1dGVkIHByb3AgaGVyZSB0byBwcmVjb21waWxlIHRoZSBSZWdFeHAKICAgICAgLy8gVGhlIFJlZ0V4cCBpcyBhIGNoYXJhY3RlciBjbGFzcyBSRSBpbiB0aGUgZm9ybSBvZiBgL1thYmNdKy9gCiAgICAgIC8vIHdoZXJlIGEsIGIsIGFuZCBjIGFyZSB0aGUgdmFsaWQgc2VwYXJhdG9yIGNoYXJhY3RlcnMKICAgICAgLy8gLT4gYHRhZ3MgPSBzdHIuc3BsaXQoL1thYmNdKy8pLmZpbHRlcih0ID0+IHQpYAogICAgICB2YXIgc2VwYXJhdG9yID0gdGhpcy5jb21wdXRlZFNlcGFyYXRvcjsKICAgICAgcmV0dXJuIHNlcGFyYXRvciA/IG5ldyBSZWdFeHAoIlsiLmNvbmNhdChlc2NhcGVSZWdFeHBDaGFycyhzZXBhcmF0b3IpLCAiXSsiKSkgOiBudWxsOwogICAgfSwKICAgIGNvbXB1dGVkSm9pbmVyOiBmdW5jdGlvbiBjb21wdXRlZEpvaW5lcigpIHsKICAgICAgLy8gV2hlbiB0YWcocykgYXJlIGludmFsaWQgb3IgZHVwbGljYXRlLCB3ZSBsZWF2ZSB0aGVtCiAgICAgIC8vIGluIHRoZSBpbnB1dCBzbyB0aGF0IHRoZSB1c2VyIGNhbiBzZWUgdGhlbQogICAgICAvLyBJZiB0aGVyZSBhcmUgbW9yZSB0aGFuIG9uZSB0YWcgaW4gdGhlIGlucHV0LCB3ZSB1c2UgdGhlCiAgICAgIC8vIGZpcnN0IHNlcGFyYXRvciBjaGFyYWN0ZXIgYXMgdGhlIHNlcGFyYXRvciBpbiB0aGUgaW5wdXQKICAgICAgLy8gV2UgYXBwZW5kIGEgc3BhY2UgaWYgdGhlIGZpcnN0IHNlcGFyYXRvciBpcyBub3QgYSBzcGFjZQogICAgICB2YXIgam9pbmVyID0gdGhpcy5jb21wdXRlZFNlcGFyYXRvci5jaGFyQXQoMCk7CiAgICAgIHJldHVybiBqb2luZXIgIT09ICcgJyA/ICIiLmNvbmNhdChqb2luZXIsICIgIikgOiBqb2luZXI7CiAgICB9LAogICAgY29tcHV0ZUlnbm9yZUlucHV0Rm9jdXNTZWxlY3RvcjogZnVuY3Rpb24gY29tcHV0ZUlnbm9yZUlucHV0Rm9jdXNTZWxlY3RvcigpIHsKICAgICAgLy8gTm9ybWFsaXplIHRvIGFuIHNpbmdsZSBzZWxlY3RvciB3aXRoIHNlbGVjdG9ycyBzZXBhcmF0ZWQgYnkgYCxgCiAgICAgIHJldHVybiBjb25jYXQodGhpcy5pZ25vcmVJbnB1dEZvY3VzU2VsZWN0b3IpLmZpbHRlcihpZGVudGl0eSkuam9pbignLCcpLnRyaW0oKTsKICAgIH0sCiAgICBkaXNhYmxlQWRkQnV0dG9uOiBmdW5jdGlvbiBkaXNhYmxlQWRkQnV0dG9uKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOyAvLyBJZiAnQWRkJyBidXR0b24gc2hvdWxkIGJlIGRpc2FibGVkCiAgICAgIC8vIElmIHRoZSBpbnB1dCBjb250YWlucyBhdCBsZWFzdCBvbmUgdGFnIHRoYXQgY2FuCiAgICAgIC8vIGJlIGFkZGVkLCB0aGVuIHRoZSAnQWRkJyBidXR0b24gc2hvdWxkIGJlIGVuYWJsZWQKCgogICAgICB2YXIgbmV3VGFnID0gdHJpbSh0aGlzLm5ld1RhZyk7CiAgICAgIHJldHVybiBuZXdUYWcgPT09ICcnIHx8ICF0aGlzLnNwbGl0VGFncyhuZXdUYWcpLnNvbWUoZnVuY3Rpb24gKHQpIHsKICAgICAgICByZXR1cm4gIWFycmF5SW5jbHVkZXMoX3RoaXMudGFncywgdCkgJiYgX3RoaXMudmFsaWRhdGVUYWcodCk7CiAgICAgIH0pOwogICAgfSwKICAgIGR1cGxpY2F0ZVRhZ3M6IGZ1bmN0aW9uIGR1cGxpY2F0ZVRhZ3MoKSB7CiAgICAgIHJldHVybiB0aGlzLnRhZ3NTdGF0ZS5kdXBsaWNhdGU7CiAgICB9LAogICAgaGFzRHVwbGljYXRlVGFnczogZnVuY3Rpb24gaGFzRHVwbGljYXRlVGFncygpIHsKICAgICAgcmV0dXJuIHRoaXMuZHVwbGljYXRlVGFncy5sZW5ndGggPiAwOwogICAgfSwKICAgIGludmFsaWRUYWdzOiBmdW5jdGlvbiBpbnZhbGlkVGFncygpIHsKICAgICAgcmV0dXJuIHRoaXMudGFnc1N0YXRlLmludmFsaWQ7CiAgICB9LAogICAgaGFzSW52YWxpZFRhZ3M6IGZ1bmN0aW9uIGhhc0ludmFsaWRUYWdzKCkgewogICAgICByZXR1cm4gdGhpcy5pbnZhbGlkVGFncy5sZW5ndGggPiAwOwogICAgfSwKICAgIGlzTGltaXRSZWFjaGVkOiBmdW5jdGlvbiBpc0xpbWl0UmVhY2hlZCgpIHsKICAgICAgdmFyIGxpbWl0ID0gdGhpcy5saW1pdDsKICAgICAgcmV0dXJuIGlzTnVtYmVyKGxpbWl0KSAmJiBsaW1pdCA+PSAwICYmIHRoaXMudGFncy5sZW5ndGggPj0gbGltaXQ7CiAgICB9CiAgfSwKICB3YXRjaDogKF93YXRjaCA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX3dhdGNoLCBNT0RFTF9QUk9QX05BTUUsIGZ1bmN0aW9uIChuZXdWYWx1ZSkgewogICAgdGhpcy50YWdzID0gY2xlYW5UYWdzKG5ld1ZhbHVlKTsKICB9KSwgX2RlZmluZVByb3BlcnR5KF93YXRjaCwgInRhZ3MiLCBmdW5jdGlvbiB0YWdzKG5ld1ZhbHVlLCBvbGRWYWx1ZSkgewogICAgLy8gVXBkYXRlIHRoZSBgdi1tb2RlbGAgKGlmIGl0IGRpZmZlcnMgZnJvbSB0aGUgdmFsdWUgcHJvcCkKICAgIGlmICghbG9vc2VFcXVhbChuZXdWYWx1ZSwgdGhpc1tNT0RFTF9QUk9QX05BTUVdKSkgewogICAgICB0aGlzLiRlbWl0KE1PREVMX0VWRU5UX05BTUUsIG5ld1ZhbHVlKTsKICAgIH0KCiAgICBpZiAoIWxvb3NlRXF1YWwobmV3VmFsdWUsIG9sZFZhbHVlKSkgewogICAgICBuZXdWYWx1ZSA9IGNvbmNhdChuZXdWYWx1ZSkuZmlsdGVyKGlkZW50aXR5KTsKICAgICAgb2xkVmFsdWUgPSBjb25jYXQob2xkVmFsdWUpLmZpbHRlcihpZGVudGl0eSk7CiAgICAgIHRoaXMucmVtb3ZlZFRhZ3MgPSBvbGRWYWx1ZS5maWx0ZXIoZnVuY3Rpb24gKG9sZCkgewogICAgICAgIHJldHVybiAhYXJyYXlJbmNsdWRlcyhuZXdWYWx1ZSwgb2xkKTsKICAgICAgfSk7CiAgICB9CiAgfSksIF9kZWZpbmVQcm9wZXJ0eShfd2F0Y2gsICJ0YWdzU3RhdGUiLCBmdW5jdGlvbiB0YWdzU3RhdGUobmV3VmFsdWUsIG9sZFZhbHVlKSB7CiAgICAvLyBFbWl0IGEgdGFnLXN0YXRlIGV2ZW50IHdoZW4gdGhlIGB0YWdzU3RhdGVgIG9iamVjdCBjaGFuZ2VzCiAgICBpZiAoIWxvb3NlRXF1YWwobmV3VmFsdWUsIG9sZFZhbHVlKSkgewogICAgICB0aGlzLiRlbWl0KEVWRU5UX05BTUVfVEFHX1NUQVRFLCBuZXdWYWx1ZS52YWxpZCwgbmV3VmFsdWUuaW52YWxpZCwgbmV3VmFsdWUuZHVwbGljYXRlKTsKICAgIH0KICB9KSwgX3dhdGNoKSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgLy8gV2UgZG8gdGhpcyBpbiBjcmVhdGVkIHRvIG1ha2Ugc3VyZSBhbiBpbnB1dCBldmVudCBlbWl0cwogICAgLy8gaWYgdGhlIGNsZWFuZWQgdGFncyBhcmUgbm90IGVxdWFsIHRvIHRoZSB2YWx1ZSBwcm9wCiAgICB0aGlzLnRhZ3MgPSBjbGVhblRhZ3ModGhpc1tNT0RFTF9QUk9QX05BTUVdKTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsgLy8gTGlzdGVuIGZvciBmb3JtIHJlc2V0IGV2ZW50cywgdG8gcmVzZXQgdGhlIHRhZ3MgaW5wdXQKCgogICAgdmFyICRmb3JtID0gY2xvc2VzdCgnZm9ybScsIHRoaXMuJGVsKTsKCiAgICBpZiAoJGZvcm0pIHsKICAgICAgZXZlbnRPbigkZm9ybSwgJ3Jlc2V0JywgdGhpcy5yZXNldCwgRVZFTlRfT1BUSU9OU19QQVNTSVZFKTsKICAgICAgdGhpcy4kb24oSE9PS19FVkVOVF9OQU1FX0JFRk9SRV9ERVNUUk9ZLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgZXZlbnRPZmYoJGZvcm0sICdyZXNldCcsIF90aGlzMi5yZXNldCwgRVZFTlRfT1BUSU9OU19QQVNTSVZFKTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBhZGRUYWc6IGZ1bmN0aW9uIGFkZFRhZyhuZXdUYWcpIHsKICAgICAgbmV3VGFnID0gaXNTdHJpbmcobmV3VGFnKSA/IG5ld1RhZyA6IHRoaXMubmV3VGFnOwogICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwoKICAgICAgaWYgKHRoaXMuZGlzYWJsZWQgfHwgdHJpbShuZXdUYWcpID09PSAnJyB8fCB0aGlzLmlzTGltaXRSZWFjaGVkKSB7CiAgICAgICAgLy8gRWFybHkgZXhpdAogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHBhcnNlZCA9IHRoaXMucGFyc2VUYWdzKG5ld1RhZyk7IC8vIEFkZCBhbnkgbmV3IHRhZ3MgdG8gdGhlIGB0YWdzYCBhcnJheSwgb3IgaWYgdGhlCiAgICAgIC8vIGFycmF5IG9mIGBhbGxUYWdzYCBpcyBlbXB0eSwgd2UgY2xlYXIgdGhlIGlucHV0CgogICAgICBpZiAocGFyc2VkLnZhbGlkLmxlbmd0aCA+IDAgfHwgcGFyc2VkLmFsbC5sZW5ndGggPT09IDApIHsKICAgICAgICAvLyBDbGVhciB0aGUgdXNlciBpbnB1dCBlbGVtZW50IChhbmQgbGVhdmUgaW4gYW55IGludmFsaWQvZHVwbGljYXRlIHRhZyhzKQoKICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWY6IGZ1bGwgdGVzdGluZyB0byBiZSBhZGRlZCBsYXRlciAqLwogICAgICAgIGlmIChtYXRjaGVzKHRoaXMuZ2V0SW5wdXQoKSwgJ3NlbGVjdCcpKSB7CiAgICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGlzIG5lZWRlZCB0byBwcm9wZXJseQogICAgICAgICAgLy8gd29yayB3aXRoIGA8c2VsZWN0PmAgZWxlbWVudHMKICAgICAgICAgIHRoaXMubmV3VGFnID0gJyc7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBpbnZhbGlkQW5kRHVwbGljYXRlcyA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkocGFyc2VkLmludmFsaWQpLCBfdG9Db25zdW1hYmxlQXJyYXkocGFyc2VkLmR1cGxpY2F0ZSkpOwogICAgICAgICAgdGhpcy5uZXdUYWcgPSBwYXJzZWQuYWxsLmZpbHRlcihmdW5jdGlvbiAodGFnKSB7CiAgICAgICAgICAgIHJldHVybiBhcnJheUluY2x1ZGVzKGludmFsaWRBbmREdXBsaWNhdGVzLCB0YWcpOwogICAgICAgICAgfSkuam9pbih0aGlzLmNvbXB1dGVkSm9pbmVyKS5jb25jYXQoaW52YWxpZEFuZER1cGxpY2F0ZXMubGVuZ3RoID4gMCA/IHRoaXMuY29tcHV0ZWRKb2luZXIuY2hhckF0KDApIDogJycpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHBhcnNlZC52YWxpZC5sZW5ndGggPiAwKSB7CiAgICAgICAgLy8gV2UgYWRkIHRoZSBuZXcgdGFncyBpbiBvbmUgYXRvbWljIG9wZXJhdGlvbgogICAgICAgIC8vIHRvIHRyaWdnZXIgcmVhY3Rpdml0eSBvbmNlIChpbnN0ZWFkIG9mIG9uY2UgcGVyIHRhZykKICAgICAgICAvLyBXZSBkbyB0aGlzIGFmdGVyIHdlIHVwZGF0ZSB0aGUgbmV3IHRhZyBpbnB1dCB2YWx1ZQogICAgICAgIC8vIGBjb25jYXQoKWAgY2FuIGJlIGZhc3RlciB0aGFuIGFycmF5IHNwcmVhZCwgd2hlbiBib3RoIGFyZ3MgYXJlIGFycmF5cwogICAgICAgIHRoaXMudGFncyA9IGNvbmNhdCh0aGlzLnRhZ3MsIHBhcnNlZC52YWxpZCk7CiAgICAgIH0KCiAgICAgIHRoaXMudGFnc1N0YXRlID0gcGFyc2VkOyAvLyBBdHRlbXB0IHRvIHJlLWZvY3VzIHRoZSBpbnB1dCAoc3BlY2lmaWNhbGx5IGZvciB3aGVuIHVzaW5nIHRoZSBBZGQKICAgICAgLy8gYnV0dG9uLCBhcyB0aGUgYnV0dG9uIGRpc2FwcGVhcnMgYWZ0ZXIgc3VjY2Vzc2Z1bGx5IGFkZGluZyBhIHRhZwoKICAgICAgdGhpcy5mb2N1cygpOwogICAgfSwKICAgIHJlbW92ZVRhZzogZnVuY3Rpb24gcmVtb3ZlVGFnKHRhZykgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KCgogICAgICBpZiAodGhpcy5kaXNhYmxlZCkgewogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBUT0RPOgogICAgICAvLyAgIEFkZCBgb25SZW1vdmVUYWcodGFnKWAgdXNlciBtZXRob2QsIHdoaWNoIGlmIHJldHVybnMgYGZhbHNlYAogICAgICAvLyAgIHdpbGwgcHJldmVudCB0aGUgdGFnIGZyb20gYmVpbmcgcmVtb3ZlZCAoaS5lLiBjb25maXJtYXRpb24pCiAgICAgIC8vICAgT3IgZW1pdCBjYW5jZWxhYmxlIGBCdkV2ZW50YAoKCiAgICAgIHRoaXMudGFncyA9IHRoaXMudGFncy5maWx0ZXIoZnVuY3Rpb24gKHQpIHsKICAgICAgICByZXR1cm4gdCAhPT0gdGFnOwogICAgICB9KTsgLy8gUmV0dXJuIGZvY3VzIHRvIHRoZSBpbnB1dCAoaWYgcG9zc2libGUpCgogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMzLmZvY3VzKCk7CiAgICAgIH0pOwogICAgfSwKICAgIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB0aGlzLm5ld1RhZyA9ICcnOwogICAgICB0aGlzLnRhZ3MgPSBbXTsKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNC5yZW1vdmVkVGFncyA9IFtdOwogICAgICAgIF90aGlzNC50YWdzU3RhdGUgPSBjbGVhblRhZ3NTdGF0ZSgpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyAtLS0gSW5wdXQgZWxlbWVudCBldmVudCBoYW5kbGVycyAtLS0KICAgIG9uSW5wdXRJbnB1dDogZnVuY3Rpb24gb25JbnB1dElucHV0KGV2ZW50KSB7CiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0OiBoYXJkIHRvIHRlc3QgY29tcG9zaXRpb24gZXZlbnRzICovCiAgICAgIGlmICh0aGlzLmRpc2FibGVkIHx8IGlzRXZlbnQoZXZlbnQpICYmIGV2ZW50LnRhcmdldC5jb21wb3NpbmcpIHsKICAgICAgICAvLyBgZXZlbnQudGFyZ2V0LmNvbXBvc2luZ2AgaXMgc2V0IGJ5IFZ1ZSAoYHYtbW9kZWxgIGRpcmVjdGl2ZSkKICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvdnVlL2Jsb2IvZGV2L3NyYy9wbGF0Zm9ybXMvd2ViL3J1bnRpbWUvZGlyZWN0aXZlcy9tb2RlbC5qcwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIG5ld1RhZyA9IHByb2Nlc3NFdmVudFZhbHVlKGV2ZW50KTsKICAgICAgdmFyIHNlcGFyYXRvclJlID0gdGhpcy5jb21wdXRlZFNlcGFyYXRvclJlZ0V4cDsKCiAgICAgIGlmICh0aGlzLm5ld1RhZyAhPT0gbmV3VGFnKSB7CiAgICAgICAgdGhpcy5uZXdUYWcgPSBuZXdUYWc7CiAgICAgIH0gLy8gV2UgaWdub3JlIGxlYWRpbmcgd2hpdGVzcGFjZSBmb3IgdGhlIGZvbGxvd2luZwoKCiAgICAgIG5ld1RhZyA9IHRyaW1MZWZ0KG5ld1RhZyk7CgogICAgICBpZiAoc2VwYXJhdG9yUmUgJiYgc2VwYXJhdG9yUmUudGVzdChuZXdUYWcuc2xpY2UoLTEpKSkgewogICAgICAgIC8vIEEgdHJhaWxpbmcgc2VwYXJhdG9yIGNoYXJhY3RlciB3YXMgZW50ZXJlZCwgc28gYWRkIHRoZSB0YWcocykKICAgICAgICAvLyBOb3RlOiBNb3JlIHRoYW4gb25lIHRhZyBvbiBpbnB1dCBldmVudCBpcyBwb3NzaWJsZSB2aWEgY29weS9wYXN0ZQogICAgICAgIHRoaXMuYWRkVGFnKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gVmFsaWRhdGUgKHBhcnNlIHRhZ3MpIG9uIGlucHV0IGV2ZW50CiAgICAgICAgdGhpcy50YWdzU3RhdGUgPSBuZXdUYWcgPT09ICcnID8gY2xlYW5UYWdzU3RhdGUoKSA6IHRoaXMucGFyc2VUYWdzKG5ld1RhZyk7CiAgICAgIH0KICAgIH0sCiAgICBvbklucHV0Q2hhbmdlOiBmdW5jdGlvbiBvbklucHV0Q2hhbmdlKGV2ZW50KSB7CiAgICAgIC8vIENoYW5nZSBpcyB0cmlnZ2VyZWQgb24gYDxpbnB1dD5gIGJsdXIsIG9yIGA8c2VsZWN0PmAgc2VsZWN0ZWQKICAgICAgLy8gVGhpcyBldmVudCBpcyBvcHQtaW4KICAgICAgaWYgKCF0aGlzLmRpc2FibGVkICYmIHRoaXMuYWRkT25DaGFuZ2UpIHsKICAgICAgICB2YXIgbmV3VGFnID0gcHJvY2Vzc0V2ZW50VmFsdWUoZXZlbnQpOwogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCgogICAgICAgIGlmICh0aGlzLm5ld1RhZyAhPT0gbmV3VGFnKSB7CiAgICAgICAgICB0aGlzLm5ld1RhZyA9IG5ld1RhZzsKICAgICAgICB9CgogICAgICAgIHRoaXMuYWRkVGFnKCk7CiAgICAgIH0KICAgIH0sCiAgICBvbklucHV0S2V5ZG93bjogZnVuY3Rpb24gb25JbnB1dEtleWRvd24oZXZlbnQpIHsKICAgICAgLy8gRWFybHkgZXhpdAoKICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KICAgICAgaWYgKHRoaXMuZGlzYWJsZWQgfHwgIWlzRXZlbnQoZXZlbnQpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIga2V5Q29kZSA9IGV2ZW50LmtleUNvZGU7CiAgICAgIHZhciB2YWx1ZSA9IGV2ZW50LnRhcmdldC52YWx1ZSB8fCAnJzsKICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2U6IHRlc3RpbmcgdG8gYmUgYWRkZWQgbGF0ZXIgKi8KCiAgICAgIGlmICghdGhpcy5ub0FkZE9uRW50ZXIgJiYga2V5Q29kZSA9PT0gQ09ERV9FTlRFUikgewogICAgICAgIC8vIEF0dGVtcHQgdG8gYWRkIHRoZSB0YWcgd2hlbiB1c2VyIHByZXNzZXMgZW50ZXIKICAgICAgICBzdG9wRXZlbnQoZXZlbnQsIHsKICAgICAgICAgIHByb3BhZ2F0aW9uOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIHRoaXMuYWRkVGFnKCk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5yZW1vdmVPbkRlbGV0ZSAmJiAoa2V5Q29kZSA9PT0gQ09ERV9CQUNLU1BBQ0UgfHwga2V5Q29kZSA9PT0gQ09ERV9ERUxFVEUpICYmIHZhbHVlID09PSAnJykgewogICAgICAgIC8vIFJlbW92ZSB0aGUgbGFzdCB0YWcgaWYgdGhlIHVzZXIgcHJlc3NlZCBiYWNrc3BhY2UvZGVsZXRlIGFuZCB0aGUgaW5wdXQgaXMgZW1wdHkKICAgICAgICBzdG9wRXZlbnQoZXZlbnQsIHsKICAgICAgICAgIHByb3BhZ2F0aW9uOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIHRoaXMudGFncyA9IHRoaXMudGFncy5zbGljZSgwLCAtMSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyAtLS0gV3JhcHBlciBldmVudCBoYW5kbGVycyAtLS0KICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZXZlbnQpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB2YXIgaWdub3JlRm9jdXNTZWxlY3RvciA9IHRoaXMuY29tcHV0ZUlnbm9yZUlucHV0Rm9jdXNTZWxlY3RvcjsKICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldDsKCiAgICAgIGlmICghdGhpcy5kaXNhYmxlZCAmJiAhaXNBY3RpdmVFbGVtZW50KHRhcmdldCkgJiYgKCFpZ25vcmVGb2N1c1NlbGVjdG9yIHx8ICFjbG9zZXN0KGlnbm9yZUZvY3VzU2VsZWN0b3IsIHRhcmdldCwgdHJ1ZSkpKSB7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXM1LmZvY3VzKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBvbkZvY3VzaW46IGZ1bmN0aW9uIG9uRm9jdXNpbigpIHsKICAgICAgdGhpcy5oYXNGb2N1cyA9IHRydWU7CiAgICB9LAogICAgb25Gb2N1c291dDogZnVuY3Rpb24gb25Gb2N1c291dCgpIHsKICAgICAgdGhpcy5oYXNGb2N1cyA9IGZhbHNlOwogICAgfSwKICAgIGhhbmRsZUF1dG9mb2N1czogZnVuY3Rpb24gaGFuZGxlQXV0b2ZvY3VzKCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXF1ZXN0QUYoZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKF90aGlzNi5hdXRvZm9jdXMgJiYgIV90aGlzNi5kaXNhYmxlZCkgewogICAgICAgICAgICBfdGhpczYuZm9jdXMoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLy8gLS0tIFB1YmxpYyBtZXRob2RzIC0tLQogICAgZm9jdXM6IGZ1bmN0aW9uIGZvY3VzKCkgewogICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHsKICAgICAgICBhdHRlbXB0Rm9jdXModGhpcy5nZXRJbnB1dCgpKTsKICAgICAgfQogICAgfSwKICAgIGJsdXI6IGZ1bmN0aW9uIGJsdXIoKSB7CiAgICAgIGlmICghdGhpcy5kaXNhYmxlZCkgewogICAgICAgIGF0dGVtcHRCbHVyKHRoaXMuZ2V0SW5wdXQoKSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyAtLS0gUHJpdmF0ZSBtZXRob2RzIC0tLQogICAgc3BsaXRUYWdzOiBmdW5jdGlvbiBzcGxpdFRhZ3MobmV3VGFnKSB7CiAgICAgIC8vIFNwbGl0IHRoZSBpbnB1dCBpbnRvIGFuIGFycmF5IG9mIHJhdyB0YWdzCiAgICAgIG5ld1RhZyA9IHRvU3RyaW5nKG5ld1RhZyk7CiAgICAgIHZhciBzZXBhcmF0b3JSZSA9IHRoaXMuY29tcHV0ZWRTZXBhcmF0b3JSZWdFeHA7IC8vIFNwbGl0IHRoZSB0YWcocykgdmlhIHRoZSBvcHRpb25hbCBzZXBhcmF0b3IKICAgICAgLy8gTm9ybWFsbHkgb25seSBhIHNpbmdsZSB0YWcgaXMgcHJvdmlkZWQsIGJ1dCBjb3B5L3Bhc3RlCiAgICAgIC8vIGNhbiBlbnRlciBtdWx0aXBsZSB0YWdzIGluIGEgc2luZ2xlIG9wZXJhdGlvbgoKICAgICAgcmV0dXJuIChzZXBhcmF0b3JSZSA/IG5ld1RhZy5zcGxpdChzZXBhcmF0b3JSZSkgOiBbbmV3VGFnXSkubWFwKHRyaW0pLmZpbHRlcihpZGVudGl0eSk7CiAgICB9LAogICAgcGFyc2VUYWdzOiBmdW5jdGlvbiBwYXJzZVRhZ3MobmV3VGFnKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOyAvLyBUYWtlcyBgbmV3VGFnYCB2YWx1ZSBhbmQgcGFyc2VzIGl0IGludG8gYHZhbGlkVGFnc2AsCiAgICAgIC8vIGBpbnZhbGlkVGFnc2AsIGFuZCBkdXBsaWNhdGUgdGFncyBhcyBhbiBvYmplY3QKICAgICAgLy8gU3BsaXQgdGhlIGlucHV0IGludG8gcmF3IHRhZ3MKCgogICAgICB2YXIgdGFncyA9IHRoaXMuc3BsaXRUYWdzKG5ld1RhZyk7IC8vIEJhc2UgcmVzdWx0cwoKICAgICAgdmFyIHBhcnNlZCA9IHsKICAgICAgICBhbGw6IHRhZ3MsCiAgICAgICAgdmFsaWQ6IFtdLAogICAgICAgIGludmFsaWQ6IFtdLAogICAgICAgIGR1cGxpY2F0ZTogW10KICAgICAgfTsgLy8gUGFyc2UgdGhlIHVuaXF1ZSB0YWdzCgogICAgICB0YWdzLmZvckVhY2goZnVuY3Rpb24gKHRhZykgewogICAgICAgIGlmIChhcnJheUluY2x1ZGVzKF90aGlzNy50YWdzLCB0YWcpIHx8IGFycmF5SW5jbHVkZXMocGFyc2VkLnZhbGlkLCB0YWcpKSB7CiAgICAgICAgICAvLyBVbmlxdWUgZHVwbGljYXRlIHRhZ3MKICAgICAgICAgIGlmICghYXJyYXlJbmNsdWRlcyhwYXJzZWQuZHVwbGljYXRlLCB0YWcpKSB7CiAgICAgICAgICAgIHBhcnNlZC5kdXBsaWNhdGUucHVzaCh0YWcpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoX3RoaXM3LnZhbGlkYXRlVGFnKHRhZykpIHsKICAgICAgICAgIC8vIFdlIG9ubHkgYWRkIHVuaXF1ZS92YWxpZCB0YWdzCiAgICAgICAgICBwYXJzZWQudmFsaWQucHVzaCh0YWcpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBVbmlxdWUgaW52YWxpZCB0YWdzCiAgICAgICAgICBpZiAoIWFycmF5SW5jbHVkZXMocGFyc2VkLmludmFsaWQsIHRhZykpIHsKICAgICAgICAgICAgcGFyc2VkLmludmFsaWQucHVzaCh0YWcpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiBwYXJzZWQ7CiAgICB9LAogICAgdmFsaWRhdGVUYWc6IGZ1bmN0aW9uIHZhbGlkYXRlVGFnKHRhZykgewogICAgICB2YXIgdGFnVmFsaWRhdG9yID0gdGhpcy50YWdWYWxpZGF0b3I7CiAgICAgIHJldHVybiBoYXNQcm9wRnVuY3Rpb24odGFnVmFsaWRhdG9yKSA/IHRhZ1ZhbGlkYXRvcih0YWcpIDogdHJ1ZTsKICAgIH0sCiAgICBnZXRJbnB1dDogZnVuY3Rpb24gZ2V0SW5wdXQoKSB7CiAgICAgIC8vIFJldHVybnMgdGhlIGlucHV0IGVsZW1lbnQgcmVmZXJlbmNlIChvciBudWxsIGlmIG5vdCBmb3VuZCkKICAgICAgLy8gV2UgbmVlZCB0byBlc2NhcGUgYGNvbXB1dGVkSW5wdXRJZGAgc2luY2UgaXQgY2FuIGJlIHVzZXItcHJvdmlkZWQKICAgICAgcmV0dXJuIHNlbGVjdCgiIyIuY29uY2F0KGNzc0VzY2FwZSh0aGlzLmNvbXB1dGVkSW5wdXRJZCkpLCB0aGlzLiRlbCk7CiAgICB9LAogICAgLy8gRGVmYXVsdCBVc2VyIEludGVyZmFjZSByZW5kZXIKICAgIGRlZmF1bHRSZW5kZXI6IGZ1bmN0aW9uIGRlZmF1bHRSZW5kZXIoX3JlZikgewogICAgICB2YXIgYWRkQnV0dG9uVGV4dCA9IF9yZWYuYWRkQnV0dG9uVGV4dCwKICAgICAgICAgIGFkZEJ1dHRvblZhcmlhbnQgPSBfcmVmLmFkZEJ1dHRvblZhcmlhbnQsCiAgICAgICAgICBhZGRUYWcgPSBfcmVmLmFkZFRhZywKICAgICAgICAgIGRpc2FibGVBZGRCdXR0b24gPSBfcmVmLmRpc2FibGVBZGRCdXR0b24sCiAgICAgICAgICBkaXNhYmxlZCA9IF9yZWYuZGlzYWJsZWQsCiAgICAgICAgICBkdXBsaWNhdGVUYWdUZXh0ID0gX3JlZi5kdXBsaWNhdGVUYWdUZXh0LAogICAgICAgICAgaW5wdXRBdHRycyA9IF9yZWYuaW5wdXRBdHRycywKICAgICAgICAgIGlucHV0Q2xhc3MgPSBfcmVmLmlucHV0Q2xhc3MsCiAgICAgICAgICBpbnB1dEhhbmRsZXJzID0gX3JlZi5pbnB1dEhhbmRsZXJzLAogICAgICAgICAgaW5wdXRUeXBlID0gX3JlZi5pbnB1dFR5cGUsCiAgICAgICAgICBpbnZhbGlkVGFnVGV4dCA9IF9yZWYuaW52YWxpZFRhZ1RleHQsCiAgICAgICAgICBpc0R1cGxpY2F0ZSA9IF9yZWYuaXNEdXBsaWNhdGUsCiAgICAgICAgICBpc0ludmFsaWQgPSBfcmVmLmlzSW52YWxpZCwKICAgICAgICAgIGlzTGltaXRSZWFjaGVkID0gX3JlZi5pc0xpbWl0UmVhY2hlZCwKICAgICAgICAgIGxpbWl0VGFnc1RleHQgPSBfcmVmLmxpbWl0VGFnc1RleHQsCiAgICAgICAgICBub1RhZ1JlbW92ZSA9IF9yZWYubm9UYWdSZW1vdmUsCiAgICAgICAgICBwbGFjZWhvbGRlciA9IF9yZWYucGxhY2Vob2xkZXIsCiAgICAgICAgICByZW1vdmVUYWcgPSBfcmVmLnJlbW92ZVRhZywKICAgICAgICAgIHRhZ0NsYXNzID0gX3JlZi50YWdDbGFzcywKICAgICAgICAgIHRhZ1BpbGxzID0gX3JlZi50YWdQaWxscywKICAgICAgICAgIHRhZ1JlbW92ZUxhYmVsID0gX3JlZi50YWdSZW1vdmVMYWJlbCwKICAgICAgICAgIHRhZ1ZhcmlhbnQgPSBfcmVmLnRhZ1ZhcmlhbnQsCiAgICAgICAgICB0YWdzID0gX3JlZi50YWdzOwogICAgICB2YXIgaCA9IHRoaXMuJGNyZWF0ZUVsZW1lbnQ7IC8vIE1ha2UgdGhlIGxpc3Qgb2YgdGFncwoKICAgICAgdmFyICR0YWdzID0gdGFncy5tYXAoZnVuY3Rpb24gKHRhZykgewogICAgICAgIHRhZyA9IHRvU3RyaW5nKHRhZyk7CiAgICAgICAgcmV0dXJuIGgoQkZvcm1UYWcsIHsKICAgICAgICAgIGNsYXNzOiB0YWdDbGFzcywKICAgICAgICAgIC8vIGBCRm9ybVRhZ2Agd2lsbCBhdXRvIGdlbmVyYXRlIGFuIElECiAgICAgICAgICAvLyBzbyB3ZSBkbyBub3QgbmVlZCB0byBzZXQgdGhlIElEIHByb3AKICAgICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCwKICAgICAgICAgICAgbm9SZW1vdmU6IG5vVGFnUmVtb3ZlLAogICAgICAgICAgICBwaWxsOiB0YWdQaWxscywKICAgICAgICAgICAgcmVtb3ZlTGFiZWw6IHRhZ1JlbW92ZUxhYmVsLAogICAgICAgICAgICB0YWc6ICdsaScsCiAgICAgICAgICAgIHRpdGxlOiB0YWcsCiAgICAgICAgICAgIHZhcmlhbnQ6IHRhZ1ZhcmlhbnQKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVtb3ZlVGFnKHRhZyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBrZXk6ICJ0YWdzXyIuY29uY2F0KHRhZykKICAgICAgICB9LCB0YWcpOwogICAgICB9KTsgLy8gRmVlZGJhY2sgSURzIGlmIG5lZWRlZAoKICAgICAgdmFyIGludmFsaWRGZWVkYmFja0lkID0gaW52YWxpZFRhZ1RleHQgJiYgaXNJbnZhbGlkID8gdGhpcy5zYWZlSWQoJ19faW52YWxpZF9mZWVkYmFja19fJykgOiBudWxsOwogICAgICB2YXIgZHVwbGljYXRlRmVlZGJhY2tJZCA9IGR1cGxpY2F0ZVRhZ1RleHQgJiYgaXNEdXBsaWNhdGUgPyB0aGlzLnNhZmVJZCgnX19kdXBsaWNhdGVfZmVlZGJhY2tfXycpIDogbnVsbDsKICAgICAgdmFyIGxpbWl0RmVlZGJhY2tJZCA9IGxpbWl0VGFnc1RleHQgJiYgaXNMaW1pdFJlYWNoZWQgPyB0aGlzLnNhZmVJZCgnX19saW1pdF9mZWVkYmFja19fJykgOiBudWxsOyAvLyBDb21wdXRlIHRoZSBgYXJpYS1kZXNjcmliZWRieWAgYXR0cmlidXRlIHZhbHVlCgogICAgICB2YXIgYXJpYURlc2NyaWJlZGJ5ID0gW2lucHV0QXR0cnNbJ2FyaWEtZGVzY3JpYmVkYnknXSwgaW52YWxpZEZlZWRiYWNrSWQsIGR1cGxpY2F0ZUZlZWRiYWNrSWQsIGxpbWl0RmVlZGJhY2tJZF0uZmlsdGVyKGlkZW50aXR5KS5qb2luKCcgJyk7IC8vIElucHV0CgogICAgICB2YXIgJGlucHV0ID0gaCgnaW5wdXQnLCB7CiAgICAgICAgc3RhdGljQ2xhc3M6ICdiLWZvcm0tdGFncy1pbnB1dCB3LTEwMCBmbGV4LWdyb3ctMSBwLTAgbS0wIGJnLXRyYW5zcGFyZW50IGJvcmRlci0wJywKICAgICAgICBjbGFzczogaW5wdXRDbGFzcywKICAgICAgICBzdHlsZTogewogICAgICAgICAgb3V0bGluZTogMCwKICAgICAgICAgIG1pbldpZHRoOiAnNXJlbScKICAgICAgICB9LAogICAgICAgIGF0dHJzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGlucHV0QXR0cnMpLCB7fSwgewogICAgICAgICAgJ2FyaWEtZGVzY3JpYmVkYnknOiBhcmlhRGVzY3JpYmVkYnkgfHwgbnVsbCwKICAgICAgICAgIHR5cGU6IGlucHV0VHlwZSwKICAgICAgICAgIHBsYWNlaG9sZGVyOiBwbGFjZWhvbGRlciB8fCBudWxsCiAgICAgICAgfSksCiAgICAgICAgZG9tUHJvcHM6IHsKICAgICAgICAgIHZhbHVlOiBpbnB1dEF0dHJzLnZhbHVlCiAgICAgICAgfSwKICAgICAgICBvbjogaW5wdXRIYW5kbGVycywKICAgICAgICAvLyBEaXJlY3RpdmUgbmVlZGVkIHRvIGdldCBgZXZlbnQudGFyZ2V0LmNvbXBvc2luZ2Agc2V0IChpZiBuZWVkZWQpCiAgICAgICAgZGlyZWN0aXZlczogW3sKICAgICAgICAgIG5hbWU6ICdtb2RlbCcsCiAgICAgICAgICB2YWx1ZTogaW5wdXRBdHRycy52YWx1ZQogICAgICAgIH1dLAogICAgICAgIHJlZjogJ2lucHV0JwogICAgICB9KTsgLy8gQWRkIGJ1dHRvbgoKICAgICAgdmFyICRidXR0b24gPSBoKEJCdXR0b24sIHsKICAgICAgICBzdGF0aWNDbGFzczogJ2ItZm9ybS10YWdzLWJ1dHRvbiBweS0wJywKICAgICAgICBjbGFzczogewogICAgICAgICAgLy8gT25seSBzaG93IHRoZSBidXR0b24gaWYgdGhlIHRhZyBjYW4gYmUgYWRkZWQKICAgICAgICAgIC8vIFdlIHVzZSB0aGUgYGludmlzaWJsZWAgY2xhc3MgaW5zdGVhZCBvZiBub3QgcmVuZGVyaW5nCiAgICAgICAgICAvLyB0aGUgYnV0dG9uLCBzbyB0aGF0IHdlIG1haW50YWluIGxheW91dCB0byBwcmV2ZW50CiAgICAgICAgICAvLyB0aGUgdXNlciBpbnB1dCBmcm9tIGp1bXBpbmcgYXJvdW5kCiAgICAgICAgICBpbnZpc2libGU6IGRpc2FibGVBZGRCdXR0b24KICAgICAgICB9LAogICAgICAgIHN0eWxlOiB7CiAgICAgICAgICBmb250U2l6ZTogJzkwJScKICAgICAgICB9LAogICAgICAgIHByb3BzOiB7CiAgICAgICAgICBkaXNhYmxlZDogZGlzYWJsZUFkZEJ1dHRvbiB8fCBpc0xpbWl0UmVhY2hlZCwKICAgICAgICAgIHZhcmlhbnQ6IGFkZEJ1dHRvblZhcmlhbnQKICAgICAgICB9LAogICAgICAgIG9uOiB7CiAgICAgICAgICBjbGljazogZnVuY3Rpb24gY2xpY2soKSB7CiAgICAgICAgICAgIHJldHVybiBhZGRUYWcoKTsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHJlZjogJ2J1dHRvbicKICAgICAgfSwgW3RoaXMubm9ybWFsaXplU2xvdChTTE9UX05BTUVfQUREX0JVVFRPTl9URVhUKSB8fCBhZGRCdXR0b25UZXh0XSk7IC8vIElEIG9mIHRoZSB0YWdzICsgaW5wdXQgYDx1bD5gIGxpc3QKICAgICAgLy8gTm90ZSB3ZSBjb3VsZCBjb25jYXRlbmF0ZSBgaW5wdXRBdHRycy5pZGAgd2l0aCAnX190YWdfbGlzdF9fJwogICAgICAvLyBidXQgYGlucHV0SWRgIG1heSBiZSBgbnVsbGAgdW50aWwgYWZ0ZXIgbW91bnQKICAgICAgLy8gYHNhZmVJZCgpYCByZXR1cm5zIGBudWxsYCwgaWYgbm8gdXNlciBwcm92aWRlZCBJRCwKICAgICAgLy8gdW50aWwgYWZ0ZXIgbW91bnQgd2hlbiBhIHVuaXF1ZSBJRCBpcyBnZW5lcmF0ZWQKCiAgICAgIHZhciB0YWdMaXN0SWQgPSB0aGlzLnNhZmVJZCgnX190YWdfbGlzdF9fJyk7CiAgICAgIHZhciAkZmllbGQgPSBoKCdsaScsIHsKICAgICAgICBzdGF0aWNDbGFzczogJ2ItZnJvbS10YWdzLWZpZWxkIGZsZXgtZ3Jvdy0xJywKICAgICAgICBhdHRyczogewogICAgICAgICAgcm9sZTogJ25vbmUnLAogICAgICAgICAgJ2FyaWEtbGl2ZSc6ICdvZmYnLAogICAgICAgICAgJ2FyaWEtY29udHJvbHMnOiB0YWdMaXN0SWQKICAgICAgICB9LAogICAgICAgIGtleTogJ3RhZ3NfZmllbGQnCiAgICAgIH0sIFtoKCdkaXYnLCB7CiAgICAgICAgc3RhdGljQ2xhc3M6ICdkLWZsZXgnLAogICAgICAgIGF0dHJzOiB7CiAgICAgICAgICByb2xlOiAnZ3JvdXAnCiAgICAgICAgfQogICAgICB9LCBbJGlucHV0LCAkYnV0dG9uXSldKTsgLy8gV3JhcCBpbiBhbiB1bm9yZGVyZWQgbGlzdCBlbGVtZW50ICh3ZSB1c2UgYSBsaXN0IGZvciBhY2Nlc3NpYmlsaXR5KQoKICAgICAgdmFyICR1bCA9IGgoJ3VsJywgewogICAgICAgIHN0YXRpY0NsYXNzOiAnYi1mb3JtLXRhZ3MtbGlzdCBsaXN0LXVuc3R5bGVkIG1iLTAgZC1mbGV4IGZsZXgtd3JhcCBhbGlnbi1pdGVtcy1jZW50ZXInLAogICAgICAgIGF0dHJzOiB7CiAgICAgICAgICBpZDogdGFnTGlzdElkCiAgICAgICAgfSwKICAgICAgICBrZXk6ICd0YWdzX2xpc3QnCiAgICAgIH0sIFskdGFncywgJGZpZWxkXSk7IC8vIEFzc2VtYmxlIHRoZSBmZWVkYmFjawoKICAgICAgdmFyICRmZWVkYmFjayA9IGgoKTsKCiAgICAgIGlmIChpbnZhbGlkVGFnVGV4dCB8fCBkdXBsaWNhdGVUYWdUZXh0IHx8IGxpbWl0VGFnc1RleHQpIHsKICAgICAgICAvLyBBZGQgYW4gYXJpYSBsaXZlIHJlZ2lvbiBmb3IgdGhlIGludmFsaWQvZHVwbGljYXRlIHRhZwogICAgICAgIC8vIG1lc3NhZ2VzIGlmIHRoZSB1c2VyIGhhcyBub3QgZGlzYWJsZWQgdGhlIG1lc3NhZ2VzCiAgICAgICAgdmFyIGpvaW5lciA9IHRoaXMuY29tcHV0ZWRKb2luZXI7IC8vIEludmFsaWQgdGFnIGZlZWRiYWNrIGlmIG5lZWRlZCAoZXJyb3IpCgogICAgICAgIHZhciAkaW52YWxpZCA9IGgoKTsKCiAgICAgICAgaWYgKGludmFsaWRGZWVkYmFja0lkKSB7CiAgICAgICAgICAkaW52YWxpZCA9IGgoQkZvcm1JbnZhbGlkRmVlZGJhY2ssIHsKICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICBpZDogaW52YWxpZEZlZWRiYWNrSWQsCiAgICAgICAgICAgICAgZm9yY2VTaG93OiB0cnVlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGtleTogJ3RhZ3NfaW52YWxpZF9mZWVkYmFjaycKICAgICAgICAgIH0sIFt0aGlzLmludmFsaWRUYWdUZXh0LCAnOiAnLCB0aGlzLmludmFsaWRUYWdzLmpvaW4oam9pbmVyKV0pOwogICAgICAgIH0gLy8gRHVwbGljYXRlIHRhZyBmZWVkYmFjayBpZiBuZWVkZWQgKHdhcm5pbmcsIG5vdCBlcnJvcikKCgogICAgICAgIHZhciAkZHVwbGljYXRlID0gaCgpOwoKICAgICAgICBpZiAoZHVwbGljYXRlRmVlZGJhY2tJZCkgewogICAgICAgICAgJGR1cGxpY2F0ZSA9IGgoQkZvcm1UZXh0LCB7CiAgICAgICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgICAgaWQ6IGR1cGxpY2F0ZUZlZWRiYWNrSWQKICAgICAgICAgICAgfSwKICAgICAgICAgICAga2V5OiAndGFnc19kdXBsaWNhdGVfZmVlZGJhY2snCiAgICAgICAgICB9LCBbdGhpcy5kdXBsaWNhdGVUYWdUZXh0LCAnOiAnLCB0aGlzLmR1cGxpY2F0ZVRhZ3Muam9pbihqb2luZXIpXSk7CiAgICAgICAgfSAvLyBMaW1pdCB0YWdzIGZlZWRiYWNrIGlmIG5lZWRlZCAod2FybmluZywgbm90IGVycm9yKQoKCiAgICAgICAgdmFyICRsaW1pdCA9IGgoKTsKCiAgICAgICAgaWYgKGxpbWl0RmVlZGJhY2tJZCkgewogICAgICAgICAgJGxpbWl0ID0gaChCRm9ybVRleHQsIHsKICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICBpZDogbGltaXRGZWVkYmFja0lkCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGtleTogJ3RhZ3NfbGltaXRfZmVlZGJhY2snCiAgICAgICAgICB9LCBbbGltaXRUYWdzVGV4dF0pOwogICAgICAgIH0KCiAgICAgICAgJGZlZWRiYWNrID0gaCgnZGl2JywgewogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgJ2FyaWEtbGl2ZSc6ICdwb2xpdGUnLAogICAgICAgICAgICAnYXJpYS1hdG9taWMnOiAndHJ1ZScKICAgICAgICAgIH0sCiAgICAgICAgICBrZXk6ICd0YWdzX2ZlZWRiYWNrJwogICAgICAgIH0sIFskaW52YWxpZCwgJGR1cGxpY2F0ZSwgJGxpbWl0XSk7CiAgICAgIH0gLy8gUmV0dXJuIHRoZSBjb250ZW50CgoKICAgICAgcmV0dXJuIFskdWwsICRmZWVkYmFja107CiAgICB9CiAgfSwKICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihoKSB7CiAgICB2YXIgbmFtZSA9IHRoaXMubmFtZSwKICAgICAgICBkaXNhYmxlZCA9IHRoaXMuZGlzYWJsZWQsCiAgICAgICAgcmVxdWlyZWQgPSB0aGlzLnJlcXVpcmVkLAogICAgICAgIGZvcm0gPSB0aGlzLmZvcm0sCiAgICAgICAgdGFncyA9IHRoaXMudGFncywKICAgICAgICBjb21wdXRlZElucHV0SWQgPSB0aGlzLmNvbXB1dGVkSW5wdXRJZCwKICAgICAgICBoYXNGb2N1cyA9IHRoaXMuaGFzRm9jdXMsCiAgICAgICAgbm9PdXRlckZvY3VzID0gdGhpcy5ub091dGVyRm9jdXM7IC8vIFNjb3BlZCBzbG90IHByb3BlcnRpZXMKCiAgICB2YXIgc2NvcGUgPSBfb2JqZWN0U3ByZWFkKHsKICAgICAgLy8gQXJyYXkgb2YgdGFncyAoc2hhbGxvdyBjb3B5IHRvIHByZXZlbnQgbXV0YXRpb25zKQogICAgICB0YWdzOiB0YWdzLnNsaWNlKCksCiAgICAgIC8vIDxpbnB1dD4gdi1iaW5kOmlucHV0QXR0cnMKICAgICAgaW5wdXRBdHRyczogdGhpcy5jb21wdXRlZElucHV0QXR0cnMsCiAgICAgIC8vIFdlIGRvbid0IGluY2x1ZGUgdGhpcyBpbiB0aGUgYXR0cnMsIGFzIHVzZXJzIG1heSB3YW50IHRvIG92ZXJyaWRlIHRoaXMKICAgICAgaW5wdXRUeXBlOiB0aGlzLmNvbXB1dGVkSW5wdXRUeXBlLAogICAgICAvLyA8aW5wdXQ+IHYtb246aW5wdXRIYW5kbGVycwogICAgICBpbnB1dEhhbmRsZXJzOiB0aGlzLmNvbXB1dGVkSW5wdXRIYW5kbGVycywKICAgICAgLy8gTWV0aG9kcwogICAgICByZW1vdmVUYWc6IHRoaXMucmVtb3ZlVGFnLAogICAgICBhZGRUYWc6IHRoaXMuYWRkVGFnLAogICAgICByZXNldDogdGhpcy5yZXNldCwKICAgICAgLy8gPGlucHV0PiA6aWQ9ImlucHV0SWQiCiAgICAgIGlucHV0SWQ6IGNvbXB1dGVkSW5wdXRJZCwKICAgICAgLy8gSW52YWxpZC9EdXBsaWNhdGUgc3RhdGUgaW5mb3JtYXRpb24KICAgICAgaXNJbnZhbGlkOiB0aGlzLmhhc0ludmFsaWRUYWdzLAogICAgICBpbnZhbGlkVGFnczogdGhpcy5pbnZhbGlkVGFncy5zbGljZSgpLAogICAgICBpc0R1cGxpY2F0ZTogdGhpcy5oYXNEdXBsaWNhdGVUYWdzLAogICAgICBkdXBsaWNhdGVUYWdzOiB0aGlzLmR1cGxpY2F0ZVRhZ3Muc2xpY2UoKSwKICAgICAgaXNMaW1pdFJlYWNoZWQ6IHRoaXMuaXNMaW1pdFJlYWNoZWQsCiAgICAgIC8vIElmIHRoZSAnQWRkJyBidXR0b24gc2hvdWxkIGJlIGRpc2FibGVkCiAgICAgIGRpc2FibGVBZGRCdXR0b246IHRoaXMuZGlzYWJsZUFkZEJ1dHRvbgogICAgfSwgcGljayh0aGlzLiRwcm9wcywgWydhZGRCdXR0b25UZXh0JywgJ2FkZEJ1dHRvblZhcmlhbnQnLCAnZGlzYWJsZWQnLCAnZHVwbGljYXRlVGFnVGV4dCcsICdmb3JtJywgJ2lucHV0Q2xhc3MnLCAnaW52YWxpZFRhZ1RleHQnLCAnbGltaXQnLCAnbGltaXRUYWdzVGV4dCcsICdub1RhZ1JlbW92ZScsICdwbGFjZWhvbGRlcicsICdyZXF1aXJlZCcsICdzZXBhcmF0b3InLCAnc2l6ZScsICdzdGF0ZScsICd0YWdDbGFzcycsICd0YWdQaWxscycsICd0YWdSZW1vdmVMYWJlbCcsICd0YWdWYXJpYW50J10pKTsgLy8gR2VuZXJhdGUgdGhlIHVzZXIgaW50ZXJmYWNlCgoKICAgIHZhciAkY29udGVudCA9IHRoaXMubm9ybWFsaXplU2xvdChTTE9UX05BTUVfREVGQVVMVCwgc2NvcGUpIHx8IHRoaXMuZGVmYXVsdFJlbmRlcihzY29wZSk7IC8vIEdlbmVyYXRlIHRoZSBgYXJpYS1saXZlYCByZWdpb24gZm9yIHRoZSBjdXJyZW50IHZhbHVlKHMpCgogICAgdmFyICRvdXRwdXQgPSBoKCdvdXRwdXQnLCB7CiAgICAgIHN0YXRpY0NsYXNzOiAnc3Itb25seScsCiAgICAgIGF0dHJzOiB7CiAgICAgICAgaWQ6IHRoaXMuc2FmZUlkKCdfX3NlbGVjdGVkX3RhZ3NfXycpLAogICAgICAgIHJvbGU6ICdzdGF0dXMnLAogICAgICAgIGZvcjogY29tcHV0ZWRJbnB1dElkLAogICAgICAgICdhcmlhLWxpdmUnOiBoYXNGb2N1cyA/ICdwb2xpdGUnIDogJ29mZicsCiAgICAgICAgJ2FyaWEtYXRvbWljJzogJ3RydWUnLAogICAgICAgICdhcmlhLXJlbGV2YW50JzogJ2FkZGl0aW9ucyB0ZXh0JwogICAgICB9CiAgICB9LCB0aGlzLnRhZ3Muam9pbignLCAnKSk7IC8vIFJlbW92ZWQgdGFnIGxpdmUgcmVnaW9uCgogICAgdmFyICRyZW1vdmVkID0gaCgnZGl2JywgewogICAgICBzdGF0aWNDbGFzczogJ3NyLW9ubHknLAogICAgICBhdHRyczogewogICAgICAgIGlkOiB0aGlzLnNhZmVJZCgnX19yZW1vdmVkX3RhZ3NfXycpLAogICAgICAgIHJvbGU6ICdzdGF0dXMnLAogICAgICAgICdhcmlhLWxpdmUnOiBoYXNGb2N1cyA/ICdhc3NlcnRpdmUnIDogJ29mZicsCiAgICAgICAgJ2FyaWEtYXRvbWljJzogJ3RydWUnCiAgICAgIH0KICAgIH0sIHRoaXMucmVtb3ZlZFRhZ3MubGVuZ3RoID4gMCA/ICIoIi5jb25jYXQodGhpcy50YWdSZW1vdmVkTGFiZWwsICIpICIpLmNvbmNhdCh0aGlzLnJlbW92ZWRUYWdzLmpvaW4oJywgJykpIDogJycpOyAvLyBBZGQgaGlkZGVuIGlucHV0cyBmb3IgZm9ybSBzdWJtaXNzaW9uCgogICAgdmFyICRoaWRkZW4gPSBoKCk7CgogICAgaWYgKG5hbWUgJiYgIWRpc2FibGVkKSB7CiAgICAgIC8vIFdlIGFkZCBoaWRkZW4gaW5wdXRzIGZvciBlYWNoIHRhZyBpZiBhIG5hbWUgaXMgcHJvdmlkZWQKICAgICAgLy8gV2hlbiB0aGVyZSBhcmUgY3VycmVudGx5IG5vIHRhZ3MsIGEgdmlzdWFsbHkgaGlkZGVuIGlucHV0CiAgICAgIC8vIHdpdGggZW1wdHkgdmFsdWUgaXMgcmVuZGVyZWQgZm9yIHByb3BlciByZXF1aXJlZCBoYW5kbGluZwogICAgICB2YXIgaGFzVGFncyA9IHRhZ3MubGVuZ3RoID4gMDsKICAgICAgJGhpZGRlbiA9IChoYXNUYWdzID8gdGFncyA6IFsnJ10pLm1hcChmdW5jdGlvbiAodGFnKSB7CiAgICAgICAgcmV0dXJuIGgoJ2lucHV0JywgewogICAgICAgICAgY2xhc3M6IHsKICAgICAgICAgICAgJ3NyLW9ubHknOiAhaGFzVGFncwogICAgICAgICAgfSwKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgIHR5cGU6IGhhc1RhZ3MgPyAnaGlkZGVuJyA6ICd0ZXh0JywKICAgICAgICAgICAgdmFsdWU6IHRhZywKICAgICAgICAgICAgcmVxdWlyZWQ6IHJlcXVpcmVkLAogICAgICAgICAgICBuYW1lOiBuYW1lLAogICAgICAgICAgICBmb3JtOiBmb3JtCiAgICAgICAgICB9LAogICAgICAgICAga2V5OiAidGFnX2lucHV0XyIuY29uY2F0KHRhZykKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9IC8vIFJldHVybiB0aGUgcmVuZGVyZWQgb3V0cHV0CgoKICAgIHJldHVybiBoKCdkaXYnLCB7CiAgICAgIHN0YXRpY0NsYXNzOiAnYi1mb3JtLXRhZ3MgZm9ybS1jb250cm9sIGgtYXV0bycsCiAgICAgIGNsYXNzOiBbewogICAgICAgIGZvY3VzOiBoYXNGb2N1cyAmJiAhbm9PdXRlckZvY3VzICYmICFkaXNhYmxlZCwKICAgICAgICBkaXNhYmxlZDogZGlzYWJsZWQKICAgICAgfSwgdGhpcy5zaXplRm9ybUNsYXNzLCB0aGlzLnN0YXRlQ2xhc3NdLAogICAgICBhdHRyczogewogICAgICAgIGlkOiB0aGlzLnNhZmVJZCgpLAogICAgICAgIHJvbGU6ICdncm91cCcsCiAgICAgICAgdGFiaW5kZXg6IGRpc2FibGVkIHx8IG5vT3V0ZXJGb2N1cyA/IG51bGwgOiAnLTEnLAogICAgICAgICdhcmlhLWRlc2NyaWJlZGJ5JzogdGhpcy5zYWZlSWQoJ19fc2VsZWN0ZWRfdGFnc19fJykKICAgICAgfSwKICAgICAgb246IHsKICAgICAgICBjbGljazogdGhpcy5vbkNsaWNrLAogICAgICAgIGZvY3VzaW46IHRoaXMub25Gb2N1c2luLAogICAgICAgIGZvY3Vzb3V0OiB0aGlzLm9uRm9jdXNvdXQKICAgICAgfQogICAgfSwgWyRvdXRwdXQsICRyZW1vdmVkLCAkY29udGVudCwgJGhpZGRlbl0pOwogIH0KfSk7"},null]}