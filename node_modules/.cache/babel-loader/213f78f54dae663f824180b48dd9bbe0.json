{"remainingRequest":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/babel-loader/lib/index.js!/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/vue2-perfect-scrollbar/dist/vue2-perfect-scrollbar.umd.js","dependencies":[{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/vue2-perfect-scrollbar/dist/vue2-perfect-scrollbar.umd.js","mtime":499162500000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF90eXBlb2YgPSByZXF1aXJlKCIvbWVkaWEvZXJuc3QvNjNiY2U0M2MtNWU1MS00YmYxLWE2MTEtM2FmZGYzMmFjNmY2L1Z1ZUpTL0lQVFYtVG9vbHMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvdHlwZW9mIikuZGVmYXVsdDsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5tYXRjaC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIik7CgooZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkgewogICh0eXBlb2YgZXhwb3J0cyA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2YoZXhwb3J0cykpID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IGZhY3RvcnkoZXhwb3J0cykgOiB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoWydleHBvcnRzJ10sIGZhY3RvcnkpIDogZmFjdG9yeShnbG9iYWwuVnVlMlBlcmZlY3RTY3JvbGxiYXIgPSB7fSk7Cn0pKHRoaXMsIGZ1bmN0aW9uIChleHBvcnRzKSB7CiAgJ3VzZSBzdHJpY3QnOwogIC8qIQogICAqIHBlcmZlY3Qtc2Nyb2xsYmFyIHYxLjUuMAogICAqIENvcHlyaWdodCAyMDIwIEh5dW5qZSBKdW4sIE1EQm9vdHN0cmFwIGFuZCBDb250cmlidXRvcnMKICAgKiBMaWNlbnNlZCB1bmRlciBNSVQKICAgKi8KCiAgZnVuY3Rpb24gZ2V0KGVsZW1lbnQpIHsKICAgIHJldHVybiBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpOwogIH0KCiAgZnVuY3Rpb24gc2V0KGVsZW1lbnQsIG9iaikgewogICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICB2YXIgdmFsID0gb2JqW2tleV07CgogICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHsKICAgICAgICB2YWwgPSB2YWwgKyAicHgiOwogICAgICB9CgogICAgICBlbGVtZW50LnN0eWxlW2tleV0gPSB2YWw7CiAgICB9CgogICAgcmV0dXJuIGVsZW1lbnQ7CiAgfQoKICBmdW5jdGlvbiBkaXYoY2xhc3NOYW1lKSB7CiAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBkaXYuY2xhc3NOYW1lID0gY2xhc3NOYW1lOwogICAgcmV0dXJuIGRpdjsKICB9CgogIHZhciBlbE1hdGNoZXMgPSB0eXBlb2YgRWxlbWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgKEVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXMgfHwgRWxlbWVudC5wcm90b3R5cGUud2Via2l0TWF0Y2hlc1NlbGVjdG9yIHx8IEVsZW1lbnQucHJvdG90eXBlLm1vek1hdGNoZXNTZWxlY3RvciB8fCBFbGVtZW50LnByb3RvdHlwZS5tc01hdGNoZXNTZWxlY3Rvcik7CgogIGZ1bmN0aW9uIG1hdGNoZXMoZWxlbWVudCwgcXVlcnkpIHsKICAgIGlmICghZWxNYXRjaGVzKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gZWxlbWVudCBtYXRjaGluZyBtZXRob2Qgc3VwcG9ydGVkJyk7CiAgICB9CgogICAgcmV0dXJuIGVsTWF0Y2hlcy5jYWxsKGVsZW1lbnQsIHF1ZXJ5KTsKICB9CgogIGZ1bmN0aW9uIHJlbW92ZShlbGVtZW50KSB7CiAgICBpZiAoZWxlbWVudC5yZW1vdmUpIHsKICAgICAgZWxlbWVudC5yZW1vdmUoKTsKICAgIH0gZWxzZSB7CiAgICAgIGlmIChlbGVtZW50LnBhcmVudE5vZGUpIHsKICAgICAgICBlbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWxlbWVudCk7CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIHF1ZXJ5Q2hpbGRyZW4oZWxlbWVudCwgc2VsZWN0b3IpIHsKICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoZWxlbWVudC5jaGlsZHJlbiwgZnVuY3Rpb24gKGNoaWxkKSB7CiAgICAgIHJldHVybiBtYXRjaGVzKGNoaWxkLCBzZWxlY3Rvcik7CiAgICB9KTsKICB9CgogIHZhciBjbHMgPSB7CiAgICBtYWluOiAncHMnLAogICAgcnRsOiAncHNfX3J0bCcsCiAgICBlbGVtZW50OiB7CiAgICAgIHRodW1iOiBmdW5jdGlvbiB0aHVtYih4KSB7CiAgICAgICAgcmV0dXJuICJwc19fdGh1bWItIiArIHg7CiAgICAgIH0sCiAgICAgIHJhaWw6IGZ1bmN0aW9uIHJhaWwoeCkgewogICAgICAgIHJldHVybiAicHNfX3JhaWwtIiArIHg7CiAgICAgIH0sCiAgICAgIGNvbnN1bWluZzogJ3BzX19jaGlsZC0tY29uc3VtZScKICAgIH0sCiAgICBzdGF0ZTogewogICAgICBmb2N1czogJ3BzLS1mb2N1cycsCiAgICAgIGNsaWNraW5nOiAncHMtLWNsaWNraW5nJywKICAgICAgYWN0aXZlOiBmdW5jdGlvbiBhY3RpdmUoeCkgewogICAgICAgIHJldHVybiAicHMtLWFjdGl2ZS0iICsgeDsKICAgICAgfSwKICAgICAgc2Nyb2xsaW5nOiBmdW5jdGlvbiBzY3JvbGxpbmcoeCkgewogICAgICAgIHJldHVybiAicHMtLXNjcm9sbGluZy0iICsgeDsKICAgICAgfQogICAgfQogIH07CiAgLyoKICAgKiBIZWxwZXIgbWV0aG9kcwogICAqLwoKICB2YXIgc2Nyb2xsaW5nQ2xhc3NUaW1lb3V0ID0gewogICAgeDogbnVsbCwKICAgIHk6IG51bGwKICB9OwoKICBmdW5jdGlvbiBhZGRTY3JvbGxpbmdDbGFzcyhpLCB4KSB7CiAgICB2YXIgY2xhc3NMaXN0ID0gaS5lbGVtZW50LmNsYXNzTGlzdDsKICAgIHZhciBjbGFzc05hbWUgPSBjbHMuc3RhdGUuc2Nyb2xsaW5nKHgpOwoKICAgIGlmIChjbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkgewogICAgICBjbGVhclRpbWVvdXQoc2Nyb2xsaW5nQ2xhc3NUaW1lb3V0W3hdKTsKICAgIH0gZWxzZSB7CiAgICAgIGNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHJlbW92ZVNjcm9sbGluZ0NsYXNzKGksIHgpIHsKICAgIHNjcm9sbGluZ0NsYXNzVGltZW91dFt4XSA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gaS5pc0FsaXZlICYmIGkuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNscy5zdGF0ZS5zY3JvbGxpbmcoeCkpOwogICAgfSwgaS5zZXR0aW5ncy5zY3JvbGxpbmdUaHJlc2hvbGQpOwogIH0KCiAgZnVuY3Rpb24gc2V0U2Nyb2xsaW5nQ2xhc3NJbnN0YW50bHkoaSwgeCkgewogICAgYWRkU2Nyb2xsaW5nQ2xhc3MoaSwgeCk7CiAgICByZW1vdmVTY3JvbGxpbmdDbGFzcyhpLCB4KTsKICB9CgogIHZhciBFdmVudEVsZW1lbnQgPSBmdW5jdGlvbiBFdmVudEVsZW1lbnQoZWxlbWVudCkgewogICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDsKICAgIHRoaXMuaGFuZGxlcnMgPSB7fTsKICB9OwoKICB2YXIgcHJvdG90eXBlQWNjZXNzb3JzID0gewogICAgaXNFbXB0eTogewogICAgICBjb25maWd1cmFibGU6IHRydWUKICAgIH0KICB9OwoKICBFdmVudEVsZW1lbnQucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiBiaW5kKGV2ZW50TmFtZSwgaGFuZGxlcikgewogICAgaWYgKHR5cGVvZiB0aGlzLmhhbmRsZXJzW2V2ZW50TmFtZV0gPT09ICd1bmRlZmluZWQnKSB7CiAgICAgIHRoaXMuaGFuZGxlcnNbZXZlbnROYW1lXSA9IFtdOwogICAgfQoKICAgIHRoaXMuaGFuZGxlcnNbZXZlbnROYW1lXS5wdXNoKGhhbmRsZXIpOwogICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoYW5kbGVyLCBmYWxzZSk7CiAgfTsKCiAgRXZlbnRFbGVtZW50LnByb3RvdHlwZS51bmJpbmQgPSBmdW5jdGlvbiB1bmJpbmQoZXZlbnROYW1lLCB0YXJnZXQpIHsKICAgIHZhciB0aGlzJDEgPSB0aGlzOwogICAgdGhpcy5oYW5kbGVyc1tldmVudE5hbWVdID0gdGhpcy5oYW5kbGVyc1tldmVudE5hbWVdLmZpbHRlcihmdW5jdGlvbiAoaGFuZGxlcikgewogICAgICBpZiAodGFyZ2V0ICYmIGhhbmRsZXIgIT09IHRhcmdldCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICB0aGlzJDEuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlciwgZmFsc2UpOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9KTsKICB9OwoKICBFdmVudEVsZW1lbnQucHJvdG90eXBlLnVuYmluZEFsbCA9IGZ1bmN0aW9uIHVuYmluZEFsbCgpIHsKICAgIHZhciB0aGlzJDEgPSB0aGlzOwoKICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcyQxLmhhbmRsZXJzKSB7CiAgICAgIHRoaXMkMS51bmJpbmQobmFtZSk7CiAgICB9CiAgfTsKCiAgcHJvdG90eXBlQWNjZXNzb3JzLmlzRW1wdHkuZ2V0ID0gZnVuY3Rpb24gKCkgewogICAgdmFyIHRoaXMkMSA9IHRoaXM7CiAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5oYW5kbGVycykuZXZlcnkoZnVuY3Rpb24gKGtleSkgewogICAgICByZXR1cm4gdGhpcyQxLmhhbmRsZXJzW2tleV0ubGVuZ3RoID09PSAwOwogICAgfSk7CiAgfTsKCiAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoRXZlbnRFbGVtZW50LnByb3RvdHlwZSwgcHJvdG90eXBlQWNjZXNzb3JzKTsKCiAgdmFyIEV2ZW50TWFuYWdlciA9IGZ1bmN0aW9uIEV2ZW50TWFuYWdlcigpIHsKICAgIHRoaXMuZXZlbnRFbGVtZW50cyA9IFtdOwogIH07CgogIEV2ZW50TWFuYWdlci5wcm90b3R5cGUuZXZlbnRFbGVtZW50ID0gZnVuY3Rpb24gZXZlbnRFbGVtZW50KGVsZW1lbnQpIHsKICAgIHZhciBlZSA9IHRoaXMuZXZlbnRFbGVtZW50cy5maWx0ZXIoZnVuY3Rpb24gKGVlKSB7CiAgICAgIHJldHVybiBlZS5lbGVtZW50ID09PSBlbGVtZW50OwogICAgfSlbMF07CgogICAgaWYgKCFlZSkgewogICAgICBlZSA9IG5ldyBFdmVudEVsZW1lbnQoZWxlbWVudCk7CiAgICAgIHRoaXMuZXZlbnRFbGVtZW50cy5wdXNoKGVlKTsKICAgIH0KCiAgICByZXR1cm4gZWU7CiAgfTsKCiAgRXZlbnRNYW5hZ2VyLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gYmluZChlbGVtZW50LCBldmVudE5hbWUsIGhhbmRsZXIpIHsKICAgIHRoaXMuZXZlbnRFbGVtZW50KGVsZW1lbnQpLmJpbmQoZXZlbnROYW1lLCBoYW5kbGVyKTsKICB9OwoKICBFdmVudE1hbmFnZXIucHJvdG90eXBlLnVuYmluZCA9IGZ1bmN0aW9uIHVuYmluZChlbGVtZW50LCBldmVudE5hbWUsIGhhbmRsZXIpIHsKICAgIHZhciBlZSA9IHRoaXMuZXZlbnRFbGVtZW50KGVsZW1lbnQpOwogICAgZWUudW5iaW5kKGV2ZW50TmFtZSwgaGFuZGxlcik7CgogICAgaWYgKGVlLmlzRW1wdHkpIHsKICAgICAgLy8gcmVtb3ZlCiAgICAgIHRoaXMuZXZlbnRFbGVtZW50cy5zcGxpY2UodGhpcy5ldmVudEVsZW1lbnRzLmluZGV4T2YoZWUpLCAxKTsKICAgIH0KICB9OwoKICBFdmVudE1hbmFnZXIucHJvdG90eXBlLnVuYmluZEFsbCA9IGZ1bmN0aW9uIHVuYmluZEFsbCgpIHsKICAgIHRoaXMuZXZlbnRFbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBlLnVuYmluZEFsbCgpOwogICAgfSk7CiAgICB0aGlzLmV2ZW50RWxlbWVudHMgPSBbXTsKICB9OwoKICBFdmVudE1hbmFnZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiBvbmNlKGVsZW1lbnQsIGV2ZW50TmFtZSwgaGFuZGxlcikgewogICAgdmFyIGVlID0gdGhpcy5ldmVudEVsZW1lbnQoZWxlbWVudCk7CgogICAgdmFyIG9uY2VIYW5kbGVyID0gZnVuY3Rpb24gb25jZUhhbmRsZXIoZXZ0KSB7CiAgICAgIGVlLnVuYmluZChldmVudE5hbWUsIG9uY2VIYW5kbGVyKTsKICAgICAgaGFuZGxlcihldnQpOwogICAgfTsKCiAgICBlZS5iaW5kKGV2ZW50TmFtZSwgb25jZUhhbmRsZXIpOwogIH07CgogIGZ1bmN0aW9uIGNyZWF0ZUV2ZW50KG5hbWUpIHsKICAgIGlmICh0eXBlb2Ygd2luZG93LkN1c3RvbUV2ZW50ID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIHJldHVybiBuZXcgQ3VzdG9tRXZlbnQobmFtZSk7CiAgICB9IGVsc2UgewogICAgICB2YXIgZXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7CiAgICAgIGV2dC5pbml0Q3VzdG9tRXZlbnQobmFtZSwgZmFsc2UsIGZhbHNlLCB1bmRlZmluZWQpOwogICAgICByZXR1cm4gZXZ0OwogICAgfQogIH0KCiAgZnVuY3Rpb24gcHJvY2Vzc1Njcm9sbERpZmYoaSwgYXhpcywgZGlmZiwgdXNlU2Nyb2xsaW5nQ2xhc3MsIGZvcmNlRmlyZVJlYWNoRXZlbnQpIHsKICAgIGlmICh1c2VTY3JvbGxpbmdDbGFzcyA9PT0gdm9pZCAwKSB7CiAgICAgIHVzZVNjcm9sbGluZ0NsYXNzID0gdHJ1ZTsKICAgIH0KCiAgICBpZiAoZm9yY2VGaXJlUmVhY2hFdmVudCA9PT0gdm9pZCAwKSB7CiAgICAgIGZvcmNlRmlyZVJlYWNoRXZlbnQgPSBmYWxzZTsKICAgIH0KCiAgICB2YXIgZmllbGRzOwoKICAgIGlmIChheGlzID09PSAndG9wJykgewogICAgICBmaWVsZHMgPSBbJ2NvbnRlbnRIZWlnaHQnLCAnY29udGFpbmVySGVpZ2h0JywgJ3Njcm9sbFRvcCcsICd5JywgJ3VwJywgJ2Rvd24nXTsKICAgIH0gZWxzZSBpZiAoYXhpcyA9PT0gJ2xlZnQnKSB7CiAgICAgIGZpZWxkcyA9IFsnY29udGVudFdpZHRoJywgJ2NvbnRhaW5lcldpZHRoJywgJ3Njcm9sbExlZnQnLCAneCcsICdsZWZ0JywgJ3JpZ2h0J107CiAgICB9IGVsc2UgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ0EgcHJvcGVyIGF4aXMgc2hvdWxkIGJlIHByb3ZpZGVkJyk7CiAgICB9CgogICAgcHJvY2Vzc1Njcm9sbERpZmYkMShpLCBkaWZmLCBmaWVsZHMsIHVzZVNjcm9sbGluZ0NsYXNzLCBmb3JjZUZpcmVSZWFjaEV2ZW50KTsKICB9CgogIGZ1bmN0aW9uIHByb2Nlc3NTY3JvbGxEaWZmJDEoaSwgZGlmZiwgcmVmLCB1c2VTY3JvbGxpbmdDbGFzcywgZm9yY2VGaXJlUmVhY2hFdmVudCkgewogICAgdmFyIGNvbnRlbnRIZWlnaHQgPSByZWZbMF07CiAgICB2YXIgY29udGFpbmVySGVpZ2h0ID0gcmVmWzFdOwogICAgdmFyIHNjcm9sbFRvcCA9IHJlZlsyXTsKICAgIHZhciB5ID0gcmVmWzNdOwogICAgdmFyIHVwID0gcmVmWzRdOwogICAgdmFyIGRvd24gPSByZWZbNV07CgogICAgaWYgKHVzZVNjcm9sbGluZ0NsYXNzID09PSB2b2lkIDApIHsKICAgICAgdXNlU2Nyb2xsaW5nQ2xhc3MgPSB0cnVlOwogICAgfQoKICAgIGlmIChmb3JjZUZpcmVSZWFjaEV2ZW50ID09PSB2b2lkIDApIHsKICAgICAgZm9yY2VGaXJlUmVhY2hFdmVudCA9IGZhbHNlOwogICAgfQoKICAgIHZhciBlbGVtZW50ID0gaS5lbGVtZW50OyAvLyByZXNldCByZWFjaAoKICAgIGkucmVhY2hbeV0gPSBudWxsOyAvLyAxIGZvciBzdWJwaXhlbCByb3VuZGluZwoKICAgIGlmIChlbGVtZW50W3Njcm9sbFRvcF0gPCAxKSB7CiAgICAgIGkucmVhY2hbeV0gPSAnc3RhcnQnOwogICAgfSAvLyAxIGZvciBzdWJwaXhlbCByb3VuZGluZwoKCiAgICBpZiAoZWxlbWVudFtzY3JvbGxUb3BdID4gaVtjb250ZW50SGVpZ2h0XSAtIGlbY29udGFpbmVySGVpZ2h0XSAtIDEpIHsKICAgICAgaS5yZWFjaFt5XSA9ICdlbmQnOwogICAgfQoKICAgIGlmIChkaWZmKSB7CiAgICAgIGVsZW1lbnQuZGlzcGF0Y2hFdmVudChjcmVhdGVFdmVudCgicHMtc2Nyb2xsLSIgKyB5KSk7CgogICAgICBpZiAoZGlmZiA8IDApIHsKICAgICAgICBlbGVtZW50LmRpc3BhdGNoRXZlbnQoY3JlYXRlRXZlbnQoInBzLXNjcm9sbC0iICsgdXApKTsKICAgICAgfSBlbHNlIGlmIChkaWZmID4gMCkgewogICAgICAgIGVsZW1lbnQuZGlzcGF0Y2hFdmVudChjcmVhdGVFdmVudCgicHMtc2Nyb2xsLSIgKyBkb3duKSk7CiAgICAgIH0KCiAgICAgIGlmICh1c2VTY3JvbGxpbmdDbGFzcykgewogICAgICAgIHNldFNjcm9sbGluZ0NsYXNzSW5zdGFudGx5KGksIHkpOwogICAgICB9CiAgICB9CgogICAgaWYgKGkucmVhY2hbeV0gJiYgKGRpZmYgfHwgZm9yY2VGaXJlUmVhY2hFdmVudCkpIHsKICAgICAgZWxlbWVudC5kaXNwYXRjaEV2ZW50KGNyZWF0ZUV2ZW50KCJwcy0iICsgeSArICItcmVhY2gtIiArIGkucmVhY2hbeV0pKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHRvSW50KHgpIHsKICAgIHJldHVybiBwYXJzZUludCh4LCAxMCkgfHwgMDsKICB9CgogIGZ1bmN0aW9uIGlzRWRpdGFibGUoZWwpIHsKICAgIHJldHVybiBtYXRjaGVzKGVsLCAnaW5wdXQsW2NvbnRlbnRlZGl0YWJsZV0nKSB8fCBtYXRjaGVzKGVsLCAnc2VsZWN0LFtjb250ZW50ZWRpdGFibGVdJykgfHwgbWF0Y2hlcyhlbCwgJ3RleHRhcmVhLFtjb250ZW50ZWRpdGFibGVdJykgfHwgbWF0Y2hlcyhlbCwgJ2J1dHRvbixbY29udGVudGVkaXRhYmxlXScpOwogIH0KCiAgZnVuY3Rpb24gb3V0ZXJXaWR0aChlbGVtZW50KSB7CiAgICB2YXIgc3R5bGVzID0gZ2V0KGVsZW1lbnQpOwogICAgcmV0dXJuIHRvSW50KHN0eWxlcy53aWR0aCkgKyB0b0ludChzdHlsZXMucGFkZGluZ0xlZnQpICsgdG9JbnQoc3R5bGVzLnBhZGRpbmdSaWdodCkgKyB0b0ludChzdHlsZXMuYm9yZGVyTGVmdFdpZHRoKSArIHRvSW50KHN0eWxlcy5ib3JkZXJSaWdodFdpZHRoKTsKICB9CgogIHZhciBlbnYgPSB7CiAgICBpc1dlYktpdDogdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJiAnV2Via2l0QXBwZWFyYW5jZScgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLAogICAgc3VwcG9ydHNUb3VjaDogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdyB8fCAnbWF4VG91Y2hQb2ludHMnIGluIHdpbmRvdy5uYXZpZ2F0b3IgJiYgd2luZG93Lm5hdmlnYXRvci5tYXhUb3VjaFBvaW50cyA+IDAgfHwgd2luZG93LkRvY3VtZW50VG91Y2ggJiYgZG9jdW1lbnQgaW5zdGFuY2VvZiB3aW5kb3cuRG9jdW1lbnRUb3VjaCksCiAgICBzdXBwb3J0c0llUG9pbnRlcjogdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgbmF2aWdhdG9yLm1zTWF4VG91Y2hQb2ludHMsCiAgICBpc0Nocm9tZTogdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgL0Nocm9tZS9pLnRlc3QobmF2aWdhdG9yICYmIG5hdmlnYXRvci51c2VyQWdlbnQpCiAgfTsKCiAgZnVuY3Rpb24gdXBkYXRlR2VvbWV0cnkoaSkgewogICAgdmFyIGVsZW1lbnQgPSBpLmVsZW1lbnQ7CiAgICB2YXIgcm91bmRlZFNjcm9sbFRvcCA9IE1hdGguZmxvb3IoZWxlbWVudC5zY3JvbGxUb3ApOwogICAgdmFyIHJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgaS5jb250YWluZXJXaWR0aCA9IE1hdGguY2VpbChyZWN0LndpZHRoKTsKICAgIGkuY29udGFpbmVySGVpZ2h0ID0gTWF0aC5jZWlsKHJlY3QuaGVpZ2h0KTsKICAgIGkuY29udGVudFdpZHRoID0gZWxlbWVudC5zY3JvbGxXaWR0aDsKICAgIGkuY29udGVudEhlaWdodCA9IGVsZW1lbnQuc2Nyb2xsSGVpZ2h0OwoKICAgIGlmICghZWxlbWVudC5jb250YWlucyhpLnNjcm9sbGJhclhSYWlsKSkgewogICAgICAvLyBjbGVhbiB1cCBhbmQgYXBwZW5kCiAgICAgIHF1ZXJ5Q2hpbGRyZW4oZWxlbWVudCwgY2xzLmVsZW1lbnQucmFpbCgneCcpKS5mb3JFYWNoKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiByZW1vdmUoZWwpOwogICAgICB9KTsKICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChpLnNjcm9sbGJhclhSYWlsKTsKICAgIH0KCiAgICBpZiAoIWVsZW1lbnQuY29udGFpbnMoaS5zY3JvbGxiYXJZUmFpbCkpIHsKICAgICAgLy8gY2xlYW4gdXAgYW5kIGFwcGVuZAogICAgICBxdWVyeUNoaWxkcmVuKGVsZW1lbnQsIGNscy5lbGVtZW50LnJhaWwoJ3knKSkuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gcmVtb3ZlKGVsKTsKICAgICAgfSk7CiAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoaS5zY3JvbGxiYXJZUmFpbCk7CiAgICB9CgogICAgaWYgKCFpLnNldHRpbmdzLnN1cHByZXNzU2Nyb2xsWCAmJiBpLmNvbnRhaW5lcldpZHRoICsgaS5zZXR0aW5ncy5zY3JvbGxYTWFyZ2luT2Zmc2V0IDwgaS5jb250ZW50V2lkdGgpIHsKICAgICAgaS5zY3JvbGxiYXJYQWN0aXZlID0gdHJ1ZTsKICAgICAgaS5yYWlsWFdpZHRoID0gaS5jb250YWluZXJXaWR0aCAtIGkucmFpbFhNYXJnaW5XaWR0aDsKICAgICAgaS5yYWlsWFJhdGlvID0gaS5jb250YWluZXJXaWR0aCAvIGkucmFpbFhXaWR0aDsKICAgICAgaS5zY3JvbGxiYXJYV2lkdGggPSBnZXRUaHVtYlNpemUoaSwgdG9JbnQoaS5yYWlsWFdpZHRoICogaS5jb250YWluZXJXaWR0aCAvIGkuY29udGVudFdpZHRoKSk7CiAgICAgIGkuc2Nyb2xsYmFyWExlZnQgPSB0b0ludCgoaS5uZWdhdGl2ZVNjcm9sbEFkanVzdG1lbnQgKyBlbGVtZW50LnNjcm9sbExlZnQpICogKGkucmFpbFhXaWR0aCAtIGkuc2Nyb2xsYmFyWFdpZHRoKSAvIChpLmNvbnRlbnRXaWR0aCAtIGkuY29udGFpbmVyV2lkdGgpKTsKICAgIH0gZWxzZSB7CiAgICAgIGkuc2Nyb2xsYmFyWEFjdGl2ZSA9IGZhbHNlOwogICAgfQoKICAgIGlmICghaS5zZXR0aW5ncy5zdXBwcmVzc1Njcm9sbFkgJiYgaS5jb250YWluZXJIZWlnaHQgKyBpLnNldHRpbmdzLnNjcm9sbFlNYXJnaW5PZmZzZXQgPCBpLmNvbnRlbnRIZWlnaHQpIHsKICAgICAgaS5zY3JvbGxiYXJZQWN0aXZlID0gdHJ1ZTsKICAgICAgaS5yYWlsWUhlaWdodCA9IGkuY29udGFpbmVySGVpZ2h0IC0gaS5yYWlsWU1hcmdpbkhlaWdodDsKICAgICAgaS5yYWlsWVJhdGlvID0gaS5jb250YWluZXJIZWlnaHQgLyBpLnJhaWxZSGVpZ2h0OwogICAgICBpLnNjcm9sbGJhcllIZWlnaHQgPSBnZXRUaHVtYlNpemUoaSwgdG9JbnQoaS5yYWlsWUhlaWdodCAqIGkuY29udGFpbmVySGVpZ2h0IC8gaS5jb250ZW50SGVpZ2h0KSk7CiAgICAgIGkuc2Nyb2xsYmFyWVRvcCA9IHRvSW50KHJvdW5kZWRTY3JvbGxUb3AgKiAoaS5yYWlsWUhlaWdodCAtIGkuc2Nyb2xsYmFyWUhlaWdodCkgLyAoaS5jb250ZW50SGVpZ2h0IC0gaS5jb250YWluZXJIZWlnaHQpKTsKICAgIH0gZWxzZSB7CiAgICAgIGkuc2Nyb2xsYmFyWUFjdGl2ZSA9IGZhbHNlOwogICAgfQoKICAgIGlmIChpLnNjcm9sbGJhclhMZWZ0ID49IGkucmFpbFhXaWR0aCAtIGkuc2Nyb2xsYmFyWFdpZHRoKSB7CiAgICAgIGkuc2Nyb2xsYmFyWExlZnQgPSBpLnJhaWxYV2lkdGggLSBpLnNjcm9sbGJhclhXaWR0aDsKICAgIH0KCiAgICBpZiAoaS5zY3JvbGxiYXJZVG9wID49IGkucmFpbFlIZWlnaHQgLSBpLnNjcm9sbGJhcllIZWlnaHQpIHsKICAgICAgaS5zY3JvbGxiYXJZVG9wID0gaS5yYWlsWUhlaWdodCAtIGkuc2Nyb2xsYmFyWUhlaWdodDsKICAgIH0KCiAgICB1cGRhdGVDc3MoZWxlbWVudCwgaSk7CgogICAgaWYgKGkuc2Nyb2xsYmFyWEFjdGl2ZSkgewogICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xzLnN0YXRlLmFjdGl2ZSgneCcpKTsKICAgIH0gZWxzZSB7CiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjbHMuc3RhdGUuYWN0aXZlKCd4JykpOwogICAgICBpLnNjcm9sbGJhclhXaWR0aCA9IDA7CiAgICAgIGkuc2Nyb2xsYmFyWExlZnQgPSAwOwogICAgICBlbGVtZW50LnNjcm9sbExlZnQgPSBpLmlzUnRsID09PSB0cnVlID8gaS5jb250ZW50V2lkdGggOiAwOwogICAgfQoKICAgIGlmIChpLnNjcm9sbGJhcllBY3RpdmUpIHsKICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGNscy5zdGF0ZS5hY3RpdmUoJ3knKSk7CiAgICB9IGVsc2UgewogICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY2xzLnN0YXRlLmFjdGl2ZSgneScpKTsKICAgICAgaS5zY3JvbGxiYXJZSGVpZ2h0ID0gMDsKICAgICAgaS5zY3JvbGxiYXJZVG9wID0gMDsKICAgICAgZWxlbWVudC5zY3JvbGxUb3AgPSAwOwogICAgfQogIH0KCiAgZnVuY3Rpb24gZ2V0VGh1bWJTaXplKGksIHRodW1iU2l6ZSkgewogICAgaWYgKGkuc2V0dGluZ3MubWluU2Nyb2xsYmFyTGVuZ3RoKSB7CiAgICAgIHRodW1iU2l6ZSA9IE1hdGgubWF4KHRodW1iU2l6ZSwgaS5zZXR0aW5ncy5taW5TY3JvbGxiYXJMZW5ndGgpOwogICAgfQoKICAgIGlmIChpLnNldHRpbmdzLm1heFNjcm9sbGJhckxlbmd0aCkgewogICAgICB0aHVtYlNpemUgPSBNYXRoLm1pbih0aHVtYlNpemUsIGkuc2V0dGluZ3MubWF4U2Nyb2xsYmFyTGVuZ3RoKTsKICAgIH0KCiAgICByZXR1cm4gdGh1bWJTaXplOwogIH0KCiAgZnVuY3Rpb24gdXBkYXRlQ3NzKGVsZW1lbnQsIGkpIHsKICAgIHZhciB4UmFpbE9mZnNldCA9IHsKICAgICAgd2lkdGg6IGkucmFpbFhXaWR0aAogICAgfTsKICAgIHZhciByb3VuZGVkU2Nyb2xsVG9wID0gTWF0aC5mbG9vcihlbGVtZW50LnNjcm9sbFRvcCk7CgogICAgaWYgKGkuaXNSdGwpIHsKICAgICAgeFJhaWxPZmZzZXQubGVmdCA9IGkubmVnYXRpdmVTY3JvbGxBZGp1c3RtZW50ICsgZWxlbWVudC5zY3JvbGxMZWZ0ICsgaS5jb250YWluZXJXaWR0aCAtIGkuY29udGVudFdpZHRoOwogICAgfSBlbHNlIHsKICAgICAgeFJhaWxPZmZzZXQubGVmdCA9IGVsZW1lbnQuc2Nyb2xsTGVmdDsKICAgIH0KCiAgICBpZiAoaS5pc1Njcm9sbGJhclhVc2luZ0JvdHRvbSkgewogICAgICB4UmFpbE9mZnNldC5ib3R0b20gPSBpLnNjcm9sbGJhclhCb3R0b20gLSByb3VuZGVkU2Nyb2xsVG9wOwogICAgfSBlbHNlIHsKICAgICAgeFJhaWxPZmZzZXQudG9wID0gaS5zY3JvbGxiYXJYVG9wICsgcm91bmRlZFNjcm9sbFRvcDsKICAgIH0KCiAgICBzZXQoaS5zY3JvbGxiYXJYUmFpbCwgeFJhaWxPZmZzZXQpOwogICAgdmFyIHlSYWlsT2Zmc2V0ID0gewogICAgICB0b3A6IHJvdW5kZWRTY3JvbGxUb3AsCiAgICAgIGhlaWdodDogaS5yYWlsWUhlaWdodAogICAgfTsKCiAgICBpZiAoaS5pc1Njcm9sbGJhcllVc2luZ1JpZ2h0KSB7CiAgICAgIGlmIChpLmlzUnRsKSB7CiAgICAgICAgeVJhaWxPZmZzZXQucmlnaHQgPSBpLmNvbnRlbnRXaWR0aCAtIChpLm5lZ2F0aXZlU2Nyb2xsQWRqdXN0bWVudCArIGVsZW1lbnQuc2Nyb2xsTGVmdCkgLSBpLnNjcm9sbGJhcllSaWdodCAtIGkuc2Nyb2xsYmFyWU91dGVyV2lkdGggLSA5OwogICAgICB9IGVsc2UgewogICAgICAgIHlSYWlsT2Zmc2V0LnJpZ2h0ID0gaS5zY3JvbGxiYXJZUmlnaHQgLSBlbGVtZW50LnNjcm9sbExlZnQ7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGlmIChpLmlzUnRsKSB7CiAgICAgICAgeVJhaWxPZmZzZXQubGVmdCA9IGkubmVnYXRpdmVTY3JvbGxBZGp1c3RtZW50ICsgZWxlbWVudC5zY3JvbGxMZWZ0ICsgaS5jb250YWluZXJXaWR0aCAqIDIgLSBpLmNvbnRlbnRXaWR0aCAtIGkuc2Nyb2xsYmFyWUxlZnQgLSBpLnNjcm9sbGJhcllPdXRlcldpZHRoOwogICAgICB9IGVsc2UgewogICAgICAgIHlSYWlsT2Zmc2V0LmxlZnQgPSBpLnNjcm9sbGJhcllMZWZ0ICsgZWxlbWVudC5zY3JvbGxMZWZ0OwogICAgICB9CiAgICB9CgogICAgc2V0KGkuc2Nyb2xsYmFyWVJhaWwsIHlSYWlsT2Zmc2V0KTsKICAgIHNldChpLnNjcm9sbGJhclgsIHsKICAgICAgbGVmdDogaS5zY3JvbGxiYXJYTGVmdCwKICAgICAgd2lkdGg6IGkuc2Nyb2xsYmFyWFdpZHRoIC0gaS5yYWlsQm9yZGVyWFdpZHRoCiAgICB9KTsKICAgIHNldChpLnNjcm9sbGJhclksIHsKICAgICAgdG9wOiBpLnNjcm9sbGJhcllUb3AsCiAgICAgIGhlaWdodDogaS5zY3JvbGxiYXJZSGVpZ2h0IC0gaS5yYWlsQm9yZGVyWVdpZHRoCiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIGNsaWNrUmFpbChpKSB7CiAgICB2YXIgZWxlbWVudCA9IGkuZWxlbWVudDsKICAgIGkuZXZlbnQuYmluZChpLnNjcm9sbGJhclksICdtb3VzZWRvd24nLCBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgIH0pOwogICAgaS5ldmVudC5iaW5kKGkuc2Nyb2xsYmFyWVJhaWwsICdtb3VzZWRvd24nLCBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgcG9zaXRpb25Ub3AgPSBlLnBhZ2VZIC0gd2luZG93LnBhZ2VZT2Zmc2V0IC0gaS5zY3JvbGxiYXJZUmFpbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7CiAgICAgIHZhciBkaXJlY3Rpb24gPSBwb3NpdGlvblRvcCA+IGkuc2Nyb2xsYmFyWVRvcCA/IDEgOiAtMTsKICAgICAgaS5lbGVtZW50LnNjcm9sbFRvcCArPSBkaXJlY3Rpb24gKiBpLmNvbnRhaW5lckhlaWdodDsKICAgICAgdXBkYXRlR2VvbWV0cnkoaSk7CiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICB9KTsKICAgIGkuZXZlbnQuYmluZChpLnNjcm9sbGJhclgsICdtb3VzZWRvd24nLCBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgIH0pOwogICAgaS5ldmVudC5iaW5kKGkuc2Nyb2xsYmFyWFJhaWwsICdtb3VzZWRvd24nLCBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgcG9zaXRpb25MZWZ0ID0gZS5wYWdlWCAtIHdpbmRvdy5wYWdlWE9mZnNldCAtIGkuc2Nyb2xsYmFyWFJhaWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDsKICAgICAgdmFyIGRpcmVjdGlvbiA9IHBvc2l0aW9uTGVmdCA+IGkuc2Nyb2xsYmFyWExlZnQgPyAxIDogLTE7CiAgICAgIGkuZWxlbWVudC5zY3JvbGxMZWZ0ICs9IGRpcmVjdGlvbiAqIGkuY29udGFpbmVyV2lkdGg7CiAgICAgIHVwZGF0ZUdlb21ldHJ5KGkpOwogICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgfSk7CiAgfQoKICBmdW5jdGlvbiBkcmFnVGh1bWIoaSkgewogICAgYmluZE1vdXNlU2Nyb2xsSGFuZGxlcihpLCBbJ2NvbnRhaW5lcldpZHRoJywgJ2NvbnRlbnRXaWR0aCcsICdwYWdlWCcsICdyYWlsWFdpZHRoJywgJ3Njcm9sbGJhclgnLCAnc2Nyb2xsYmFyWFdpZHRoJywgJ3Njcm9sbExlZnQnLCAneCcsICdzY3JvbGxiYXJYUmFpbCddKTsKICAgIGJpbmRNb3VzZVNjcm9sbEhhbmRsZXIoaSwgWydjb250YWluZXJIZWlnaHQnLCAnY29udGVudEhlaWdodCcsICdwYWdlWScsICdyYWlsWUhlaWdodCcsICdzY3JvbGxiYXJZJywgJ3Njcm9sbGJhcllIZWlnaHQnLCAnc2Nyb2xsVG9wJywgJ3knLCAnc2Nyb2xsYmFyWVJhaWwnXSk7CiAgfQoKICBmdW5jdGlvbiBiaW5kTW91c2VTY3JvbGxIYW5kbGVyKGksIHJlZikgewogICAgdmFyIGNvbnRhaW5lckhlaWdodCA9IHJlZlswXTsKICAgIHZhciBjb250ZW50SGVpZ2h0ID0gcmVmWzFdOwogICAgdmFyIHBhZ2VZID0gcmVmWzJdOwogICAgdmFyIHJhaWxZSGVpZ2h0ID0gcmVmWzNdOwogICAgdmFyIHNjcm9sbGJhclkgPSByZWZbNF07CiAgICB2YXIgc2Nyb2xsYmFyWUhlaWdodCA9IHJlZls1XTsKICAgIHZhciBzY3JvbGxUb3AgPSByZWZbNl07CiAgICB2YXIgeSA9IHJlZls3XTsKICAgIHZhciBzY3JvbGxiYXJZUmFpbCA9IHJlZls4XTsKICAgIHZhciBlbGVtZW50ID0gaS5lbGVtZW50OwogICAgdmFyIHN0YXJ0aW5nU2Nyb2xsVG9wID0gbnVsbDsKICAgIHZhciBzdGFydGluZ01vdXNlUGFnZVkgPSBudWxsOwogICAgdmFyIHNjcm9sbEJ5ID0gbnVsbDsKCiAgICBmdW5jdGlvbiBtb3VzZU1vdmVIYW5kbGVyKGUpIHsKICAgICAgaWYgKGUudG91Y2hlcyAmJiBlLnRvdWNoZXNbMF0pIHsKICAgICAgICBlW3BhZ2VZXSA9IGUudG91Y2hlc1swXS5wYWdlWTsKICAgICAgfQoKICAgICAgZWxlbWVudFtzY3JvbGxUb3BdID0gc3RhcnRpbmdTY3JvbGxUb3AgKyBzY3JvbGxCeSAqIChlW3BhZ2VZXSAtIHN0YXJ0aW5nTW91c2VQYWdlWSk7CiAgICAgIGFkZFNjcm9sbGluZ0NsYXNzKGksIHkpOwogICAgICB1cGRhdGVHZW9tZXRyeShpKTsKICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIG1vdXNlVXBIYW5kbGVyKCkgewogICAgICByZW1vdmVTY3JvbGxpbmdDbGFzcyhpLCB5KTsKICAgICAgaVtzY3JvbGxiYXJZUmFpbF0uY2xhc3NMaXN0LnJlbW92ZShjbHMuc3RhdGUuY2xpY2tpbmcpOwogICAgICBpLmV2ZW50LnVuYmluZChpLm93bmVyRG9jdW1lbnQsICdtb3VzZW1vdmUnLCBtb3VzZU1vdmVIYW5kbGVyKTsKICAgIH0KCiAgICBmdW5jdGlvbiBiaW5kTW92ZXMoZSwgdG91Y2hNb2RlKSB7CiAgICAgIHN0YXJ0aW5nU2Nyb2xsVG9wID0gZWxlbWVudFtzY3JvbGxUb3BdOwoKICAgICAgaWYgKHRvdWNoTW9kZSAmJiBlLnRvdWNoZXMpIHsKICAgICAgICBlW3BhZ2VZXSA9IGUudG91Y2hlc1swXS5wYWdlWTsKICAgICAgfQoKICAgICAgc3RhcnRpbmdNb3VzZVBhZ2VZID0gZVtwYWdlWV07CiAgICAgIHNjcm9sbEJ5ID0gKGlbY29udGVudEhlaWdodF0gLSBpW2NvbnRhaW5lckhlaWdodF0pIC8gKGlbcmFpbFlIZWlnaHRdIC0gaVtzY3JvbGxiYXJZSGVpZ2h0XSk7CgogICAgICBpZiAoIXRvdWNoTW9kZSkgewogICAgICAgIGkuZXZlbnQuYmluZChpLm93bmVyRG9jdW1lbnQsICdtb3VzZW1vdmUnLCBtb3VzZU1vdmVIYW5kbGVyKTsKICAgICAgICBpLmV2ZW50Lm9uY2UoaS5vd25lckRvY3VtZW50LCAnbW91c2V1cCcsIG1vdXNlVXBIYW5kbGVyKTsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaS5ldmVudC5iaW5kKGkub3duZXJEb2N1bWVudCwgJ3RvdWNobW92ZScsIG1vdXNlTW92ZUhhbmRsZXIpOwogICAgICB9CgogICAgICBpW3Njcm9sbGJhcllSYWlsXS5jbGFzc0xpc3QuYWRkKGNscy5zdGF0ZS5jbGlja2luZyk7CiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICB9CgogICAgaS5ldmVudC5iaW5kKGlbc2Nyb2xsYmFyWV0sICdtb3VzZWRvd24nLCBmdW5jdGlvbiAoZSkgewogICAgICBiaW5kTW92ZXMoZSk7CiAgICB9KTsKICAgIGkuZXZlbnQuYmluZChpW3Njcm9sbGJhclldLCAndG91Y2hzdGFydCcsIGZ1bmN0aW9uIChlKSB7CiAgICAgIGJpbmRNb3ZlcyhlLCB0cnVlKTsKICAgIH0pOwogIH0KCiAgZnVuY3Rpb24ga2V5Ym9hcmQoaSkgewogICAgdmFyIGVsZW1lbnQgPSBpLmVsZW1lbnQ7CgogICAgdmFyIGVsZW1lbnRIb3ZlcmVkID0gZnVuY3Rpb24gZWxlbWVudEhvdmVyZWQoKSB7CiAgICAgIHJldHVybiBtYXRjaGVzKGVsZW1lbnQsICc6aG92ZXInKTsKICAgIH07CgogICAgdmFyIHNjcm9sbGJhckZvY3VzZWQgPSBmdW5jdGlvbiBzY3JvbGxiYXJGb2N1c2VkKCkgewogICAgICByZXR1cm4gbWF0Y2hlcyhpLnNjcm9sbGJhclgsICc6Zm9jdXMnKSB8fCBtYXRjaGVzKGkuc2Nyb2xsYmFyWSwgJzpmb2N1cycpOwogICAgfTsKCiAgICBmdW5jdGlvbiBzaG91bGRQcmV2ZW50RGVmYXVsdChkZWx0YVgsIGRlbHRhWSkgewogICAgICB2YXIgc2Nyb2xsVG9wID0gTWF0aC5mbG9vcihlbGVtZW50LnNjcm9sbFRvcCk7CgogICAgICBpZiAoZGVsdGFYID09PSAwKSB7CiAgICAgICAgaWYgKCFpLnNjcm9sbGJhcllBY3RpdmUpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGlmIChzY3JvbGxUb3AgPT09IDAgJiYgZGVsdGFZID4gMCB8fCBzY3JvbGxUb3AgPj0gaS5jb250ZW50SGVpZ2h0IC0gaS5jb250YWluZXJIZWlnaHQgJiYgZGVsdGFZIDwgMCkgewogICAgICAgICAgcmV0dXJuICFpLnNldHRpbmdzLndoZWVsUHJvcGFnYXRpb247CiAgICAgICAgfQogICAgICB9CgogICAgICB2YXIgc2Nyb2xsTGVmdCA9IGVsZW1lbnQuc2Nyb2xsTGVmdDsKCiAgICAgIGlmIChkZWx0YVkgPT09IDApIHsKICAgICAgICBpZiAoIWkuc2Nyb2xsYmFyWEFjdGl2ZSkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgaWYgKHNjcm9sbExlZnQgPT09IDAgJiYgZGVsdGFYIDwgMCB8fCBzY3JvbGxMZWZ0ID49IGkuY29udGVudFdpZHRoIC0gaS5jb250YWluZXJXaWR0aCAmJiBkZWx0YVggPiAwKSB7CiAgICAgICAgICByZXR1cm4gIWkuc2V0dGluZ3Mud2hlZWxQcm9wYWdhdGlvbjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGkuZXZlbnQuYmluZChpLm93bmVyRG9jdW1lbnQsICdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHsKICAgICAgaWYgKGUuaXNEZWZhdWx0UHJldmVudGVkICYmIGUuaXNEZWZhdWx0UHJldmVudGVkKCkgfHwgZS5kZWZhdWx0UHJldmVudGVkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoIWVsZW1lbnRIb3ZlcmVkKCkgJiYgIXNjcm9sbGJhckZvY3VzZWQoKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGFjdGl2ZUVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50ID8gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA6IGkub3duZXJEb2N1bWVudC5hY3RpdmVFbGVtZW50OwoKICAgICAgaWYgKGFjdGl2ZUVsZW1lbnQpIHsKICAgICAgICBpZiAoYWN0aXZlRWxlbWVudC50YWdOYW1lID09PSAnSUZSQU1FJykgewogICAgICAgICAgYWN0aXZlRWxlbWVudCA9IGFjdGl2ZUVsZW1lbnQuY29udGVudERvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIGdvIGRlZXBlciBpZiBlbGVtZW50IGlzIGEgd2ViY29tcG9uZW50CiAgICAgICAgICB3aGlsZSAoYWN0aXZlRWxlbWVudC5zaGFkb3dSb290KSB7CiAgICAgICAgICAgIGFjdGl2ZUVsZW1lbnQgPSBhY3RpdmVFbGVtZW50LnNoYWRvd1Jvb3QuYWN0aXZlRWxlbWVudDsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChpc0VkaXRhYmxlKGFjdGl2ZUVsZW1lbnQpKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CgogICAgICB2YXIgZGVsdGFYID0gMDsKICAgICAgdmFyIGRlbHRhWSA9IDA7CgogICAgICBzd2l0Y2ggKGUud2hpY2gpIHsKICAgICAgICBjYXNlIDM3OgogICAgICAgICAgLy8gbGVmdAogICAgICAgICAgaWYgKGUubWV0YUtleSkgewogICAgICAgICAgICBkZWx0YVggPSAtaS5jb250ZW50V2lkdGg7CiAgICAgICAgICB9IGVsc2UgaWYgKGUuYWx0S2V5KSB7CiAgICAgICAgICAgIGRlbHRhWCA9IC1pLmNvbnRhaW5lcldpZHRoOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZGVsdGFYID0gLTMwOwogICAgICAgICAgfQoKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDM4OgogICAgICAgICAgLy8gdXAKICAgICAgICAgIGlmIChlLm1ldGFLZXkpIHsKICAgICAgICAgICAgZGVsdGFZID0gaS5jb250ZW50SGVpZ2h0OwogICAgICAgICAgfSBlbHNlIGlmIChlLmFsdEtleSkgewogICAgICAgICAgICBkZWx0YVkgPSBpLmNvbnRhaW5lckhlaWdodDsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGRlbHRhWSA9IDMwOwogICAgICAgICAgfQoKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDM5OgogICAgICAgICAgLy8gcmlnaHQKICAgICAgICAgIGlmIChlLm1ldGFLZXkpIHsKICAgICAgICAgICAgZGVsdGFYID0gaS5jb250ZW50V2lkdGg7CiAgICAgICAgICB9IGVsc2UgaWYgKGUuYWx0S2V5KSB7CiAgICAgICAgICAgIGRlbHRhWCA9IGkuY29udGFpbmVyV2lkdGg7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkZWx0YVggPSAzMDsKICAgICAgICAgIH0KCiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA0MDoKICAgICAgICAgIC8vIGRvd24KICAgICAgICAgIGlmIChlLm1ldGFLZXkpIHsKICAgICAgICAgICAgZGVsdGFZID0gLWkuY29udGVudEhlaWdodDsKICAgICAgICAgIH0gZWxzZSBpZiAoZS5hbHRLZXkpIHsKICAgICAgICAgICAgZGVsdGFZID0gLWkuY29udGFpbmVySGVpZ2h0OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZGVsdGFZID0gLTMwOwogICAgICAgICAgfQoKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDMyOgogICAgICAgICAgLy8gc3BhY2UgYmFyCiAgICAgICAgICBpZiAoZS5zaGlmdEtleSkgewogICAgICAgICAgICBkZWx0YVkgPSBpLmNvbnRhaW5lckhlaWdodDsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGRlbHRhWSA9IC1pLmNvbnRhaW5lckhlaWdodDsKICAgICAgICAgIH0KCiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAzMzoKICAgICAgICAgIC8vIHBhZ2UgdXAKICAgICAgICAgIGRlbHRhWSA9IGkuY29udGFpbmVySGVpZ2h0OwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMzQ6CiAgICAgICAgICAvLyBwYWdlIGRvd24KICAgICAgICAgIGRlbHRhWSA9IC1pLmNvbnRhaW5lckhlaWdodDsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDM2OgogICAgICAgICAgLy8gaG9tZQogICAgICAgICAgZGVsdGFZID0gaS5jb250ZW50SGVpZ2h0OwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMzU6CiAgICAgICAgICAvLyBlbmQKICAgICAgICAgIGRlbHRhWSA9IC1pLmNvbnRlbnRIZWlnaHQ7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKGkuc2V0dGluZ3Muc3VwcHJlc3NTY3JvbGxYICYmIGRlbHRhWCAhPT0gMCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKGkuc2V0dGluZ3Muc3VwcHJlc3NTY3JvbGxZICYmIGRlbHRhWSAhPT0gMCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgZWxlbWVudC5zY3JvbGxUb3AgLT0gZGVsdGFZOwogICAgICBlbGVtZW50LnNjcm9sbExlZnQgKz0gZGVsdGFYOwogICAgICB1cGRhdGVHZW9tZXRyeShpKTsKCiAgICAgIGlmIChzaG91bGRQcmV2ZW50RGVmYXVsdChkZWx0YVgsIGRlbHRhWSkpIHsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIH0KICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gd2hlZWwoaSkgewogICAgdmFyIGVsZW1lbnQgPSBpLmVsZW1lbnQ7CgogICAgZnVuY3Rpb24gc2hvdWxkUHJldmVudERlZmF1bHQoZGVsdGFYLCBkZWx0YVkpIHsKICAgICAgdmFyIHJvdW5kZWRTY3JvbGxUb3AgPSBNYXRoLmZsb29yKGVsZW1lbnQuc2Nyb2xsVG9wKTsKICAgICAgdmFyIGlzVG9wID0gZWxlbWVudC5zY3JvbGxUb3AgPT09IDA7CiAgICAgIHZhciBpc0JvdHRvbSA9IHJvdW5kZWRTY3JvbGxUb3AgKyBlbGVtZW50Lm9mZnNldEhlaWdodCA9PT0gZWxlbWVudC5zY3JvbGxIZWlnaHQ7CiAgICAgIHZhciBpc0xlZnQgPSBlbGVtZW50LnNjcm9sbExlZnQgPT09IDA7CiAgICAgIHZhciBpc1JpZ2h0ID0gZWxlbWVudC5zY3JvbGxMZWZ0ICsgZWxlbWVudC5vZmZzZXRXaWR0aCA9PT0gZWxlbWVudC5zY3JvbGxXaWR0aDsKICAgICAgdmFyIGhpdHNCb3VuZDsgLy8gcGljayBheGlzIHdpdGggcHJpbWFyeSBkaXJlY3Rpb24KCiAgICAgIGlmIChNYXRoLmFicyhkZWx0YVkpID4gTWF0aC5hYnMoZGVsdGFYKSkgewogICAgICAgIGhpdHNCb3VuZCA9IGlzVG9wIHx8IGlzQm90dG9tOwogICAgICB9IGVsc2UgewogICAgICAgIGhpdHNCb3VuZCA9IGlzTGVmdCB8fCBpc1JpZ2h0OwogICAgICB9CgogICAgICByZXR1cm4gaGl0c0JvdW5kID8gIWkuc2V0dGluZ3Mud2hlZWxQcm9wYWdhdGlvbiA6IHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0RGVsdGFGcm9tRXZlbnQoZSkgewogICAgICB2YXIgZGVsdGFYID0gZS5kZWx0YVg7CiAgICAgIHZhciBkZWx0YVkgPSAtMSAqIGUuZGVsdGFZOwoKICAgICAgaWYgKHR5cGVvZiBkZWx0YVggPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiBkZWx0YVkgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgLy8gT1MgWCBTYWZhcmkKICAgICAgICBkZWx0YVggPSAtMSAqIGUud2hlZWxEZWx0YVggLyA2OwogICAgICAgIGRlbHRhWSA9IGUud2hlZWxEZWx0YVkgLyA2OwogICAgICB9CgogICAgICBpZiAoZS5kZWx0YU1vZGUgJiYgZS5kZWx0YU1vZGUgPT09IDEpIHsKICAgICAgICAvLyBGaXJlZm94IGluIGRlbHRhTW9kZSAxOiBMaW5lIHNjcm9sbGluZwogICAgICAgIGRlbHRhWCAqPSAxMDsKICAgICAgICBkZWx0YVkgKj0gMTA7CiAgICAgIH0KCiAgICAgIGlmIChkZWx0YVggIT09IGRlbHRhWCAmJiBkZWx0YVkgIT09IGRlbHRhWQogICAgICAvKiBOYU4gY2hlY2tzICovCiAgICAgICkgewogICAgICAgICAgLy8gSUUgaW4gc29tZSBtb3VzZSBkcml2ZXJzCiAgICAgICAgICBkZWx0YVggPSAwOwogICAgICAgICAgZGVsdGFZID0gZS53aGVlbERlbHRhOwogICAgICAgIH0KCiAgICAgIGlmIChlLnNoaWZ0S2V5KSB7CiAgICAgICAgLy8gcmV2ZXJzZSBheGlzIHdpdGggc2hpZnQga2V5CiAgICAgICAgcmV0dXJuIFstZGVsdGFZLCAtZGVsdGFYXTsKICAgICAgfQoKICAgICAgcmV0dXJuIFtkZWx0YVgsIGRlbHRhWV07CiAgICB9CgogICAgZnVuY3Rpb24gc2hvdWxkQmVDb25zdW1lZEJ5Q2hpbGQodGFyZ2V0LCBkZWx0YVgsIGRlbHRhWSkgewogICAgICAvLyBGSVhNRTogdGhpcyBpcyBhIHdvcmthcm91bmQgZm9yIDxzZWxlY3Q+IGlzc3VlIGluIEZGIGFuZCBJRSAjNTcxCiAgICAgIGlmICghZW52LmlzV2ViS2l0ICYmIGVsZW1lbnQucXVlcnlTZWxlY3Rvcignc2VsZWN0OmZvY3VzJykpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgaWYgKCFlbGVtZW50LmNvbnRhaW5zKHRhcmdldCkpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHZhciBjdXJzb3IgPSB0YXJnZXQ7CgogICAgICB3aGlsZSAoY3Vyc29yICYmIGN1cnNvciAhPT0gZWxlbWVudCkgewogICAgICAgIGlmIChjdXJzb3IuY2xhc3NMaXN0LmNvbnRhaW5zKGNscy5lbGVtZW50LmNvbnN1bWluZykpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgdmFyIHN0eWxlID0gZ2V0KGN1cnNvcik7IC8vIGlmIGRlbHRhWSAmJiB2ZXJ0aWNhbCBzY3JvbGxhYmxlCgogICAgICAgIGlmIChkZWx0YVkgJiYgc3R5bGUub3ZlcmZsb3dZLm1hdGNoKC8oc2Nyb2xsfGF1dG8pLykpIHsKICAgICAgICAgIHZhciBtYXhTY3JvbGxUb3AgPSBjdXJzb3Iuc2Nyb2xsSGVpZ2h0IC0gY3Vyc29yLmNsaWVudEhlaWdodDsKCiAgICAgICAgICBpZiAobWF4U2Nyb2xsVG9wID4gMCkgewogICAgICAgICAgICBpZiAoY3Vyc29yLnNjcm9sbFRvcCA+IDAgJiYgZGVsdGFZIDwgMCB8fCBjdXJzb3Iuc2Nyb2xsVG9wIDwgbWF4U2Nyb2xsVG9wICYmIGRlbHRhWSA+IDApIHsKICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gLy8gaWYgZGVsdGFYICYmIGhvcml6b250YWwgc2Nyb2xsYWJsZQoKCiAgICAgICAgaWYgKGRlbHRhWCAmJiBzdHlsZS5vdmVyZmxvd1gubWF0Y2goLyhzY3JvbGx8YXV0bykvKSkgewogICAgICAgICAgdmFyIG1heFNjcm9sbExlZnQgPSBjdXJzb3Iuc2Nyb2xsV2lkdGggLSBjdXJzb3IuY2xpZW50V2lkdGg7CgogICAgICAgICAgaWYgKG1heFNjcm9sbExlZnQgPiAwKSB7CiAgICAgICAgICAgIGlmIChjdXJzb3Iuc2Nyb2xsTGVmdCA+IDAgJiYgZGVsdGFYIDwgMCB8fCBjdXJzb3Iuc2Nyb2xsTGVmdCA8IG1heFNjcm9sbExlZnQgJiYgZGVsdGFYID4gMCkgewogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBjdXJzb3IgPSBjdXJzb3IucGFyZW50Tm9kZTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIGZ1bmN0aW9uIG1vdXNld2hlZWxIYW5kbGVyKGUpIHsKICAgICAgdmFyIHJlZiA9IGdldERlbHRhRnJvbUV2ZW50KGUpOwogICAgICB2YXIgZGVsdGFYID0gcmVmWzBdOwogICAgICB2YXIgZGVsdGFZID0gcmVmWzFdOwoKICAgICAgaWYgKHNob3VsZEJlQ29uc3VtZWRCeUNoaWxkKGUudGFyZ2V0LCBkZWx0YVgsIGRlbHRhWSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBzaG91bGRQcmV2ZW50ID0gZmFsc2U7CgogICAgICBpZiAoIWkuc2V0dGluZ3MudXNlQm90aFdoZWVsQXhlcykgewogICAgICAgIC8vIGRlbHRhWCB3aWxsIG9ubHkgYmUgdXNlZCBmb3IgaG9yaXpvbnRhbCBzY3JvbGxpbmcgYW5kIGRlbHRhWSB3aWxsCiAgICAgICAgLy8gb25seSBiZSB1c2VkIGZvciB2ZXJ0aWNhbCBzY3JvbGxpbmcgLSB0aGlzIGlzIHRoZSBkZWZhdWx0CiAgICAgICAgZWxlbWVudC5zY3JvbGxUb3AgLT0gZGVsdGFZICogaS5zZXR0aW5ncy53aGVlbFNwZWVkOwogICAgICAgIGVsZW1lbnQuc2Nyb2xsTGVmdCArPSBkZWx0YVggKiBpLnNldHRpbmdzLndoZWVsU3BlZWQ7CiAgICAgIH0gZWxzZSBpZiAoaS5zY3JvbGxiYXJZQWN0aXZlICYmICFpLnNjcm9sbGJhclhBY3RpdmUpIHsKICAgICAgICAvLyBvbmx5IHZlcnRpY2FsIHNjcm9sbGJhciBpcyBhY3RpdmUgYW5kIHVzZUJvdGhXaGVlbEF4ZXMgb3B0aW9uIGlzCiAgICAgICAgLy8gYWN0aXZlLCBzbyBsZXQncyBzY3JvbGwgdmVydGljYWwgYmFyIHVzaW5nIGJvdGggbW91c2Ugd2hlZWwgYXhlcwogICAgICAgIGlmIChkZWx0YVkpIHsKICAgICAgICAgIGVsZW1lbnQuc2Nyb2xsVG9wIC09IGRlbHRhWSAqIGkuc2V0dGluZ3Mud2hlZWxTcGVlZDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZWxlbWVudC5zY3JvbGxUb3AgKz0gZGVsdGFYICogaS5zZXR0aW5ncy53aGVlbFNwZWVkOwogICAgICAgIH0KCiAgICAgICAgc2hvdWxkUHJldmVudCA9IHRydWU7CiAgICAgIH0gZWxzZSBpZiAoaS5zY3JvbGxiYXJYQWN0aXZlICYmICFpLnNjcm9sbGJhcllBY3RpdmUpIHsKICAgICAgICAvLyB1c2VCb3RoV2hlZWxBeGVzIGFuZCBvbmx5IGhvcml6b250YWwgYmFyIGlzIGFjdGl2ZSwgc28gdXNlIGJvdGgKICAgICAgICAvLyB3aGVlbCBheGVzIGZvciBob3Jpem9udGFsIGJhcgogICAgICAgIGlmIChkZWx0YVgpIHsKICAgICAgICAgIGVsZW1lbnQuc2Nyb2xsTGVmdCArPSBkZWx0YVggKiBpLnNldHRpbmdzLndoZWVsU3BlZWQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGVsZW1lbnQuc2Nyb2xsTGVmdCAtPSBkZWx0YVkgKiBpLnNldHRpbmdzLndoZWVsU3BlZWQ7CiAgICAgICAgfQoKICAgICAgICBzaG91bGRQcmV2ZW50ID0gdHJ1ZTsKICAgICAgfQoKICAgICAgdXBkYXRlR2VvbWV0cnkoaSk7CiAgICAgIHNob3VsZFByZXZlbnQgPSBzaG91bGRQcmV2ZW50IHx8IHNob3VsZFByZXZlbnREZWZhdWx0KGRlbHRhWCwgZGVsdGFZKTsKCiAgICAgIGlmIChzaG91bGRQcmV2ZW50ICYmICFlLmN0cmxLZXkpIHsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgfQogICAgfQoKICAgIGlmICh0eXBlb2Ygd2luZG93Lm9ud2hlZWwgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgIGkuZXZlbnQuYmluZChlbGVtZW50LCAnd2hlZWwnLCBtb3VzZXdoZWVsSGFuZGxlcik7CiAgICB9IGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cub25tb3VzZXdoZWVsICE9PSAndW5kZWZpbmVkJykgewogICAgICBpLmV2ZW50LmJpbmQoZWxlbWVudCwgJ21vdXNld2hlZWwnLCBtb3VzZXdoZWVsSGFuZGxlcik7CiAgICB9CiAgfQoKICBmdW5jdGlvbiB0b3VjaChpKSB7CiAgICBpZiAoIWVudi5zdXBwb3J0c1RvdWNoICYmICFlbnYuc3VwcG9ydHNJZVBvaW50ZXIpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHZhciBlbGVtZW50ID0gaS5lbGVtZW50OwoKICAgIGZ1bmN0aW9uIHNob3VsZFByZXZlbnQoZGVsdGFYLCBkZWx0YVkpIHsKICAgICAgdmFyIHNjcm9sbFRvcCA9IE1hdGguZmxvb3IoZWxlbWVudC5zY3JvbGxUb3ApOwogICAgICB2YXIgc2Nyb2xsTGVmdCA9IGVsZW1lbnQuc2Nyb2xsTGVmdDsKICAgICAgdmFyIG1hZ25pdHVkZVggPSBNYXRoLmFicyhkZWx0YVgpOwogICAgICB2YXIgbWFnbml0dWRlWSA9IE1hdGguYWJzKGRlbHRhWSk7CgogICAgICBpZiAobWFnbml0dWRlWSA+IG1hZ25pdHVkZVgpIHsKICAgICAgICAvLyB1c2VyIGlzIHBlcmhhcHMgdHJ5aW5nIHRvIHN3aXBlIHVwL2Rvd24gdGhlIHBhZ2UKICAgICAgICBpZiAoZGVsdGFZIDwgMCAmJiBzY3JvbGxUb3AgPT09IGkuY29udGVudEhlaWdodCAtIGkuY29udGFpbmVySGVpZ2h0IHx8IGRlbHRhWSA+IDAgJiYgc2Nyb2xsVG9wID09PSAwKSB7CiAgICAgICAgICAvLyBzZXQgcHJldmVudCBmb3IgbW9iaWxlIENocm9tZSByZWZyZXNoCiAgICAgICAgICByZXR1cm4gd2luZG93LnNjcm9sbFkgPT09IDAgJiYgZGVsdGFZID4gMCAmJiBlbnYuaXNDaHJvbWU7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKG1hZ25pdHVkZVggPiBtYWduaXR1ZGVZKSB7CiAgICAgICAgLy8gdXNlciBpcyBwZXJoYXBzIHRyeWluZyB0byBzd2lwZSBsZWZ0L3JpZ2h0IGFjcm9zcyB0aGUgcGFnZQogICAgICAgIGlmIChkZWx0YVggPCAwICYmIHNjcm9sbExlZnQgPT09IGkuY29udGVudFdpZHRoIC0gaS5jb250YWluZXJXaWR0aCB8fCBkZWx0YVggPiAwICYmIHNjcm9sbExlZnQgPT09IDApIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYXBwbHlUb3VjaE1vdmUoZGlmZmVyZW5jZVgsIGRpZmZlcmVuY2VZKSB7CiAgICAgIGVsZW1lbnQuc2Nyb2xsVG9wIC09IGRpZmZlcmVuY2VZOwogICAgICBlbGVtZW50LnNjcm9sbExlZnQgLT0gZGlmZmVyZW5jZVg7CiAgICAgIHVwZGF0ZUdlb21ldHJ5KGkpOwogICAgfQoKICAgIHZhciBzdGFydE9mZnNldCA9IHt9OwogICAgdmFyIHN0YXJ0VGltZSA9IDA7CiAgICB2YXIgc3BlZWQgPSB7fTsKICAgIHZhciBlYXNpbmdMb29wID0gbnVsbDsKCiAgICBmdW5jdGlvbiBnZXRUb3VjaChlKSB7CiAgICAgIGlmIChlLnRhcmdldFRvdWNoZXMpIHsKICAgICAgICByZXR1cm4gZS50YXJnZXRUb3VjaGVzWzBdOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIE1heWJlIElFIHBvaW50ZXIKICAgICAgICByZXR1cm4gZTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHNob3VsZEhhbmRsZShlKSB7CiAgICAgIGlmIChlLnBvaW50ZXJUeXBlICYmIGUucG9pbnRlclR5cGUgPT09ICdwZW4nICYmIGUuYnV0dG9ucyA9PT0gMCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgaWYgKGUudGFyZ2V0VG91Y2hlcyAmJiBlLnRhcmdldFRvdWNoZXMubGVuZ3RoID09PSAxKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIGlmIChlLnBvaW50ZXJUeXBlICYmIGUucG9pbnRlclR5cGUgIT09ICdtb3VzZScgJiYgZS5wb2ludGVyVHlwZSAhPT0gZS5NU1BPSU5URVJfVFlQRV9NT1VTRSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgZnVuY3Rpb24gdG91Y2hTdGFydChlKSB7CiAgICAgIGlmICghc2hvdWxkSGFuZGxlKGUpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgdG91Y2ggPSBnZXRUb3VjaChlKTsKICAgICAgc3RhcnRPZmZzZXQucGFnZVggPSB0b3VjaC5wYWdlWDsKICAgICAgc3RhcnRPZmZzZXQucGFnZVkgPSB0b3VjaC5wYWdlWTsKICAgICAgc3RhcnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CgogICAgICBpZiAoZWFzaW5nTG9vcCAhPT0gbnVsbCkgewogICAgICAgIGNsZWFySW50ZXJ2YWwoZWFzaW5nTG9vcCk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBzaG91bGRCZUNvbnN1bWVkQnlDaGlsZCh0YXJnZXQsIGRlbHRhWCwgZGVsdGFZKSB7CiAgICAgIGlmICghZWxlbWVudC5jb250YWlucyh0YXJnZXQpKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICB2YXIgY3Vyc29yID0gdGFyZ2V0OwoKICAgICAgd2hpbGUgKGN1cnNvciAmJiBjdXJzb3IgIT09IGVsZW1lbnQpIHsKICAgICAgICBpZiAoY3Vyc29yLmNsYXNzTGlzdC5jb250YWlucyhjbHMuZWxlbWVudC5jb25zdW1pbmcpKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIHZhciBzdHlsZSA9IGdldChjdXJzb3IpOyAvLyBpZiBkZWx0YVkgJiYgdmVydGljYWwgc2Nyb2xsYWJsZQoKICAgICAgICBpZiAoZGVsdGFZICYmIHN0eWxlLm92ZXJmbG93WS5tYXRjaCgvKHNjcm9sbHxhdXRvKS8pKSB7CiAgICAgICAgICB2YXIgbWF4U2Nyb2xsVG9wID0gY3Vyc29yLnNjcm9sbEhlaWdodCAtIGN1cnNvci5jbGllbnRIZWlnaHQ7CgogICAgICAgICAgaWYgKG1heFNjcm9sbFRvcCA+IDApIHsKICAgICAgICAgICAgaWYgKGN1cnNvci5zY3JvbGxUb3AgPiAwICYmIGRlbHRhWSA8IDAgfHwgY3Vyc29yLnNjcm9sbFRvcCA8IG1heFNjcm9sbFRvcCAmJiBkZWx0YVkgPiAwKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IC8vIGlmIGRlbHRhWCAmJiBob3Jpem9udGFsIHNjcm9sbGFibGUKCgogICAgICAgIGlmIChkZWx0YVggJiYgc3R5bGUub3ZlcmZsb3dYLm1hdGNoKC8oc2Nyb2xsfGF1dG8pLykpIHsKICAgICAgICAgIHZhciBtYXhTY3JvbGxMZWZ0ID0gY3Vyc29yLnNjcm9sbFdpZHRoIC0gY3Vyc29yLmNsaWVudFdpZHRoOwoKICAgICAgICAgIGlmIChtYXhTY3JvbGxMZWZ0ID4gMCkgewogICAgICAgICAgICBpZiAoY3Vyc29yLnNjcm9sbExlZnQgPiAwICYmIGRlbHRhWCA8IDAgfHwgY3Vyc29yLnNjcm9sbExlZnQgPCBtYXhTY3JvbGxMZWZ0ICYmIGRlbHRhWCA+IDApIHsKICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgY3Vyc29yID0gY3Vyc29yLnBhcmVudE5vZGU7CiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBmdW5jdGlvbiB0b3VjaE1vdmUoZSkgewogICAgICBpZiAoc2hvdWxkSGFuZGxlKGUpKSB7CiAgICAgICAgdmFyIHRvdWNoID0gZ2V0VG91Y2goZSk7CiAgICAgICAgdmFyIGN1cnJlbnRPZmZzZXQgPSB7CiAgICAgICAgICBwYWdlWDogdG91Y2gucGFnZVgsCiAgICAgICAgICBwYWdlWTogdG91Y2gucGFnZVkKICAgICAgICB9OwogICAgICAgIHZhciBkaWZmZXJlbmNlWCA9IGN1cnJlbnRPZmZzZXQucGFnZVggLSBzdGFydE9mZnNldC5wYWdlWDsKICAgICAgICB2YXIgZGlmZmVyZW5jZVkgPSBjdXJyZW50T2Zmc2V0LnBhZ2VZIC0gc3RhcnRPZmZzZXQucGFnZVk7CgogICAgICAgIGlmIChzaG91bGRCZUNvbnN1bWVkQnlDaGlsZChlLnRhcmdldCwgZGlmZmVyZW5jZVgsIGRpZmZlcmVuY2VZKSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgYXBwbHlUb3VjaE1vdmUoZGlmZmVyZW5jZVgsIGRpZmZlcmVuY2VZKTsKICAgICAgICBzdGFydE9mZnNldCA9IGN1cnJlbnRPZmZzZXQ7CiAgICAgICAgdmFyIGN1cnJlbnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgICAgdmFyIHRpbWVHYXAgPSBjdXJyZW50VGltZSAtIHN0YXJ0VGltZTsKCiAgICAgICAgaWYgKHRpbWVHYXAgPiAwKSB7CiAgICAgICAgICBzcGVlZC54ID0gZGlmZmVyZW5jZVggLyB0aW1lR2FwOwogICAgICAgICAgc3BlZWQueSA9IGRpZmZlcmVuY2VZIC8gdGltZUdhcDsKICAgICAgICAgIHN0YXJ0VGltZSA9IGN1cnJlbnRUaW1lOwogICAgICAgIH0KCiAgICAgICAgaWYgKHNob3VsZFByZXZlbnQoZGlmZmVyZW5jZVgsIGRpZmZlcmVuY2VZKSkgewogICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHRvdWNoRW5kKCkgewogICAgICBpZiAoaS5zZXR0aW5ncy5zd2lwZUVhc2luZykgewogICAgICAgIGNsZWFySW50ZXJ2YWwoZWFzaW5nTG9vcCk7CiAgICAgICAgZWFzaW5nTG9vcCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmIChpLmlzSW5pdGlhbGl6ZWQpIHsKICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChlYXNpbmdMb29wKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICghc3BlZWQueCAmJiAhc3BlZWQueSkgewogICAgICAgICAgICBjbGVhckludGVydmFsKGVhc2luZ0xvb3ApOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKE1hdGguYWJzKHNwZWVkLngpIDwgMC4wMSAmJiBNYXRoLmFicyhzcGVlZC55KSA8IDAuMDEpIHsKICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChlYXNpbmdMb29wKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIGFwcGx5VG91Y2hNb3ZlKHNwZWVkLnggKiAzMCwgc3BlZWQueSAqIDMwKTsKICAgICAgICAgIHNwZWVkLnggKj0gMC44OwogICAgICAgICAgc3BlZWQueSAqPSAwLjg7CiAgICAgICAgfSwgMTApOwogICAgICB9CiAgICB9CgogICAgaWYgKGVudi5zdXBwb3J0c1RvdWNoKSB7CiAgICAgIGkuZXZlbnQuYmluZChlbGVtZW50LCAndG91Y2hzdGFydCcsIHRvdWNoU3RhcnQpOwogICAgICBpLmV2ZW50LmJpbmQoZWxlbWVudCwgJ3RvdWNobW92ZScsIHRvdWNoTW92ZSk7CiAgICAgIGkuZXZlbnQuYmluZChlbGVtZW50LCAndG91Y2hlbmQnLCB0b3VjaEVuZCk7CiAgICB9IGVsc2UgaWYgKGVudi5zdXBwb3J0c0llUG9pbnRlcikgewogICAgICBpZiAod2luZG93LlBvaW50ZXJFdmVudCkgewogICAgICAgIGkuZXZlbnQuYmluZChlbGVtZW50LCAncG9pbnRlcmRvd24nLCB0b3VjaFN0YXJ0KTsKICAgICAgICBpLmV2ZW50LmJpbmQoZWxlbWVudCwgJ3BvaW50ZXJtb3ZlJywgdG91Y2hNb3ZlKTsKICAgICAgICBpLmV2ZW50LmJpbmQoZWxlbWVudCwgJ3BvaW50ZXJ1cCcsIHRvdWNoRW5kKTsKICAgICAgfSBlbHNlIGlmICh3aW5kb3cuTVNQb2ludGVyRXZlbnQpIHsKICAgICAgICBpLmV2ZW50LmJpbmQoZWxlbWVudCwgJ01TUG9pbnRlckRvd24nLCB0b3VjaFN0YXJ0KTsKICAgICAgICBpLmV2ZW50LmJpbmQoZWxlbWVudCwgJ01TUG9pbnRlck1vdmUnLCB0b3VjaE1vdmUpOwogICAgICAgIGkuZXZlbnQuYmluZChlbGVtZW50LCAnTVNQb2ludGVyVXAnLCB0b3VjaEVuZCk7CiAgICAgIH0KICAgIH0KICB9CgogIHZhciBkZWZhdWx0U2V0dGluZ3MgPSBmdW5jdGlvbiBkZWZhdWx0U2V0dGluZ3MoKSB7CiAgICByZXR1cm4gewogICAgICBoYW5kbGVyczogWydjbGljay1yYWlsJywgJ2RyYWctdGh1bWInLCAna2V5Ym9hcmQnLCAnd2hlZWwnLCAndG91Y2gnXSwKICAgICAgbWF4U2Nyb2xsYmFyTGVuZ3RoOiBudWxsLAogICAgICBtaW5TY3JvbGxiYXJMZW5ndGg6IG51bGwsCiAgICAgIHNjcm9sbGluZ1RocmVzaG9sZDogMTAwMCwKICAgICAgc2Nyb2xsWE1hcmdpbk9mZnNldDogMCwKICAgICAgc2Nyb2xsWU1hcmdpbk9mZnNldDogMCwKICAgICAgc3VwcHJlc3NTY3JvbGxYOiBmYWxzZSwKICAgICAgc3VwcHJlc3NTY3JvbGxZOiBmYWxzZSwKICAgICAgc3dpcGVFYXNpbmc6IHRydWUsCiAgICAgIHVzZUJvdGhXaGVlbEF4ZXM6IGZhbHNlLAogICAgICB3aGVlbFByb3BhZ2F0aW9uOiB0cnVlLAogICAgICB3aGVlbFNwZWVkOiAxCiAgICB9OwogIH07CgogIHZhciBoYW5kbGVycyA9IHsKICAgICdjbGljay1yYWlsJzogY2xpY2tSYWlsLAogICAgJ2RyYWctdGh1bWInOiBkcmFnVGh1bWIsCiAgICBrZXlib2FyZDoga2V5Ym9hcmQsCiAgICB3aGVlbDogd2hlZWwsCiAgICB0b3VjaDogdG91Y2gKICB9OwoKICB2YXIgUGVyZmVjdFNjcm9sbGJhciA9IGZ1bmN0aW9uIFBlcmZlY3RTY3JvbGxiYXIoZWxlbWVudCwgdXNlclNldHRpbmdzKSB7CiAgICB2YXIgdGhpcyQyID0gdGhpczsKICAgIHZhciB0aGlzJDEgPSB0aGlzOwoKICAgIGlmICh1c2VyU2V0dGluZ3MgPT09IHZvaWQgMCkgewogICAgICB1c2VyU2V0dGluZ3MgPSB7fTsKICAgIH0KCiAgICBpZiAodHlwZW9mIGVsZW1lbnQgPT09ICdzdHJpbmcnKSB7CiAgICAgIGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsZW1lbnQpOwogICAgfQoKICAgIGlmICghZWxlbWVudCB8fCAhZWxlbWVudC5ub2RlTmFtZSkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vIGVsZW1lbnQgaXMgc3BlY2lmaWVkIHRvIGluaXRpYWxpemUgUGVyZmVjdFNjcm9sbGJhcicpOwogICAgfQoKICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7CiAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xzLm1haW4pOwogICAgdGhpcy5zZXR0aW5ncyA9IGRlZmF1bHRTZXR0aW5ncygpOwoKICAgIGZvciAodmFyIGtleSBpbiB1c2VyU2V0dGluZ3MpIHsKICAgICAgdGhpcyQyLnNldHRpbmdzW2tleV0gPSB1c2VyU2V0dGluZ3Nba2V5XTsKICAgIH0KCiAgICB0aGlzLmNvbnRhaW5lcldpZHRoID0gbnVsbDsKICAgIHRoaXMuY29udGFpbmVySGVpZ2h0ID0gbnVsbDsKICAgIHRoaXMuY29udGVudFdpZHRoID0gbnVsbDsKICAgIHRoaXMuY29udGVudEhlaWdodCA9IG51bGw7CgogICAgdmFyIGZvY3VzID0gZnVuY3Rpb24gZm9jdXMoKSB7CiAgICAgIHJldHVybiBlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xzLnN0YXRlLmZvY3VzKTsKICAgIH07CgogICAgdmFyIGJsdXIgPSBmdW5jdGlvbiBibHVyKCkgewogICAgICByZXR1cm4gZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNscy5zdGF0ZS5mb2N1cyk7CiAgICB9OwoKICAgIHRoaXMuaXNSdGwgPSBnZXQoZWxlbWVudCkuZGlyZWN0aW9uID09PSAncnRsJzsKCiAgICBpZiAodGhpcy5pc1J0bCA9PT0gdHJ1ZSkgewogICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xzLnJ0bCk7CiAgICB9CgogICAgdGhpcy5pc05lZ2F0aXZlU2Nyb2xsID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgb3JpZ2luYWxTY3JvbGxMZWZ0ID0gZWxlbWVudC5zY3JvbGxMZWZ0OwogICAgICB2YXIgcmVzdWx0ID0gbnVsbDsKICAgICAgZWxlbWVudC5zY3JvbGxMZWZ0ID0gLTE7CiAgICAgIHJlc3VsdCA9IGVsZW1lbnQuc2Nyb2xsTGVmdCA8IDA7CiAgICAgIGVsZW1lbnQuc2Nyb2xsTGVmdCA9IG9yaWdpbmFsU2Nyb2xsTGVmdDsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0oKTsKCiAgICB0aGlzLm5lZ2F0aXZlU2Nyb2xsQWRqdXN0bWVudCA9IHRoaXMuaXNOZWdhdGl2ZVNjcm9sbCA/IGVsZW1lbnQuc2Nyb2xsV2lkdGggLSBlbGVtZW50LmNsaWVudFdpZHRoIDogMDsKICAgIHRoaXMuZXZlbnQgPSBuZXcgRXZlbnRNYW5hZ2VyKCk7CiAgICB0aGlzLm93bmVyRG9jdW1lbnQgPSBlbGVtZW50Lm93bmVyRG9jdW1lbnQgfHwgZG9jdW1lbnQ7CiAgICB0aGlzLnNjcm9sbGJhclhSYWlsID0gZGl2KGNscy5lbGVtZW50LnJhaWwoJ3gnKSk7CiAgICBlbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuc2Nyb2xsYmFyWFJhaWwpOwogICAgdGhpcy5zY3JvbGxiYXJYID0gZGl2KGNscy5lbGVtZW50LnRodW1iKCd4JykpOwogICAgdGhpcy5zY3JvbGxiYXJYUmFpbC5hcHBlbmRDaGlsZCh0aGlzLnNjcm9sbGJhclgpOwogICAgdGhpcy5zY3JvbGxiYXJYLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAwKTsKICAgIHRoaXMuZXZlbnQuYmluZCh0aGlzLnNjcm9sbGJhclgsICdmb2N1cycsIGZvY3VzKTsKICAgIHRoaXMuZXZlbnQuYmluZCh0aGlzLnNjcm9sbGJhclgsICdibHVyJywgYmx1cik7CiAgICB0aGlzLnNjcm9sbGJhclhBY3RpdmUgPSBudWxsOwogICAgdGhpcy5zY3JvbGxiYXJYV2lkdGggPSBudWxsOwogICAgdGhpcy5zY3JvbGxiYXJYTGVmdCA9IG51bGw7CiAgICB2YXIgcmFpbFhTdHlsZSA9IGdldCh0aGlzLnNjcm9sbGJhclhSYWlsKTsKICAgIHRoaXMuc2Nyb2xsYmFyWEJvdHRvbSA9IHBhcnNlSW50KHJhaWxYU3R5bGUuYm90dG9tLCAxMCk7CgogICAgaWYgKGlzTmFOKHRoaXMuc2Nyb2xsYmFyWEJvdHRvbSkpIHsKICAgICAgdGhpcy5pc1Njcm9sbGJhclhVc2luZ0JvdHRvbSA9IGZhbHNlOwogICAgICB0aGlzLnNjcm9sbGJhclhUb3AgPSB0b0ludChyYWlsWFN0eWxlLnRvcCk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLmlzU2Nyb2xsYmFyWFVzaW5nQm90dG9tID0gdHJ1ZTsKICAgIH0KCiAgICB0aGlzLnJhaWxCb3JkZXJYV2lkdGggPSB0b0ludChyYWlsWFN0eWxlLmJvcmRlckxlZnRXaWR0aCkgKyB0b0ludChyYWlsWFN0eWxlLmJvcmRlclJpZ2h0V2lkdGgpOyAvLyBTZXQgcmFpbCB0byBkaXNwbGF5OmJsb2NrIHRvIGNhbGN1bGF0ZSBtYXJnaW5zCgogICAgc2V0KHRoaXMuc2Nyb2xsYmFyWFJhaWwsIHsKICAgICAgZGlzcGxheTogJ2Jsb2NrJwogICAgfSk7CiAgICB0aGlzLnJhaWxYTWFyZ2luV2lkdGggPSB0b0ludChyYWlsWFN0eWxlLm1hcmdpbkxlZnQpICsgdG9JbnQocmFpbFhTdHlsZS5tYXJnaW5SaWdodCk7CiAgICBzZXQodGhpcy5zY3JvbGxiYXJYUmFpbCwgewogICAgICBkaXNwbGF5OiAnJwogICAgfSk7CiAgICB0aGlzLnJhaWxYV2lkdGggPSBudWxsOwogICAgdGhpcy5yYWlsWFJhdGlvID0gbnVsbDsKICAgIHRoaXMuc2Nyb2xsYmFyWVJhaWwgPSBkaXYoY2xzLmVsZW1lbnQucmFpbCgneScpKTsKICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5zY3JvbGxiYXJZUmFpbCk7CiAgICB0aGlzLnNjcm9sbGJhclkgPSBkaXYoY2xzLmVsZW1lbnQudGh1bWIoJ3knKSk7CiAgICB0aGlzLnNjcm9sbGJhcllSYWlsLmFwcGVuZENoaWxkKHRoaXMuc2Nyb2xsYmFyWSk7CiAgICB0aGlzLnNjcm9sbGJhclkuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsIDApOwogICAgdGhpcy5ldmVudC5iaW5kKHRoaXMuc2Nyb2xsYmFyWSwgJ2ZvY3VzJywgZm9jdXMpOwogICAgdGhpcy5ldmVudC5iaW5kKHRoaXMuc2Nyb2xsYmFyWSwgJ2JsdXInLCBibHVyKTsKICAgIHRoaXMuc2Nyb2xsYmFyWUFjdGl2ZSA9IG51bGw7CiAgICB0aGlzLnNjcm9sbGJhcllIZWlnaHQgPSBudWxsOwogICAgdGhpcy5zY3JvbGxiYXJZVG9wID0gbnVsbDsKICAgIHZhciByYWlsWVN0eWxlID0gZ2V0KHRoaXMuc2Nyb2xsYmFyWVJhaWwpOwogICAgdGhpcy5zY3JvbGxiYXJZUmlnaHQgPSBwYXJzZUludChyYWlsWVN0eWxlLnJpZ2h0LCAxMCk7CgogICAgaWYgKGlzTmFOKHRoaXMuc2Nyb2xsYmFyWVJpZ2h0KSkgewogICAgICB0aGlzLmlzU2Nyb2xsYmFyWVVzaW5nUmlnaHQgPSBmYWxzZTsKICAgICAgdGhpcy5zY3JvbGxiYXJZTGVmdCA9IHRvSW50KHJhaWxZU3R5bGUubGVmdCk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLmlzU2Nyb2xsYmFyWVVzaW5nUmlnaHQgPSB0cnVlOwogICAgfQoKICAgIHRoaXMuc2Nyb2xsYmFyWU91dGVyV2lkdGggPSB0aGlzLmlzUnRsID8gb3V0ZXJXaWR0aCh0aGlzLnNjcm9sbGJhclkpIDogbnVsbDsKICAgIHRoaXMucmFpbEJvcmRlcllXaWR0aCA9IHRvSW50KHJhaWxZU3R5bGUuYm9yZGVyVG9wV2lkdGgpICsgdG9JbnQocmFpbFlTdHlsZS5ib3JkZXJCb3R0b21XaWR0aCk7CiAgICBzZXQodGhpcy5zY3JvbGxiYXJZUmFpbCwgewogICAgICBkaXNwbGF5OiAnYmxvY2snCiAgICB9KTsKICAgIHRoaXMucmFpbFlNYXJnaW5IZWlnaHQgPSB0b0ludChyYWlsWVN0eWxlLm1hcmdpblRvcCkgKyB0b0ludChyYWlsWVN0eWxlLm1hcmdpbkJvdHRvbSk7CiAgICBzZXQodGhpcy5zY3JvbGxiYXJZUmFpbCwgewogICAgICBkaXNwbGF5OiAnJwogICAgfSk7CiAgICB0aGlzLnJhaWxZSGVpZ2h0ID0gbnVsbDsKICAgIHRoaXMucmFpbFlSYXRpbyA9IG51bGw7CiAgICB0aGlzLnJlYWNoID0gewogICAgICB4OiBlbGVtZW50LnNjcm9sbExlZnQgPD0gMCA/ICdzdGFydCcgOiBlbGVtZW50LnNjcm9sbExlZnQgPj0gdGhpcy5jb250ZW50V2lkdGggLSB0aGlzLmNvbnRhaW5lcldpZHRoID8gJ2VuZCcgOiBudWxsLAogICAgICB5OiBlbGVtZW50LnNjcm9sbFRvcCA8PSAwID8gJ3N0YXJ0JyA6IGVsZW1lbnQuc2Nyb2xsVG9wID49IHRoaXMuY29udGVudEhlaWdodCAtIHRoaXMuY29udGFpbmVySGVpZ2h0ID8gJ2VuZCcgOiBudWxsCiAgICB9OwogICAgdGhpcy5pc0FsaXZlID0gdHJ1ZTsKICAgIHRoaXMuc2V0dGluZ3MuaGFuZGxlcnMuZm9yRWFjaChmdW5jdGlvbiAoaGFuZGxlck5hbWUpIHsKICAgICAgcmV0dXJuIGhhbmRsZXJzW2hhbmRsZXJOYW1lXSh0aGlzJDEpOwogICAgfSk7CiAgICB0aGlzLmxhc3RTY3JvbGxUb3AgPSBNYXRoLmZsb29yKGVsZW1lbnQuc2Nyb2xsVG9wKTsgLy8gZm9yIG9uU2Nyb2xsIG9ubHkKCiAgICB0aGlzLmxhc3RTY3JvbGxMZWZ0ID0gZWxlbWVudC5zY3JvbGxMZWZ0OyAvLyBmb3Igb25TY3JvbGwgb25seQoKICAgIHRoaXMuZXZlbnQuYmluZCh0aGlzLmVsZW1lbnQsICdzY3JvbGwnLCBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gdGhpcyQxLm9uU2Nyb2xsKGUpOwogICAgfSk7CiAgICB1cGRhdGVHZW9tZXRyeSh0aGlzKTsKICB9OwoKICBQZXJmZWN0U2Nyb2xsYmFyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoKSB7CiAgICBpZiAoIXRoaXMuaXNBbGl2ZSkgewogICAgICByZXR1cm47CiAgICB9IC8vIFJlY2FsY3VhdGUgbmVnYXRpdmUgc2Nyb2xsTGVmdCBhZGp1c3RtZW50CgoKICAgIHRoaXMubmVnYXRpdmVTY3JvbGxBZGp1c3RtZW50ID0gdGhpcy5pc05lZ2F0aXZlU2Nyb2xsID8gdGhpcy5lbGVtZW50LnNjcm9sbFdpZHRoIC0gdGhpcy5lbGVtZW50LmNsaWVudFdpZHRoIDogMDsgLy8gUmVjYWxjdWxhdGUgcmFpbCBtYXJnaW5zCgogICAgc2V0KHRoaXMuc2Nyb2xsYmFyWFJhaWwsIHsKICAgICAgZGlzcGxheTogJ2Jsb2NrJwogICAgfSk7CiAgICBzZXQodGhpcy5zY3JvbGxiYXJZUmFpbCwgewogICAgICBkaXNwbGF5OiAnYmxvY2snCiAgICB9KTsKICAgIHRoaXMucmFpbFhNYXJnaW5XaWR0aCA9IHRvSW50KGdldCh0aGlzLnNjcm9sbGJhclhSYWlsKS5tYXJnaW5MZWZ0KSArIHRvSW50KGdldCh0aGlzLnNjcm9sbGJhclhSYWlsKS5tYXJnaW5SaWdodCk7CiAgICB0aGlzLnJhaWxZTWFyZ2luSGVpZ2h0ID0gdG9JbnQoZ2V0KHRoaXMuc2Nyb2xsYmFyWVJhaWwpLm1hcmdpblRvcCkgKyB0b0ludChnZXQodGhpcy5zY3JvbGxiYXJZUmFpbCkubWFyZ2luQm90dG9tKTsgLy8gSGlkZSBzY3JvbGxiYXJzIG5vdCB0byBhZmZlY3Qgc2Nyb2xsV2lkdGggYW5kIHNjcm9sbEhlaWdodAoKICAgIHNldCh0aGlzLnNjcm9sbGJhclhSYWlsLCB7CiAgICAgIGRpc3BsYXk6ICdub25lJwogICAgfSk7CiAgICBzZXQodGhpcy5zY3JvbGxiYXJZUmFpbCwgewogICAgICBkaXNwbGF5OiAnbm9uZScKICAgIH0pOwogICAgdXBkYXRlR2VvbWV0cnkodGhpcyk7CiAgICBwcm9jZXNzU2Nyb2xsRGlmZih0aGlzLCAndG9wJywgMCwgZmFsc2UsIHRydWUpOwogICAgcHJvY2Vzc1Njcm9sbERpZmYodGhpcywgJ2xlZnQnLCAwLCBmYWxzZSwgdHJ1ZSk7CiAgICBzZXQodGhpcy5zY3JvbGxiYXJYUmFpbCwgewogICAgICBkaXNwbGF5OiAnJwogICAgfSk7CiAgICBzZXQodGhpcy5zY3JvbGxiYXJZUmFpbCwgewogICAgICBkaXNwbGF5OiAnJwogICAgfSk7CiAgfTsKCiAgUGVyZmVjdFNjcm9sbGJhci5wcm90b3R5cGUub25TY3JvbGwgPSBmdW5jdGlvbiBvblNjcm9sbChlKSB7CiAgICBpZiAoIXRoaXMuaXNBbGl2ZSkgewogICAgICByZXR1cm47CiAgICB9CgogICAgdXBkYXRlR2VvbWV0cnkodGhpcyk7CiAgICBwcm9jZXNzU2Nyb2xsRGlmZih0aGlzLCAndG9wJywgdGhpcy5lbGVtZW50LnNjcm9sbFRvcCAtIHRoaXMubGFzdFNjcm9sbFRvcCk7CiAgICBwcm9jZXNzU2Nyb2xsRGlmZih0aGlzLCAnbGVmdCcsIHRoaXMuZWxlbWVudC5zY3JvbGxMZWZ0IC0gdGhpcy5sYXN0U2Nyb2xsTGVmdCk7CiAgICB0aGlzLmxhc3RTY3JvbGxUb3AgPSBNYXRoLmZsb29yKHRoaXMuZWxlbWVudC5zY3JvbGxUb3ApOwogICAgdGhpcy5sYXN0U2Nyb2xsTGVmdCA9IHRoaXMuZWxlbWVudC5zY3JvbGxMZWZ0OwogIH07CgogIFBlcmZlY3RTY3JvbGxiYXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiBkZXN0cm95KCkgewogICAgaWYgKCF0aGlzLmlzQWxpdmUpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHRoaXMuZXZlbnQudW5iaW5kQWxsKCk7CiAgICByZW1vdmUodGhpcy5zY3JvbGxiYXJYKTsKICAgIHJlbW92ZSh0aGlzLnNjcm9sbGJhclkpOwogICAgcmVtb3ZlKHRoaXMuc2Nyb2xsYmFyWFJhaWwpOwogICAgcmVtb3ZlKHRoaXMuc2Nyb2xsYmFyWVJhaWwpOwogICAgdGhpcy5yZW1vdmVQc0NsYXNzZXMoKTsgLy8gdW5zZXQgZWxlbWVudHMKCiAgICB0aGlzLmVsZW1lbnQgPSBudWxsOwogICAgdGhpcy5zY3JvbGxiYXJYID0gbnVsbDsKICAgIHRoaXMuc2Nyb2xsYmFyWSA9IG51bGw7CiAgICB0aGlzLnNjcm9sbGJhclhSYWlsID0gbnVsbDsKICAgIHRoaXMuc2Nyb2xsYmFyWVJhaWwgPSBudWxsOwogICAgdGhpcy5pc0FsaXZlID0gZmFsc2U7CiAgfTsKCiAgUGVyZmVjdFNjcm9sbGJhci5wcm90b3R5cGUucmVtb3ZlUHNDbGFzc2VzID0gZnVuY3Rpb24gcmVtb3ZlUHNDbGFzc2VzKCkgewogICAgdGhpcy5lbGVtZW50LmNsYXNzTmFtZSA9IHRoaXMuZWxlbWVudC5jbGFzc05hbWUuc3BsaXQoJyAnKS5maWx0ZXIoZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgcmV0dXJuICFuYW1lLm1hdGNoKC9ecHMoWy1fXS4rfCkkLyk7CiAgICB9KS5qb2luKCcgJyk7CiAgfTsKCiAgdmFyIFBlcmZlY3RTY3JvbGxiYXIkMSA9IHsKICAgIG5hbWU6ICdQZXJmZWN0U2Nyb2xsYmFyJywKICAgIHByb3BzOiB7CiAgICAgIG9wdGlvbnM6IHsKICAgICAgICB0eXBlOiBPYmplY3QsCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkge30KICAgICAgfSwKICAgICAgdGFnOiB7CiAgICAgICAgdHlwZTogU3RyaW5nLAogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICBkZWZhdWx0OiAnZGl2JwogICAgICB9LAogICAgICB3YXRjaE9wdGlvbnM6IHsKICAgICAgICB0eXBlOiBCb29sZWFuLAogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICBkZWZhdWx0OiBmYWxzZQogICAgICB9CiAgICB9LAogICAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBwczogbnVsbAogICAgICB9OwogICAgfSwKICAgIHdhdGNoOiB7CiAgICAgIHdhdGNoT3B0aW9uczogZnVuY3Rpb24gd2F0Y2hPcHRpb25zKHNob3VsZFdhdGNoKSB7CiAgICAgICAgaWYgKCFzaG91bGRXYXRjaCAmJiB0aGlzLndhdGNoZXIpIHsKICAgICAgICAgIHRoaXMud2F0Y2hlcigpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmNyZWF0ZVdhdGNoZXIoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgICB0aGlzLmNyZWF0ZSgpOwoKICAgICAgaWYgKHRoaXMud2F0Y2hPcHRpb25zKSB7CiAgICAgICAgdGhpcy5jcmVhdGVXYXRjaGVyKCk7CiAgICAgIH0KICAgIH0sCiAgICB1cGRhdGVkOiBmdW5jdGlvbiB1cGRhdGVkKCkgewogICAgICB2YXIgdGhpcyQxID0gdGhpczsKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMkMS51cGRhdGUoKTsKICAgICAgfSk7CiAgICB9LAogICAgYmVmb3JlRGVzdHJveTogZnVuY3Rpb24gYmVmb3JlRGVzdHJveSgpIHsKICAgICAgdGhpcy5kZXN0cm95KCk7CiAgICB9LAogICAgbWV0aG9kczogewogICAgICBjcmVhdGU6IGZ1bmN0aW9uIGNyZWF0ZSgpIHsKICAgICAgICBpZiAoISh0aGlzLnBzICYmIHRoaXMuJGlzU2VydmVyKSkgewogICAgICAgICAgdGhpcy5wcyA9IG5ldyBQZXJmZWN0U2Nyb2xsYmFyKHRoaXMuJHJlZnMuY29udGFpbmVyLCB0aGlzLm9wdGlvbnMpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgY3JlYXRlV2F0Y2hlcjogZnVuY3Rpb24gY3JlYXRlV2F0Y2hlcigpIHsKICAgICAgICB2YXIgdGhpcyQxID0gdGhpczsKICAgICAgICB0aGlzLndhdGNoZXIgPSB0aGlzLiR3YXRjaCgnb3B0aW9ucycsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRoaXMkMS5kZXN0cm95KCk7CiAgICAgICAgICB0aGlzJDEuY3JlYXRlKCk7CiAgICAgICAgfSwgewogICAgICAgICAgZGVlcDogdHJ1ZQogICAgICAgIH0pOwogICAgICB9LAogICAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHsKICAgICAgICBpZiAodGhpcy5wcykgewogICAgICAgICAgdGhpcy5wcy51cGRhdGUoKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7CiAgICAgICAgaWYgKHRoaXMucHMpIHsKICAgICAgICAgIHRoaXMucHMuZGVzdHJveSgpOwogICAgICAgICAgdGhpcy5wcyA9IG51bGw7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoaCkgewogICAgICByZXR1cm4gaCh0aGlzLnRhZywgewogICAgICAgIHJlZjogJ2NvbnRhaW5lcicsCiAgICAgICAgY2xhc3M6ICdwcycsCiAgICAgICAgb246IHRoaXMuJGxpc3RlbmVycwogICAgICB9LCB0aGlzLiRzbG90cy5kZWZhdWx0KTsKICAgIH0KICB9OwoKICBmdW5jdGlvbiBpbnN0YWxsKFZ1ZSwgc2V0dGluZ3MpIHsKICAgIGlmIChzZXR0aW5ncykgewogICAgICBpZiAoc2V0dGluZ3MubmFtZSAmJiB0eXBlb2Ygc2V0dGluZ3MubmFtZSA9PT0gJ3N0cmluZycpIHsKICAgICAgICBQZXJmZWN0U2Nyb2xsYmFyJDEubmFtZSA9IHNldHRpbmdzLm5hbWU7CiAgICAgIH0KCiAgICAgIGlmIChzZXR0aW5ncy5vcHRpb25zICYmIF90eXBlb2Yoc2V0dGluZ3Mub3B0aW9ucykgPT09ICdvYmplY3QnKSB7CiAgICAgICAgUGVyZmVjdFNjcm9sbGJhciQxLnByb3BzLm9wdGlvbnMuZGVmYXVsdCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBzZXR0aW5ncy5vcHRpb25zOwogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGlmIChzZXR0aW5ncy50YWcgJiYgdHlwZW9mIHNldHRpbmdzLnRhZyA9PT0gJ3N0cmluZycpIHsKICAgICAgICBQZXJmZWN0U2Nyb2xsYmFyJDEucHJvcHMudGFnLmRlZmF1bHQgPSBzZXR0aW5ncy50YWc7CiAgICAgIH0KCiAgICAgIGlmIChzZXR0aW5ncy53YXRjaE9wdGlvbnMgJiYgdHlwZW9mIHNldHRpbmdzLndhdGNoT3B0aW9ucyA9PT0gJ2Jvb2xlYW4nKSB7CiAgICAgICAgUGVyZmVjdFNjcm9sbGJhciQxLnByb3BzLndhdGNoT3B0aW9ucyA9IHNldHRpbmdzLndhdGNoT3B0aW9uczsKICAgICAgfQogICAgfQoKICAgIFZ1ZS5jb21wb25lbnQoUGVyZmVjdFNjcm9sbGJhciQxLm5hbWUsIFBlcmZlY3RTY3JvbGxiYXIkMSk7CiAgfQoKICBleHBvcnRzLmluc3RhbGwgPSBpbnN0YWxsOwogIGV4cG9ydHMuUGVyZmVjdFNjcm9sbGJhciA9IFBlcmZlY3RTY3JvbGxiYXIkMTsKICBleHBvcnRzLmRlZmF1bHQgPSBpbnN0YWxsOwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsKICAgIHZhbHVlOiB0cnVlCiAgfSk7Cn0pOw=="},{"version":3,"sources":["/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/vue2-perfect-scrollbar/dist/vue2-perfect-scrollbar.umd.js"],"names":["global","factory","exports","module","define","amd","Vue2PerfectScrollbar","get","element","getComputedStyle","set","obj","key","val","style","div","className","document","createElement","elMatches","Element","prototype","matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","query","Error","call","remove","parentNode","removeChild","queryChildren","selector","Array","filter","children","child","cls","main","rtl","thumb","x","rail","consuming","state","focus","clicking","active","scrolling","scrollingClassTimeout","y","addScrollingClass","i","classList","contains","clearTimeout","add","removeScrollingClass","setTimeout","isAlive","settings","scrollingThreshold","setScrollingClassInstantly","EventElement","handlers","prototypeAccessors","isEmpty","configurable","bind","eventName","handler","push","addEventListener","unbind","target","this$1","removeEventListener","unbindAll","name","Object","keys","every","length","defineProperties","EventManager","eventElements","eventElement","ee","splice","indexOf","forEach","e","once","onceHandler","evt","createEvent","window","CustomEvent","initCustomEvent","undefined","processScrollDiff","axis","diff","useScrollingClass","forceFireReachEvent","fields","processScrollDiff$1","ref","contentHeight","containerHeight","scrollTop","up","down","reach","dispatchEvent","toInt","parseInt","isEditable","el","outerWidth","styles","width","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","env","isWebKit","documentElement","supportsTouch","navigator","maxTouchPoints","DocumentTouch","supportsIePointer","msMaxTouchPoints","isChrome","test","userAgent","updateGeometry","roundedScrollTop","Math","floor","rect","getBoundingClientRect","containerWidth","ceil","height","contentWidth","scrollWidth","scrollHeight","scrollbarXRail","appendChild","scrollbarYRail","suppressScrollX","scrollXMarginOffset","scrollbarXActive","railXWidth","railXMarginWidth","railXRatio","scrollbarXWidth","getThumbSize","scrollbarXLeft","negativeScrollAdjustment","scrollLeft","suppressScrollY","scrollYMarginOffset","scrollbarYActive","railYHeight","railYMarginHeight","railYRatio","scrollbarYHeight","scrollbarYTop","updateCss","isRtl","thumbSize","minScrollbarLength","max","maxScrollbarLength","min","xRailOffset","left","isScrollbarXUsingBottom","bottom","scrollbarXBottom","top","scrollbarXTop","yRailOffset","isScrollbarYUsingRight","right","scrollbarYRight","scrollbarYOuterWidth","scrollbarYLeft","scrollbarX","railBorderXWidth","scrollbarY","railBorderYWidth","clickRail","event","stopPropagation","positionTop","pageY","pageYOffset","direction","positionLeft","pageX","pageXOffset","dragThumb","bindMouseScrollHandler","startingScrollTop","startingMousePageY","scrollBy","mouseMoveHandler","touches","preventDefault","mouseUpHandler","ownerDocument","bindMoves","touchMode","keyboard","elementHovered","scrollbarFocused","shouldPreventDefault","deltaX","deltaY","wheelPropagation","isDefaultPrevented","defaultPrevented","activeElement","tagName","contentDocument","shadowRoot","which","metaKey","altKey","shiftKey","wheel","isTop","isBottom","offsetHeight","isLeft","isRight","offsetWidth","hitsBound","abs","getDeltaFromEvent","wheelDeltaX","wheelDeltaY","deltaMode","wheelDelta","shouldBeConsumedByChild","querySelector","cursor","overflowY","match","maxScrollTop","clientHeight","overflowX","maxScrollLeft","clientWidth","mousewheelHandler","shouldPrevent","useBothWheelAxes","wheelSpeed","ctrlKey","onwheel","onmousewheel","touch","magnitudeX","magnitudeY","scrollY","applyTouchMove","differenceX","differenceY","startOffset","startTime","speed","easingLoop","getTouch","targetTouches","shouldHandle","pointerType","buttons","MSPOINTER_TYPE_MOUSE","touchStart","Date","getTime","clearInterval","touchMove","currentOffset","currentTime","timeGap","touchEnd","swipeEasing","setInterval","isInitialized","PointerEvent","MSPointerEvent","defaultSettings","PerfectScrollbar","userSettings","this$2","nodeName","blur","isNegativeScroll","originalScrollLeft","result","setAttribute","railXStyle","isNaN","display","marginLeft","marginRight","railYStyle","borderTopWidth","borderBottomWidth","marginTop","marginBottom","handlerName","lastScrollTop","lastScrollLeft","onScroll","update","destroy","removePsClasses","split","join","PerfectScrollbar$1","props","options","type","required","default","tag","String","watchOptions","Boolean","data","ps","watch","shouldWatch","watcher","createWatcher","mounted","create","updated","$nextTick","beforeDestroy","methods","$isServer","$refs","container","$watch","deep","render","h","class","on","$listeners","$slots","install","Vue","component","defineProperty","value"],"mappings":"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","sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.Vue2PerfectScrollbar = {})));\n}(this, (function (exports) { 'use strict';\n\n  /*!\n   * perfect-scrollbar v1.5.0\n   * Copyright 2020 Hyunje Jun, MDBootstrap and Contributors\n   * Licensed under MIT\n   */\n\n  function get(element) {\n    return getComputedStyle(element);\n  }\n\n  function set(element, obj) {\n    for (var key in obj) {\n      var val = obj[key];\n      if (typeof val === 'number') {\n        val = val + \"px\";\n      }\n      element.style[key] = val;\n    }\n    return element;\n  }\n\n  function div(className) {\n    var div = document.createElement('div');\n    div.className = className;\n    return div;\n  }\n\n  var elMatches =\n    typeof Element !== 'undefined' &&\n    (Element.prototype.matches ||\n      Element.prototype.webkitMatchesSelector ||\n      Element.prototype.mozMatchesSelector ||\n      Element.prototype.msMatchesSelector);\n\n  function matches(element, query) {\n    if (!elMatches) {\n      throw new Error('No element matching method supported');\n    }\n\n    return elMatches.call(element, query);\n  }\n\n  function remove(element) {\n    if (element.remove) {\n      element.remove();\n    } else {\n      if (element.parentNode) {\n        element.parentNode.removeChild(element);\n      }\n    }\n  }\n\n  function queryChildren(element, selector) {\n    return Array.prototype.filter.call(element.children, function (child) { return matches(child, selector); }\n    );\n  }\n\n  var cls = {\n    main: 'ps',\n    rtl: 'ps__rtl',\n    element: {\n      thumb: function (x) { return (\"ps__thumb-\" + x); },\n      rail: function (x) { return (\"ps__rail-\" + x); },\n      consuming: 'ps__child--consume',\n    },\n    state: {\n      focus: 'ps--focus',\n      clicking: 'ps--clicking',\n      active: function (x) { return (\"ps--active-\" + x); },\n      scrolling: function (x) { return (\"ps--scrolling-\" + x); },\n    },\n  };\n\n  /*\n   * Helper methods\n   */\n  var scrollingClassTimeout = { x: null, y: null };\n\n  function addScrollingClass(i, x) {\n    var classList = i.element.classList;\n    var className = cls.state.scrolling(x);\n\n    if (classList.contains(className)) {\n      clearTimeout(scrollingClassTimeout[x]);\n    } else {\n      classList.add(className);\n    }\n  }\n\n  function removeScrollingClass(i, x) {\n    scrollingClassTimeout[x] = setTimeout(\n      function () { return i.isAlive && i.element.classList.remove(cls.state.scrolling(x)); },\n      i.settings.scrollingThreshold\n    );\n  }\n\n  function setScrollingClassInstantly(i, x) {\n    addScrollingClass(i, x);\n    removeScrollingClass(i, x);\n  }\n\n  var EventElement = function EventElement(element) {\n    this.element = element;\n    this.handlers = {};\n  };\n\n  var prototypeAccessors = { isEmpty: { configurable: true } };\n\n  EventElement.prototype.bind = function bind (eventName, handler) {\n    if (typeof this.handlers[eventName] === 'undefined') {\n      this.handlers[eventName] = [];\n    }\n    this.handlers[eventName].push(handler);\n    this.element.addEventListener(eventName, handler, false);\n  };\n\n  EventElement.prototype.unbind = function unbind (eventName, target) {\n      var this$1 = this;\n\n    this.handlers[eventName] = this.handlers[eventName].filter(function (handler) {\n      if (target && handler !== target) {\n        return true;\n      }\n      this$1.element.removeEventListener(eventName, handler, false);\n      return false;\n    });\n  };\n\n  EventElement.prototype.unbindAll = function unbindAll () {\n    var this$1 = this;\n\n    for (var name in this$1.handlers) {\n      this$1.unbind(name);\n    }\n  };\n\n  prototypeAccessors.isEmpty.get = function () {\n      var this$1 = this;\n\n    return Object.keys(this.handlers).every(\n      function (key) { return this$1.handlers[key].length === 0; }\n    );\n  };\n\n  Object.defineProperties( EventElement.prototype, prototypeAccessors );\n\n  var EventManager = function EventManager() {\n    this.eventElements = [];\n  };\n\n  EventManager.prototype.eventElement = function eventElement (element) {\n    var ee = this.eventElements.filter(function (ee) { return ee.element === element; })[0];\n    if (!ee) {\n      ee = new EventElement(element);\n      this.eventElements.push(ee);\n    }\n    return ee;\n  };\n\n  EventManager.prototype.bind = function bind (element, eventName, handler) {\n    this.eventElement(element).bind(eventName, handler);\n  };\n\n  EventManager.prototype.unbind = function unbind (element, eventName, handler) {\n    var ee = this.eventElement(element);\n    ee.unbind(eventName, handler);\n\n    if (ee.isEmpty) {\n      // remove\n      this.eventElements.splice(this.eventElements.indexOf(ee), 1);\n    }\n  };\n\n  EventManager.prototype.unbindAll = function unbindAll () {\n    this.eventElements.forEach(function (e) { return e.unbindAll(); });\n    this.eventElements = [];\n  };\n\n  EventManager.prototype.once = function once (element, eventName, handler) {\n    var ee = this.eventElement(element);\n    var onceHandler = function (evt) {\n      ee.unbind(eventName, onceHandler);\n      handler(evt);\n    };\n    ee.bind(eventName, onceHandler);\n  };\n\n  function createEvent(name) {\n    if (typeof window.CustomEvent === 'function') {\n      return new CustomEvent(name);\n    } else {\n      var evt = document.createEvent('CustomEvent');\n      evt.initCustomEvent(name, false, false, undefined);\n      return evt;\n    }\n  }\n\n  function processScrollDiff(\n    i,\n    axis,\n    diff,\n    useScrollingClass,\n    forceFireReachEvent\n  ) {\n    if ( useScrollingClass === void 0 ) { useScrollingClass = true; }\n    if ( forceFireReachEvent === void 0 ) { forceFireReachEvent = false; }\n\n    var fields;\n    if (axis === 'top') {\n      fields = [\n        'contentHeight',\n        'containerHeight',\n        'scrollTop',\n        'y',\n        'up',\n        'down' ];\n    } else if (axis === 'left') {\n      fields = [\n        'contentWidth',\n        'containerWidth',\n        'scrollLeft',\n        'x',\n        'left',\n        'right' ];\n    } else {\n      throw new Error('A proper axis should be provided');\n    }\n\n    processScrollDiff$1(i, diff, fields, useScrollingClass, forceFireReachEvent);\n  }\n\n  function processScrollDiff$1(\n    i,\n    diff,\n    ref,\n    useScrollingClass,\n    forceFireReachEvent\n  ) {\n    var contentHeight = ref[0];\n    var containerHeight = ref[1];\n    var scrollTop = ref[2];\n    var y = ref[3];\n    var up = ref[4];\n    var down = ref[5];\n    if ( useScrollingClass === void 0 ) { useScrollingClass = true; }\n    if ( forceFireReachEvent === void 0 ) { forceFireReachEvent = false; }\n\n    var element = i.element;\n\n    // reset reach\n    i.reach[y] = null;\n\n    // 1 for subpixel rounding\n    if (element[scrollTop] < 1) {\n      i.reach[y] = 'start';\n    }\n\n    // 1 for subpixel rounding\n    if (element[scrollTop] > i[contentHeight] - i[containerHeight] - 1) {\n      i.reach[y] = 'end';\n    }\n\n    if (diff) {\n      element.dispatchEvent(createEvent((\"ps-scroll-\" + y)));\n\n      if (diff < 0) {\n        element.dispatchEvent(createEvent((\"ps-scroll-\" + up)));\n      } else if (diff > 0) {\n        element.dispatchEvent(createEvent((\"ps-scroll-\" + down)));\n      }\n\n      if (useScrollingClass) {\n        setScrollingClassInstantly(i, y);\n      }\n    }\n\n    if (i.reach[y] && (diff || forceFireReachEvent)) {\n      element.dispatchEvent(createEvent((\"ps-\" + y + \"-reach-\" + (i.reach[y]))));\n    }\n  }\n\n  function toInt(x) {\n    return parseInt(x, 10) || 0;\n  }\n\n  function isEditable(el) {\n    return (\n      matches(el, 'input,[contenteditable]') ||\n      matches(el, 'select,[contenteditable]') ||\n      matches(el, 'textarea,[contenteditable]') ||\n      matches(el, 'button,[contenteditable]')\n    );\n  }\n\n  function outerWidth(element) {\n    var styles = get(element);\n    return (\n      toInt(styles.width) +\n      toInt(styles.paddingLeft) +\n      toInt(styles.paddingRight) +\n      toInt(styles.borderLeftWidth) +\n      toInt(styles.borderRightWidth)\n    );\n  }\n\n  var env = {\n    isWebKit:\n      typeof document !== 'undefined' &&\n      'WebkitAppearance' in document.documentElement.style,\n    supportsTouch:\n      typeof window !== 'undefined' &&\n      ('ontouchstart' in window ||\n        ('maxTouchPoints' in window.navigator &&\n          window.navigator.maxTouchPoints > 0) ||\n        (window.DocumentTouch && document instanceof window.DocumentTouch)),\n    supportsIePointer:\n      typeof navigator !== 'undefined' && navigator.msMaxTouchPoints,\n    isChrome:\n      typeof navigator !== 'undefined' &&\n      /Chrome/i.test(navigator && navigator.userAgent),\n  };\n\n  function updateGeometry(i) {\n    var element = i.element;\n    var roundedScrollTop = Math.floor(element.scrollTop);\n    var rect = element.getBoundingClientRect();\n\n    i.containerWidth = Math.ceil(rect.width);\n    i.containerHeight = Math.ceil(rect.height);\n    i.contentWidth = element.scrollWidth;\n    i.contentHeight = element.scrollHeight;\n\n    if (!element.contains(i.scrollbarXRail)) {\n      // clean up and append\n      queryChildren(element, cls.element.rail('x')).forEach(function (el) { return remove(el); }\n      );\n      element.appendChild(i.scrollbarXRail);\n    }\n    if (!element.contains(i.scrollbarYRail)) {\n      // clean up and append\n      queryChildren(element, cls.element.rail('y')).forEach(function (el) { return remove(el); }\n      );\n      element.appendChild(i.scrollbarYRail);\n    }\n\n    if (\n      !i.settings.suppressScrollX &&\n      i.containerWidth + i.settings.scrollXMarginOffset < i.contentWidth\n    ) {\n      i.scrollbarXActive = true;\n      i.railXWidth = i.containerWidth - i.railXMarginWidth;\n      i.railXRatio = i.containerWidth / i.railXWidth;\n      i.scrollbarXWidth = getThumbSize(\n        i,\n        toInt((i.railXWidth * i.containerWidth) / i.contentWidth)\n      );\n      i.scrollbarXLeft = toInt(\n        ((i.negativeScrollAdjustment + element.scrollLeft) *\n          (i.railXWidth - i.scrollbarXWidth)) /\n          (i.contentWidth - i.containerWidth)\n      );\n    } else {\n      i.scrollbarXActive = false;\n    }\n\n    if (\n      !i.settings.suppressScrollY &&\n      i.containerHeight + i.settings.scrollYMarginOffset < i.contentHeight\n    ) {\n      i.scrollbarYActive = true;\n      i.railYHeight = i.containerHeight - i.railYMarginHeight;\n      i.railYRatio = i.containerHeight / i.railYHeight;\n      i.scrollbarYHeight = getThumbSize(\n        i,\n        toInt((i.railYHeight * i.containerHeight) / i.contentHeight)\n      );\n      i.scrollbarYTop = toInt(\n        (roundedScrollTop * (i.railYHeight - i.scrollbarYHeight)) /\n          (i.contentHeight - i.containerHeight)\n      );\n    } else {\n      i.scrollbarYActive = false;\n    }\n\n    if (i.scrollbarXLeft >= i.railXWidth - i.scrollbarXWidth) {\n      i.scrollbarXLeft = i.railXWidth - i.scrollbarXWidth;\n    }\n    if (i.scrollbarYTop >= i.railYHeight - i.scrollbarYHeight) {\n      i.scrollbarYTop = i.railYHeight - i.scrollbarYHeight;\n    }\n\n    updateCss(element, i);\n\n    if (i.scrollbarXActive) {\n      element.classList.add(cls.state.active('x'));\n    } else {\n      element.classList.remove(cls.state.active('x'));\n      i.scrollbarXWidth = 0;\n      i.scrollbarXLeft = 0;\n      element.scrollLeft = i.isRtl === true ? i.contentWidth : 0;\n    }\n    if (i.scrollbarYActive) {\n      element.classList.add(cls.state.active('y'));\n    } else {\n      element.classList.remove(cls.state.active('y'));\n      i.scrollbarYHeight = 0;\n      i.scrollbarYTop = 0;\n      element.scrollTop = 0;\n    }\n  }\n\n  function getThumbSize(i, thumbSize) {\n    if (i.settings.minScrollbarLength) {\n      thumbSize = Math.max(thumbSize, i.settings.minScrollbarLength);\n    }\n    if (i.settings.maxScrollbarLength) {\n      thumbSize = Math.min(thumbSize, i.settings.maxScrollbarLength);\n    }\n    return thumbSize;\n  }\n\n  function updateCss(element, i) {\n    var xRailOffset = { width: i.railXWidth };\n    var roundedScrollTop = Math.floor(element.scrollTop);\n\n    if (i.isRtl) {\n      xRailOffset.left =\n        i.negativeScrollAdjustment +\n        element.scrollLeft +\n        i.containerWidth -\n        i.contentWidth;\n    } else {\n      xRailOffset.left = element.scrollLeft;\n    }\n    if (i.isScrollbarXUsingBottom) {\n      xRailOffset.bottom = i.scrollbarXBottom - roundedScrollTop;\n    } else {\n      xRailOffset.top = i.scrollbarXTop + roundedScrollTop;\n    }\n    set(i.scrollbarXRail, xRailOffset);\n\n    var yRailOffset = { top: roundedScrollTop, height: i.railYHeight };\n    if (i.isScrollbarYUsingRight) {\n      if (i.isRtl) {\n        yRailOffset.right =\n          i.contentWidth -\n          (i.negativeScrollAdjustment + element.scrollLeft) -\n          i.scrollbarYRight -\n          i.scrollbarYOuterWidth -\n          9;\n      } else {\n        yRailOffset.right = i.scrollbarYRight - element.scrollLeft;\n      }\n    } else {\n      if (i.isRtl) {\n        yRailOffset.left =\n          i.negativeScrollAdjustment +\n          element.scrollLeft +\n          i.containerWidth * 2 -\n          i.contentWidth -\n          i.scrollbarYLeft -\n          i.scrollbarYOuterWidth;\n      } else {\n        yRailOffset.left = i.scrollbarYLeft + element.scrollLeft;\n      }\n    }\n    set(i.scrollbarYRail, yRailOffset);\n\n    set(i.scrollbarX, {\n      left: i.scrollbarXLeft,\n      width: i.scrollbarXWidth - i.railBorderXWidth,\n    });\n    set(i.scrollbarY, {\n      top: i.scrollbarYTop,\n      height: i.scrollbarYHeight - i.railBorderYWidth,\n    });\n  }\n\n  function clickRail(i) {\n    var element = i.element;\n\n    i.event.bind(i.scrollbarY, 'mousedown', function (e) { return e.stopPropagation(); });\n    i.event.bind(i.scrollbarYRail, 'mousedown', function (e) {\n      var positionTop =\n        e.pageY -\n        window.pageYOffset -\n        i.scrollbarYRail.getBoundingClientRect().top;\n      var direction = positionTop > i.scrollbarYTop ? 1 : -1;\n\n      i.element.scrollTop += direction * i.containerHeight;\n      updateGeometry(i);\n\n      e.stopPropagation();\n    });\n\n    i.event.bind(i.scrollbarX, 'mousedown', function (e) { return e.stopPropagation(); });\n    i.event.bind(i.scrollbarXRail, 'mousedown', function (e) {\n      var positionLeft =\n        e.pageX -\n        window.pageXOffset -\n        i.scrollbarXRail.getBoundingClientRect().left;\n      var direction = positionLeft > i.scrollbarXLeft ? 1 : -1;\n\n      i.element.scrollLeft += direction * i.containerWidth;\n      updateGeometry(i);\n\n      e.stopPropagation();\n    });\n  }\n\n  function dragThumb(i) {\n    bindMouseScrollHandler(i, [\n      'containerWidth',\n      'contentWidth',\n      'pageX',\n      'railXWidth',\n      'scrollbarX',\n      'scrollbarXWidth',\n      'scrollLeft',\n      'x',\n      'scrollbarXRail' ]);\n    bindMouseScrollHandler(i, [\n      'containerHeight',\n      'contentHeight',\n      'pageY',\n      'railYHeight',\n      'scrollbarY',\n      'scrollbarYHeight',\n      'scrollTop',\n      'y',\n      'scrollbarYRail' ]);\n  }\n\n  function bindMouseScrollHandler(\n    i,\n    ref\n  ) {\n    var containerHeight = ref[0];\n    var contentHeight = ref[1];\n    var pageY = ref[2];\n    var railYHeight = ref[3];\n    var scrollbarY = ref[4];\n    var scrollbarYHeight = ref[5];\n    var scrollTop = ref[6];\n    var y = ref[7];\n    var scrollbarYRail = ref[8];\n\n    var element = i.element;\n\n    var startingScrollTop = null;\n    var startingMousePageY = null;\n    var scrollBy = null;\n\n    function mouseMoveHandler(e) {\n      if (e.touches && e.touches[0]) {\n        e[pageY] = e.touches[0].pageY;\n      }\n      element[scrollTop] =\n        startingScrollTop + scrollBy * (e[pageY] - startingMousePageY);\n      addScrollingClass(i, y);\n      updateGeometry(i);\n\n      e.stopPropagation();\n      e.preventDefault();\n    }\n\n    function mouseUpHandler() {\n      removeScrollingClass(i, y);\n      i[scrollbarYRail].classList.remove(cls.state.clicking);\n      i.event.unbind(i.ownerDocument, 'mousemove', mouseMoveHandler);\n    }\n\n    function bindMoves(e, touchMode) {\n      startingScrollTop = element[scrollTop];\n      if (touchMode && e.touches) {\n        e[pageY] = e.touches[0].pageY;\n      }\n      startingMousePageY = e[pageY];\n      scrollBy =\n        (i[contentHeight] - i[containerHeight]) /\n        (i[railYHeight] - i[scrollbarYHeight]);\n      if (!touchMode) {\n        i.event.bind(i.ownerDocument, 'mousemove', mouseMoveHandler);\n        i.event.once(i.ownerDocument, 'mouseup', mouseUpHandler);\n        e.preventDefault();\n      } else {\n        i.event.bind(i.ownerDocument, 'touchmove', mouseMoveHandler);\n      }\n\n      i[scrollbarYRail].classList.add(cls.state.clicking);\n\n      e.stopPropagation();\n    }\n\n    i.event.bind(i[scrollbarY], 'mousedown', function (e) {\n      bindMoves(e);\n    });\n    i.event.bind(i[scrollbarY], 'touchstart', function (e) {\n      bindMoves(e, true);\n    });\n  }\n\n  function keyboard(i) {\n    var element = i.element;\n\n    var elementHovered = function () { return matches(element, ':hover'); };\n    var scrollbarFocused = function () { return matches(i.scrollbarX, ':focus') || matches(i.scrollbarY, ':focus'); };\n\n    function shouldPreventDefault(deltaX, deltaY) {\n      var scrollTop = Math.floor(element.scrollTop);\n      if (deltaX === 0) {\n        if (!i.scrollbarYActive) {\n          return false;\n        }\n        if (\n          (scrollTop === 0 && deltaY > 0) ||\n          (scrollTop >= i.contentHeight - i.containerHeight && deltaY < 0)\n        ) {\n          return !i.settings.wheelPropagation;\n        }\n      }\n\n      var scrollLeft = element.scrollLeft;\n      if (deltaY === 0) {\n        if (!i.scrollbarXActive) {\n          return false;\n        }\n        if (\n          (scrollLeft === 0 && deltaX < 0) ||\n          (scrollLeft >= i.contentWidth - i.containerWidth && deltaX > 0)\n        ) {\n          return !i.settings.wheelPropagation;\n        }\n      }\n      return true;\n    }\n\n    i.event.bind(i.ownerDocument, 'keydown', function (e) {\n      if (\n        (e.isDefaultPrevented && e.isDefaultPrevented()) ||\n        e.defaultPrevented\n      ) {\n        return;\n      }\n\n      if (!elementHovered() && !scrollbarFocused()) {\n        return;\n      }\n\n      var activeElement = document.activeElement\n        ? document.activeElement\n        : i.ownerDocument.activeElement;\n      if (activeElement) {\n        if (activeElement.tagName === 'IFRAME') {\n          activeElement = activeElement.contentDocument.activeElement;\n        } else {\n          // go deeper if element is a webcomponent\n          while (activeElement.shadowRoot) {\n            activeElement = activeElement.shadowRoot.activeElement;\n          }\n        }\n        if (isEditable(activeElement)) {\n          return;\n        }\n      }\n\n      var deltaX = 0;\n      var deltaY = 0;\n\n      switch (e.which) {\n        case 37: // left\n          if (e.metaKey) {\n            deltaX = -i.contentWidth;\n          } else if (e.altKey) {\n            deltaX = -i.containerWidth;\n          } else {\n            deltaX = -30;\n          }\n          break;\n        case 38: // up\n          if (e.metaKey) {\n            deltaY = i.contentHeight;\n          } else if (e.altKey) {\n            deltaY = i.containerHeight;\n          } else {\n            deltaY = 30;\n          }\n          break;\n        case 39: // right\n          if (e.metaKey) {\n            deltaX = i.contentWidth;\n          } else if (e.altKey) {\n            deltaX = i.containerWidth;\n          } else {\n            deltaX = 30;\n          }\n          break;\n        case 40: // down\n          if (e.metaKey) {\n            deltaY = -i.contentHeight;\n          } else if (e.altKey) {\n            deltaY = -i.containerHeight;\n          } else {\n            deltaY = -30;\n          }\n          break;\n        case 32: // space bar\n          if (e.shiftKey) {\n            deltaY = i.containerHeight;\n          } else {\n            deltaY = -i.containerHeight;\n          }\n          break;\n        case 33: // page up\n          deltaY = i.containerHeight;\n          break;\n        case 34: // page down\n          deltaY = -i.containerHeight;\n          break;\n        case 36: // home\n          deltaY = i.contentHeight;\n          break;\n        case 35: // end\n          deltaY = -i.contentHeight;\n          break;\n        default:\n          return;\n      }\n\n      if (i.settings.suppressScrollX && deltaX !== 0) {\n        return;\n      }\n      if (i.settings.suppressScrollY && deltaY !== 0) {\n        return;\n      }\n\n      element.scrollTop -= deltaY;\n      element.scrollLeft += deltaX;\n      updateGeometry(i);\n\n      if (shouldPreventDefault(deltaX, deltaY)) {\n        e.preventDefault();\n      }\n    });\n  }\n\n  function wheel(i) {\n    var element = i.element;\n\n    function shouldPreventDefault(deltaX, deltaY) {\n      var roundedScrollTop = Math.floor(element.scrollTop);\n      var isTop = element.scrollTop === 0;\n      var isBottom =\n        roundedScrollTop + element.offsetHeight === element.scrollHeight;\n      var isLeft = element.scrollLeft === 0;\n      var isRight =\n        element.scrollLeft + element.offsetWidth === element.scrollWidth;\n\n      var hitsBound;\n\n      // pick axis with primary direction\n      if (Math.abs(deltaY) > Math.abs(deltaX)) {\n        hitsBound = isTop || isBottom;\n      } else {\n        hitsBound = isLeft || isRight;\n      }\n\n      return hitsBound ? !i.settings.wheelPropagation : true;\n    }\n\n    function getDeltaFromEvent(e) {\n      var deltaX = e.deltaX;\n      var deltaY = -1 * e.deltaY;\n\n      if (typeof deltaX === 'undefined' || typeof deltaY === 'undefined') {\n        // OS X Safari\n        deltaX = (-1 * e.wheelDeltaX) / 6;\n        deltaY = e.wheelDeltaY / 6;\n      }\n\n      if (e.deltaMode && e.deltaMode === 1) {\n        // Firefox in deltaMode 1: Line scrolling\n        deltaX *= 10;\n        deltaY *= 10;\n      }\n\n      if (deltaX !== deltaX && deltaY !== deltaY /* NaN checks */) {\n        // IE in some mouse drivers\n        deltaX = 0;\n        deltaY = e.wheelDelta;\n      }\n\n      if (e.shiftKey) {\n        // reverse axis with shift key\n        return [-deltaY, -deltaX];\n      }\n      return [deltaX, deltaY];\n    }\n\n    function shouldBeConsumedByChild(target, deltaX, deltaY) {\n      // FIXME: this is a workaround for <select> issue in FF and IE #571\n      if (!env.isWebKit && element.querySelector('select:focus')) {\n        return true;\n      }\n\n      if (!element.contains(target)) {\n        return false;\n      }\n\n      var cursor = target;\n\n      while (cursor && cursor !== element) {\n        if (cursor.classList.contains(cls.element.consuming)) {\n          return true;\n        }\n\n        var style = get(cursor);\n\n        // if deltaY && vertical scrollable\n        if (deltaY && style.overflowY.match(/(scroll|auto)/)) {\n          var maxScrollTop = cursor.scrollHeight - cursor.clientHeight;\n          if (maxScrollTop > 0) {\n            if (\n              (cursor.scrollTop > 0 && deltaY < 0) ||\n              (cursor.scrollTop < maxScrollTop && deltaY > 0)\n            ) {\n              return true;\n            }\n          }\n        }\n        // if deltaX && horizontal scrollable\n        if (deltaX && style.overflowX.match(/(scroll|auto)/)) {\n          var maxScrollLeft = cursor.scrollWidth - cursor.clientWidth;\n          if (maxScrollLeft > 0) {\n            if (\n              (cursor.scrollLeft > 0 && deltaX < 0) ||\n              (cursor.scrollLeft < maxScrollLeft && deltaX > 0)\n            ) {\n              return true;\n            }\n          }\n        }\n\n        cursor = cursor.parentNode;\n      }\n\n      return false;\n    }\n\n    function mousewheelHandler(e) {\n      var ref = getDeltaFromEvent(e);\n      var deltaX = ref[0];\n      var deltaY = ref[1];\n\n      if (shouldBeConsumedByChild(e.target, deltaX, deltaY)) {\n        return;\n      }\n\n      var shouldPrevent = false;\n      if (!i.settings.useBothWheelAxes) {\n        // deltaX will only be used for horizontal scrolling and deltaY will\n        // only be used for vertical scrolling - this is the default\n        element.scrollTop -= deltaY * i.settings.wheelSpeed;\n        element.scrollLeft += deltaX * i.settings.wheelSpeed;\n      } else if (i.scrollbarYActive && !i.scrollbarXActive) {\n        // only vertical scrollbar is active and useBothWheelAxes option is\n        // active, so let's scroll vertical bar using both mouse wheel axes\n        if (deltaY) {\n          element.scrollTop -= deltaY * i.settings.wheelSpeed;\n        } else {\n          element.scrollTop += deltaX * i.settings.wheelSpeed;\n        }\n        shouldPrevent = true;\n      } else if (i.scrollbarXActive && !i.scrollbarYActive) {\n        // useBothWheelAxes and only horizontal bar is active, so use both\n        // wheel axes for horizontal bar\n        if (deltaX) {\n          element.scrollLeft += deltaX * i.settings.wheelSpeed;\n        } else {\n          element.scrollLeft -= deltaY * i.settings.wheelSpeed;\n        }\n        shouldPrevent = true;\n      }\n\n      updateGeometry(i);\n\n      shouldPrevent = shouldPrevent || shouldPreventDefault(deltaX, deltaY);\n      if (shouldPrevent && !e.ctrlKey) {\n        e.stopPropagation();\n        e.preventDefault();\n      }\n    }\n\n    if (typeof window.onwheel !== 'undefined') {\n      i.event.bind(element, 'wheel', mousewheelHandler);\n    } else if (typeof window.onmousewheel !== 'undefined') {\n      i.event.bind(element, 'mousewheel', mousewheelHandler);\n    }\n  }\n\n  function touch(i) {\n    if (!env.supportsTouch && !env.supportsIePointer) {\n      return;\n    }\n\n    var element = i.element;\n\n    function shouldPrevent(deltaX, deltaY) {\n      var scrollTop = Math.floor(element.scrollTop);\n      var scrollLeft = element.scrollLeft;\n      var magnitudeX = Math.abs(deltaX);\n      var magnitudeY = Math.abs(deltaY);\n\n      if (magnitudeY > magnitudeX) {\n        // user is perhaps trying to swipe up/down the page\n\n        if (\n          (deltaY < 0 && scrollTop === i.contentHeight - i.containerHeight) ||\n          (deltaY > 0 && scrollTop === 0)\n        ) {\n          // set prevent for mobile Chrome refresh\n          return window.scrollY === 0 && deltaY > 0 && env.isChrome;\n        }\n      } else if (magnitudeX > magnitudeY) {\n        // user is perhaps trying to swipe left/right across the page\n\n        if (\n          (deltaX < 0 && scrollLeft === i.contentWidth - i.containerWidth) ||\n          (deltaX > 0 && scrollLeft === 0)\n        ) {\n          return true;\n        }\n      }\n\n      return true;\n    }\n\n    function applyTouchMove(differenceX, differenceY) {\n      element.scrollTop -= differenceY;\n      element.scrollLeft -= differenceX;\n\n      updateGeometry(i);\n    }\n\n    var startOffset = {};\n    var startTime = 0;\n    var speed = {};\n    var easingLoop = null;\n\n    function getTouch(e) {\n      if (e.targetTouches) {\n        return e.targetTouches[0];\n      } else {\n        // Maybe IE pointer\n        return e;\n      }\n    }\n\n    function shouldHandle(e) {\n      if (e.pointerType && e.pointerType === 'pen' && e.buttons === 0) {\n        return false;\n      }\n      if (e.targetTouches && e.targetTouches.length === 1) {\n        return true;\n      }\n      if (\n        e.pointerType &&\n        e.pointerType !== 'mouse' &&\n        e.pointerType !== e.MSPOINTER_TYPE_MOUSE\n      ) {\n        return true;\n      }\n      return false;\n    }\n\n    function touchStart(e) {\n      if (!shouldHandle(e)) {\n        return;\n      }\n\n      var touch = getTouch(e);\n\n      startOffset.pageX = touch.pageX;\n      startOffset.pageY = touch.pageY;\n\n      startTime = new Date().getTime();\n\n      if (easingLoop !== null) {\n        clearInterval(easingLoop);\n      }\n    }\n\n    function shouldBeConsumedByChild(target, deltaX, deltaY) {\n      if (!element.contains(target)) {\n        return false;\n      }\n\n      var cursor = target;\n\n      while (cursor && cursor !== element) {\n        if (cursor.classList.contains(cls.element.consuming)) {\n          return true;\n        }\n\n        var style = get(cursor);\n\n        // if deltaY && vertical scrollable\n        if (deltaY && style.overflowY.match(/(scroll|auto)/)) {\n          var maxScrollTop = cursor.scrollHeight - cursor.clientHeight;\n          if (maxScrollTop > 0) {\n            if (\n              (cursor.scrollTop > 0 && deltaY < 0) ||\n              (cursor.scrollTop < maxScrollTop && deltaY > 0)\n            ) {\n              return true;\n            }\n          }\n        }\n        // if deltaX && horizontal scrollable\n        if (deltaX && style.overflowX.match(/(scroll|auto)/)) {\n          var maxScrollLeft = cursor.scrollWidth - cursor.clientWidth;\n          if (maxScrollLeft > 0) {\n            if (\n              (cursor.scrollLeft > 0 && deltaX < 0) ||\n              (cursor.scrollLeft < maxScrollLeft && deltaX > 0)\n            ) {\n              return true;\n            }\n          }\n        }\n\n        cursor = cursor.parentNode;\n      }\n\n      return false;\n    }\n\n    function touchMove(e) {\n      if (shouldHandle(e)) {\n        var touch = getTouch(e);\n\n        var currentOffset = { pageX: touch.pageX, pageY: touch.pageY };\n\n        var differenceX = currentOffset.pageX - startOffset.pageX;\n        var differenceY = currentOffset.pageY - startOffset.pageY;\n\n        if (shouldBeConsumedByChild(e.target, differenceX, differenceY)) {\n          return;\n        }\n\n        applyTouchMove(differenceX, differenceY);\n        startOffset = currentOffset;\n\n        var currentTime = new Date().getTime();\n\n        var timeGap = currentTime - startTime;\n        if (timeGap > 0) {\n          speed.x = differenceX / timeGap;\n          speed.y = differenceY / timeGap;\n          startTime = currentTime;\n        }\n\n        if (shouldPrevent(differenceX, differenceY)) {\n          e.preventDefault();\n        }\n      }\n    }\n    function touchEnd() {\n      if (i.settings.swipeEasing) {\n        clearInterval(easingLoop);\n        easingLoop = setInterval(function() {\n          if (i.isInitialized) {\n            clearInterval(easingLoop);\n            return;\n          }\n\n          if (!speed.x && !speed.y) {\n            clearInterval(easingLoop);\n            return;\n          }\n\n          if (Math.abs(speed.x) < 0.01 && Math.abs(speed.y) < 0.01) {\n            clearInterval(easingLoop);\n            return;\n          }\n\n          applyTouchMove(speed.x * 30, speed.y * 30);\n\n          speed.x *= 0.8;\n          speed.y *= 0.8;\n        }, 10);\n      }\n    }\n\n    if (env.supportsTouch) {\n      i.event.bind(element, 'touchstart', touchStart);\n      i.event.bind(element, 'touchmove', touchMove);\n      i.event.bind(element, 'touchend', touchEnd);\n    } else if (env.supportsIePointer) {\n      if (window.PointerEvent) {\n        i.event.bind(element, 'pointerdown', touchStart);\n        i.event.bind(element, 'pointermove', touchMove);\n        i.event.bind(element, 'pointerup', touchEnd);\n      } else if (window.MSPointerEvent) {\n        i.event.bind(element, 'MSPointerDown', touchStart);\n        i.event.bind(element, 'MSPointerMove', touchMove);\n        i.event.bind(element, 'MSPointerUp', touchEnd);\n      }\n    }\n  }\n\n  var defaultSettings = function () { return ({\n    handlers: ['click-rail', 'drag-thumb', 'keyboard', 'wheel', 'touch'],\n    maxScrollbarLength: null,\n    minScrollbarLength: null,\n    scrollingThreshold: 1000,\n    scrollXMarginOffset: 0,\n    scrollYMarginOffset: 0,\n    suppressScrollX: false,\n    suppressScrollY: false,\n    swipeEasing: true,\n    useBothWheelAxes: false,\n    wheelPropagation: true,\n    wheelSpeed: 1,\n  }); };\n\n  var handlers = {\n    'click-rail': clickRail,\n    'drag-thumb': dragThumb,\n    keyboard: keyboard,\n    wheel: wheel,\n    touch: touch,\n  };\n\n  var PerfectScrollbar = function PerfectScrollbar(element, userSettings) {\n    var this$2 = this;\n\n    var this$1 = this;\n    if ( userSettings === void 0 ) { userSettings = {}; }\n\n    if (typeof element === 'string') {\n      element = document.querySelector(element);\n    }\n\n    if (!element || !element.nodeName) {\n      throw new Error('no element is specified to initialize PerfectScrollbar');\n    }\n\n    this.element = element;\n\n    element.classList.add(cls.main);\n\n    this.settings = defaultSettings();\n    for (var key in userSettings) {\n      this$2.settings[key] = userSettings[key];\n    }\n\n    this.containerWidth = null;\n    this.containerHeight = null;\n    this.contentWidth = null;\n    this.contentHeight = null;\n\n    var focus = function () { return element.classList.add(cls.state.focus); };\n    var blur = function () { return element.classList.remove(cls.state.focus); };\n\n    this.isRtl = get(element).direction === 'rtl';\n    if (this.isRtl === true) {\n      element.classList.add(cls.rtl);\n    }\n    this.isNegativeScroll = (function () {\n      var originalScrollLeft = element.scrollLeft;\n      var result = null;\n      element.scrollLeft = -1;\n      result = element.scrollLeft < 0;\n      element.scrollLeft = originalScrollLeft;\n      return result;\n    })();\n    this.negativeScrollAdjustment = this.isNegativeScroll\n      ? element.scrollWidth - element.clientWidth\n      : 0;\n    this.event = new EventManager();\n    this.ownerDocument = element.ownerDocument || document;\n\n    this.scrollbarXRail = div(cls.element.rail('x'));\n    element.appendChild(this.scrollbarXRail);\n    this.scrollbarX = div(cls.element.thumb('x'));\n    this.scrollbarXRail.appendChild(this.scrollbarX);\n    this.scrollbarX.setAttribute('tabindex', 0);\n    this.event.bind(this.scrollbarX, 'focus', focus);\n    this.event.bind(this.scrollbarX, 'blur', blur);\n    this.scrollbarXActive = null;\n    this.scrollbarXWidth = null;\n    this.scrollbarXLeft = null;\n    var railXStyle = get(this.scrollbarXRail);\n    this.scrollbarXBottom = parseInt(railXStyle.bottom, 10);\n    if (isNaN(this.scrollbarXBottom)) {\n      this.isScrollbarXUsingBottom = false;\n      this.scrollbarXTop = toInt(railXStyle.top);\n    } else {\n      this.isScrollbarXUsingBottom = true;\n    }\n    this.railBorderXWidth =\n      toInt(railXStyle.borderLeftWidth) + toInt(railXStyle.borderRightWidth);\n    // Set rail to display:block to calculate margins\n    set(this.scrollbarXRail, { display: 'block' });\n    this.railXMarginWidth =\n      toInt(railXStyle.marginLeft) + toInt(railXStyle.marginRight);\n    set(this.scrollbarXRail, { display: '' });\n    this.railXWidth = null;\n    this.railXRatio = null;\n\n    this.scrollbarYRail = div(cls.element.rail('y'));\n    element.appendChild(this.scrollbarYRail);\n    this.scrollbarY = div(cls.element.thumb('y'));\n    this.scrollbarYRail.appendChild(this.scrollbarY);\n    this.scrollbarY.setAttribute('tabindex', 0);\n    this.event.bind(this.scrollbarY, 'focus', focus);\n    this.event.bind(this.scrollbarY, 'blur', blur);\n    this.scrollbarYActive = null;\n    this.scrollbarYHeight = null;\n    this.scrollbarYTop = null;\n    var railYStyle = get(this.scrollbarYRail);\n    this.scrollbarYRight = parseInt(railYStyle.right, 10);\n    if (isNaN(this.scrollbarYRight)) {\n      this.isScrollbarYUsingRight = false;\n      this.scrollbarYLeft = toInt(railYStyle.left);\n    } else {\n      this.isScrollbarYUsingRight = true;\n    }\n    this.scrollbarYOuterWidth = this.isRtl ? outerWidth(this.scrollbarY) : null;\n    this.railBorderYWidth =\n      toInt(railYStyle.borderTopWidth) + toInt(railYStyle.borderBottomWidth);\n    set(this.scrollbarYRail, { display: 'block' });\n    this.railYMarginHeight =\n      toInt(railYStyle.marginTop) + toInt(railYStyle.marginBottom);\n    set(this.scrollbarYRail, { display: '' });\n    this.railYHeight = null;\n    this.railYRatio = null;\n\n    this.reach = {\n      x:\n        element.scrollLeft <= 0\n          ? 'start'\n          : element.scrollLeft >= this.contentWidth - this.containerWidth\n          ? 'end'\n          : null,\n      y:\n        element.scrollTop <= 0\n          ? 'start'\n          : element.scrollTop >= this.contentHeight - this.containerHeight\n          ? 'end'\n          : null,\n    };\n\n    this.isAlive = true;\n\n    this.settings.handlers.forEach(function (handlerName) { return handlers[handlerName](this$1); });\n\n    this.lastScrollTop = Math.floor(element.scrollTop); // for onScroll only\n    this.lastScrollLeft = element.scrollLeft; // for onScroll only\n    this.event.bind(this.element, 'scroll', function (e) { return this$1.onScroll(e); });\n    updateGeometry(this);\n  };\n\n  PerfectScrollbar.prototype.update = function update () {\n    if (!this.isAlive) {\n      return;\n    }\n\n    // Recalcuate negative scrollLeft adjustment\n    this.negativeScrollAdjustment = this.isNegativeScroll\n      ? this.element.scrollWidth - this.element.clientWidth\n      : 0;\n\n    // Recalculate rail margins\n    set(this.scrollbarXRail, { display: 'block' });\n    set(this.scrollbarYRail, { display: 'block' });\n    this.railXMarginWidth =\n      toInt(get(this.scrollbarXRail).marginLeft) +\n      toInt(get(this.scrollbarXRail).marginRight);\n    this.railYMarginHeight =\n      toInt(get(this.scrollbarYRail).marginTop) +\n      toInt(get(this.scrollbarYRail).marginBottom);\n\n    // Hide scrollbars not to affect scrollWidth and scrollHeight\n    set(this.scrollbarXRail, { display: 'none' });\n    set(this.scrollbarYRail, { display: 'none' });\n\n    updateGeometry(this);\n\n    processScrollDiff(this, 'top', 0, false, true);\n    processScrollDiff(this, 'left', 0, false, true);\n\n    set(this.scrollbarXRail, { display: '' });\n    set(this.scrollbarYRail, { display: '' });\n  };\n\n  PerfectScrollbar.prototype.onScroll = function onScroll (e) {\n    if (!this.isAlive) {\n      return;\n    }\n\n    updateGeometry(this);\n    processScrollDiff(this, 'top', this.element.scrollTop - this.lastScrollTop);\n    processScrollDiff(\n      this,\n      'left',\n      this.element.scrollLeft - this.lastScrollLeft\n    );\n\n    this.lastScrollTop = Math.floor(this.element.scrollTop);\n    this.lastScrollLeft = this.element.scrollLeft;\n  };\n\n  PerfectScrollbar.prototype.destroy = function destroy () {\n    if (!this.isAlive) {\n      return;\n    }\n\n    this.event.unbindAll();\n    remove(this.scrollbarX);\n    remove(this.scrollbarY);\n    remove(this.scrollbarXRail);\n    remove(this.scrollbarYRail);\n    this.removePsClasses();\n\n    // unset elements\n    this.element = null;\n    this.scrollbarX = null;\n    this.scrollbarY = null;\n    this.scrollbarXRail = null;\n    this.scrollbarYRail = null;\n\n    this.isAlive = false;\n  };\n\n  PerfectScrollbar.prototype.removePsClasses = function removePsClasses () {\n    this.element.className = this.element.className\n      .split(' ')\n      .filter(function (name) { return !name.match(/^ps([-_].+|)$/); })\n      .join(' ');\n  };\n\n  var PerfectScrollbar$1 = {\n    name: 'PerfectScrollbar',\n    props: {\n      options: {\n        type: Object,\n        required: false,\n        default: function () {}\n      },\n      tag: {\n        type: String,\n        required: false,\n        default: 'div'\n      },\n      watchOptions: {\n        type: Boolean,\n        required: false,\n        default: false\n      }\n    },\n    data: function data () {\n      return {\n        ps: null\n      }\n    },\n    watch: {\n      watchOptions: function watchOptions (shouldWatch) {\n        if (!shouldWatch && this.watcher) {\n          this.watcher();\n        } else {\n          this.createWatcher();\n        }\n      }\n    },\n    mounted: function mounted () {\n      this.create();\n\n      if (this.watchOptions) {\n        this.createWatcher();\n      }\n    },\n    updated: function updated () {\n      var this$1 = this;\n\n      this.$nextTick(function () {\n        this$1.update();\n      });\n    },\n    beforeDestroy: function beforeDestroy () {\n      this.destroy();\n    },\n    methods: {\n      create: function create () {\n        if (!(this.ps && this.$isServer)) {\n          this.ps = new PerfectScrollbar(this.$refs.container, this.options);\n        }\n      },\n      createWatcher: function createWatcher () {\n        var this$1 = this;\n\n        this.watcher = this.$watch('options', function () {\n          this$1.destroy();\n          this$1.create();\n        }, {\n          deep: true\n        });\n      },\n      update: function update () {\n        if (this.ps) {\n          this.ps.update();\n        }\n      },\n      destroy: function destroy () {\n        if (this.ps) {\n          this.ps.destroy();\n          this.ps = null;\n        }\n      }\n    },\n    render: function render (h) {\n      return h(this.tag,\n        {\n          ref: 'container',\n          class: 'ps',\n          on: this.$listeners\n        },\n        this.$slots.default)\n    }\n  };\n\n  function install (Vue, settings) {\n    if (settings) {\n      if (settings.name && typeof settings.name === 'string') {\n        PerfectScrollbar$1.name = settings.name;\n      }\n\n      if (settings.options && typeof settings.options === 'object') {\n        PerfectScrollbar$1.props.options.default = function () {\n          return settings.options\n        };\n      }\n\n      if (settings.tag && typeof settings.tag === 'string') {\n        PerfectScrollbar$1.props.tag.default = settings.tag;\n      }\n\n      if (settings.watchOptions && typeof settings.watchOptions === 'boolean') {\n        PerfectScrollbar$1.props.watchOptions = settings.watchOptions;\n      }\n    }\n\n    Vue.component(\n      PerfectScrollbar$1.name,\n      PerfectScrollbar$1\n    );\n  }\n\n  exports.install = install;\n  exports.PerfectScrollbar = PerfectScrollbar$1;\n  exports.default = install;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n"]}]}