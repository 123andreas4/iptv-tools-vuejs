{"remainingRequest":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/thread-loader/dist/cjs.js!/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/babel-loader/lib/index.js!/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/bootstrap-vue/esm/directives/scrollspy/helpers/bv-scrollspy.class.js","dependencies":[{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/bootstrap-vue/esm/directives/scrollspy/helpers/bv-scrollspy.class.js","mtime":499162500000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcubWF0Y2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvcnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgewogIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOwogICAgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgewogICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsKICAgIH0pOwogICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOwogIH0KCiAgcmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwoKICAgIGlmIChpICUgMikgewogICAgICBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsKICAgICAgfSk7CiAgICB9CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgewogIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsKICB9Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsKICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOwogICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOwogICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOwogICAgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7CiAgfQp9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7CiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7CiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOwogIHJldHVybiBDb25zdHJ1Y3RvcjsKfQovKgogKiBTY3JvbGxTcHkgY2xhc3MgZGVmaW5pdGlvbgogKi8KCgppbXBvcnQgeyBFVkVOVF9PUFRJT05TX05PX0NBUFRVUkUgfSBmcm9tICcuLi8uLi8uLi9jb25zdGFudHMvZXZlbnRzJzsKaW1wb3J0IHsgUlhfSFJFRiB9IGZyb20gJy4uLy4uLy4uL2NvbnN0YW50cy9yZWdleCc7CmltcG9ydCB7IGFkZENsYXNzLCBjbG9zZXN0LCBnZXRBdHRyLCBnZXRCQ1IsIGhhc0NsYXNzLCBpc0VsZW1lbnQsIGlzVmlzaWJsZSwgbWF0Y2hlcywgb2Zmc2V0LCBwb3NpdGlvbiwgcmVtb3ZlQ2xhc3MsIHNlbGVjdCwgc2VsZWN0QWxsIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvZG9tJzsKaW1wb3J0IHsgZ2V0Um9vdEV2ZW50TmFtZSwgZXZlbnRPbiwgZXZlbnRPZmYgfSBmcm9tICcuLi8uLi8uLi91dGlscy9ldmVudHMnOwppbXBvcnQgeyBpZGVudGl0eSB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL2lkZW50aXR5JzsKaW1wb3J0IHsgaXNTdHJpbmcsIGlzVW5kZWZpbmVkIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvaW5zcGVjdCc7CmltcG9ydCB7IG1hdGhNYXggfSBmcm9tICcuLi8uLi8uLi91dGlscy9tYXRoJzsKaW1wb3J0IHsgdG9JbnRlZ2VyIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvbnVtYmVyJzsKaW1wb3J0IHsgaGFzT3duUHJvcGVydHksIHRvU3RyaW5nIGFzIG9iamVjdFRvU3RyaW5nIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvb2JqZWN0JzsKaW1wb3J0IHsgb2JzZXJ2ZURvbSB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL29ic2VydmUtZG9tJzsKaW1wb3J0IHsgd2FybiB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3dhcm4nOwovKgogKiBDb25zdGFudHMgLyBEZWZhdWx0cwogKi8KCnZhciBOQU1FID0gJ3YtYi1zY3JvbGxzcHknOwp2YXIgQ0xBU1NfTkFNRV9EUk9QRE9XTl9JVEVNID0gJ2Ryb3Bkb3duLWl0ZW0nOwp2YXIgQ0xBU1NfTkFNRV9BQ1RJVkUgPSAnYWN0aXZlJzsKdmFyIFNFTEVDVE9SX05BVl9MSVNUX0dST1VQID0gJy5uYXYsIC5saXN0LWdyb3VwJzsKdmFyIFNFTEVDVE9SX05BVl9MSU5LUyA9ICcubmF2LWxpbmsnOwp2YXIgU0VMRUNUT1JfTkFWX0lURU1TID0gJy5uYXYtaXRlbSc7CnZhciBTRUxFQ1RPUl9MSVNUX0lURU1TID0gJy5saXN0LWdyb3VwLWl0ZW0nOwp2YXIgU0VMRUNUT1JfRFJPUERPV04gPSAnLmRyb3Bkb3duLCAuZHJvcHVwJzsKdmFyIFNFTEVDVE9SX0RST1BET1dOX0lURU1TID0gJy5kcm9wZG93bi1pdGVtJzsKdmFyIFNFTEVDVE9SX0RST1BET1dOX1RPR0dMRSA9ICcuZHJvcGRvd24tdG9nZ2xlJzsKdmFyIFJPT1RfRVZFTlRfTkFNRV9BQ1RJVkFURSA9IGdldFJvb3RFdmVudE5hbWUoJ0JWU2Nyb2xsc3B5JywgJ2FjdGl2YXRlJyk7CnZhciBNRVRIT0RfT0ZGU0VUID0gJ29mZnNldCc7CnZhciBNRVRIT0RfUE9TSVRJT04gPSAncG9zaXRpb24nOwp2YXIgRGVmYXVsdCA9IHsKICBlbGVtZW50OiAnYm9keScsCiAgb2Zmc2V0OiAxMCwKICBtZXRob2Q6ICdhdXRvJywKICB0aHJvdHRsZTogNzUKfTsKdmFyIERlZmF1bHRUeXBlID0gewogIGVsZW1lbnQ6ICcoc3RyaW5nfGVsZW1lbnR8Y29tcG9uZW50KScsCiAgb2Zmc2V0OiAnbnVtYmVyJywKICBtZXRob2Q6ICdzdHJpbmcnLAogIHRocm90dGxlOiAnbnVtYmVyJwp9OyAvLyBUcmFuc2l0aW9uIEV2ZW50cwoKdmFyIFRyYW5zaXRpb25FbmRFdmVudHMgPSBbJ3dlYmtpdFRyYW5zaXRpb25FbmQnLCAndHJhbnNpdGlvbmVuZCcsICdvdHJhbnNpdGlvbmVuZCcsICdvVHJhbnNpdGlvbkVuZCddOwovKgogKiBVdGlsaXR5IE1ldGhvZHMKICovCi8vIEJldHRlciB2YXIgdHlwZSBkZXRlY3Rpb24KCnZhciB0b1R5cGUgPSBmdW5jdGlvbiB0b1R5cGUob2JqKQovKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dDogbm90IGVhc3kgdG8gdGVzdCAqLwp7CiAgcmV0dXJuIG9iamVjdFRvU3RyaW5nKG9iaikubWF0Y2goL1xzKFthLXpBLVpdKykvKVsxXS50b0xvd2VyQ2FzZSgpOwp9OyAvLyBDaGVjayBjb25maWcgcHJvcGVydGllcyBmb3IgZXhwZWN0ZWQgdHlwZXMKCi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCgoKdmFyIHR5cGVDaGVja0NvbmZpZyA9IGZ1bmN0aW9uIHR5cGVDaGVja0NvbmZpZyhjb21wb25lbnROYW1lLCBjb25maWcsIGNvbmZpZ1R5cGVzKQovKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dDogbm90IGVhc3kgdG8gdGVzdCAqLwp7CiAgZm9yICh2YXIgcHJvcGVydHkgaW4gY29uZmlnVHlwZXMpIHsKICAgIGlmIChoYXNPd25Qcm9wZXJ0eShjb25maWdUeXBlcywgcHJvcGVydHkpKSB7CiAgICAgIHZhciBleHBlY3RlZFR5cGVzID0gY29uZmlnVHlwZXNbcHJvcGVydHldOwogICAgICB2YXIgdmFsdWUgPSBjb25maWdbcHJvcGVydHldOwogICAgICB2YXIgdmFsdWVUeXBlID0gdmFsdWUgJiYgaXNFbGVtZW50KHZhbHVlKSA/ICdlbGVtZW50JyA6IHRvVHlwZSh2YWx1ZSk7IC8vIGhhbmRsZSBWdWUgaW5zdGFuY2VzCgogICAgICB2YWx1ZVR5cGUgPSB2YWx1ZSAmJiB2YWx1ZS5faXNWdWUgPyAnY29tcG9uZW50JyA6IHZhbHVlVHlwZTsKCiAgICAgIGlmICghbmV3IFJlZ0V4cChleHBlY3RlZFR5cGVzKS50ZXN0KHZhbHVlVHlwZSkpIHsKICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwogICAgICAgIHdhcm4oIiIuY29uY2F0KGNvbXBvbmVudE5hbWUsICI6IE9wdGlvbiBcIiIpLmNvbmNhdChwcm9wZXJ0eSwgIlwiIHByb3ZpZGVkIHR5cGUgXCIiKS5jb25jYXQodmFsdWVUeXBlLCAiXCIgYnV0IGV4cGVjdGVkIHR5cGUgXCIiKS5jb25jYXQoZXhwZWN0ZWRUeXBlcywgIlwiIikpOwogICAgICB9CiAgICB9CiAgfQp9OwovKgogKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICogQ2xhc3MgRGVmaW5pdGlvbgogKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICovCgovKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dDogbm90IGVhc3kgdG8gdGVzdCAqLwoKCmV4cG9ydCB2YXIgQlZTY3JvbGxTcHkKLyogaXN0YW5idWwgaWdub3JlIG5leHQ6IG5vdCBlYXN5IHRvIHRlc3QgKi8KPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBCVlNjcm9sbFNweShlbGVtZW50LCBjb25maWcsICRyb290KSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQlZTY3JvbGxTcHkpOyAvLyBUaGUgZWxlbWVudCB3ZSBhY3RpdmF0ZSBsaW5rcyBpbgoKCiAgICB0aGlzLiRlbCA9IGVsZW1lbnQ7CiAgICB0aGlzLiRzY3JvbGxlciA9IG51bGw7CiAgICB0aGlzLiRzZWxlY3RvciA9IFtTRUxFQ1RPUl9OQVZfTElOS1MsIFNFTEVDVE9SX0xJU1RfSVRFTVMsIFNFTEVDVE9SX0RST1BET1dOX0lURU1TXS5qb2luKCcsJyk7CiAgICB0aGlzLiRvZmZzZXRzID0gW107CiAgICB0aGlzLiR0YXJnZXRzID0gW107CiAgICB0aGlzLiRhY3RpdmVUYXJnZXQgPSBudWxsOwogICAgdGhpcy4kc2Nyb2xsSGVpZ2h0ID0gMDsKICAgIHRoaXMuJHJlc2l6ZVRpbWVvdXQgPSBudWxsOwogICAgdGhpcy4kc2Nyb2xsZXJPYnNlcnZlciA9IG51bGw7CiAgICB0aGlzLiR0YXJnZXRzT2JzZXJ2ZXIgPSBudWxsOwogICAgdGhpcy4kcm9vdCA9ICRyb290IHx8IG51bGw7CiAgICB0aGlzLiRjb25maWcgPSBudWxsOwogICAgdGhpcy51cGRhdGVDb25maWcoY29uZmlnKTsKICB9CgogIF9jcmVhdGVDbGFzcyhCVlNjcm9sbFNweSwgW3sKICAgIGtleTogInVwZGF0ZUNvbmZpZyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlQ29uZmlnKGNvbmZpZywgJHJvb3QpIHsKICAgICAgaWYgKHRoaXMuJHNjcm9sbGVyKSB7CiAgICAgICAgLy8gSnVzdCBpbiBjYXNlIG91dCBzY3JvbGwgZWxlbWVudCBoYXMgY2hhbmdlZAogICAgICAgIHRoaXMudW5saXN0ZW4oKTsKICAgICAgICB0aGlzLiRzY3JvbGxlciA9IG51bGw7CiAgICAgIH0KCiAgICAgIHZhciBjZmcgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRoaXMuY29uc3RydWN0b3IuRGVmYXVsdCksIGNvbmZpZyk7CgogICAgICBpZiAoJHJvb3QpIHsKICAgICAgICB0aGlzLiRyb290ID0gJHJvb3Q7CiAgICAgIH0KCiAgICAgIHR5cGVDaGVja0NvbmZpZyh0aGlzLmNvbnN0cnVjdG9yLk5hbWUsIGNmZywgdGhpcy5jb25zdHJ1Y3Rvci5EZWZhdWx0VHlwZSk7CiAgICAgIHRoaXMuJGNvbmZpZyA9IGNmZzsKCiAgICAgIGlmICh0aGlzLiRyb290KSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgIHRoaXMuJHJvb3QuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHNlbGYubGlzdGVuKCk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5saXN0ZW4oKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImRpc3Bvc2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7CiAgICAgIHRoaXMudW5saXN0ZW4oKTsKICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuJHJlc2l6ZVRpbWVvdXQpOwogICAgICB0aGlzLiRyZXNpemVUaW1lb3V0ID0gbnVsbDsKICAgICAgdGhpcy4kZWwgPSBudWxsOwogICAgICB0aGlzLiRjb25maWcgPSBudWxsOwogICAgICB0aGlzLiRzY3JvbGxlciA9IG51bGw7CiAgICAgIHRoaXMuJHNlbGVjdG9yID0gbnVsbDsKICAgICAgdGhpcy4kb2Zmc2V0cyA9IG51bGw7CiAgICAgIHRoaXMuJHRhcmdldHMgPSBudWxsOwogICAgICB0aGlzLiRhY3RpdmVUYXJnZXQgPSBudWxsOwogICAgICB0aGlzLiRzY3JvbGxIZWlnaHQgPSBudWxsOwogICAgfQogIH0sIHsKICAgIGtleTogImxpc3RlbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbGlzdGVuKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHNjcm9sbGVyID0gdGhpcy5nZXRTY3JvbGxlcigpOwoKICAgICAgaWYgKHNjcm9sbGVyICYmIHNjcm9sbGVyLnRhZ05hbWUgIT09ICdCT0RZJykgewogICAgICAgIGV2ZW50T24oc2Nyb2xsZXIsICdzY3JvbGwnLCB0aGlzLCBFVkVOVF9PUFRJT05TX05PX0NBUFRVUkUpOwogICAgICB9CgogICAgICBldmVudE9uKHdpbmRvdywgJ3Njcm9sbCcsIHRoaXMsIEVWRU5UX09QVElPTlNfTk9fQ0FQVFVSRSk7CiAgICAgIGV2ZW50T24od2luZG93LCAncmVzaXplJywgdGhpcywgRVZFTlRfT1BUSU9OU19OT19DQVBUVVJFKTsKICAgICAgZXZlbnRPbih3aW5kb3csICdvcmllbnRhdGlvbmNoYW5nZScsIHRoaXMsIEVWRU5UX09QVElPTlNfTk9fQ0FQVFVSRSk7CiAgICAgIFRyYW5zaXRpb25FbmRFdmVudHMuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnROYW1lKSB7CiAgICAgICAgZXZlbnRPbih3aW5kb3csIGV2ZW50TmFtZSwgX3RoaXMsIEVWRU5UX09QVElPTlNfTk9fQ0FQVFVSRSk7CiAgICAgIH0pOwogICAgICB0aGlzLnNldE9ic2VydmVycyh0cnVlKTsgLy8gU2NoZWR1bGUgYSByZWZyZXNoCgogICAgICB0aGlzLmhhbmRsZUV2ZW50KCdyZWZyZXNoJyk7CiAgICB9CiAgfSwgewogICAga2V5OiAidW5saXN0ZW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVubGlzdGVuKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBzY3JvbGxlciA9IHRoaXMuZ2V0U2Nyb2xsZXIoKTsKICAgICAgdGhpcy5zZXRPYnNlcnZlcnMoZmFsc2UpOwoKICAgICAgaWYgKHNjcm9sbGVyICYmIHNjcm9sbGVyLnRhZ05hbWUgIT09ICdCT0RZJykgewogICAgICAgIGV2ZW50T2ZmKHNjcm9sbGVyLCAnc2Nyb2xsJywgdGhpcywgRVZFTlRfT1BUSU9OU19OT19DQVBUVVJFKTsKICAgICAgfQoKICAgICAgZXZlbnRPZmYod2luZG93LCAnc2Nyb2xsJywgdGhpcywgRVZFTlRfT1BUSU9OU19OT19DQVBUVVJFKTsKICAgICAgZXZlbnRPZmYod2luZG93LCAncmVzaXplJywgdGhpcywgRVZFTlRfT1BUSU9OU19OT19DQVBUVVJFKTsKICAgICAgZXZlbnRPZmYod2luZG93LCAnb3JpZW50YXRpb25jaGFuZ2UnLCB0aGlzLCBFVkVOVF9PUFRJT05TX05PX0NBUFRVUkUpOwogICAgICBUcmFuc2l0aW9uRW5kRXZlbnRzLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50TmFtZSkgewogICAgICAgIGV2ZW50T2ZmKHdpbmRvdywgZXZlbnROYW1lLCBfdGhpczIsIEVWRU5UX09QVElPTlNfTk9fQ0FQVFVSRSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInNldE9ic2VydmVycyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0T2JzZXJ2ZXJzKG9uKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOyAvLyBXZSBvYnNlcnZlIGJvdGggdGhlIHNjcm9sbGVyIGZvciBjb250ZW50IGNoYW5nZXMsIGFuZCB0aGUgdGFyZ2V0IGxpbmtzCgoKICAgICAgdGhpcy4kc2Nyb2xsZXJPYnNlcnZlciAmJiB0aGlzLiRzY3JvbGxlck9ic2VydmVyLmRpc2Nvbm5lY3QoKTsKICAgICAgdGhpcy4kdGFyZ2V0c09ic2VydmVyICYmIHRoaXMuJHRhcmdldHNPYnNlcnZlci5kaXNjb25uZWN0KCk7CiAgICAgIHRoaXMuJHNjcm9sbGVyT2JzZXJ2ZXIgPSBudWxsOwogICAgICB0aGlzLiR0YXJnZXRzT2JzZXJ2ZXIgPSBudWxsOwoKICAgICAgaWYgKG9uKSB7CiAgICAgICAgdGhpcy4kdGFyZ2V0c09ic2VydmVyID0gb2JzZXJ2ZURvbSh0aGlzLiRlbCwgZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMzLmhhbmRsZUV2ZW50KCdtdXRhdGlvbicpOwogICAgICAgIH0sIHsKICAgICAgICAgIHN1YnRyZWU6IHRydWUsCiAgICAgICAgICBjaGlsZExpc3Q6IHRydWUsCiAgICAgICAgICBhdHRyaWJ1dGVzOiB0cnVlLAogICAgICAgICAgYXR0cmlidXRlRmlsdGVyOiBbJ2hyZWYnXQogICAgICAgIH0pOwogICAgICAgIHRoaXMuJHNjcm9sbGVyT2JzZXJ2ZXIgPSBvYnNlcnZlRG9tKHRoaXMuZ2V0U2Nyb2xsZXIoKSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMzLmhhbmRsZUV2ZW50KCdtdXRhdGlvbicpOwogICAgICAgIH0sIHsKICAgICAgICAgIHN1YnRyZWU6IHRydWUsCiAgICAgICAgICBjaGlsZExpc3Q6IHRydWUsCiAgICAgICAgICBjaGFyYWN0ZXJEYXRhOiB0cnVlLAogICAgICAgICAgYXR0cmlidXRlczogdHJ1ZSwKICAgICAgICAgIGF0dHJpYnV0ZUZpbHRlcjogWydpZCcsICdzdHlsZScsICdjbGFzcyddCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0gLy8gR2VuZXJhbCBldmVudCBoYW5kbGVyCgogIH0sIHsKICAgIGtleTogImhhbmRsZUV2ZW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVFdmVudChldmVudCkgewogICAgICB2YXIgdHlwZSA9IGlzU3RyaW5nKGV2ZW50KSA/IGV2ZW50IDogZXZlbnQudHlwZTsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgdmFyIHJlc2l6ZVRocm90dGxlID0gZnVuY3Rpb24gcmVzaXplVGhyb3R0bGUoKSB7CiAgICAgICAgaWYgKCFzZWxmLiRyZXNpemVUaW1lb3V0KSB7CiAgICAgICAgICBzZWxmLiRyZXNpemVUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHNlbGYucmVmcmVzaCgpOwogICAgICAgICAgICBzZWxmLnByb2Nlc3MoKTsKICAgICAgICAgICAgc2VsZi4kcmVzaXplVGltZW91dCA9IG51bGw7CiAgICAgICAgICB9LCBzZWxmLiRjb25maWcudGhyb3R0bGUpOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIGlmICh0eXBlID09PSAnc2Nyb2xsJykgewogICAgICAgIGlmICghdGhpcy4kc2Nyb2xsZXJPYnNlcnZlcikgewogICAgICAgICAgLy8gSnVzdCBpbiBjYXNlIHdlIGFyZSBhZGRlZCB0byB0aGUgRE9NIGJlZm9yZSB0aGUgc2Nyb2xsIHRhcmdldCBpcwogICAgICAgICAgLy8gV2UgcmUtaW5zdGFudGlhdGUgb3VyIGxpc3RlbmVycywganVzdCBpbiBjYXNlCiAgICAgICAgICB0aGlzLmxpc3RlbigpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5wcm9jZXNzKCk7CiAgICAgIH0gZWxzZSBpZiAoLyhyZXNpemV8b3JpZW50YXRpb25jaGFuZ2V8bXV0YXRpb258cmVmcmVzaCkvLnRlc3QodHlwZSkpIHsKICAgICAgICAvLyBQb3N0cG9uZSB0aGVzZSBldmVudHMgYnkgdGhyb3R0bGUgdGltZQogICAgICAgIHJlc2l6ZVRocm90dGxlKCk7CiAgICAgIH0KICAgIH0gLy8gUmVmcmVzaCB0aGUgbGlzdCBvZiB0YXJnZXQgbGlua3Mgb24gdGhlIGVsZW1lbnQgd2UgYXJlIGFwcGxpZWQgdG8KCiAgfSwgewogICAga2V5OiAicmVmcmVzaCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVmcmVzaCgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB2YXIgc2Nyb2xsZXIgPSB0aGlzLmdldFNjcm9sbGVyKCk7CgogICAgICBpZiAoIXNjcm9sbGVyKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgYXV0b01ldGhvZCA9IHNjcm9sbGVyICE9PSBzY3JvbGxlci53aW5kb3cgPyBNRVRIT0RfUE9TSVRJT04gOiBNRVRIT0RfT0ZGU0VUOwogICAgICB2YXIgbWV0aG9kID0gdGhpcy4kY29uZmlnLm1ldGhvZCA9PT0gJ2F1dG8nID8gYXV0b01ldGhvZCA6IHRoaXMuJGNvbmZpZy5tZXRob2Q7CiAgICAgIHZhciBtZXRob2RGbiA9IG1ldGhvZCA9PT0gTUVUSE9EX1BPU0lUSU9OID8gcG9zaXRpb24gOiBvZmZzZXQ7CiAgICAgIHZhciBvZmZzZXRCYXNlID0gbWV0aG9kID09PSBNRVRIT0RfUE9TSVRJT04gPyB0aGlzLmdldFNjcm9sbFRvcCgpIDogMDsKICAgICAgdGhpcy4kb2Zmc2V0cyA9IFtdOwogICAgICB0aGlzLiR0YXJnZXRzID0gW107CiAgICAgIHRoaXMuJHNjcm9sbEhlaWdodCA9IHRoaXMuZ2V0U2Nyb2xsSGVpZ2h0KCk7IC8vIEZpbmQgYWxsIHRoZSB1bmlxdWUgbGluayBIUkVGcyB0aGF0IHdlIHdpbGwgY29udHJvbAoKICAgICAgc2VsZWN0QWxsKHRoaXMuJHNlbGVjdG9yLCB0aGlzLiRlbCkgLy8gR2V0IEhSRUYgdmFsdWUKICAgICAgLm1hcChmdW5jdGlvbiAobGluaykgewogICAgICAgIHJldHVybiBnZXRBdHRyKGxpbmssICdocmVmJyk7CiAgICAgIH0pIC8vIEZpbHRlciBvdXQgSFJFRnMgdGhhdCBkbyBub3QgbWF0Y2ggb3VyIFJlZ0V4cAogICAgICAuZmlsdGVyKGZ1bmN0aW9uIChocmVmKSB7CiAgICAgICAgcmV0dXJuIGhyZWYgJiYgUlhfSFJFRi50ZXN0KGhyZWYgfHwgJycpOwogICAgICB9KSAvLyBGaW5kIGFsbCBlbGVtZW50cyB3aXRoIElEIHRoYXQgbWF0Y2ggSFJFRiBoYXNoCiAgICAgIC5tYXAoZnVuY3Rpb24gKGhyZWYpIHsKICAgICAgICAvLyBDb252ZXJ0IEhSRUYgaW50byBhbiBJRCAoaW5jbHVkaW5nICMgYXQgYmVnaW5uaW5nKQogICAgICAgIHZhciBpZCA9IGhyZWYucmVwbGFjZShSWF9IUkVGLCAnJDEnKS50cmltKCk7CgogICAgICAgIGlmICghaWQpIHsKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0gLy8gRmluZCB0aGUgZWxlbWVudCB3aXRoIHRoZSBJRCBzcGVjaWZpZWQgYnkgaWQKCgogICAgICAgIHZhciBlbCA9IHNlbGVjdChpZCwgc2Nyb2xsZXIpOwoKICAgICAgICBpZiAoZWwgJiYgaXNWaXNpYmxlKGVsKSkgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgb2Zmc2V0OiB0b0ludGVnZXIobWV0aG9kRm4oZWwpLnRvcCwgMCkgKyBvZmZzZXRCYXNlLAogICAgICAgICAgICB0YXJnZXQ6IGlkCiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0pLmZpbHRlcihpZGVudGl0eSkgLy8gU29ydCB0aGVtIGJ5IHRoZWlyIG9mZnNldHMgKHNtYWxsZXN0IGZpcnN0KQogICAgICAuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgIHJldHVybiBhLm9mZnNldCAtIGIub2Zmc2V0OwogICAgICB9KSAvLyByZWNvcmQgb25seSB1bmlxdWUgdGFyZ2V0cy9vZmZzZXRzCiAgICAgIC5yZWR1Y2UoZnVuY3Rpb24gKG1lbW8sIGl0ZW0pIHsKICAgICAgICBpZiAoIW1lbW9baXRlbS50YXJnZXRdKSB7CiAgICAgICAgICBfdGhpczQuJG9mZnNldHMucHVzaChpdGVtLm9mZnNldCk7CgogICAgICAgICAgX3RoaXM0LiR0YXJnZXRzLnB1c2goaXRlbS50YXJnZXQpOwoKICAgICAgICAgIG1lbW9baXRlbS50YXJnZXRdID0gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBtZW1vOwogICAgICB9LCB7fSk7IC8vIFJldHVybiB0aGlzIGZvciBlYXN5IGNoYWluaW5nCgogICAgICByZXR1cm4gdGhpczsKICAgIH0gLy8gSGFuZGxlIGFjdGl2YXRpbmcvY2xlYXJpbmcKCiAgfSwgewogICAga2V5OiAicHJvY2VzcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcHJvY2VzcygpIHsKICAgICAgdmFyIHNjcm9sbFRvcCA9IHRoaXMuZ2V0U2Nyb2xsVG9wKCkgKyB0aGlzLiRjb25maWcub2Zmc2V0OwogICAgICB2YXIgc2Nyb2xsSGVpZ2h0ID0gdGhpcy5nZXRTY3JvbGxIZWlnaHQoKTsKICAgICAgdmFyIG1heFNjcm9sbCA9IHRoaXMuJGNvbmZpZy5vZmZzZXQgKyBzY3JvbGxIZWlnaHQgLSB0aGlzLmdldE9mZnNldEhlaWdodCgpOwoKICAgICAgaWYgKHRoaXMuJHNjcm9sbEhlaWdodCAhPT0gc2Nyb2xsSGVpZ2h0KSB7CiAgICAgICAgdGhpcy5yZWZyZXNoKCk7CiAgICAgIH0KCiAgICAgIGlmIChzY3JvbGxUb3AgPj0gbWF4U2Nyb2xsKSB7CiAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMuJHRhcmdldHNbdGhpcy4kdGFyZ2V0cy5sZW5ndGggLSAxXTsKCiAgICAgICAgaWYgKHRoaXMuJGFjdGl2ZVRhcmdldCAhPT0gdGFyZ2V0KSB7CiAgICAgICAgICB0aGlzLmFjdGl2YXRlKHRhcmdldCk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLiRhY3RpdmVUYXJnZXQgJiYgc2Nyb2xsVG9wIDwgdGhpcy4kb2Zmc2V0c1swXSAmJiB0aGlzLiRvZmZzZXRzWzBdID4gMCkgewogICAgICAgIHRoaXMuJGFjdGl2ZVRhcmdldCA9IG51bGw7CiAgICAgICAgdGhpcy5jbGVhcigpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgZm9yICh2YXIgaSA9IHRoaXMuJG9mZnNldHMubGVuZ3RoOyBpLS07KSB7CiAgICAgICAgdmFyIGlzQWN0aXZlVGFyZ2V0ID0gdGhpcy4kYWN0aXZlVGFyZ2V0ICE9PSB0aGlzLiR0YXJnZXRzW2ldICYmIHNjcm9sbFRvcCA+PSB0aGlzLiRvZmZzZXRzW2ldICYmIChpc1VuZGVmaW5lZCh0aGlzLiRvZmZzZXRzW2kgKyAxXSkgfHwgc2Nyb2xsVG9wIDwgdGhpcy4kb2Zmc2V0c1tpICsgMV0pOwoKICAgICAgICBpZiAoaXNBY3RpdmVUYXJnZXQpIHsKICAgICAgICAgIHRoaXMuYWN0aXZhdGUodGhpcy4kdGFyZ2V0c1tpXSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0U2Nyb2xsZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFNjcm9sbGVyKCkgewogICAgICBpZiAodGhpcy4kc2Nyb2xsZXIpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc2Nyb2xsZXI7CiAgICAgIH0KCiAgICAgIHZhciBzY3JvbGxlciA9IHRoaXMuJGNvbmZpZy5lbGVtZW50OwoKICAgICAgaWYgKCFzY3JvbGxlcikgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9IGVsc2UgaWYgKGlzRWxlbWVudChzY3JvbGxlci4kZWwpKSB7CiAgICAgICAgc2Nyb2xsZXIgPSBzY3JvbGxlci4kZWw7CiAgICAgIH0gZWxzZSBpZiAoaXNTdHJpbmcoc2Nyb2xsZXIpKSB7CiAgICAgICAgc2Nyb2xsZXIgPSBzZWxlY3Qoc2Nyb2xsZXIpOwogICAgICB9CgogICAgICBpZiAoIXNjcm9sbGVyKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIHRoaXMuJHNjcm9sbGVyID0gc2Nyb2xsZXIudGFnTmFtZSA9PT0gJ0JPRFknID8gd2luZG93IDogc2Nyb2xsZXI7CiAgICAgIHJldHVybiB0aGlzLiRzY3JvbGxlcjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRTY3JvbGxUb3AiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFNjcm9sbFRvcCgpIHsKICAgICAgdmFyIHNjcm9sbGVyID0gdGhpcy5nZXRTY3JvbGxlcigpOwogICAgICByZXR1cm4gc2Nyb2xsZXIgPT09IHdpbmRvdyA/IHNjcm9sbGVyLnBhZ2VZT2Zmc2V0IDogc2Nyb2xsZXIuc2Nyb2xsVG9wOwogICAgfQogIH0sIHsKICAgIGtleTogImdldFNjcm9sbEhlaWdodCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U2Nyb2xsSGVpZ2h0KCkgewogICAgICByZXR1cm4gdGhpcy5nZXRTY3JvbGxlcigpLnNjcm9sbEhlaWdodCB8fCBtYXRoTWF4KGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0LCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRPZmZzZXRIZWlnaHQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldE9mZnNldEhlaWdodCgpIHsKICAgICAgdmFyIHNjcm9sbGVyID0gdGhpcy5nZXRTY3JvbGxlcigpOwogICAgICByZXR1cm4gc2Nyb2xsZXIgPT09IHdpbmRvdyA/IHdpbmRvdy5pbm5lckhlaWdodCA6IGdldEJDUihzY3JvbGxlcikuaGVpZ2h0OwogICAgfQogIH0sIHsKICAgIGtleTogImFjdGl2YXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhY3RpdmF0ZSh0YXJnZXQpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB0aGlzLiRhY3RpdmVUYXJnZXQgPSB0YXJnZXQ7CiAgICAgIHRoaXMuY2xlYXIoKTsgLy8gR3JhYiB0aGUgbGlzdCBvZiB0YXJnZXQgbGlua3MgKDxhIGhyZWY9InskdGFyZ2V0fSI+KQoKICAgICAgdmFyIGxpbmtzID0gc2VsZWN0QWxsKHRoaXMuJHNlbGVjdG9yIC8vIFNwbGl0IG91dCB0aGUgYmFzZSBzZWxlY3RvcnMKICAgICAgLnNwbGl0KCcsJykgLy8gTWFwIHRvIGEgc2VsZWN0b3IgdGhhdCBtYXRjaGVzIGxpbmtzIHdpdGggSFJFRiBlbmRpbmcgaW4gdGhlIElEIChpbmNsdWRpbmcgJyMnKQogICAgICAubWFwKGZ1bmN0aW9uIChzZWxlY3RvcikgewogICAgICAgIHJldHVybiAiIi5jb25jYXQoc2VsZWN0b3IsICJbaHJlZiQ9XCIiKS5jb25jYXQodGFyZ2V0LCAiXCJdIik7CiAgICAgIH0pIC8vIEpvaW4gYmFjayBpbnRvIGEgc2luZ2xlIHNlbGVjdG9yIHN0cmluZwogICAgICAuam9pbignLCcpLCB0aGlzLiRlbCk7CiAgICAgIGxpbmtzLmZvckVhY2goZnVuY3Rpb24gKGxpbmspIHsKICAgICAgICBpZiAoaGFzQ2xhc3MobGluaywgQ0xBU1NfTkFNRV9EUk9QRE9XTl9JVEVNKSkgewogICAgICAgICAgLy8gVGhpcyBpcyBhIGRyb3Bkb3duIGl0ZW0sIHNvIGZpbmQgdGhlIC5kcm9wZG93bi10b2dnbGUgYW5kIHNldCBpdHMgc3RhdGUKICAgICAgICAgIHZhciBkcm9wZG93biA9IGNsb3Nlc3QoU0VMRUNUT1JfRFJPUERPV04sIGxpbmspOwoKICAgICAgICAgIGlmIChkcm9wZG93bikgewogICAgICAgICAgICBfdGhpczUuc2V0QWN0aXZlU3RhdGUoc2VsZWN0KFNFTEVDVE9SX0RST1BET1dOX1RPR0dMRSwgZHJvcGRvd24pLCB0cnVlKTsKICAgICAgICAgIH0gLy8gQWxzbyBzZXQgdGhpcyBsaW5rJ3Mgc3RhdGUKCgogICAgICAgICAgX3RoaXM1LnNldEFjdGl2ZVN0YXRlKGxpbmssIHRydWUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBTZXQgdHJpZ2dlcmVkIGxpbmsgYXMgYWN0aXZlCiAgICAgICAgICBfdGhpczUuc2V0QWN0aXZlU3RhdGUobGluaywgdHJ1ZSk7CgogICAgICAgICAgaWYgKG1hdGNoZXMobGluay5wYXJlbnRFbGVtZW50LCBTRUxFQ1RPUl9OQVZfSVRFTVMpKSB7CiAgICAgICAgICAgIC8vIEhhbmRsZSBuYXYtbGluayBpbnNpZGUgbmF2LWl0ZW0sIGFuZCBzZXQgbmF2LWl0ZW0gYWN0aXZlCiAgICAgICAgICAgIF90aGlzNS5zZXRBY3RpdmVTdGF0ZShsaW5rLnBhcmVudEVsZW1lbnQsIHRydWUpOwogICAgICAgICAgfSAvLyBTZXQgdHJpZ2dlcmVkIGxpbmtzIHBhcmVudHMgYXMgYWN0aXZlCiAgICAgICAgICAvLyBXaXRoIGJvdGggPHVsPiBhbmQgPG5hdj4gbWFya3VwIGEgcGFyZW50IGlzIHRoZSBwcmV2aW91cyBzaWJsaW5nIG9mIGFueSBuYXYgYW5jZXN0b3IKCgogICAgICAgICAgdmFyIGVsID0gbGluazsKCiAgICAgICAgICB3aGlsZSAoZWwpIHsKICAgICAgICAgICAgZWwgPSBjbG9zZXN0KFNFTEVDVE9SX05BVl9MSVNUX0dST1VQLCBlbCk7CiAgICAgICAgICAgIHZhciBzaWJsaW5nID0gZWwgPyBlbC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nIDogbnVsbDsKCiAgICAgICAgICAgIGlmIChzaWJsaW5nICYmIG1hdGNoZXMoc2libGluZywgIiIuY29uY2F0KFNFTEVDVE9SX05BVl9MSU5LUywgIiwgIikuY29uY2F0KFNFTEVDVE9SX0xJU1RfSVRFTVMpKSkgewogICAgICAgICAgICAgIF90aGlzNS5zZXRBY3RpdmVTdGF0ZShzaWJsaW5nLCB0cnVlKTsKICAgICAgICAgICAgfSAvLyBIYW5kbGUgc3BlY2lhbCBjYXNlIHdoZXJlIG5hdi1saW5rIGlzIGluc2lkZSBhIG5hdi1pdGVtCgoKICAgICAgICAgICAgaWYgKHNpYmxpbmcgJiYgbWF0Y2hlcyhzaWJsaW5nLCBTRUxFQ1RPUl9OQVZfSVRFTVMpKSB7CiAgICAgICAgICAgICAgX3RoaXM1LnNldEFjdGl2ZVN0YXRlKHNlbGVjdChTRUxFQ1RPUl9OQVZfTElOS1MsIHNpYmxpbmcpLCB0cnVlKTsgLy8gQWRkIGFjdGl2ZSBzdGF0ZSB0byBuYXYtaXRlbSBhcyB3ZWxsCgoKICAgICAgICAgICAgICBfdGhpczUuc2V0QWN0aXZlU3RhdGUoc2libGluZywgdHJ1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOyAvLyBTaWduYWwgZXZlbnQgdG8gdmlhICRyb290LCBwYXNzaW5nIElEIG9mIGFjdGl2YXRlZCB0YXJnZXQgYW5kIHJlZmVyZW5jZSB0byBhcnJheSBvZiBsaW5rcwoKICAgICAgaWYgKGxpbmtzICYmIGxpbmtzLmxlbmd0aCA+IDAgJiYgdGhpcy4kcm9vdCkgewogICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoUk9PVF9FVkVOVF9OQU1FX0FDVElWQVRFLCB0YXJnZXQsIGxpbmtzKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImNsZWFyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhcigpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICBzZWxlY3RBbGwoIiIuY29uY2F0KHRoaXMuJHNlbGVjdG9yLCAiLCAiKS5jb25jYXQoU0VMRUNUT1JfTkFWX0lURU1TKSwgdGhpcy4kZWwpLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gaGFzQ2xhc3MoZWwsIENMQVNTX05BTUVfQUNUSVZFKTsKICAgICAgfSkuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gX3RoaXM2LnNldEFjdGl2ZVN0YXRlKGVsLCBmYWxzZSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInNldEFjdGl2ZVN0YXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRBY3RpdmVTdGF0ZShlbCwgYWN0aXZlKSB7CiAgICAgIGlmICghZWwpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChhY3RpdmUpIHsKICAgICAgICBhZGRDbGFzcyhlbCwgQ0xBU1NfTkFNRV9BQ1RJVkUpOwogICAgICB9IGVsc2UgewogICAgICAgIHJlbW92ZUNsYXNzKGVsLCBDTEFTU19OQU1FX0FDVElWRSk7CiAgICAgIH0KICAgIH0KICB9XSwgW3sKICAgIGtleTogIk5hbWUiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiBOQU1FOwogICAgfQogIH0sIHsKICAgIGtleTogIkRlZmF1bHQiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiBEZWZhdWx0OwogICAgfQogIH0sIHsKICAgIGtleTogIkRlZmF1bHRUeXBlIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gRGVmYXVsdFR5cGU7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gQlZTY3JvbGxTcHk7Cn0oKTs="},null]}