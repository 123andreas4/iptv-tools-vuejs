{"remainingRequest":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/babel-loader/lib/index.js!/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/bootstrap-vue/esm/components/modal/modal.js","dependencies":[{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/bootstrap-vue/esm/components/modal/modal.js","mtime":499162500000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIjsKCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgewogIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOwogICAgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgewogICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsKICAgIH0pOwogICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOwogIH0KCiAgcmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwoKICAgIGlmIChpICUgMikgewogICAgICBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsKICAgICAgfSk7CiAgICB9CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKaW1wb3J0IHsgQ09NUE9ORU5UX1VJRF9LRVksIFZ1ZSB9IGZyb20gJy4uLy4uL3Z1ZSc7CmltcG9ydCB7IE5BTUVfTU9EQUwgfSBmcm9tICcuLi8uLi9jb25zdGFudHMvY29tcG9uZW50cyc7CmltcG9ydCB7IElTX0JST1dTRVIgfSBmcm9tICcuLi8uLi9jb25zdGFudHMvZW52JzsKaW1wb3J0IHsgRVZFTlRfTkFNRV9DQU5DRUwsIEVWRU5UX05BTUVfQ0hBTkdFLCBFVkVOVF9OQU1FX0NMT1NFLCBFVkVOVF9OQU1FX0hJRERFTiwgRVZFTlRfTkFNRV9ISURFLCBFVkVOVF9OQU1FX09LLCBFVkVOVF9OQU1FX1NIT1csIEVWRU5UX05BTUVfU0hPV04sIEVWRU5UX05BTUVfVE9HR0xFLCBFVkVOVF9PUFRJT05TX05PX0NBUFRVUkUgfSBmcm9tICcuLi8uLi9jb25zdGFudHMvZXZlbnRzJzsKaW1wb3J0IHsgQ09ERV9FU0MgfSBmcm9tICcuLi8uLi9jb25zdGFudHMva2V5LWNvZGVzJzsKaW1wb3J0IHsgUFJPUF9UWVBFX0FSUkFZX09CSkVDVF9TVFJJTkcsIFBST1BfVFlQRV9BUlJBWV9TVFJJTkcsIFBST1BfVFlQRV9CT09MRUFOLCBQUk9QX1RZUEVfT0JKRUNULCBQUk9QX1RZUEVfU1RSSU5HIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzL3Byb3BzJzsKaW1wb3J0IHsgSFRNTEVsZW1lbnQgfSBmcm9tICcuLi8uLi9jb25zdGFudHMvc2FmZS10eXBlcyc7CmltcG9ydCB7IFNMT1RfTkFNRV9ERUZBVUxULCBTTE9UX05BTUVfTU9EQUxfQkFDS0RST1AsIFNMT1RfTkFNRV9NT0RBTF9DQU5DRUwsIFNMT1RfTkFNRV9NT0RBTF9GT09URVIsIFNMT1RfTkFNRV9NT0RBTF9IRUFERVIsIFNMT1RfTkFNRV9NT0RBTF9IRUFERVJfQ0xPU0UsIFNMT1RfTkFNRV9NT0RBTF9PSywgU0xPVF9OQU1FX01PREFMX1RJVExFIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzL3Nsb3RzJzsKaW1wb3J0IHsgYXJyYXlJbmNsdWRlcywgY29uY2F0IH0gZnJvbSAnLi4vLi4vdXRpbHMvYXJyYXknOwppbXBvcnQgeyBhdHRlbXB0Rm9jdXMsIGNsb3Nlc3QsIGNvbnRhaW5zLCBnZXRBY3RpdmVFbGVtZW50IGFzIF9nZXRBY3RpdmVFbGVtZW50LCBnZXRUYWJhYmxlcywgcmVxdWVzdEFGLCBzZWxlY3QgfSBmcm9tICcuLi8uLi91dGlscy9kb20nOwppbXBvcnQgeyBnZXRSb290QWN0aW9uRXZlbnROYW1lLCBnZXRSb290RXZlbnROYW1lLCBldmVudE9uLCBldmVudE9mZiB9IGZyb20gJy4uLy4uL3V0aWxzL2V2ZW50cyc7CmltcG9ydCB7IGh0bWxPclRleHQgfSBmcm9tICcuLi8uLi91dGlscy9odG1sJzsKaW1wb3J0IHsgaWRlbnRpdHkgfSBmcm9tICcuLi8uLi91dGlscy9pZGVudGl0eSc7CmltcG9ydCB7IGlzU3RyaW5nLCBpc1VuZGVmaW5lZE9yTnVsbCB9IGZyb20gJy4uLy4uL3V0aWxzL2luc3BlY3QnOwppbXBvcnQgeyBtYWtlTW9kZWxNaXhpbiB9IGZyb20gJy4uLy4uL3V0aWxzL21vZGVsJzsKaW1wb3J0IHsgc29ydEtleXMgfSBmcm9tICcuLi8uLi91dGlscy9vYmplY3QnOwppbXBvcnQgeyBvYnNlcnZlRG9tIH0gZnJvbSAnLi4vLi4vdXRpbHMvb2JzZXJ2ZS1kb20nOwppbXBvcnQgeyBtYWtlUHJvcCwgbWFrZVByb3BzQ29uZmlndXJhYmxlIH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJvcHMnOwppbXBvcnQgeyBhdHRyc01peGluIH0gZnJvbSAnLi4vLi4vbWl4aW5zL2F0dHJzJzsKaW1wb3J0IHsgaWRNaXhpbiwgcHJvcHMgYXMgaWRQcm9wcyB9IGZyb20gJy4uLy4uL21peGlucy9pZCc7CmltcG9ydCB7IGxpc3Rlbk9uRG9jdW1lbnRNaXhpbiB9IGZyb20gJy4uLy4uL21peGlucy9saXN0ZW4tb24tZG9jdW1lbnQnOwppbXBvcnQgeyBsaXN0ZW5PblJvb3RNaXhpbiB9IGZyb20gJy4uLy4uL21peGlucy9saXN0ZW4tb24tcm9vdCc7CmltcG9ydCB7IGxpc3Rlbk9uV2luZG93TWl4aW4gfSBmcm9tICcuLi8uLi9taXhpbnMvbGlzdGVuLW9uLXdpbmRvdyc7CmltcG9ydCB7IG5vcm1hbGl6ZVNsb3RNaXhpbiB9IGZyb20gJy4uLy4uL21peGlucy9ub3JtYWxpemUtc2xvdCc7CmltcG9ydCB7IHNjb3BlZFN0eWxlTWl4aW4gfSBmcm9tICcuLi8uLi9taXhpbnMvc2NvcGVkLXN0eWxlJzsKaW1wb3J0IHsgQkJ1dHRvbiB9IGZyb20gJy4uL2J1dHRvbi9idXR0b24nOwppbXBvcnQgeyBCQnV0dG9uQ2xvc2UgfSBmcm9tICcuLi9idXR0b24vYnV0dG9uLWNsb3NlJzsKaW1wb3J0IHsgQlZUcmFuc2l0aW9uIH0gZnJvbSAnLi4vdHJhbnNpdGlvbi9idi10cmFuc2l0aW9uJzsKaW1wb3J0IHsgQlZUcmFuc3BvcnRlciB9IGZyb20gJy4uL3RyYW5zcG9ydGVyL3RyYW5zcG9ydGVyJzsKaW1wb3J0IHsgQnZNb2RhbEV2ZW50IH0gZnJvbSAnLi9oZWxwZXJzL2J2LW1vZGFsLWV2ZW50LmNsYXNzJzsKaW1wb3J0IHsgbW9kYWxNYW5hZ2VyIH0gZnJvbSAnLi9oZWxwZXJzL21vZGFsLW1hbmFnZXInOyAvLyAtLS0gQ29uc3RhbnRzIC0tLQoKdmFyIF9tYWtlTW9kZWxNaXhpbiA9IG1ha2VNb2RlbE1peGluKCd2aXNpYmxlJywgewogIHR5cGU6IFBST1BfVFlQRV9CT09MRUFOLAogIGRlZmF1bHRWYWx1ZTogZmFsc2UsCiAgZXZlbnQ6IEVWRU5UX05BTUVfQ0hBTkdFCn0pLAogICAgbW9kZWxNaXhpbiA9IF9tYWtlTW9kZWxNaXhpbi5taXhpbiwKICAgIG1vZGVsUHJvcHMgPSBfbWFrZU1vZGVsTWl4aW4ucHJvcHMsCiAgICBNT0RFTF9QUk9QX05BTUUgPSBfbWFrZU1vZGVsTWl4aW4ucHJvcCwKICAgIE1PREVMX0VWRU5UX05BTUUgPSBfbWFrZU1vZGVsTWl4aW4uZXZlbnQ7Cgp2YXIgVFJJR0dFUl9CQUNLRFJPUCA9ICdiYWNrZHJvcCc7CnZhciBUUklHR0VSX0VTQyA9ICdlc2MnOwp2YXIgVFJJR0dFUl9GT1JDRSA9ICdGT1JDRSc7CnZhciBUUklHR0VSX1RPR0dMRSA9ICd0b2dnbGUnOwp2YXIgQlVUVE9OX0NBTkNFTCA9ICdjYW5jZWwnOyAvLyBUT0RPOiBUaGlzIHNob3VsZCBiZSByZW5hbWVkIHRvICdjbG9zZScKCnZhciBCVVRUT05fQ0xPU0UgPSAnaGVhZGVyY2xvc2UnOwp2YXIgQlVUVE9OX09LID0gJ29rJzsKdmFyIEJVVFRPTlMgPSBbQlVUVE9OX0NBTkNFTCwgQlVUVE9OX0NMT1NFLCBCVVRUT05fT0tdOyAvLyBgT2JzZXJ2ZURvbWAgY29uZmlnIHRvIGRldGVjdCBjaGFuZ2VzIGluIG1vZGFsIGNvbnRlbnQKLy8gc28gdGhhdCB3ZSBjYW4gYWRqdXN0IHRoZSBtb2RhbCBwYWRkaW5nIGlmIG5lZWRlZAoKdmFyIE9CU0VSVkVSX0NPTkZJRyA9IHsKICBzdWJ0cmVlOiB0cnVlLAogIGNoaWxkTGlzdDogdHJ1ZSwKICBjaGFyYWN0ZXJEYXRhOiB0cnVlLAogIGF0dHJpYnV0ZXM6IHRydWUsCiAgYXR0cmlidXRlRmlsdGVyOiBbJ3N0eWxlJywgJ2NsYXNzJ10KfTsgLy8gLS0tIFByb3BzIC0tLQoKZXhwb3J0IHZhciBwcm9wcyA9IG1ha2VQcm9wc0NvbmZpZ3VyYWJsZShzb3J0S2V5cyhfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgaWRQcm9wcyksIG1vZGVsUHJvcHMpLCB7fSwgewogIGFyaWFMYWJlbDogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORyksCiAgYXV0b0ZvY3VzQnV0dG9uOiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HLCBudWxsLAogIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgZnVuY3Rpb24gKHZhbHVlKSB7CiAgICByZXR1cm4gaXNVbmRlZmluZWRPck51bGwodmFsdWUpIHx8IGFycmF5SW5jbHVkZXMoQlVUVE9OUywgdmFsdWUpOwogIH0pLAogIGJvZHlCZ1ZhcmlhbnQ6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcpLAogIGJvZHlDbGFzczogbWFrZVByb3AoUFJPUF9UWVBFX0FSUkFZX09CSkVDVF9TVFJJTkcpLAogIGJvZHlUZXh0VmFyaWFudDogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORyksCiAgYnVzeTogbWFrZVByb3AoUFJPUF9UWVBFX0JPT0xFQU4sIGZhbHNlKSwKICBidXR0b25TaXplOiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HKSwKICBjYW5jZWxEaXNhYmxlZDogbWFrZVByb3AoUFJPUF9UWVBFX0JPT0xFQU4sIGZhbHNlKSwKICBjYW5jZWxUaXRsZTogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORywgJ0NhbmNlbCcpLAogIGNhbmNlbFRpdGxlSHRtbDogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORyksCiAgY2FuY2VsVmFyaWFudDogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORywgJ3NlY29uZGFyeScpLAogIGNlbnRlcmVkOiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIGNvbnRlbnRDbGFzczogbWFrZVByb3AoUFJPUF9UWVBFX0FSUkFZX09CSkVDVF9TVFJJTkcpLAogIGRpYWxvZ0NsYXNzOiBtYWtlUHJvcChQUk9QX1RZUEVfQVJSQVlfT0JKRUNUX1NUUklORyksCiAgZm9vdGVyQmdWYXJpYW50OiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HKSwKICBmb290ZXJCb3JkZXJWYXJpYW50OiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HKSwKICBmb290ZXJDbGFzczogbWFrZVByb3AoUFJPUF9UWVBFX0FSUkFZX09CSkVDVF9TVFJJTkcpLAogIGZvb3RlclRleHRWYXJpYW50OiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HKSwKICBoZWFkZXJCZ1ZhcmlhbnQ6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcpLAogIGhlYWRlckJvcmRlclZhcmlhbnQ6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcpLAogIGhlYWRlckNsYXNzOiBtYWtlUHJvcChQUk9QX1RZUEVfQVJSQVlfT0JKRUNUX1NUUklORyksCiAgaGVhZGVyQ2xvc2VDb250ZW50OiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HLCAnJnRpbWVzOycpLAogIGhlYWRlckNsb3NlTGFiZWw6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcsICdDbG9zZScpLAogIGhlYWRlckNsb3NlVmFyaWFudDogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORyksCiAgaGVhZGVyVGV4dFZhcmlhbnQ6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcpLAogIC8vIFRPRE86IFJlbmFtZSB0byBgbm9CYWNrZHJvcGAgYW5kIGRlcHJlY2F0ZSBgaGlkZUJhY2tkcm9wYAogIGhpZGVCYWNrZHJvcDogbWFrZVByb3AoUFJPUF9UWVBFX0JPT0xFQU4sIGZhbHNlKSwKICAvLyBUT0RPOiBSZW5hbWUgdG8gYG5vRm9vdGVyYCBhbmQgZGVwcmVjYXRlIGBoaWRlRm9vdGVyYAogIGhpZGVGb290ZXI6IG1ha2VQcm9wKFBST1BfVFlQRV9CT09MRUFOLCBmYWxzZSksCiAgLy8gVE9ETzogUmVuYW1lIHRvIGBub0hlYWRlcmAgYW5kIGRlcHJlY2F0ZSBgaGlkZUhlYWRlcmAKICBoaWRlSGVhZGVyOiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIC8vIFRPRE86IFJlbmFtZSB0byBgbm9IZWFkZXJDbG9zZWAgYW5kIGRlcHJlY2F0ZSBgaGlkZUhlYWRlckNsb3NlYAogIGhpZGVIZWFkZXJDbG9zZTogbWFrZVByb3AoUFJPUF9UWVBFX0JPT0xFQU4sIGZhbHNlKSwKICBpZ25vcmVFbmZvcmNlRm9jdXNTZWxlY3RvcjogbWFrZVByb3AoUFJPUF9UWVBFX0FSUkFZX1NUUklORyksCiAgbGF6eTogbWFrZVByb3AoUFJPUF9UWVBFX0JPT0xFQU4sIGZhbHNlKSwKICBtb2RhbENsYXNzOiBtYWtlUHJvcChQUk9QX1RZUEVfQVJSQVlfT0JKRUNUX1NUUklORyksCiAgbm9DbG9zZU9uQmFja2Ryb3A6IG1ha2VQcm9wKFBST1BfVFlQRV9CT09MRUFOLCBmYWxzZSksCiAgbm9DbG9zZU9uRXNjOiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIG5vRW5mb3JjZUZvY3VzOiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIG5vRmFkZTogbWFrZVByb3AoUFJPUF9UWVBFX0JPT0xFQU4sIGZhbHNlKSwKICBub1N0YWNraW5nOiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIG9rRGlzYWJsZWQ6IG1ha2VQcm9wKFBST1BfVFlQRV9CT09MRUFOLCBmYWxzZSksCiAgb2tPbmx5OiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIG9rVGl0bGU6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcsICdPSycpLAogIG9rVGl0bGVIdG1sOiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HKSwKICBva1ZhcmlhbnQ6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcsICdwcmltYXJ5JyksCiAgLy8gSFRNTCBFbGVtZW50LCBDU1Mgc2VsZWN0b3Igc3RyaW5nIG9yIFZ1ZSBjb21wb25lbnQgaW5zdGFuY2UKICByZXR1cm5Gb2N1czogbWFrZVByb3AoW0hUTUxFbGVtZW50LCBQUk9QX1RZUEVfT0JKRUNULCBQUk9QX1RZUEVfU1RSSU5HXSksCiAgc2Nyb2xsYWJsZTogbWFrZVByb3AoUFJPUF9UWVBFX0JPT0xFQU4sIGZhbHNlKSwKICBzaXplOiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HLCAnbWQnKSwKICBzdGF0aWM6IG1ha2VQcm9wKFBST1BfVFlQRV9CT09MRUFOLCBmYWxzZSksCiAgdGl0bGU6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcpLAogIHRpdGxlQ2xhc3M6IG1ha2VQcm9wKFBST1BfVFlQRV9BUlJBWV9PQkpFQ1RfU1RSSU5HKSwKICB0aXRsZUh0bWw6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcpLAogIHRpdGxlU3JPbmx5OiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIHRpdGxlVGFnOiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HLCAnaDUnKQp9KSksIE5BTUVfTU9EQUwpOyAvLyAtLS0gTWFpbiBjb21wb25lbnQgLS0tCi8vIEB2dWUvY29tcG9uZW50CgpleHBvcnQgdmFyIEJNb2RhbCA9IC8qI19fUFVSRV9fKi9WdWUuZXh0ZW5kKHsKICBuYW1lOiBOQU1FX01PREFMLAogIG1peGluczogW2F0dHJzTWl4aW4sIGlkTWl4aW4sIG1vZGVsTWl4aW4sIGxpc3Rlbk9uRG9jdW1lbnRNaXhpbiwgbGlzdGVuT25Sb290TWl4aW4sIGxpc3Rlbk9uV2luZG93TWl4aW4sIG5vcm1hbGl6ZVNsb3RNaXhpbiwgc2NvcGVkU3R5bGVNaXhpbl0sCiAgaW5oZXJpdEF0dHJzOiBmYWxzZSwKICBwcm9wczogcHJvcHMsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzSGlkZGVuOiB0cnVlLAogICAgICAvLyBJZiBtb2RhbCBzaG91bGQgbm90IGJlIGluIGRvY3VtZW50CiAgICAgIGlzVmlzaWJsZTogZmFsc2UsCiAgICAgIC8vIENvbnRyb2xzIG1vZGFsIHZpc2libGUgc3RhdGUKICAgICAgaXNUcmFuc2l0aW9uaW5nOiBmYWxzZSwKICAgICAgLy8gVXNlZCBmb3Igc3R5bGUgY29udHJvbAogICAgICBpc1Nob3c6IGZhbHNlLAogICAgICAvLyBVc2VkIGZvciBzdHlsZSBjb250cm9sCiAgICAgIGlzQmxvY2s6IGZhbHNlLAogICAgICAvLyBVc2VkIGZvciBzdHlsZSBjb250cm9sCiAgICAgIGlzT3BlbmluZzogZmFsc2UsCiAgICAgIC8vIFRvIHNpZ25hbCB0aGF0IHRoZSBtb2RhbCBpcyBpbiB0aGUgcHJvY2VzcyBvZiBvcGVuaW5nCiAgICAgIGlzQ2xvc2luZzogZmFsc2UsCiAgICAgIC8vIFRvIHNpZ25hbCB0aGF0IHRoZSBtb2RhbCBpcyBpbiB0aGUgcHJvY2VzcyBvZiBjbG9zaW5nCiAgICAgIGlnbm9yZUJhY2tkcm9wQ2xpY2s6IGZhbHNlLAogICAgICAvLyBVc2VkIHRvIHNpZ25pZnkgaWYgY2xpY2sgb3V0IGxpc3RlbmVyIHNob3VsZCBpZ25vcmUgdGhlIGNsaWNrCiAgICAgIGlzTW9kYWxPdmVyZmxvd2luZzogZmFsc2UsCiAgICAgIC8vIFRoZSBmb2xsb3dpbmcgaXRlbXMgYXJlIGNvbnRyb2xsZWQgYnkgdGhlIG1vZGFsTWFuYWdlciBpbnN0YW5jZQogICAgICBzY3JvbGxiYXJXaWR0aDogMCwKICAgICAgekluZGV4OiBtb2RhbE1hbmFnZXIuZ2V0QmFzZVpJbmRleCgpLAogICAgICBpc1RvcDogdHJ1ZSwKICAgICAgaXNCb2R5T3ZlcmZsb3dpbmc6IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIG1vZGFsSWQ6IGZ1bmN0aW9uIG1vZGFsSWQoKSB7CiAgICAgIHJldHVybiB0aGlzLnNhZmVJZCgpOwogICAgfSwKICAgIG1vZGFsT3V0ZXJJZDogZnVuY3Rpb24gbW9kYWxPdXRlcklkKCkgewogICAgICByZXR1cm4gdGhpcy5zYWZlSWQoJ19fQlZfbW9kYWxfb3V0ZXJfJyk7CiAgICB9LAogICAgbW9kYWxIZWFkZXJJZDogZnVuY3Rpb24gbW9kYWxIZWFkZXJJZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuc2FmZUlkKCdfX0JWX21vZGFsX2hlYWRlcl8nKTsKICAgIH0sCiAgICBtb2RhbEJvZHlJZDogZnVuY3Rpb24gbW9kYWxCb2R5SWQoKSB7CiAgICAgIHJldHVybiB0aGlzLnNhZmVJZCgnX19CVl9tb2RhbF9ib2R5XycpOwogICAgfSwKICAgIG1vZGFsVGl0bGVJZDogZnVuY3Rpb24gbW9kYWxUaXRsZUlkKCkgewogICAgICByZXR1cm4gdGhpcy5zYWZlSWQoJ19fQlZfbW9kYWxfdGl0bGVfJyk7CiAgICB9LAogICAgbW9kYWxDb250ZW50SWQ6IGZ1bmN0aW9uIG1vZGFsQ29udGVudElkKCkgewogICAgICByZXR1cm4gdGhpcy5zYWZlSWQoJ19fQlZfbW9kYWxfY29udGVudF8nKTsKICAgIH0sCiAgICBtb2RhbEZvb3RlcklkOiBmdW5jdGlvbiBtb2RhbEZvb3RlcklkKCkgewogICAgICByZXR1cm4gdGhpcy5zYWZlSWQoJ19fQlZfbW9kYWxfZm9vdGVyXycpOwogICAgfSwKICAgIG1vZGFsQmFja2Ryb3BJZDogZnVuY3Rpb24gbW9kYWxCYWNrZHJvcElkKCkgewogICAgICByZXR1cm4gdGhpcy5zYWZlSWQoJ19fQlZfbW9kYWxfYmFja2Ryb3BfJyk7CiAgICB9LAogICAgbW9kYWxDbGFzc2VzOiBmdW5jdGlvbiBtb2RhbENsYXNzZXMoKSB7CiAgICAgIHJldHVybiBbewogICAgICAgIGZhZGU6ICF0aGlzLm5vRmFkZSwKICAgICAgICBzaG93OiB0aGlzLmlzU2hvdwogICAgICB9LCB0aGlzLm1vZGFsQ2xhc3NdOwogICAgfSwKICAgIG1vZGFsU3R5bGVzOiBmdW5jdGlvbiBtb2RhbFN0eWxlcygpIHsKICAgICAgdmFyIHNiV2lkdGggPSAiIi5jb25jYXQodGhpcy5zY3JvbGxiYXJXaWR0aCwgInB4Iik7CiAgICAgIHJldHVybiB7CiAgICAgICAgcGFkZGluZ0xlZnQ6ICF0aGlzLmlzQm9keU92ZXJmbG93aW5nICYmIHRoaXMuaXNNb2RhbE92ZXJmbG93aW5nID8gc2JXaWR0aCA6ICcnLAogICAgICAgIHBhZGRpbmdSaWdodDogdGhpcy5pc0JvZHlPdmVyZmxvd2luZyAmJiAhdGhpcy5pc01vZGFsT3ZlcmZsb3dpbmcgPyBzYldpZHRoIDogJycsCiAgICAgICAgLy8gTmVlZGVkIHRvIGZpeCBpc3N1ZSBodHRwczovL2dpdGh1Yi5jb20vYm9vdHN0cmFwLXZ1ZS9ib290c3RyYXAtdnVlL2lzc3Vlcy8zNDU3CiAgICAgICAgLy8gRXZlbiB0aG91Z2ggd2UgYXJlIHVzaW5nIHYtc2hvdywgd2UgbXVzdCBlbnN1cmUgJ25vbmUnIGlzIHJlc3RvcmVkIGluIHRoZSBzdHlsZXMKICAgICAgICBkaXNwbGF5OiB0aGlzLmlzQmxvY2sgPyAnYmxvY2snIDogJ25vbmUnCiAgICAgIH07CiAgICB9LAogICAgZGlhbG9nQ2xhc3NlczogZnVuY3Rpb24gZGlhbG9nQ2xhc3NlcygpIHsKICAgICAgdmFyIF9yZWY7CgogICAgICByZXR1cm4gWyhfcmVmID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfcmVmLCAibW9kYWwtIi5jb25jYXQodGhpcy5zaXplKSwgdGhpcy5zaXplKSwgX2RlZmluZVByb3BlcnR5KF9yZWYsICdtb2RhbC1kaWFsb2ctY2VudGVyZWQnLCB0aGlzLmNlbnRlcmVkKSwgX2RlZmluZVByb3BlcnR5KF9yZWYsICdtb2RhbC1kaWFsb2ctc2Nyb2xsYWJsZScsIHRoaXMuc2Nyb2xsYWJsZSksIF9yZWYpLCB0aGlzLmRpYWxvZ0NsYXNzXTsKICAgIH0sCiAgICBoZWFkZXJDbGFzc2VzOiBmdW5jdGlvbiBoZWFkZXJDbGFzc2VzKCkgewogICAgICB2YXIgX3JlZjI7CgogICAgICByZXR1cm4gWyhfcmVmMiA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX3JlZjIsICJiZy0iLmNvbmNhdCh0aGlzLmhlYWRlckJnVmFyaWFudCksIHRoaXMuaGVhZGVyQmdWYXJpYW50KSwgX2RlZmluZVByb3BlcnR5KF9yZWYyLCAidGV4dC0iLmNvbmNhdCh0aGlzLmhlYWRlclRleHRWYXJpYW50KSwgdGhpcy5oZWFkZXJUZXh0VmFyaWFudCksIF9kZWZpbmVQcm9wZXJ0eShfcmVmMiwgImJvcmRlci0iLmNvbmNhdCh0aGlzLmhlYWRlckJvcmRlclZhcmlhbnQpLCB0aGlzLmhlYWRlckJvcmRlclZhcmlhbnQpLCBfcmVmMiksIHRoaXMuaGVhZGVyQ2xhc3NdOwogICAgfSwKICAgIHRpdGxlQ2xhc3NlczogZnVuY3Rpb24gdGl0bGVDbGFzc2VzKCkgewogICAgICByZXR1cm4gW3sKICAgICAgICAnc3Itb25seSc6IHRoaXMudGl0bGVTck9ubHkKICAgICAgfSwgdGhpcy50aXRsZUNsYXNzXTsKICAgIH0sCiAgICBib2R5Q2xhc3NlczogZnVuY3Rpb24gYm9keUNsYXNzZXMoKSB7CiAgICAgIHZhciBfcmVmMzsKCiAgICAgIHJldHVybiBbKF9yZWYzID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfcmVmMywgImJnLSIuY29uY2F0KHRoaXMuYm9keUJnVmFyaWFudCksIHRoaXMuYm9keUJnVmFyaWFudCksIF9kZWZpbmVQcm9wZXJ0eShfcmVmMywgInRleHQtIi5jb25jYXQodGhpcy5ib2R5VGV4dFZhcmlhbnQpLCB0aGlzLmJvZHlUZXh0VmFyaWFudCksIF9yZWYzKSwgdGhpcy5ib2R5Q2xhc3NdOwogICAgfSwKICAgIGZvb3RlckNsYXNzZXM6IGZ1bmN0aW9uIGZvb3RlckNsYXNzZXMoKSB7CiAgICAgIHZhciBfcmVmNDsKCiAgICAgIHJldHVybiBbKF9yZWY0ID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfcmVmNCwgImJnLSIuY29uY2F0KHRoaXMuZm9vdGVyQmdWYXJpYW50KSwgdGhpcy5mb290ZXJCZ1ZhcmlhbnQpLCBfZGVmaW5lUHJvcGVydHkoX3JlZjQsICJ0ZXh0LSIuY29uY2F0KHRoaXMuZm9vdGVyVGV4dFZhcmlhbnQpLCB0aGlzLmZvb3RlclRleHRWYXJpYW50KSwgX2RlZmluZVByb3BlcnR5KF9yZWY0LCAiYm9yZGVyLSIuY29uY2F0KHRoaXMuZm9vdGVyQm9yZGVyVmFyaWFudCksIHRoaXMuZm9vdGVyQm9yZGVyVmFyaWFudCksIF9yZWY0KSwgdGhpcy5mb290ZXJDbGFzc107CiAgICB9LAogICAgbW9kYWxPdXRlclN0eWxlOiBmdW5jdGlvbiBtb2RhbE91dGVyU3R5bGUoKSB7CiAgICAgIC8vIFN0eWxlcyBuZWVkZWQgZm9yIHByb3BlciBzdGFja2luZyBvZiBtb2RhbHMKICAgICAgcmV0dXJuIHsKICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJywKICAgICAgICB6SW5kZXg6IHRoaXMuekluZGV4CiAgICAgIH07CiAgICB9LAogICAgc2xvdFNjb3BlOiBmdW5jdGlvbiBzbG90U2NvcGUoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgY2FuY2VsOiB0aGlzLm9uQ2FuY2VsLAogICAgICAgIGNsb3NlOiB0aGlzLm9uQ2xvc2UsCiAgICAgICAgaGlkZTogdGhpcy5oaWRlLAogICAgICAgIG9rOiB0aGlzLm9uT2ssCiAgICAgICAgdmlzaWJsZTogdGhpcy5pc1Zpc2libGUKICAgICAgfTsKICAgIH0sCiAgICBjb21wdXRlSWdub3JlRW5mb3JjZUZvY3VzU2VsZWN0b3I6IGZ1bmN0aW9uIGNvbXB1dGVJZ25vcmVFbmZvcmNlRm9jdXNTZWxlY3RvcigpIHsKICAgICAgLy8gTm9ybWFsaXplIHRvIGFuIHNpbmdsZSBzZWxlY3RvciB3aXRoIHNlbGVjdG9ycyBzZXBhcmF0ZWQgYnkgYCxgCiAgICAgIHJldHVybiBjb25jYXQodGhpcy5pZ25vcmVFbmZvcmNlRm9jdXNTZWxlY3RvcikuZmlsdGVyKGlkZW50aXR5KS5qb2luKCcsJykudHJpbSgpOwogICAgfSwKICAgIGNvbXB1dGVkQXR0cnM6IGZ1bmN0aW9uIGNvbXB1dGVkQXR0cnMoKSB7CiAgICAgIC8vIElmIHRoZSBwYXJlbnQgaGFzIGEgc2NvcGVkIHN0eWxlIGF0dHJpYnV0ZSwgYW5kIHRoZSBtb2RhbAogICAgICAvLyBpcyBwb3J0YWxsZWQsIGFkZCB0aGUgc2NvcGVkIGF0dHJpYnV0ZSB0byB0aGUgbW9kYWwgd3JhcHBlcgogICAgICB2YXIgc2NvcGVkU3R5bGVBdHRycyA9ICF0aGlzLnN0YXRpYyA/IHRoaXMuc2NvcGVkU3R5bGVBdHRycyA6IHt9OwogICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHNjb3BlZFN0eWxlQXR0cnMpLCB0aGlzLmJ2QXR0cnMpLCB7fSwgewogICAgICAgIGlkOiB0aGlzLm1vZGFsT3V0ZXJJZAogICAgICB9KTsKICAgIH0sCiAgICBjb21wdXRlZE1vZGFsQXR0cnM6IGZ1bmN0aW9uIGNvbXB1dGVkTW9kYWxBdHRycygpIHsKICAgICAgdmFyIGlzVmlzaWJsZSA9IHRoaXMuaXNWaXNpYmxlLAogICAgICAgICAgYXJpYUxhYmVsID0gdGhpcy5hcmlhTGFiZWw7CiAgICAgIHJldHVybiB7CiAgICAgICAgaWQ6IHRoaXMubW9kYWxJZCwKICAgICAgICByb2xlOiAnZGlhbG9nJywKICAgICAgICAnYXJpYS1oaWRkZW4nOiBpc1Zpc2libGUgPyBudWxsIDogJ3RydWUnLAogICAgICAgICdhcmlhLW1vZGFsJzogaXNWaXNpYmxlID8gJ3RydWUnIDogbnVsbCwKICAgICAgICAnYXJpYS1sYWJlbCc6IGFyaWFMYWJlbCwKICAgICAgICAnYXJpYS1sYWJlbGxlZGJ5JzogdGhpcy5oaWRlSGVhZGVyIHx8IGFyaWFMYWJlbCB8fCAvLyBUT0RPOiBSZW5hbWUgc2xvdCB0byBgdGl0bGVgIGFuZCBkZXByZWNhdGUgYG1vZGFsLXRpdGxlYAogICAgICAgICEodGhpcy5oYXNOb3JtYWxpemVkU2xvdChTTE9UX05BTUVfTU9EQUxfVElUTEUpIHx8IHRoaXMudGl0bGVIdG1sIHx8IHRoaXMudGl0bGUpID8gbnVsbCA6IHRoaXMubW9kYWxUaXRsZUlkLAogICAgICAgICdhcmlhLWRlc2NyaWJlZGJ5JzogdGhpcy5tb2RhbEJvZHlJZAogICAgICB9OwogICAgfQogIH0sCiAgd2F0Y2g6IF9kZWZpbmVQcm9wZXJ0eSh7fSwgTU9ERUxfUFJPUF9OQU1FLCBmdW5jdGlvbiAobmV3VmFsdWUsIG9sZFZhbHVlKSB7CiAgICBpZiAobmV3VmFsdWUgIT09IG9sZFZhbHVlKSB7CiAgICAgIHRoaXNbbmV3VmFsdWUgPyAnc2hvdycgOiAnaGlkZSddKCk7CiAgICB9CiAgfSksCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIC8vIERlZmluZSBub24tcmVhY3RpdmUgcHJvcGVydGllcwogICAgdGhpcy4kX29ic2VydmVyID0gbnVsbDsKICAgIHRoaXMuJF9yZXR1cm5Gb2N1cyA9IHRoaXMucmV0dXJuRm9jdXMgfHwgbnVsbDsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICAvLyBTZXQgaW5pdGlhbCB6LWluZGV4IGFzIHF1ZXJpZWQgZnJvbSB0aGUgRE9NCiAgICB0aGlzLnpJbmRleCA9IG1vZGFsTWFuYWdlci5nZXRCYXNlWkluZGV4KCk7IC8vIExpc3RlbiBmb3IgZXZlbnRzIGZyb20gb3RoZXJzIHRvIGVpdGhlciBvcGVuIG9yIGNsb3NlIG91cnNlbHZlcwogICAgLy8gYW5kIGxpc3RlbiB0byBhbGwgbW9kYWxzIHRvIGVuYWJsZS9kaXNhYmxlIGVuZm9yY2UgZm9jdXMKCiAgICB0aGlzLmxpc3Rlbk9uUm9vdChnZXRSb290QWN0aW9uRXZlbnROYW1lKE5BTUVfTU9EQUwsIEVWRU5UX05BTUVfU0hPVyksIHRoaXMuc2hvd0hhbmRsZXIpOwogICAgdGhpcy5saXN0ZW5PblJvb3QoZ2V0Um9vdEFjdGlvbkV2ZW50TmFtZShOQU1FX01PREFMLCBFVkVOVF9OQU1FX0hJREUpLCB0aGlzLmhpZGVIYW5kbGVyKTsKICAgIHRoaXMubGlzdGVuT25Sb290KGdldFJvb3RBY3Rpb25FdmVudE5hbWUoTkFNRV9NT0RBTCwgRVZFTlRfTkFNRV9UT0dHTEUpLCB0aGlzLnRvZ2dsZUhhbmRsZXIpOyAvLyBMaXN0ZW4gZm9yIGBidjptb2RhbDo6c2hvdyBldmVudHNgLCBhbmQgY2xvc2Ugb3Vyc2VsdmVzIGlmIHRoZQogICAgLy8gb3BlbmluZyBtb2RhbCBub3QgdXMKCiAgICB0aGlzLmxpc3Rlbk9uUm9vdChnZXRSb290RXZlbnROYW1lKE5BTUVfTU9EQUwsIEVWRU5UX05BTUVfU0hPVyksIHRoaXMubW9kYWxMaXN0ZW5lcik7IC8vIEluaXRpYWxseSBzaG93IG1vZGFsPwoKICAgIGlmICh0aGlzW01PREVMX1BST1BfTkFNRV0gPT09IHRydWUpIHsKICAgICAgdGhpcy4kbmV4dFRpY2sodGhpcy5zaG93KTsKICAgIH0KICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICAvLyBFbnN1cmUgZXZlcnl0aGluZyBpcyBiYWNrIHRvIG5vcm1hbAogICAgdGhpcy5zZXRPYnNlcnZlcihmYWxzZSk7CgogICAgaWYgKHRoaXMuaXNWaXNpYmxlKSB7CiAgICAgIHRoaXMuaXNWaXNpYmxlID0gZmFsc2U7CiAgICAgIHRoaXMuaXNTaG93ID0gZmFsc2U7CiAgICAgIHRoaXMuaXNUcmFuc2l0aW9uaW5nID0gZmFsc2U7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBzZXRPYnNlcnZlcjogZnVuY3Rpb24gc2V0T2JzZXJ2ZXIoKSB7CiAgICAgIHZhciBvbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogZmFsc2U7CiAgICAgIHRoaXMuJF9vYnNlcnZlciAmJiB0aGlzLiRfb2JzZXJ2ZXIuZGlzY29ubmVjdCgpOwogICAgICB0aGlzLiRfb2JzZXJ2ZXIgPSBudWxsOwoKICAgICAgaWYgKG9uKSB7CiAgICAgICAgdGhpcy4kX29ic2VydmVyID0gb2JzZXJ2ZURvbSh0aGlzLiRyZWZzLmNvbnRlbnQsIHRoaXMuY2hlY2tNb2RhbE92ZXJmbG93LmJpbmQodGhpcyksIE9CU0VSVkVSX0NPTkZJRyk7CiAgICAgIH0KICAgIH0sCiAgICAvLyBQcml2YXRlIG1ldGhvZCB0byB1cGRhdGUgdGhlIHYtbW9kZWwKICAgIHVwZGF0ZU1vZGVsOiBmdW5jdGlvbiB1cGRhdGVNb2RlbCh2YWx1ZSkgewogICAgICBpZiAodmFsdWUgIT09IHRoaXNbTU9ERUxfUFJPUF9OQU1FXSkgewogICAgICAgIHRoaXMuJGVtaXQoTU9ERUxfRVZFTlRfTkFNRSwgdmFsdWUpOwogICAgICB9CiAgICB9LAogICAgLy8gUHJpdmF0ZSBtZXRob2QgdG8gY3JlYXRlIGEgQnZNb2RhbEV2ZW50IG9iamVjdAogICAgYnVpbGRFdmVudDogZnVuY3Rpb24gYnVpbGRFdmVudCh0eXBlKSB7CiAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTsKICAgICAgcmV0dXJuIG5ldyBCdk1vZGFsRXZlbnQodHlwZSwgX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHsKICAgICAgICAvLyBEZWZhdWx0IG9wdGlvbnMKICAgICAgICBjYW5jZWxhYmxlOiBmYWxzZSwKICAgICAgICB0YXJnZXQ6IHRoaXMuJHJlZnMubW9kYWwgfHwgdGhpcy4kZWwgfHwgbnVsbCwKICAgICAgICByZWxhdGVkVGFyZ2V0OiBudWxsLAogICAgICAgIHRyaWdnZXI6IG51bGwKICAgICAgfSwgb3B0aW9ucyksIHt9LCB7CiAgICAgICAgLy8gT3B0aW9ucyB0aGF0IGNhbid0IGJlIG92ZXJyaWRkZW4KICAgICAgICB2dWVUYXJnZXQ6IHRoaXMsCiAgICAgICAgY29tcG9uZW50SWQ6IHRoaXMubW9kYWxJZAogICAgICB9KSk7CiAgICB9LAogICAgLy8gUHVibGljIG1ldGhvZCB0byBzaG93IG1vZGFsCiAgICBzaG93OiBmdW5jdGlvbiBzaG93KCkgewogICAgICBpZiAodGhpcy5pc1Zpc2libGUgfHwgdGhpcy5pc09wZW5pbmcpIHsKICAgICAgICAvLyBJZiBhbHJlYWR5IG9wZW4sIG9yIGluIHRoZSBwcm9jZXNzIG9mIG9wZW5pbmcsIGRvIG5vdGhpbmcKCiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KCgogICAgICBpZiAodGhpcy5pc0Nsb3NpbmcpIHsKICAgICAgICAvLyBJZiB3ZSBhcmUgaW4gdGhlIHByb2Nlc3Mgb2YgY2xvc2luZywgd2FpdCB1bnRpbCBoaWRkZW4gYmVmb3JlIHJlLW9wZW5pbmcKCiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KICAgICAgICB0aGlzLiRvbmNlKEVWRU5UX05BTUVfSElEREVOLCB0aGlzLnNob3cpOwogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCgogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5pc09wZW5pbmcgPSB0cnVlOyAvLyBTZXQgdGhlIGVsZW1lbnQgdG8gcmV0dXJuIGZvY3VzIHRvIHdoZW4gY2xvc2VkCgogICAgICB0aGlzLiRfcmV0dXJuRm9jdXMgPSB0aGlzLiRfcmV0dXJuRm9jdXMgfHwgdGhpcy5nZXRBY3RpdmVFbGVtZW50KCk7CiAgICAgIHZhciBzaG93RXZ0ID0gdGhpcy5idWlsZEV2ZW50KEVWRU5UX05BTUVfU0hPVywgewogICAgICAgIGNhbmNlbGFibGU6IHRydWUKICAgICAgfSk7CiAgICAgIHRoaXMuZW1pdEV2ZW50KHNob3dFdnQpOyAvLyBEb24ndCBzaG93IGlmIGNhbmNlbGVkCgogICAgICBpZiAoc2hvd0V2dC5kZWZhdWx0UHJldmVudGVkIHx8IHRoaXMuaXNWaXNpYmxlKSB7CiAgICAgICAgdGhpcy5pc09wZW5pbmcgPSBmYWxzZTsgLy8gRW5zdXJlIHRoZSB2LW1vZGVsIHJlZmxlY3RzIHRoZSBjdXJyZW50IHN0YXRlCgogICAgICAgIHRoaXMudXBkYXRlTW9kZWwoZmFsc2UpOwogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBTaG93IHRoZSBtb2RhbAoKCiAgICAgIHRoaXMuZG9TaG93KCk7CiAgICB9LAogICAgLy8gUHVibGljIG1ldGhvZCB0byBoaWRlIG1vZGFsCiAgICBoaWRlOiBmdW5jdGlvbiBoaWRlKCkgewogICAgICB2YXIgdHJpZ2dlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogJyc7CgogICAgICBpZiAoIXRoaXMuaXNWaXNpYmxlIHx8IHRoaXMuaXNDbG9zaW5nKSB7CiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuaXNDbG9zaW5nID0gdHJ1ZTsKICAgICAgdmFyIGhpZGVFdnQgPSB0aGlzLmJ1aWxkRXZlbnQoRVZFTlRfTkFNRV9ISURFLCB7CiAgICAgICAgY2FuY2VsYWJsZTogdHJpZ2dlciAhPT0gVFJJR0dFUl9GT1JDRSwKICAgICAgICB0cmlnZ2VyOiB0cmlnZ2VyIHx8IG51bGwKICAgICAgfSk7IC8vIFdlIGVtaXQgc3BlY2lmaWMgZXZlbnQgZm9yIG9uZSBvZiB0aGUgdGhyZWUgYnVpbHQtaW4gYnV0dG9ucwoKICAgICAgaWYgKHRyaWdnZXIgPT09IEJVVFRPTl9PSykgewogICAgICAgIHRoaXMuJGVtaXQoRVZFTlRfTkFNRV9PSywgaGlkZUV2dCk7CiAgICAgIH0gZWxzZSBpZiAodHJpZ2dlciA9PT0gQlVUVE9OX0NBTkNFTCkgewogICAgICAgIHRoaXMuJGVtaXQoRVZFTlRfTkFNRV9DQU5DRUwsIGhpZGVFdnQpOwogICAgICB9IGVsc2UgaWYgKHRyaWdnZXIgPT09IEJVVFRPTl9DTE9TRSkgewogICAgICAgIHRoaXMuJGVtaXQoRVZFTlRfTkFNRV9DTE9TRSwgaGlkZUV2dCk7CiAgICAgIH0KCiAgICAgIHRoaXMuZW1pdEV2ZW50KGhpZGVFdnQpOyAvLyBIaWRlIGlmIG5vdCBjYW5jZWxlZAoKICAgICAgaWYgKGhpZGVFdnQuZGVmYXVsdFByZXZlbnRlZCB8fCAhdGhpcy5pc1Zpc2libGUpIHsKICAgICAgICB0aGlzLmlzQ2xvc2luZyA9IGZhbHNlOyAvLyBFbnN1cmUgdi1tb2RlbCByZWZsZWN0cyBjdXJyZW50IHN0YXRlCgogICAgICAgIHRoaXMudXBkYXRlTW9kZWwodHJ1ZSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9IC8vIFN0b3Agb2JzZXJ2aW5nIGZvciBjb250ZW50IGNoYW5nZXMKCgogICAgICB0aGlzLnNldE9ic2VydmVyKGZhbHNlKTsgLy8gVHJpZ2dlciB0aGUgaGlkZSB0cmFuc2l0aW9uCgogICAgICB0aGlzLmlzVmlzaWJsZSA9IGZhbHNlOyAvLyBVcGRhdGUgdGhlIHYtbW9kZWwKCiAgICAgIHRoaXMudXBkYXRlTW9kZWwoZmFsc2UpOwogICAgfSwKICAgIC8vIFB1YmxpYyBtZXRob2QgdG8gdG9nZ2xlIG1vZGFsIHZpc2liaWxpdHkKICAgIHRvZ2dsZTogZnVuY3Rpb24gdG9nZ2xlKHRyaWdnZXJFbCkgewogICAgICBpZiAodHJpZ2dlckVsKSB7CiAgICAgICAgdGhpcy4kX3JldHVybkZvY3VzID0gdHJpZ2dlckVsOwogICAgICB9CgogICAgICBpZiAodGhpcy5pc1Zpc2libGUpIHsKICAgICAgICB0aGlzLmhpZGUoVFJJR0dFUl9UT0dHTEUpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2hvdygpOwogICAgICB9CiAgICB9LAogICAgLy8gUHJpdmF0ZSBtZXRob2QgdG8gZ2V0IHRoZSBjdXJyZW50IGRvY3VtZW50IGFjdGl2ZSBlbGVtZW50CiAgICBnZXRBY3RpdmVFbGVtZW50OiBmdW5jdGlvbiBnZXRBY3RpdmVFbGVtZW50KCkgewogICAgICAvLyBSZXR1cm5pbmcgZm9jdXMgdG8gYGRvY3VtZW50LmJvZHlgIG1heSBjYXVzZSB1bndhbnRlZCBzY3JvbGxzLAogICAgICAvLyBzbyB3ZSBleGNsdWRlIHNldHRpbmcgZm9jdXMgb24gYm9keQogICAgICB2YXIgYWN0aXZlRWxlbWVudCA9IF9nZXRBY3RpdmVFbGVtZW50KElTX0JST1dTRVIgPyBbZG9jdW1lbnQuYm9keV0gOiBbXSk7IC8vIFByZXNldCB0aGUgZmFsbGJhY2sgcmV0dXJuIGZvY3VzIHZhbHVlIGlmIGl0IGlzIG5vdCBzZXQKICAgICAgLy8gYGRvY3VtZW50LmFjdGl2ZUVsZW1lbnRgIHNob3VsZCBiZSB0aGUgdHJpZ2dlciBlbGVtZW50IHRoYXQgd2FzIGNsaWNrZWQgb3IKICAgICAgLy8gaW4gdGhlIGNhc2Ugb2YgdXNpbmcgdGhlIHYtbW9kZWwsIHdoaWNoIGV2ZXIgZWxlbWVudCBoYXMgY3VycmVudCBmb2N1cwogICAgICAvLyBXaWxsIGJlIG92ZXJyaWRkZW4gYnkgc29tZSBjb21tYW5kcyBzdWNoIGFzIHRvZ2dsZSwgZXRjLgogICAgICAvLyBOb3RlOiBPbiBJRSAxMSwgYGRvY3VtZW50LmFjdGl2ZUVsZW1lbnRgIG1heSBiZSBgbnVsbGAKICAgICAgLy8gU28gd2UgdGVzdCBpdCBmb3IgdHJ1dGhpbmVzcyBmaXJzdAogICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYm9vdHN0cmFwLXZ1ZS9ib290c3RyYXAtdnVlL2lzc3Vlcy8zMjA2CgoKICAgICAgcmV0dXJuIGFjdGl2ZUVsZW1lbnQgJiYgYWN0aXZlRWxlbWVudC5mb2N1cyA/IGFjdGl2ZUVsZW1lbnQgOiBudWxsOwogICAgfSwKICAgIC8vIFByaXZhdGUgbWV0aG9kIHRvIGZpbmlzaCBzaG93aW5nIG1vZGFsCiAgICBkb1Nob3c6IGZ1bmN0aW9uIGRvU2hvdygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQ6IGNvbW1lbnRpbmcgb3V0IGZvciBub3cgdW50aWwgd2UgY2FuIHRlc3Qgc3RhY2tpbmcgKi8KCgogICAgICBpZiAobW9kYWxNYW5hZ2VyLm1vZGFsc0FyZU9wZW4gJiYgdGhpcy5ub1N0YWNraW5nKSB7CiAgICAgICAgLy8gSWYgYW5vdGhlciBtb2RhbChzKSBpcyBhbHJlYWR5IG9wZW4sIHdhaXQgZm9yIGl0KHRoZW0pIHRvIGNsb3NlCiAgICAgICAgdGhpcy5saXN0ZW5PblJvb3RPbmNlKGdldFJvb3RFdmVudE5hbWUoTkFNRV9NT0RBTCwgRVZFTlRfTkFNRV9ISURERU4pLCB0aGlzLmRvU2hvdyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBtb2RhbE1hbmFnZXIucmVnaXN0ZXJNb2RhbCh0aGlzKTsgLy8gUGxhY2UgbW9kYWwgaW4gRE9NCgogICAgICB0aGlzLmlzSGlkZGVuID0gZmFsc2U7CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyBXZSBkbyB0aGlzIGluIGAkbmV4dFRpY2soKWAgdG8gZW5zdXJlIHRoZSBtb2RhbCBpcyBpbiBET00gZmlyc3QKICAgICAgICAvLyBiZWZvcmUgd2Ugc2hvdyBpdAogICAgICAgIF90aGlzLmlzVmlzaWJsZSA9IHRydWU7CiAgICAgICAgX3RoaXMuaXNPcGVuaW5nID0gZmFsc2U7IC8vIFVwZGF0ZSB0aGUgdi1tb2RlbAoKICAgICAgICBfdGhpcy51cGRhdGVNb2RlbCh0cnVlKTsKCiAgICAgICAgX3RoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIE9ic2VydmUgY2hhbmdlcyBpbiBtb2RhbCBjb250ZW50IGFuZCBhZGp1c3QgaWYgbmVjZXNzYXJ5CiAgICAgICAgICAvLyBJbiBhIGAkbmV4dFRpY2soKWAgaW4gY2FzZSBtb2RhbCBjb250ZW50IGlzIGxhenkKICAgICAgICAgIF90aGlzLnNldE9ic2VydmVyKHRydWUpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvLyBUcmFuc2l0aW9uIGhhbmRsZXJzCiAgICBvbkJlZm9yZUVudGVyOiBmdW5jdGlvbiBvbkJlZm9yZUVudGVyKCkgewogICAgICB0aGlzLmlzVHJhbnNpdGlvbmluZyA9IHRydWU7CiAgICAgIHRoaXMuc2V0UmVzaXplRXZlbnQodHJ1ZSk7CiAgICB9LAogICAgb25FbnRlcjogZnVuY3Rpb24gb25FbnRlcigpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLmlzQmxvY2sgPSB0cnVlOyAvLyBXZSBhZGQgdGhlIGBzaG93YCBjbGFzcyAxIGZyYW1lIGxhdGVyCiAgICAgIC8vIGByZXF1ZXN0QUYoKWAgcnVucyB0aGUgY2FsbGJhY2sgYmVmb3JlIHRoZSBuZXh0IHJlcGFpbnQsIHNvIHdlIG5lZWQKICAgICAgLy8gdHdvIGNhbGxzIHRvIGd1YXJhbnRlZSB0aGUgbmV4dCBmcmFtZSBoYXMgYmVlbiByZW5kZXJlZAoKICAgICAgcmVxdWVzdEFGKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXF1ZXN0QUYoZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMyLmlzU2hvdyA9IHRydWU7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIG9uQWZ0ZXJFbnRlcjogZnVuY3Rpb24gb25BZnRlckVudGVyKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHRoaXMuY2hlY2tNb2RhbE92ZXJmbG93KCk7CiAgICAgIHRoaXMuaXNUcmFuc2l0aW9uaW5nID0gZmFsc2U7IC8vIFdlIHVzZSBgcmVxdWVzdEFGKClgIHRvIGFsbG93IHRyYW5zaXRpb24gaG9va3MgdG8gY29tcGxldGUKICAgICAgLy8gYmVmb3JlIHBhc3NpbmcgY29udHJvbCBvdmVyIHRvIHRoZSBvdGhlciBoYW5kbGVycwogICAgICAvLyBUaGlzIHdpbGwgYWxsb3cgdXNlcnMgdG8gbm90IGhhdmUgdG8gdXNlIGAkbmV4dFRpY2soKWAgb3IgYHJlcXVlc3RBRigpYAogICAgICAvLyB3aGVuIHRyeWluZyB0byBwcmUtZm9jdXMgYW4gZWxlbWVudAoKICAgICAgcmVxdWVzdEFGKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczMuZW1pdEV2ZW50KF90aGlzMy5idWlsZEV2ZW50KEVWRU5UX05BTUVfU0hPV04pKTsKCiAgICAgICAgX3RoaXMzLnNldEVuZm9yY2VGb2N1cyh0cnVlKTsKCiAgICAgICAgX3RoaXMzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyBEZWxheWVkIGluIGEgYCRuZXh0VGljaygpYCB0byBhbGxvdyB1c2VycyB0aW1lIHRvIHByZS1mb2N1cwogICAgICAgICAgLy8gYW4gZWxlbWVudCBpZiB0aGUgd2lzaAogICAgICAgICAgX3RoaXMzLmZvY3VzRmlyc3QoKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgb25CZWZvcmVMZWF2ZTogZnVuY3Rpb24gb25CZWZvcmVMZWF2ZSgpIHsKICAgICAgdGhpcy5pc1RyYW5zaXRpb25pbmcgPSB0cnVlOwogICAgICB0aGlzLnNldFJlc2l6ZUV2ZW50KGZhbHNlKTsKICAgICAgdGhpcy5zZXRFbmZvcmNlRm9jdXMoZmFsc2UpOwogICAgfSwKICAgIG9uTGVhdmU6IGZ1bmN0aW9uIG9uTGVhdmUoKSB7CiAgICAgIC8vIFJlbW92ZSB0aGUgJ3Nob3cnIGNsYXNzCiAgICAgIHRoaXMuaXNTaG93ID0gZmFsc2U7CiAgICB9LAogICAgb25BZnRlckxlYXZlOiBmdW5jdGlvbiBvbkFmdGVyTGVhdmUoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdGhpcy5pc0Jsb2NrID0gZmFsc2U7CiAgICAgIHRoaXMuaXNUcmFuc2l0aW9uaW5nID0gZmFsc2U7CiAgICAgIHRoaXMuaXNNb2RhbE92ZXJmbG93aW5nID0gZmFsc2U7CiAgICAgIHRoaXMuaXNIaWRkZW4gPSB0cnVlOwogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM0LmlzQ2xvc2luZyA9IGZhbHNlOwogICAgICAgIG1vZGFsTWFuYWdlci51bnJlZ2lzdGVyTW9kYWwoX3RoaXM0KTsKCiAgICAgICAgX3RoaXM0LnJldHVybkZvY3VzVG8oKTsgLy8gVE9ETzogTmVlZCB0byBmaW5kIGEgd2F5IHRvIHBhc3MgdGhlIGB0cmlnZ2VyYCBwcm9wZXJ0eQogICAgICAgIC8vICAgICAgIHRvIHRoZSBgaGlkZGVuYCBldmVudCwgbm90IGp1c3Qgb25seSB0aGUgYGhpZGVgIGV2ZW50CgoKICAgICAgICBfdGhpczQuZW1pdEV2ZW50KF90aGlzNC5idWlsZEV2ZW50KEVWRU5UX05BTUVfSElEREVOKSk7CiAgICAgIH0pOwogICAgfSwKICAgIGVtaXRFdmVudDogZnVuY3Rpb24gZW1pdEV2ZW50KGJ2RXZlbnQpIHsKICAgICAgdmFyIHR5cGUgPSBidkV2ZW50LnR5cGU7IC8vIFdlIGVtaXQgb24gYCRyb290YCBmaXJzdCBpbiBjYXNlIGEgZ2xvYmFsIGxpc3RlbmVyIHdhbnRzIHRvIGNhbmNlbAogICAgICAvLyB0aGUgZXZlbnQgZmlyc3QgYmVmb3JlIHRoZSBpbnN0YW5jZSBlbWl0cyBpdHMgZXZlbnQKCiAgICAgIHRoaXMuZW1pdE9uUm9vdChnZXRSb290RXZlbnROYW1lKE5BTUVfTU9EQUwsIHR5cGUpLCBidkV2ZW50LCBidkV2ZW50LmNvbXBvbmVudElkKTsKICAgICAgdGhpcy4kZW1pdCh0eXBlLCBidkV2ZW50KTsKICAgIH0sCiAgICAvLyBVSSBldmVudCBoYW5kbGVycwogICAgb25EaWFsb2dNb3VzZWRvd246IGZ1bmN0aW9uIG9uRGlhbG9nTW91c2Vkb3duKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsgLy8gV2F0Y2ggdG8gc2VlIGlmIHRoZSBtYXRjaGluZyBtb3VzZXVwIGV2ZW50IG9jY3VycyBvdXRzaWRlIHRoZSBkaWFsb2cKICAgICAgLy8gQW5kIGlmIGl0IGRvZXMsIGNhbmNlbCB0aGUgY2xpY2tPdXQgaGFuZGxlcgoKCiAgICAgIHZhciBtb2RhbCA9IHRoaXMuJHJlZnMubW9kYWw7CgogICAgICB2YXIgb25jZU1vZGFsTW91c2V1cCA9IGZ1bmN0aW9uIG9uY2VNb2RhbE1vdXNldXAoZXZlbnQpIHsKICAgICAgICBldmVudE9mZihtb2RhbCwgJ21vdXNldXAnLCBvbmNlTW9kYWxNb3VzZXVwLCBFVkVOVF9PUFRJT05TX05PX0NBUFRVUkUpOwoKICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSBtb2RhbCkgewogICAgICAgICAgX3RoaXM1Lmlnbm9yZUJhY2tkcm9wQ2xpY2sgPSB0cnVlOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIGV2ZW50T24obW9kYWwsICdtb3VzZXVwJywgb25jZU1vZGFsTW91c2V1cCwgRVZFTlRfT1BUSU9OU19OT19DQVBUVVJFKTsKICAgIH0sCiAgICBvbkNsaWNrT3V0OiBmdW5jdGlvbiBvbkNsaWNrT3V0KGV2ZW50KSB7CiAgICAgIGlmICh0aGlzLmlnbm9yZUJhY2tkcm9wQ2xpY2spIHsKICAgICAgICAvLyBDbGljayB3YXMgaW5pdGlhdGVkIGluc2lkZSB0aGUgbW9kYWwgY29udGVudCwgYnV0IGZpbmlzaGVkIG91dHNpZGUuCiAgICAgICAgLy8gU2V0IGJ5IHRoZSBhYm92ZSBvbkRpYWxvZ01vdXNlZG93biBoYW5kbGVyCiAgICAgICAgdGhpcy5pZ25vcmVCYWNrZHJvcENsaWNrID0gZmFsc2U7CiAgICAgICAgcmV0dXJuOwogICAgICB9IC8vIERvIG5vdGhpbmcgaWYgbm90IHZpc2libGUsIGJhY2tkcm9wIGNsaWNrIGRpc2FibGVkLCBvciBlbGVtZW50CiAgICAgIC8vIHRoYXQgZ2VuZXJhdGVkIGNsaWNrIGV2ZW50IGlzIG5vIGxvbmdlciBpbiBkb2N1bWVudCBib2R5CgoKICAgICAgaWYgKCF0aGlzLmlzVmlzaWJsZSB8fCB0aGlzLm5vQ2xvc2VPbkJhY2tkcm9wIHx8ICFjb250YWlucyhkb2N1bWVudC5ib2R5LCBldmVudC50YXJnZXQpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9IC8vIElmIGJhY2tkcm9wIGNsaWNrZWQsIGhpZGUgbW9kYWwKCgogICAgICBpZiAoIWNvbnRhaW5zKHRoaXMuJHJlZnMuY29udGVudCwgZXZlbnQudGFyZ2V0KSkgewogICAgICAgIHRoaXMuaGlkZShUUklHR0VSX0JBQ0tEUk9QKTsKICAgICAgfQogICAgfSwKICAgIG9uT2s6IGZ1bmN0aW9uIG9uT2soKSB7CiAgICAgIHRoaXMuaGlkZShCVVRUT05fT0spOwogICAgfSwKICAgIG9uQ2FuY2VsOiBmdW5jdGlvbiBvbkNhbmNlbCgpIHsKICAgICAgdGhpcy5oaWRlKEJVVFRPTl9DQU5DRUwpOwogICAgfSwKICAgIG9uQ2xvc2U6IGZ1bmN0aW9uIG9uQ2xvc2UoKSB7CiAgICAgIHRoaXMuaGlkZShCVVRUT05fQ0xPU0UpOwogICAgfSwKICAgIG9uRXNjOiBmdW5jdGlvbiBvbkVzYyhldmVudCkgewogICAgICAvLyBJZiBFU0MgcHJlc3NlZCwgaGlkZSBtb2RhbAogICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gQ09ERV9FU0MgJiYgdGhpcy5pc1Zpc2libGUgJiYgIXRoaXMubm9DbG9zZU9uRXNjKSB7CiAgICAgICAgdGhpcy5oaWRlKFRSSUdHRVJfRVNDKTsKICAgICAgfQogICAgfSwKICAgIC8vIERvY3VtZW50IGZvY3VzaW4gbGlzdGVuZXIKICAgIGZvY3VzSGFuZGxlcjogZnVuY3Rpb24gZm9jdXNIYW5kbGVyKGV2ZW50KSB7CiAgICAgIC8vIElmIGZvY3VzIGxlYXZlcyBtb2RhbCBjb250ZW50LCBicmluZyBpdCBiYWNrCiAgICAgIHZhciBjb250ZW50ID0gdGhpcy4kcmVmcy5jb250ZW50OwogICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0OwoKICAgICAgaWYgKHRoaXMubm9FbmZvcmNlRm9jdXMgfHwgIXRoaXMuaXNUb3AgfHwgIXRoaXMuaXNWaXNpYmxlIHx8ICFjb250ZW50IHx8IGRvY3VtZW50ID09PSB0YXJnZXQgfHwgY29udGFpbnMoY29udGVudCwgdGFyZ2V0KSB8fCB0aGlzLmNvbXB1dGVJZ25vcmVFbmZvcmNlRm9jdXNTZWxlY3RvciAmJiBjbG9zZXN0KHRoaXMuY29tcHV0ZUlnbm9yZUVuZm9yY2VGb2N1c1NlbGVjdG9yLCB0YXJnZXQsIHRydWUpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgdGFiYWJsZXMgPSBnZXRUYWJhYmxlcyh0aGlzLiRyZWZzLmNvbnRlbnQpOwogICAgICB2YXIgYm90dG9tVHJhcCA9IHRoaXMuJHJlZnNbJ2JvdHRvbS10cmFwJ107CiAgICAgIHZhciB0b3BUcmFwID0gdGhpcy4kcmVmc1sndG9wLXRyYXAnXTsKCiAgICAgIGlmIChib3R0b21UcmFwICYmIHRhcmdldCA9PT0gYm90dG9tVHJhcCkgewogICAgICAgIC8vIElmIHVzZXIgcHJlc3NlZCBUQUIgb3V0IG9mIG1vZGFsIGludG8gb3VyIGJvdHRvbSB0cmFiIHRyYXAgZWxlbWVudAogICAgICAgIC8vIEZpbmQgdGhlIGZpcnN0IHRhYmFibGUgZWxlbWVudCBpbiB0aGUgbW9kYWwgY29udGVudCBhbmQgZm9jdXMgaXQKICAgICAgICBpZiAoYXR0ZW1wdEZvY3VzKHRhYmFibGVzWzBdKSkgewogICAgICAgICAgLy8gRm9jdXMgd2FzIHN1Y2Nlc3NmdWwKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodG9wVHJhcCAmJiB0YXJnZXQgPT09IHRvcFRyYXApIHsKICAgICAgICAvLyBJZiB1c2VyIHByZXNzZWQgQ1RSTC1UQUIgb3V0IG9mIG1vZGFsIGFuZCBpbnRvIG91ciB0b3AgdGFiIHRyYXAgZWxlbWVudAogICAgICAgIC8vIEZpbmQgdGhlIGxhc3QgdGFiYWJsZSBlbGVtZW50IGluIHRoZSBtb2RhbCBjb250ZW50IGFuZCBmb2N1cyBpdAogICAgICAgIGlmIChhdHRlbXB0Rm9jdXModGFiYWJsZXNbdGFiYWJsZXMubGVuZ3RoIC0gMV0pKSB7CiAgICAgICAgICAvLyBGb2N1cyB3YXMgc3VjY2Vzc2Z1bAogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfSAvLyBPdGhlcndpc2UgZm9jdXMgdGhlIG1vZGFsIGNvbnRlbnQgY29udGFpbmVyCgoKICAgICAgYXR0ZW1wdEZvY3VzKGNvbnRlbnQsIHsKICAgICAgICBwcmV2ZW50U2Nyb2xsOiB0cnVlCiAgICAgIH0pOwogICAgfSwKICAgIC8vIFR1cm4gb24vb2ZmIGZvY3VzaW4gbGlzdGVuZXIKICAgIHNldEVuZm9yY2VGb2N1czogZnVuY3Rpb24gc2V0RW5mb3JjZUZvY3VzKG9uKSB7CiAgICAgIHRoaXMubGlzdGVuRG9jdW1lbnQob24sICdmb2N1c2luJywgdGhpcy5mb2N1c0hhbmRsZXIpOwogICAgfSwKICAgIC8vIFJlc2l6ZSBsaXN0ZW5lcgogICAgc2V0UmVzaXplRXZlbnQ6IGZ1bmN0aW9uIHNldFJlc2l6ZUV2ZW50KG9uKSB7CiAgICAgIHRoaXMubGlzdGVuV2luZG93KG9uLCAncmVzaXplJywgdGhpcy5jaGVja01vZGFsT3ZlcmZsb3cpOwogICAgICB0aGlzLmxpc3RlbldpbmRvdyhvbiwgJ29yaWVudGF0aW9uY2hhbmdlJywgdGhpcy5jaGVja01vZGFsT3ZlcmZsb3cpOwogICAgfSwKICAgIC8vIFJvb3QgbGlzdGVuZXIgaGFuZGxlcnMKICAgIHNob3dIYW5kbGVyOiBmdW5jdGlvbiBzaG93SGFuZGxlcihpZCwgdHJpZ2dlckVsKSB7CiAgICAgIGlmIChpZCA9PT0gdGhpcy5tb2RhbElkKSB7CiAgICAgICAgdGhpcy4kX3JldHVybkZvY3VzID0gdHJpZ2dlckVsIHx8IHRoaXMuZ2V0QWN0aXZlRWxlbWVudCgpOwogICAgICAgIHRoaXMuc2hvdygpOwogICAgICB9CiAgICB9LAogICAgaGlkZUhhbmRsZXI6IGZ1bmN0aW9uIGhpZGVIYW5kbGVyKGlkKSB7CiAgICAgIGlmIChpZCA9PT0gdGhpcy5tb2RhbElkKSB7CiAgICAgICAgdGhpcy5oaWRlKCdldmVudCcpOwogICAgICB9CiAgICB9LAogICAgdG9nZ2xlSGFuZGxlcjogZnVuY3Rpb24gdG9nZ2xlSGFuZGxlcihpZCwgdHJpZ2dlckVsKSB7CiAgICAgIGlmIChpZCA9PT0gdGhpcy5tb2RhbElkKSB7CiAgICAgICAgdGhpcy50b2dnbGUodHJpZ2dlckVsKTsKICAgICAgfQogICAgfSwKICAgIG1vZGFsTGlzdGVuZXI6IGZ1bmN0aW9uIG1vZGFsTGlzdGVuZXIoYnZFdmVudCkgewogICAgICAvLyBJZiBhbm90aGVyIG1vZGFsIG9wZW5zLCBjbG9zZSB0aGlzIG9uZSBpZiBzdGFja2luZyBub3QgcGVybWl0dGVkCiAgICAgIGlmICh0aGlzLm5vU3RhY2tpbmcgJiYgYnZFdmVudC52dWVUYXJnZXQgIT09IHRoaXMpIHsKICAgICAgICB0aGlzLmhpZGUoKTsKICAgICAgfQogICAgfSwKICAgIC8vIEZvY3VzIGNvbnRyb2wgaGFuZGxlcnMKICAgIGZvY3VzRmlyc3Q6IGZ1bmN0aW9uIGZvY3VzRmlyc3QoKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOyAvLyBEb24ndCB0cnkgYW5kIGZvY3VzIGlmIHdlIGFyZSBTU1IKCgogICAgICBpZiAoSVNfQlJPV1NFUikgewogICAgICAgIHJlcXVlc3RBRihmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgbW9kYWwgPSBfdGhpczYuJHJlZnMubW9kYWw7CiAgICAgICAgICB2YXIgY29udGVudCA9IF90aGlzNi4kcmVmcy5jb250ZW50OwoKICAgICAgICAgIHZhciBhY3RpdmVFbGVtZW50ID0gX3RoaXM2LmdldEFjdGl2ZUVsZW1lbnQoKTsgLy8gSWYgdGhlIG1vZGFsIGNvbnRhaW5zIHRoZSBhY3RpdmVFbGVtZW50LCB3ZSBkb24ndCBkbyBhbnl0aGluZwoKCiAgICAgICAgICBpZiAobW9kYWwgJiYgY29udGVudCAmJiAhKGFjdGl2ZUVsZW1lbnQgJiYgY29udGFpbnMoY29udGVudCwgYWN0aXZlRWxlbWVudCkpKSB7CiAgICAgICAgICAgIHZhciBvayA9IF90aGlzNi4kcmVmc1snb2stYnV0dG9uJ107CiAgICAgICAgICAgIHZhciBjYW5jZWwgPSBfdGhpczYuJHJlZnNbJ2NhbmNlbC1idXR0b24nXTsKICAgICAgICAgICAgdmFyIGNsb3NlID0gX3RoaXM2LiRyZWZzWydjbG9zZS1idXR0b24nXTsgLy8gRm9jdXMgdGhlIGFwcHJvcHJpYXRlIGJ1dHRvbiBvciBtb2RhbCBjb250ZW50IHdyYXBwZXIKCiAgICAgICAgICAgIHZhciBhdXRvRm9jdXMgPSBfdGhpczYuYXV0b0ZvY3VzQnV0dG9uOwogICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwoKICAgICAgICAgICAgdmFyIGVsID0gYXV0b0ZvY3VzID09PSBCVVRUT05fT0sgJiYgb2sgPyBvay4kZWwgfHwgb2sgOiBhdXRvRm9jdXMgPT09IEJVVFRPTl9DQU5DRUwgJiYgY2FuY2VsID8gY2FuY2VsLiRlbCB8fCBjYW5jZWwgOiBhdXRvRm9jdXMgPT09IEJVVFRPTl9DTE9TRSAmJiBjbG9zZSA/IGNsb3NlLiRlbCB8fCBjbG9zZSA6IGNvbnRlbnQ7IC8vIEZvY3VzIHRoZSBlbGVtZW50CgogICAgICAgICAgICBhdHRlbXB0Rm9jdXMoZWwpOwoKICAgICAgICAgICAgaWYgKGVsID09PSBjb250ZW50KSB7CiAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRvcCBvZiBtb2RhbCBpcyBzaG93aW5nIChpZiBsb25nZXIgdGhhbiB0aGUgdmlld3BvcnQpCiAgICAgICAgICAgICAgX3RoaXM2LiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBtb2RhbC5zY3JvbGxUb3AgPSAwOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICByZXR1cm5Gb2N1c1RvOiBmdW5jdGlvbiByZXR1cm5Gb2N1c1RvKCkgewogICAgICAvLyBQcmVmZXIgYHJldHVybkZvY3VzYCBwcm9wIG92ZXIgZXZlbnQgc3BlY2lmaWVkCiAgICAgIC8vIGByZXR1cm5fZm9jdXNgIHZhbHVlCiAgICAgIHZhciBlbCA9IHRoaXMucmV0dXJuRm9jdXMgfHwgdGhpcy4kX3JldHVybkZvY3VzIHx8IG51bGw7CiAgICAgIHRoaXMuJF9yZXR1cm5Gb2N1cyA9IG51bGw7CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyBJcyBlbCBhIHN0cmluZyBDU1Mgc2VsZWN0b3I/CiAgICAgICAgZWwgPSBpc1N0cmluZyhlbCkgPyBzZWxlY3QoZWwpIDogZWw7CgogICAgICAgIGlmIChlbCkgewogICAgICAgICAgLy8gUG9zc2libHkgY291bGQgYmUgYSBjb21wb25lbnQgcmVmZXJlbmNlCiAgICAgICAgICBlbCA9IGVsLiRlbCB8fCBlbDsKICAgICAgICAgIGF0dGVtcHRGb2N1cyhlbCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBjaGVja01vZGFsT3ZlcmZsb3c6IGZ1bmN0aW9uIGNoZWNrTW9kYWxPdmVyZmxvdygpIHsKICAgICAgaWYgKHRoaXMuaXNWaXNpYmxlKSB7CiAgICAgICAgdmFyIG1vZGFsID0gdGhpcy4kcmVmcy5tb2RhbDsKICAgICAgICB0aGlzLmlzTW9kYWxPdmVyZmxvd2luZyA9IG1vZGFsLnNjcm9sbEhlaWdodCA+IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7CiAgICAgIH0KICAgIH0sCiAgICBtYWtlTW9kYWw6IGZ1bmN0aW9uIG1ha2VNb2RhbChoKSB7CiAgICAgIC8vIE1vZGFsIGhlYWRlcgogICAgICB2YXIgJGhlYWRlciA9IGgoKTsKCiAgICAgIGlmICghdGhpcy5oaWRlSGVhZGVyKSB7CiAgICAgICAgLy8gVE9ETzogUmVuYW1lIHNsb3QgdG8gYGhlYWRlcmAgYW5kIGRlcHJlY2F0ZSBgbW9kYWwtaGVhZGVyYAogICAgICAgIHZhciAkbW9kYWxIZWFkZXIgPSB0aGlzLm5vcm1hbGl6ZVNsb3QoU0xPVF9OQU1FX01PREFMX0hFQURFUiwgdGhpcy5zbG90U2NvcGUpOwoKICAgICAgICBpZiAoISRtb2RhbEhlYWRlcikgewogICAgICAgICAgdmFyICRjbG9zZUJ1dHRvbiA9IGgoKTsKCiAgICAgICAgICBpZiAoIXRoaXMuaGlkZUhlYWRlckNsb3NlKSB7CiAgICAgICAgICAgICRjbG9zZUJ1dHRvbiA9IGgoQkJ1dHRvbkNsb3NlLCB7CiAgICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHRoaXMuaGVhZGVyQ2xvc2VDb250ZW50LAogICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRoaXMuaXNUcmFuc2l0aW9uaW5nLAogICAgICAgICAgICAgICAgYXJpYUxhYmVsOiB0aGlzLmhlYWRlckNsb3NlTGFiZWwsCiAgICAgICAgICAgICAgICB0ZXh0VmFyaWFudDogdGhpcy5oZWFkZXJDbG9zZVZhcmlhbnQgfHwgdGhpcy5oZWFkZXJUZXh0VmFyaWFudAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgIGNsaWNrOiB0aGlzLm9uQ2xvc2UKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHJlZjogJ2Nsb3NlLWJ1dHRvbicKICAgICAgICAgICAgfSwgLy8gVE9ETzogUmVuYW1lIHNsb3QgdG8gYGhlYWRlci1jbG9zZWAgYW5kIGRlcHJlY2F0ZSBgbW9kYWwtaGVhZGVyLWNsb3NlYAogICAgICAgICAgICBbdGhpcy5ub3JtYWxpemVTbG90KFNMT1RfTkFNRV9NT0RBTF9IRUFERVJfQ0xPU0UpXSk7CiAgICAgICAgICB9CgogICAgICAgICAgJG1vZGFsSGVhZGVyID0gW2godGhpcy50aXRsZVRhZywgewogICAgICAgICAgICBzdGF0aWNDbGFzczogJ21vZGFsLXRpdGxlJywKICAgICAgICAgICAgY2xhc3M6IHRoaXMudGl0bGVDbGFzc2VzLAogICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgIGlkOiB0aGlzLm1vZGFsVGl0bGVJZAogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyBUT0RPOiBSZW5hbWUgc2xvdCB0byBgdGl0bGVgIGFuZCBkZXByZWNhdGUgYG1vZGFsLXRpdGxlYAogICAgICAgICAgICBkb21Qcm9wczogdGhpcy5oYXNOb3JtYWxpemVkU2xvdChTTE9UX05BTUVfTU9EQUxfVElUTEUpID8ge30gOiBodG1sT3JUZXh0KHRoaXMudGl0bGVIdG1sLCB0aGlzLnRpdGxlKQogICAgICAgICAgfSwgLy8gVE9ETzogUmVuYW1lIHNsb3QgdG8gYHRpdGxlYCBhbmQgZGVwcmVjYXRlIGBtb2RhbC10aXRsZWAKICAgICAgICAgIHRoaXMubm9ybWFsaXplU2xvdChTTE9UX05BTUVfTU9EQUxfVElUTEUsIHRoaXMuc2xvdFNjb3BlKSksICRjbG9zZUJ1dHRvbl07CiAgICAgICAgfQoKICAgICAgICAkaGVhZGVyID0gaCgnaGVhZGVyJywgewogICAgICAgICAgc3RhdGljQ2xhc3M6ICdtb2RhbC1oZWFkZXInLAogICAgICAgICAgY2xhc3M6IHRoaXMuaGVhZGVyQ2xhc3NlcywKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgIGlkOiB0aGlzLm1vZGFsSGVhZGVySWQKICAgICAgICAgIH0sCiAgICAgICAgICByZWY6ICdoZWFkZXInCiAgICAgICAgfSwgWyRtb2RhbEhlYWRlcl0pOwogICAgICB9IC8vIE1vZGFsIGJvZHkKCgogICAgICB2YXIgJGJvZHkgPSBoKCdkaXYnLCB7CiAgICAgICAgc3RhdGljQ2xhc3M6ICdtb2RhbC1ib2R5JywKICAgICAgICBjbGFzczogdGhpcy5ib2R5Q2xhc3NlcywKICAgICAgICBhdHRyczogewogICAgICAgICAgaWQ6IHRoaXMubW9kYWxCb2R5SWQKICAgICAgICB9LAogICAgICAgIHJlZjogJ2JvZHknCiAgICAgIH0sIHRoaXMubm9ybWFsaXplU2xvdChTTE9UX05BTUVfREVGQVVMVCwgdGhpcy5zbG90U2NvcGUpKTsgLy8gTW9kYWwgZm9vdGVyCgogICAgICB2YXIgJGZvb3RlciA9IGgoKTsKCiAgICAgIGlmICghdGhpcy5oaWRlRm9vdGVyKSB7CiAgICAgICAgLy8gVE9ETzogUmVuYW1lIHNsb3QgdG8gYGZvb3RlcmAgYW5kIGRlcHJlY2F0ZSBgbW9kYWwtZm9vdGVyYAogICAgICAgIHZhciAkbW9kYWxGb290ZXIgPSB0aGlzLm5vcm1hbGl6ZVNsb3QoU0xPVF9OQU1FX01PREFMX0ZPT1RFUiwgdGhpcy5zbG90U2NvcGUpOwoKICAgICAgICBpZiAoISRtb2RhbEZvb3RlcikgewogICAgICAgICAgdmFyICRjYW5jZWxCdXR0b24gPSBoKCk7CgogICAgICAgICAgaWYgKCF0aGlzLm9rT25seSkgewogICAgICAgICAgICAkY2FuY2VsQnV0dG9uID0gaChCQnV0dG9uLCB7CiAgICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICAgIHZhcmlhbnQ6IHRoaXMuY2FuY2VsVmFyaWFudCwKICAgICAgICAgICAgICAgIHNpemU6IHRoaXMuYnV0dG9uU2l6ZSwKICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0aGlzLmNhbmNlbERpc2FibGVkIHx8IHRoaXMuYnVzeSB8fCB0aGlzLmlzVHJhbnNpdGlvbmluZwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgLy8gVE9ETzogUmVuYW1lIHNsb3QgdG8gYGNhbmNlbC1idXR0b25gIGFuZCBkZXByZWNhdGUgYG1vZGFsLWNhbmNlbGAKICAgICAgICAgICAgICBkb21Qcm9wczogdGhpcy5oYXNOb3JtYWxpemVkU2xvdChTTE9UX05BTUVfTU9EQUxfQ0FOQ0VMKSA/IHt9IDogaHRtbE9yVGV4dCh0aGlzLmNhbmNlbFRpdGxlSHRtbCwgdGhpcy5jYW5jZWxUaXRsZSksCiAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgIGNsaWNrOiB0aGlzLm9uQ2FuY2VsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICByZWY6ICdjYW5jZWwtYnV0dG9uJwogICAgICAgICAgICB9LCAvLyBUT0RPOiBSZW5hbWUgc2xvdCB0byBgY2FuY2VsLWJ1dHRvbmAgYW5kIGRlcHJlY2F0ZSBgbW9kYWwtY2FuY2VsYAogICAgICAgICAgICB0aGlzLm5vcm1hbGl6ZVNsb3QoU0xPVF9OQU1FX01PREFMX0NBTkNFTCkpOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciAkb2tCdXR0b24gPSBoKEJCdXR0b24sIHsKICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICB2YXJpYW50OiB0aGlzLm9rVmFyaWFudCwKICAgICAgICAgICAgICBzaXplOiB0aGlzLmJ1dHRvblNpemUsCiAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRoaXMub2tEaXNhYmxlZCB8fCB0aGlzLmJ1c3kgfHwgdGhpcy5pc1RyYW5zaXRpb25pbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8gVE9ETzogUmVuYW1lIHNsb3QgdG8gYG9rLWJ1dHRvbmAgYW5kIGRlcHJlY2F0ZSBgbW9kYWwtb2tgCiAgICAgICAgICAgIGRvbVByb3BzOiB0aGlzLmhhc05vcm1hbGl6ZWRTbG90KFNMT1RfTkFNRV9NT0RBTF9PSykgPyB7fSA6IGh0bWxPclRleHQodGhpcy5va1RpdGxlSHRtbCwgdGhpcy5va1RpdGxlKSwKICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICBjbGljazogdGhpcy5vbk9rCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJlZjogJ29rLWJ1dHRvbicKICAgICAgICAgIH0sIC8vIFRPRE86IFJlbmFtZSBzbG90IHRvIGBvay1idXR0b25gIGFuZCBkZXByZWNhdGUgYG1vZGFsLW9rYAogICAgICAgICAgdGhpcy5ub3JtYWxpemVTbG90KFNMT1RfTkFNRV9NT0RBTF9PSykpOwogICAgICAgICAgJG1vZGFsRm9vdGVyID0gWyRjYW5jZWxCdXR0b24sICRva0J1dHRvbl07CiAgICAgICAgfQoKICAgICAgICAkZm9vdGVyID0gaCgnZm9vdGVyJywgewogICAgICAgICAgc3RhdGljQ2xhc3M6ICdtb2RhbC1mb290ZXInLAogICAgICAgICAgY2xhc3M6IHRoaXMuZm9vdGVyQ2xhc3NlcywKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgIGlkOiB0aGlzLm1vZGFsRm9vdGVySWQKICAgICAgICAgIH0sCiAgICAgICAgICByZWY6ICdmb290ZXInCiAgICAgICAgfSwgWyRtb2RhbEZvb3Rlcl0pOwogICAgICB9IC8vIEFzc2VtYmxlIG1vZGFsIGNvbnRlbnQKCgogICAgICB2YXIgJG1vZGFsQ29udGVudCA9IGgoJ2RpdicsIHsKICAgICAgICBzdGF0aWNDbGFzczogJ21vZGFsLWNvbnRlbnQnLAogICAgICAgIGNsYXNzOiB0aGlzLmNvbnRlbnRDbGFzcywKICAgICAgICBhdHRyczogewogICAgICAgICAgaWQ6IHRoaXMubW9kYWxDb250ZW50SWQsCiAgICAgICAgICB0YWJpbmRleDogJy0xJwogICAgICAgIH0sCiAgICAgICAgcmVmOiAnY29udGVudCcKICAgICAgfSwgWyRoZWFkZXIsICRib2R5LCAkZm9vdGVyXSk7IC8vIFRhYiB0cmFwcyB0byBwcmV2ZW50IHBhZ2UgZnJvbSBzY3JvbGxpbmcgdG8gbmV4dCBlbGVtZW50IGluCiAgICAgIC8vIHRhYiBpbmRleCBkdXJpbmcgZW5mb3JjZS1mb2N1cyB0YWIgY3ljbGUKCiAgICAgIHZhciAkdGFiVHJhcFRvcCA9IGgoKTsKICAgICAgdmFyICR0YWJUcmFwQm90dG9tID0gaCgpOwoKICAgICAgaWYgKHRoaXMuaXNWaXNpYmxlICYmICF0aGlzLm5vRW5mb3JjZUZvY3VzKSB7CiAgICAgICAgJHRhYlRyYXBUb3AgPSBoKCdzcGFuJywgewogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgdGFiaW5kZXg6ICcwJwogICAgICAgICAgfSwKICAgICAgICAgIHJlZjogJ3RvcC10cmFwJwogICAgICAgIH0pOwogICAgICAgICR0YWJUcmFwQm90dG9tID0gaCgnc3BhbicsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgIHRhYmluZGV4OiAnMCcKICAgICAgICAgIH0sCiAgICAgICAgICByZWY6ICdib3R0b20tdHJhcCcKICAgICAgICB9KTsKICAgICAgfSAvLyBNb2RhbCBkaWFsb2cgd3JhcHBlcgoKCiAgICAgIHZhciAkbW9kYWxEaWFsb2cgPSBoKCdkaXYnLCB7CiAgICAgICAgc3RhdGljQ2xhc3M6ICdtb2RhbC1kaWFsb2cnLAogICAgICAgIGNsYXNzOiB0aGlzLmRpYWxvZ0NsYXNzZXMsCiAgICAgICAgb246IHsKICAgICAgICAgIG1vdXNlZG93bjogdGhpcy5vbkRpYWxvZ01vdXNlZG93bgogICAgICAgIH0sCiAgICAgICAgcmVmOiAnZGlhbG9nJwogICAgICB9LCBbJHRhYlRyYXBUb3AsICRtb2RhbENvbnRlbnQsICR0YWJUcmFwQm90dG9tXSk7IC8vIE1vZGFsCgogICAgICB2YXIgJG1vZGFsID0gaCgnZGl2JywgewogICAgICAgIHN0YXRpY0NsYXNzOiAnbW9kYWwnLAogICAgICAgIGNsYXNzOiB0aGlzLm1vZGFsQ2xhc3NlcywKICAgICAgICBzdHlsZTogdGhpcy5tb2RhbFN0eWxlcywKICAgICAgICBhdHRyczogdGhpcy5jb21wdXRlZE1vZGFsQXR0cnMsCiAgICAgICAgb246IHsKICAgICAgICAgIGtleWRvd246IHRoaXMub25Fc2MsCiAgICAgICAgICBjbGljazogdGhpcy5vbkNsaWNrT3V0CiAgICAgICAgfSwKICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgbmFtZTogJ3Nob3cnLAogICAgICAgICAgdmFsdWU6IHRoaXMuaXNWaXNpYmxlCiAgICAgICAgfV0sCiAgICAgICAgcmVmOiAnbW9kYWwnCiAgICAgIH0sIFskbW9kYWxEaWFsb2ddKTsgLy8gV3JhcCBtb2RhbCBpbiB0cmFuc2l0aW9uCiAgICAgIC8vIFNhZGx5LCB3ZSBjYW4ndCB1c2UgYEJWVHJhbnNpdGlvbmAgaGVyZSBkdWUgdG8gdGhlIGRpZmZlcmVuY2VzIGluCiAgICAgIC8vIHRyYW5zaXRpb24gZHVyYXRpb25zIGZvciBgLm1vZGFsYCBhbmQgYC5tb2RhbC1kaWFsb2dgCiAgICAgIC8vIEF0IGxlYXN0IHVudGlsIGh0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy92dWUvaXNzdWVzLzk5ODYgaXMgcmVzb2x2ZWQKCiAgICAgICRtb2RhbCA9IGgoJ3RyYW5zaXRpb24nLCB7CiAgICAgICAgcHJvcHM6IHsKICAgICAgICAgIGVudGVyQ2xhc3M6ICcnLAogICAgICAgICAgZW50ZXJUb0NsYXNzOiAnJywKICAgICAgICAgIGVudGVyQWN0aXZlQ2xhc3M6ICcnLAogICAgICAgICAgbGVhdmVDbGFzczogJycsCiAgICAgICAgICBsZWF2ZUFjdGl2ZUNsYXNzOiAnJywKICAgICAgICAgIGxlYXZlVG9DbGFzczogJycKICAgICAgICB9LAogICAgICAgIG9uOiB7CiAgICAgICAgICBiZWZvcmVFbnRlcjogdGhpcy5vbkJlZm9yZUVudGVyLAogICAgICAgICAgZW50ZXI6IHRoaXMub25FbnRlciwKICAgICAgICAgIGFmdGVyRW50ZXI6IHRoaXMub25BZnRlckVudGVyLAogICAgICAgICAgYmVmb3JlTGVhdmU6IHRoaXMub25CZWZvcmVMZWF2ZSwKICAgICAgICAgIGxlYXZlOiB0aGlzLm9uTGVhdmUsCiAgICAgICAgICBhZnRlckxlYXZlOiB0aGlzLm9uQWZ0ZXJMZWF2ZQogICAgICAgIH0KICAgICAgfSwgWyRtb2RhbF0pOyAvLyBNb2RhbCBiYWNrZHJvcAoKICAgICAgdmFyICRiYWNrZHJvcCA9IGgoKTsKCiAgICAgIGlmICghdGhpcy5oaWRlQmFja2Ryb3AgJiYgdGhpcy5pc1Zpc2libGUpIHsKICAgICAgICAkYmFja2Ryb3AgPSBoKCdkaXYnLCB7CiAgICAgICAgICBzdGF0aWNDbGFzczogJ21vZGFsLWJhY2tkcm9wJywKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgIGlkOiB0aGlzLm1vZGFsQmFja2Ryb3BJZAogICAgICAgICAgfQogICAgICAgIH0sIC8vIFRPRE86IFJlbmFtZSBzbG90IHRvIGBiYWNrZHJvcGAgYW5kIGRlcHJlY2F0ZSBgbW9kYWwtYmFja2Ryb3BgCiAgICAgICAgdGhpcy5ub3JtYWxpemVTbG90KFNMT1RfTkFNRV9NT0RBTF9CQUNLRFJPUCkpOwogICAgICB9CgogICAgICAkYmFja2Ryb3AgPSBoKEJWVHJhbnNpdGlvbiwgewogICAgICAgIHByb3BzOiB7CiAgICAgICAgICBub0ZhZGU6IHRoaXMubm9GYWRlCiAgICAgICAgfQogICAgICB9LCBbJGJhY2tkcm9wXSk7IC8vIEFzc2VtYmxlIG1vZGFsIGFuZCBiYWNrZHJvcCBpbiBhbiBvdXRlciA8ZGl2PgoKICAgICAgcmV0dXJuIGgoJ2RpdicsIHsKICAgICAgICBzdHlsZTogdGhpcy5tb2RhbE91dGVyU3R5bGUsCiAgICAgICAgYXR0cnM6IHRoaXMuY29tcHV0ZWRBdHRycywKICAgICAgICBrZXk6ICJtb2RhbC1vdXRlci0iLmNvbmNhdCh0aGlzW0NPTVBPTkVOVF9VSURfS0VZXSkKICAgICAgfSwgWyRtb2RhbCwgJGJhY2tkcm9wXSk7CiAgICB9CiAgfSwKICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihoKSB7CiAgICBpZiAodGhpcy5zdGF0aWMpIHsKICAgICAgcmV0dXJuIHRoaXMubGF6eSAmJiB0aGlzLmlzSGlkZGVuID8gaCgpIDogdGhpcy5tYWtlTW9kYWwoaCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gdGhpcy5pc0hpZGRlbiA/IGgoKSA6IGgoQlZUcmFuc3BvcnRlciwgW3RoaXMubWFrZU1vZGFsKGgpXSk7CiAgICB9CiAgfQp9KTs="},{"version":3,"sources":["/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/bootstrap-vue/esm/components/modal/modal.js"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","configurable","writable","COMPONENT_UID_KEY","Vue","NAME_MODAL","IS_BROWSER","EVENT_NAME_CANCEL","EVENT_NAME_CHANGE","EVENT_NAME_CLOSE","EVENT_NAME_HIDDEN","EVENT_NAME_HIDE","EVENT_NAME_OK","EVENT_NAME_SHOW","EVENT_NAME_SHOWN","EVENT_NAME_TOGGLE","EVENT_OPTIONS_NO_CAPTURE","CODE_ESC","PROP_TYPE_ARRAY_OBJECT_STRING","PROP_TYPE_ARRAY_STRING","PROP_TYPE_BOOLEAN","PROP_TYPE_OBJECT","PROP_TYPE_STRING","HTMLElement","SLOT_NAME_DEFAULT","SLOT_NAME_MODAL_BACKDROP","SLOT_NAME_MODAL_CANCEL","SLOT_NAME_MODAL_FOOTER","SLOT_NAME_MODAL_HEADER","SLOT_NAME_MODAL_HEADER_CLOSE","SLOT_NAME_MODAL_OK","SLOT_NAME_MODAL_TITLE","arrayIncludes","concat","attemptFocus","closest","contains","getActiveElement","_getActiveElement","getTabables","requestAF","select","getRootActionEventName","getRootEventName","eventOn","eventOff","htmlOrText","identity","isString","isUndefinedOrNull","makeModelMixin","sortKeys","observeDom","makeProp","makePropsConfigurable","attrsMixin","idMixin","props","idProps","listenOnDocumentMixin","listenOnRootMixin","listenOnWindowMixin","normalizeSlotMixin","scopedStyleMixin","BButton","BButtonClose","BVTransition","BVTransporter","BvModalEvent","modalManager","_makeModelMixin","type","defaultValue","event","modelMixin","mixin","modelProps","MODEL_PROP_NAME","prop","MODEL_EVENT_NAME","TRIGGER_BACKDROP","TRIGGER_ESC","TRIGGER_FORCE","TRIGGER_TOGGLE","BUTTON_CANCEL","BUTTON_CLOSE","BUTTON_OK","BUTTONS","OBSERVER_CONFIG","subtree","childList","characterData","attributes","attributeFilter","ariaLabel","autoFocusButton","bodyBgVariant","bodyClass","bodyTextVariant","busy","buttonSize","cancelDisabled","cancelTitle","cancelTitleHtml","cancelVariant","centered","contentClass","dialogClass","footerBgVariant","footerBorderVariant","footerClass","footerTextVariant","headerBgVariant","headerBorderVariant","headerClass","headerCloseContent","headerCloseLabel","headerCloseVariant","headerTextVariant","hideBackdrop","hideFooter","hideHeader","hideHeaderClose","ignoreEnforceFocusSelector","lazy","modalClass","noCloseOnBackdrop","noCloseOnEsc","noEnforceFocus","noFade","noStacking","okDisabled","okOnly","okTitle","okTitleHtml","okVariant","returnFocus","scrollable","size","static","title","titleClass","titleHtml","titleSrOnly","titleTag","BModal","extend","name","mixins","inheritAttrs","data","isHidden","isVisible","isTransitioning","isShow","isBlock","isOpening","isClosing","ignoreBackdropClick","isModalOverflowing","scrollbarWidth","zIndex","getBaseZIndex","isTop","isBodyOverflowing","computed","modalId","safeId","modalOuterId","modalHeaderId","modalBodyId","modalTitleId","modalContentId","modalFooterId","modalBackdropId","modalClasses","fade","show","modalStyles","sbWidth","paddingLeft","paddingRight","display","dialogClasses","_ref","headerClasses","_ref2","titleClasses","bodyClasses","_ref3","footerClasses","_ref4","modalOuterStyle","position","slotScope","cancel","onCancel","close","onClose","hide","ok","onOk","visible","computeIgnoreEnforceFocusSelector","join","trim","computedAttrs","scopedStyleAttrs","bvAttrs","id","computedModalAttrs","role","hasNormalizedSlot","watch","newValue","oldValue","created","$_observer","$_returnFocus","mounted","listenOnRoot","showHandler","hideHandler","toggleHandler","modalListener","$nextTick","beforeDestroy","setObserver","methods","on","undefined","disconnect","$refs","content","checkModalOverflow","bind","updateModel","$emit","buildEvent","options","cancelable","modal","$el","relatedTarget","trigger","vueTarget","componentId","$once","showEvt","emitEvent","defaultPrevented","doShow","hideEvt","toggle","triggerEl","activeElement","document","body","focus","_this","modalsAreOpen","listenOnRootOnce","registerModal","onBeforeEnter","setResizeEvent","onEnter","_this2","onAfterEnter","_this3","setEnforceFocus","focusFirst","onBeforeLeave","onLeave","onAfterLeave","_this4","unregisterModal","returnFocusTo","bvEvent","emitOnRoot","onDialogMousedown","_this5","onceModalMouseup","onClickOut","onEsc","keyCode","focusHandler","tabables","bottomTrap","topTrap","preventScroll","listenDocument","listenWindow","_this6","autoFocus","el","scrollTop","scrollHeight","documentElement","clientHeight","makeModal","h","$header","$modalHeader","normalizeSlot","$closeButton","disabled","textVariant","click","ref","staticClass","class","attrs","domProps","$body","$footer","$modalFooter","$cancelButton","variant","$okButton","$modalContent","tabindex","$tabTrapTop","$tabTrapBottom","$modalDialog","mousedown","$modal","style","keydown","directives","enterClass","enterToClass","enterActiveClass","leaveClass","leaveActiveClass","leaveToClass","beforeEnter","enter","afterEnter","beforeLeave","leave","afterLeave","$backdrop","render"],"mappings":"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","sourcesContent":["function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { COMPONENT_UID_KEY, Vue } from '../../vue';\nimport { NAME_MODAL } from '../../constants/components';\nimport { IS_BROWSER } from '../../constants/env';\nimport { EVENT_NAME_CANCEL, EVENT_NAME_CHANGE, EVENT_NAME_CLOSE, EVENT_NAME_HIDDEN, EVENT_NAME_HIDE, EVENT_NAME_OK, EVENT_NAME_SHOW, EVENT_NAME_SHOWN, EVENT_NAME_TOGGLE, EVENT_OPTIONS_NO_CAPTURE } from '../../constants/events';\nimport { CODE_ESC } from '../../constants/key-codes';\nimport { PROP_TYPE_ARRAY_OBJECT_STRING, PROP_TYPE_ARRAY_STRING, PROP_TYPE_BOOLEAN, PROP_TYPE_OBJECT, PROP_TYPE_STRING } from '../../constants/props';\nimport { HTMLElement } from '../../constants/safe-types';\nimport { SLOT_NAME_DEFAULT, SLOT_NAME_MODAL_BACKDROP, SLOT_NAME_MODAL_CANCEL, SLOT_NAME_MODAL_FOOTER, SLOT_NAME_MODAL_HEADER, SLOT_NAME_MODAL_HEADER_CLOSE, SLOT_NAME_MODAL_OK, SLOT_NAME_MODAL_TITLE } from '../../constants/slots';\nimport { arrayIncludes, concat } from '../../utils/array';\nimport { attemptFocus, closest, contains, getActiveElement as _getActiveElement, getTabables, requestAF, select } from '../../utils/dom';\nimport { getRootActionEventName, getRootEventName, eventOn, eventOff } from '../../utils/events';\nimport { htmlOrText } from '../../utils/html';\nimport { identity } from '../../utils/identity';\nimport { isString, isUndefinedOrNull } from '../../utils/inspect';\nimport { makeModelMixin } from '../../utils/model';\nimport { sortKeys } from '../../utils/object';\nimport { observeDom } from '../../utils/observe-dom';\nimport { makeProp, makePropsConfigurable } from '../../utils/props';\nimport { attrsMixin } from '../../mixins/attrs';\nimport { idMixin, props as idProps } from '../../mixins/id';\nimport { listenOnDocumentMixin } from '../../mixins/listen-on-document';\nimport { listenOnRootMixin } from '../../mixins/listen-on-root';\nimport { listenOnWindowMixin } from '../../mixins/listen-on-window';\nimport { normalizeSlotMixin } from '../../mixins/normalize-slot';\nimport { scopedStyleMixin } from '../../mixins/scoped-style';\nimport { BButton } from '../button/button';\nimport { BButtonClose } from '../button/button-close';\nimport { BVTransition } from '../transition/bv-transition';\nimport { BVTransporter } from '../transporter/transporter';\nimport { BvModalEvent } from './helpers/bv-modal-event.class';\nimport { modalManager } from './helpers/modal-manager'; // --- Constants ---\n\nvar _makeModelMixin = makeModelMixin('visible', {\n  type: PROP_TYPE_BOOLEAN,\n  defaultValue: false,\n  event: EVENT_NAME_CHANGE\n}),\n    modelMixin = _makeModelMixin.mixin,\n    modelProps = _makeModelMixin.props,\n    MODEL_PROP_NAME = _makeModelMixin.prop,\n    MODEL_EVENT_NAME = _makeModelMixin.event;\n\nvar TRIGGER_BACKDROP = 'backdrop';\nvar TRIGGER_ESC = 'esc';\nvar TRIGGER_FORCE = 'FORCE';\nvar TRIGGER_TOGGLE = 'toggle';\nvar BUTTON_CANCEL = 'cancel'; // TODO: This should be renamed to 'close'\n\nvar BUTTON_CLOSE = 'headerclose';\nvar BUTTON_OK = 'ok';\nvar BUTTONS = [BUTTON_CANCEL, BUTTON_CLOSE, BUTTON_OK]; // `ObserveDom` config to detect changes in modal content\n// so that we can adjust the modal padding if needed\n\nvar OBSERVER_CONFIG = {\n  subtree: true,\n  childList: true,\n  characterData: true,\n  attributes: true,\n  attributeFilter: ['style', 'class']\n}; // --- Props ---\n\nexport var props = makePropsConfigurable(sortKeys(_objectSpread(_objectSpread(_objectSpread({}, idProps), modelProps), {}, {\n  ariaLabel: makeProp(PROP_TYPE_STRING),\n  autoFocusButton: makeProp(PROP_TYPE_STRING, null,\n  /* istanbul ignore next */\n  function (value) {\n    return isUndefinedOrNull(value) || arrayIncludes(BUTTONS, value);\n  }),\n  bodyBgVariant: makeProp(PROP_TYPE_STRING),\n  bodyClass: makeProp(PROP_TYPE_ARRAY_OBJECT_STRING),\n  bodyTextVariant: makeProp(PROP_TYPE_STRING),\n  busy: makeProp(PROP_TYPE_BOOLEAN, false),\n  buttonSize: makeProp(PROP_TYPE_STRING),\n  cancelDisabled: makeProp(PROP_TYPE_BOOLEAN, false),\n  cancelTitle: makeProp(PROP_TYPE_STRING, 'Cancel'),\n  cancelTitleHtml: makeProp(PROP_TYPE_STRING),\n  cancelVariant: makeProp(PROP_TYPE_STRING, 'secondary'),\n  centered: makeProp(PROP_TYPE_BOOLEAN, false),\n  contentClass: makeProp(PROP_TYPE_ARRAY_OBJECT_STRING),\n  dialogClass: makeProp(PROP_TYPE_ARRAY_OBJECT_STRING),\n  footerBgVariant: makeProp(PROP_TYPE_STRING),\n  footerBorderVariant: makeProp(PROP_TYPE_STRING),\n  footerClass: makeProp(PROP_TYPE_ARRAY_OBJECT_STRING),\n  footerTextVariant: makeProp(PROP_TYPE_STRING),\n  headerBgVariant: makeProp(PROP_TYPE_STRING),\n  headerBorderVariant: makeProp(PROP_TYPE_STRING),\n  headerClass: makeProp(PROP_TYPE_ARRAY_OBJECT_STRING),\n  headerCloseContent: makeProp(PROP_TYPE_STRING, '&times;'),\n  headerCloseLabel: makeProp(PROP_TYPE_STRING, 'Close'),\n  headerCloseVariant: makeProp(PROP_TYPE_STRING),\n  headerTextVariant: makeProp(PROP_TYPE_STRING),\n  // TODO: Rename to `noBackdrop` and deprecate `hideBackdrop`\n  hideBackdrop: makeProp(PROP_TYPE_BOOLEAN, false),\n  // TODO: Rename to `noFooter` and deprecate `hideFooter`\n  hideFooter: makeProp(PROP_TYPE_BOOLEAN, false),\n  // TODO: Rename to `noHeader` and deprecate `hideHeader`\n  hideHeader: makeProp(PROP_TYPE_BOOLEAN, false),\n  // TODO: Rename to `noHeaderClose` and deprecate `hideHeaderClose`\n  hideHeaderClose: makeProp(PROP_TYPE_BOOLEAN, false),\n  ignoreEnforceFocusSelector: makeProp(PROP_TYPE_ARRAY_STRING),\n  lazy: makeProp(PROP_TYPE_BOOLEAN, false),\n  modalClass: makeProp(PROP_TYPE_ARRAY_OBJECT_STRING),\n  noCloseOnBackdrop: makeProp(PROP_TYPE_BOOLEAN, false),\n  noCloseOnEsc: makeProp(PROP_TYPE_BOOLEAN, false),\n  noEnforceFocus: makeProp(PROP_TYPE_BOOLEAN, false),\n  noFade: makeProp(PROP_TYPE_BOOLEAN, false),\n  noStacking: makeProp(PROP_TYPE_BOOLEAN, false),\n  okDisabled: makeProp(PROP_TYPE_BOOLEAN, false),\n  okOnly: makeProp(PROP_TYPE_BOOLEAN, false),\n  okTitle: makeProp(PROP_TYPE_STRING, 'OK'),\n  okTitleHtml: makeProp(PROP_TYPE_STRING),\n  okVariant: makeProp(PROP_TYPE_STRING, 'primary'),\n  // HTML Element, CSS selector string or Vue component instance\n  returnFocus: makeProp([HTMLElement, PROP_TYPE_OBJECT, PROP_TYPE_STRING]),\n  scrollable: makeProp(PROP_TYPE_BOOLEAN, false),\n  size: makeProp(PROP_TYPE_STRING, 'md'),\n  static: makeProp(PROP_TYPE_BOOLEAN, false),\n  title: makeProp(PROP_TYPE_STRING),\n  titleClass: makeProp(PROP_TYPE_ARRAY_OBJECT_STRING),\n  titleHtml: makeProp(PROP_TYPE_STRING),\n  titleSrOnly: makeProp(PROP_TYPE_BOOLEAN, false),\n  titleTag: makeProp(PROP_TYPE_STRING, 'h5')\n})), NAME_MODAL); // --- Main component ---\n// @vue/component\n\nexport var BModal = /*#__PURE__*/Vue.extend({\n  name: NAME_MODAL,\n  mixins: [attrsMixin, idMixin, modelMixin, listenOnDocumentMixin, listenOnRootMixin, listenOnWindowMixin, normalizeSlotMixin, scopedStyleMixin],\n  inheritAttrs: false,\n  props: props,\n  data: function data() {\n    return {\n      isHidden: true,\n      // If modal should not be in document\n      isVisible: false,\n      // Controls modal visible state\n      isTransitioning: false,\n      // Used for style control\n      isShow: false,\n      // Used for style control\n      isBlock: false,\n      // Used for style control\n      isOpening: false,\n      // To signal that the modal is in the process of opening\n      isClosing: false,\n      // To signal that the modal is in the process of closing\n      ignoreBackdropClick: false,\n      // Used to signify if click out listener should ignore the click\n      isModalOverflowing: false,\n      // The following items are controlled by the modalManager instance\n      scrollbarWidth: 0,\n      zIndex: modalManager.getBaseZIndex(),\n      isTop: true,\n      isBodyOverflowing: false\n    };\n  },\n  computed: {\n    modalId: function modalId() {\n      return this.safeId();\n    },\n    modalOuterId: function modalOuterId() {\n      return this.safeId('__BV_modal_outer_');\n    },\n    modalHeaderId: function modalHeaderId() {\n      return this.safeId('__BV_modal_header_');\n    },\n    modalBodyId: function modalBodyId() {\n      return this.safeId('__BV_modal_body_');\n    },\n    modalTitleId: function modalTitleId() {\n      return this.safeId('__BV_modal_title_');\n    },\n    modalContentId: function modalContentId() {\n      return this.safeId('__BV_modal_content_');\n    },\n    modalFooterId: function modalFooterId() {\n      return this.safeId('__BV_modal_footer_');\n    },\n    modalBackdropId: function modalBackdropId() {\n      return this.safeId('__BV_modal_backdrop_');\n    },\n    modalClasses: function modalClasses() {\n      return [{\n        fade: !this.noFade,\n        show: this.isShow\n      }, this.modalClass];\n    },\n    modalStyles: function modalStyles() {\n      var sbWidth = \"\".concat(this.scrollbarWidth, \"px\");\n      return {\n        paddingLeft: !this.isBodyOverflowing && this.isModalOverflowing ? sbWidth : '',\n        paddingRight: this.isBodyOverflowing && !this.isModalOverflowing ? sbWidth : '',\n        // Needed to fix issue https://github.com/bootstrap-vue/bootstrap-vue/issues/3457\n        // Even though we are using v-show, we must ensure 'none' is restored in the styles\n        display: this.isBlock ? 'block' : 'none'\n      };\n    },\n    dialogClasses: function dialogClasses() {\n      var _ref;\n\n      return [(_ref = {}, _defineProperty(_ref, \"modal-\".concat(this.size), this.size), _defineProperty(_ref, 'modal-dialog-centered', this.centered), _defineProperty(_ref, 'modal-dialog-scrollable', this.scrollable), _ref), this.dialogClass];\n    },\n    headerClasses: function headerClasses() {\n      var _ref2;\n\n      return [(_ref2 = {}, _defineProperty(_ref2, \"bg-\".concat(this.headerBgVariant), this.headerBgVariant), _defineProperty(_ref2, \"text-\".concat(this.headerTextVariant), this.headerTextVariant), _defineProperty(_ref2, \"border-\".concat(this.headerBorderVariant), this.headerBorderVariant), _ref2), this.headerClass];\n    },\n    titleClasses: function titleClasses() {\n      return [{\n        'sr-only': this.titleSrOnly\n      }, this.titleClass];\n    },\n    bodyClasses: function bodyClasses() {\n      var _ref3;\n\n      return [(_ref3 = {}, _defineProperty(_ref3, \"bg-\".concat(this.bodyBgVariant), this.bodyBgVariant), _defineProperty(_ref3, \"text-\".concat(this.bodyTextVariant), this.bodyTextVariant), _ref3), this.bodyClass];\n    },\n    footerClasses: function footerClasses() {\n      var _ref4;\n\n      return [(_ref4 = {}, _defineProperty(_ref4, \"bg-\".concat(this.footerBgVariant), this.footerBgVariant), _defineProperty(_ref4, \"text-\".concat(this.footerTextVariant), this.footerTextVariant), _defineProperty(_ref4, \"border-\".concat(this.footerBorderVariant), this.footerBorderVariant), _ref4), this.footerClass];\n    },\n    modalOuterStyle: function modalOuterStyle() {\n      // Styles needed for proper stacking of modals\n      return {\n        position: 'absolute',\n        zIndex: this.zIndex\n      };\n    },\n    slotScope: function slotScope() {\n      return {\n        cancel: this.onCancel,\n        close: this.onClose,\n        hide: this.hide,\n        ok: this.onOk,\n        visible: this.isVisible\n      };\n    },\n    computeIgnoreEnforceFocusSelector: function computeIgnoreEnforceFocusSelector() {\n      // Normalize to an single selector with selectors separated by `,`\n      return concat(this.ignoreEnforceFocusSelector).filter(identity).join(',').trim();\n    },\n    computedAttrs: function computedAttrs() {\n      // If the parent has a scoped style attribute, and the modal\n      // is portalled, add the scoped attribute to the modal wrapper\n      var scopedStyleAttrs = !this.static ? this.scopedStyleAttrs : {};\n      return _objectSpread(_objectSpread(_objectSpread({}, scopedStyleAttrs), this.bvAttrs), {}, {\n        id: this.modalOuterId\n      });\n    },\n    computedModalAttrs: function computedModalAttrs() {\n      var isVisible = this.isVisible,\n          ariaLabel = this.ariaLabel;\n      return {\n        id: this.modalId,\n        role: 'dialog',\n        'aria-hidden': isVisible ? null : 'true',\n        'aria-modal': isVisible ? 'true' : null,\n        'aria-label': ariaLabel,\n        'aria-labelledby': this.hideHeader || ariaLabel || // TODO: Rename slot to `title` and deprecate `modal-title`\n        !(this.hasNormalizedSlot(SLOT_NAME_MODAL_TITLE) || this.titleHtml || this.title) ? null : this.modalTitleId,\n        'aria-describedby': this.modalBodyId\n      };\n    }\n  },\n  watch: _defineProperty({}, MODEL_PROP_NAME, function (newValue, oldValue) {\n    if (newValue !== oldValue) {\n      this[newValue ? 'show' : 'hide']();\n    }\n  }),\n  created: function created() {\n    // Define non-reactive properties\n    this.$_observer = null;\n    this.$_returnFocus = this.returnFocus || null;\n  },\n  mounted: function mounted() {\n    // Set initial z-index as queried from the DOM\n    this.zIndex = modalManager.getBaseZIndex(); // Listen for events from others to either open or close ourselves\n    // and listen to all modals to enable/disable enforce focus\n\n    this.listenOnRoot(getRootActionEventName(NAME_MODAL, EVENT_NAME_SHOW), this.showHandler);\n    this.listenOnRoot(getRootActionEventName(NAME_MODAL, EVENT_NAME_HIDE), this.hideHandler);\n    this.listenOnRoot(getRootActionEventName(NAME_MODAL, EVENT_NAME_TOGGLE), this.toggleHandler); // Listen for `bv:modal::show events`, and close ourselves if the\n    // opening modal not us\n\n    this.listenOnRoot(getRootEventName(NAME_MODAL, EVENT_NAME_SHOW), this.modalListener); // Initially show modal?\n\n    if (this[MODEL_PROP_NAME] === true) {\n      this.$nextTick(this.show);\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    // Ensure everything is back to normal\n    this.setObserver(false);\n\n    if (this.isVisible) {\n      this.isVisible = false;\n      this.isShow = false;\n      this.isTransitioning = false;\n    }\n  },\n  methods: {\n    setObserver: function setObserver() {\n      var on = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      this.$_observer && this.$_observer.disconnect();\n      this.$_observer = null;\n\n      if (on) {\n        this.$_observer = observeDom(this.$refs.content, this.checkModalOverflow.bind(this), OBSERVER_CONFIG);\n      }\n    },\n    // Private method to update the v-model\n    updateModel: function updateModel(value) {\n      if (value !== this[MODEL_PROP_NAME]) {\n        this.$emit(MODEL_EVENT_NAME, value);\n      }\n    },\n    // Private method to create a BvModalEvent object\n    buildEvent: function buildEvent(type) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return new BvModalEvent(type, _objectSpread(_objectSpread({\n        // Default options\n        cancelable: false,\n        target: this.$refs.modal || this.$el || null,\n        relatedTarget: null,\n        trigger: null\n      }, options), {}, {\n        // Options that can't be overridden\n        vueTarget: this,\n        componentId: this.modalId\n      }));\n    },\n    // Public method to show modal\n    show: function show() {\n      if (this.isVisible || this.isOpening) {\n        // If already open, or in the process of opening, do nothing\n\n        /* istanbul ignore next */\n        return;\n      }\n      /* istanbul ignore next */\n\n\n      if (this.isClosing) {\n        // If we are in the process of closing, wait until hidden before re-opening\n\n        /* istanbul ignore next */\n        this.$once(EVENT_NAME_HIDDEN, this.show);\n        /* istanbul ignore next */\n\n        return;\n      }\n\n      this.isOpening = true; // Set the element to return focus to when closed\n\n      this.$_returnFocus = this.$_returnFocus || this.getActiveElement();\n      var showEvt = this.buildEvent(EVENT_NAME_SHOW, {\n        cancelable: true\n      });\n      this.emitEvent(showEvt); // Don't show if canceled\n\n      if (showEvt.defaultPrevented || this.isVisible) {\n        this.isOpening = false; // Ensure the v-model reflects the current state\n\n        this.updateModel(false);\n        return;\n      } // Show the modal\n\n\n      this.doShow();\n    },\n    // Public method to hide modal\n    hide: function hide() {\n      var trigger = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\n      if (!this.isVisible || this.isClosing) {\n        /* istanbul ignore next */\n        return;\n      }\n\n      this.isClosing = true;\n      var hideEvt = this.buildEvent(EVENT_NAME_HIDE, {\n        cancelable: trigger !== TRIGGER_FORCE,\n        trigger: trigger || null\n      }); // We emit specific event for one of the three built-in buttons\n\n      if (trigger === BUTTON_OK) {\n        this.$emit(EVENT_NAME_OK, hideEvt);\n      } else if (trigger === BUTTON_CANCEL) {\n        this.$emit(EVENT_NAME_CANCEL, hideEvt);\n      } else if (trigger === BUTTON_CLOSE) {\n        this.$emit(EVENT_NAME_CLOSE, hideEvt);\n      }\n\n      this.emitEvent(hideEvt); // Hide if not canceled\n\n      if (hideEvt.defaultPrevented || !this.isVisible) {\n        this.isClosing = false; // Ensure v-model reflects current state\n\n        this.updateModel(true);\n        return;\n      } // Stop observing for content changes\n\n\n      this.setObserver(false); // Trigger the hide transition\n\n      this.isVisible = false; // Update the v-model\n\n      this.updateModel(false);\n    },\n    // Public method to toggle modal visibility\n    toggle: function toggle(triggerEl) {\n      if (triggerEl) {\n        this.$_returnFocus = triggerEl;\n      }\n\n      if (this.isVisible) {\n        this.hide(TRIGGER_TOGGLE);\n      } else {\n        this.show();\n      }\n    },\n    // Private method to get the current document active element\n    getActiveElement: function getActiveElement() {\n      // Returning focus to `document.body` may cause unwanted scrolls,\n      // so we exclude setting focus on body\n      var activeElement = _getActiveElement(IS_BROWSER ? [document.body] : []); // Preset the fallback return focus value if it is not set\n      // `document.activeElement` should be the trigger element that was clicked or\n      // in the case of using the v-model, which ever element has current focus\n      // Will be overridden by some commands such as toggle, etc.\n      // Note: On IE 11, `document.activeElement` may be `null`\n      // So we test it for truthiness first\n      // https://github.com/bootstrap-vue/bootstrap-vue/issues/3206\n\n\n      return activeElement && activeElement.focus ? activeElement : null;\n    },\n    // Private method to finish showing modal\n    doShow: function doShow() {\n      var _this = this;\n\n      /* istanbul ignore next: commenting out for now until we can test stacking */\n      if (modalManager.modalsAreOpen && this.noStacking) {\n        // If another modal(s) is already open, wait for it(them) to close\n        this.listenOnRootOnce(getRootEventName(NAME_MODAL, EVENT_NAME_HIDDEN), this.doShow);\n        return;\n      }\n\n      modalManager.registerModal(this); // Place modal in DOM\n\n      this.isHidden = false;\n      this.$nextTick(function () {\n        // We do this in `$nextTick()` to ensure the modal is in DOM first\n        // before we show it\n        _this.isVisible = true;\n        _this.isOpening = false; // Update the v-model\n\n        _this.updateModel(true);\n\n        _this.$nextTick(function () {\n          // Observe changes in modal content and adjust if necessary\n          // In a `$nextTick()` in case modal content is lazy\n          _this.setObserver(true);\n        });\n      });\n    },\n    // Transition handlers\n    onBeforeEnter: function onBeforeEnter() {\n      this.isTransitioning = true;\n      this.setResizeEvent(true);\n    },\n    onEnter: function onEnter() {\n      var _this2 = this;\n\n      this.isBlock = true; // We add the `show` class 1 frame later\n      // `requestAF()` runs the callback before the next repaint, so we need\n      // two calls to guarantee the next frame has been rendered\n\n      requestAF(function () {\n        requestAF(function () {\n          _this2.isShow = true;\n        });\n      });\n    },\n    onAfterEnter: function onAfterEnter() {\n      var _this3 = this;\n\n      this.checkModalOverflow();\n      this.isTransitioning = false; // We use `requestAF()` to allow transition hooks to complete\n      // before passing control over to the other handlers\n      // This will allow users to not have to use `$nextTick()` or `requestAF()`\n      // when trying to pre-focus an element\n\n      requestAF(function () {\n        _this3.emitEvent(_this3.buildEvent(EVENT_NAME_SHOWN));\n\n        _this3.setEnforceFocus(true);\n\n        _this3.$nextTick(function () {\n          // Delayed in a `$nextTick()` to allow users time to pre-focus\n          // an element if the wish\n          _this3.focusFirst();\n        });\n      });\n    },\n    onBeforeLeave: function onBeforeLeave() {\n      this.isTransitioning = true;\n      this.setResizeEvent(false);\n      this.setEnforceFocus(false);\n    },\n    onLeave: function onLeave() {\n      // Remove the 'show' class\n      this.isShow = false;\n    },\n    onAfterLeave: function onAfterLeave() {\n      var _this4 = this;\n\n      this.isBlock = false;\n      this.isTransitioning = false;\n      this.isModalOverflowing = false;\n      this.isHidden = true;\n      this.$nextTick(function () {\n        _this4.isClosing = false;\n        modalManager.unregisterModal(_this4);\n\n        _this4.returnFocusTo(); // TODO: Need to find a way to pass the `trigger` property\n        //       to the `hidden` event, not just only the `hide` event\n\n\n        _this4.emitEvent(_this4.buildEvent(EVENT_NAME_HIDDEN));\n      });\n    },\n    emitEvent: function emitEvent(bvEvent) {\n      var type = bvEvent.type; // We emit on `$root` first in case a global listener wants to cancel\n      // the event first before the instance emits its event\n\n      this.emitOnRoot(getRootEventName(NAME_MODAL, type), bvEvent, bvEvent.componentId);\n      this.$emit(type, bvEvent);\n    },\n    // UI event handlers\n    onDialogMousedown: function onDialogMousedown() {\n      var _this5 = this;\n\n      // Watch to see if the matching mouseup event occurs outside the dialog\n      // And if it does, cancel the clickOut handler\n      var modal = this.$refs.modal;\n\n      var onceModalMouseup = function onceModalMouseup(event) {\n        eventOff(modal, 'mouseup', onceModalMouseup, EVENT_OPTIONS_NO_CAPTURE);\n\n        if (event.target === modal) {\n          _this5.ignoreBackdropClick = true;\n        }\n      };\n\n      eventOn(modal, 'mouseup', onceModalMouseup, EVENT_OPTIONS_NO_CAPTURE);\n    },\n    onClickOut: function onClickOut(event) {\n      if (this.ignoreBackdropClick) {\n        // Click was initiated inside the modal content, but finished outside.\n        // Set by the above onDialogMousedown handler\n        this.ignoreBackdropClick = false;\n        return;\n      } // Do nothing if not visible, backdrop click disabled, or element\n      // that generated click event is no longer in document body\n\n\n      if (!this.isVisible || this.noCloseOnBackdrop || !contains(document.body, event.target)) {\n        return;\n      } // If backdrop clicked, hide modal\n\n\n      if (!contains(this.$refs.content, event.target)) {\n        this.hide(TRIGGER_BACKDROP);\n      }\n    },\n    onOk: function onOk() {\n      this.hide(BUTTON_OK);\n    },\n    onCancel: function onCancel() {\n      this.hide(BUTTON_CANCEL);\n    },\n    onClose: function onClose() {\n      this.hide(BUTTON_CLOSE);\n    },\n    onEsc: function onEsc(event) {\n      // If ESC pressed, hide modal\n      if (event.keyCode === CODE_ESC && this.isVisible && !this.noCloseOnEsc) {\n        this.hide(TRIGGER_ESC);\n      }\n    },\n    // Document focusin listener\n    focusHandler: function focusHandler(event) {\n      // If focus leaves modal content, bring it back\n      var content = this.$refs.content;\n      var target = event.target;\n\n      if (this.noEnforceFocus || !this.isTop || !this.isVisible || !content || document === target || contains(content, target) || this.computeIgnoreEnforceFocusSelector && closest(this.computeIgnoreEnforceFocusSelector, target, true)) {\n        return;\n      }\n\n      var tabables = getTabables(this.$refs.content);\n      var bottomTrap = this.$refs['bottom-trap'];\n      var topTrap = this.$refs['top-trap'];\n\n      if (bottomTrap && target === bottomTrap) {\n        // If user pressed TAB out of modal into our bottom trab trap element\n        // Find the first tabable element in the modal content and focus it\n        if (attemptFocus(tabables[0])) {\n          // Focus was successful\n          return;\n        }\n      } else if (topTrap && target === topTrap) {\n        // If user pressed CTRL-TAB out of modal and into our top tab trap element\n        // Find the last tabable element in the modal content and focus it\n        if (attemptFocus(tabables[tabables.length - 1])) {\n          // Focus was successful\n          return;\n        }\n      } // Otherwise focus the modal content container\n\n\n      attemptFocus(content, {\n        preventScroll: true\n      });\n    },\n    // Turn on/off focusin listener\n    setEnforceFocus: function setEnforceFocus(on) {\n      this.listenDocument(on, 'focusin', this.focusHandler);\n    },\n    // Resize listener\n    setResizeEvent: function setResizeEvent(on) {\n      this.listenWindow(on, 'resize', this.checkModalOverflow);\n      this.listenWindow(on, 'orientationchange', this.checkModalOverflow);\n    },\n    // Root listener handlers\n    showHandler: function showHandler(id, triggerEl) {\n      if (id === this.modalId) {\n        this.$_returnFocus = triggerEl || this.getActiveElement();\n        this.show();\n      }\n    },\n    hideHandler: function hideHandler(id) {\n      if (id === this.modalId) {\n        this.hide('event');\n      }\n    },\n    toggleHandler: function toggleHandler(id, triggerEl) {\n      if (id === this.modalId) {\n        this.toggle(triggerEl);\n      }\n    },\n    modalListener: function modalListener(bvEvent) {\n      // If another modal opens, close this one if stacking not permitted\n      if (this.noStacking && bvEvent.vueTarget !== this) {\n        this.hide();\n      }\n    },\n    // Focus control handlers\n    focusFirst: function focusFirst() {\n      var _this6 = this;\n\n      // Don't try and focus if we are SSR\n      if (IS_BROWSER) {\n        requestAF(function () {\n          var modal = _this6.$refs.modal;\n          var content = _this6.$refs.content;\n\n          var activeElement = _this6.getActiveElement(); // If the modal contains the activeElement, we don't do anything\n\n\n          if (modal && content && !(activeElement && contains(content, activeElement))) {\n            var ok = _this6.$refs['ok-button'];\n            var cancel = _this6.$refs['cancel-button'];\n            var close = _this6.$refs['close-button']; // Focus the appropriate button or modal content wrapper\n\n            var autoFocus = _this6.autoFocusButton;\n            /* istanbul ignore next */\n\n            var el = autoFocus === BUTTON_OK && ok ? ok.$el || ok : autoFocus === BUTTON_CANCEL && cancel ? cancel.$el || cancel : autoFocus === BUTTON_CLOSE && close ? close.$el || close : content; // Focus the element\n\n            attemptFocus(el);\n\n            if (el === content) {\n              // Make sure top of modal is showing (if longer than the viewport)\n              _this6.$nextTick(function () {\n                modal.scrollTop = 0;\n              });\n            }\n          }\n        });\n      }\n    },\n    returnFocusTo: function returnFocusTo() {\n      // Prefer `returnFocus` prop over event specified\n      // `return_focus` value\n      var el = this.returnFocus || this.$_returnFocus || null;\n      this.$_returnFocus = null;\n      this.$nextTick(function () {\n        // Is el a string CSS selector?\n        el = isString(el) ? select(el) : el;\n\n        if (el) {\n          // Possibly could be a component reference\n          el = el.$el || el;\n          attemptFocus(el);\n        }\n      });\n    },\n    checkModalOverflow: function checkModalOverflow() {\n      if (this.isVisible) {\n        var modal = this.$refs.modal;\n        this.isModalOverflowing = modal.scrollHeight > document.documentElement.clientHeight;\n      }\n    },\n    makeModal: function makeModal(h) {\n      // Modal header\n      var $header = h();\n\n      if (!this.hideHeader) {\n        // TODO: Rename slot to `header` and deprecate `modal-header`\n        var $modalHeader = this.normalizeSlot(SLOT_NAME_MODAL_HEADER, this.slotScope);\n\n        if (!$modalHeader) {\n          var $closeButton = h();\n\n          if (!this.hideHeaderClose) {\n            $closeButton = h(BButtonClose, {\n              props: {\n                content: this.headerCloseContent,\n                disabled: this.isTransitioning,\n                ariaLabel: this.headerCloseLabel,\n                textVariant: this.headerCloseVariant || this.headerTextVariant\n              },\n              on: {\n                click: this.onClose\n              },\n              ref: 'close-button'\n            }, // TODO: Rename slot to `header-close` and deprecate `modal-header-close`\n            [this.normalizeSlot(SLOT_NAME_MODAL_HEADER_CLOSE)]);\n          }\n\n          $modalHeader = [h(this.titleTag, {\n            staticClass: 'modal-title',\n            class: this.titleClasses,\n            attrs: {\n              id: this.modalTitleId\n            },\n            // TODO: Rename slot to `title` and deprecate `modal-title`\n            domProps: this.hasNormalizedSlot(SLOT_NAME_MODAL_TITLE) ? {} : htmlOrText(this.titleHtml, this.title)\n          }, // TODO: Rename slot to `title` and deprecate `modal-title`\n          this.normalizeSlot(SLOT_NAME_MODAL_TITLE, this.slotScope)), $closeButton];\n        }\n\n        $header = h('header', {\n          staticClass: 'modal-header',\n          class: this.headerClasses,\n          attrs: {\n            id: this.modalHeaderId\n          },\n          ref: 'header'\n        }, [$modalHeader]);\n      } // Modal body\n\n\n      var $body = h('div', {\n        staticClass: 'modal-body',\n        class: this.bodyClasses,\n        attrs: {\n          id: this.modalBodyId\n        },\n        ref: 'body'\n      }, this.normalizeSlot(SLOT_NAME_DEFAULT, this.slotScope)); // Modal footer\n\n      var $footer = h();\n\n      if (!this.hideFooter) {\n        // TODO: Rename slot to `footer` and deprecate `modal-footer`\n        var $modalFooter = this.normalizeSlot(SLOT_NAME_MODAL_FOOTER, this.slotScope);\n\n        if (!$modalFooter) {\n          var $cancelButton = h();\n\n          if (!this.okOnly) {\n            $cancelButton = h(BButton, {\n              props: {\n                variant: this.cancelVariant,\n                size: this.buttonSize,\n                disabled: this.cancelDisabled || this.busy || this.isTransitioning\n              },\n              // TODO: Rename slot to `cancel-button` and deprecate `modal-cancel`\n              domProps: this.hasNormalizedSlot(SLOT_NAME_MODAL_CANCEL) ? {} : htmlOrText(this.cancelTitleHtml, this.cancelTitle),\n              on: {\n                click: this.onCancel\n              },\n              ref: 'cancel-button'\n            }, // TODO: Rename slot to `cancel-button` and deprecate `modal-cancel`\n            this.normalizeSlot(SLOT_NAME_MODAL_CANCEL));\n          }\n\n          var $okButton = h(BButton, {\n            props: {\n              variant: this.okVariant,\n              size: this.buttonSize,\n              disabled: this.okDisabled || this.busy || this.isTransitioning\n            },\n            // TODO: Rename slot to `ok-button` and deprecate `modal-ok`\n            domProps: this.hasNormalizedSlot(SLOT_NAME_MODAL_OK) ? {} : htmlOrText(this.okTitleHtml, this.okTitle),\n            on: {\n              click: this.onOk\n            },\n            ref: 'ok-button'\n          }, // TODO: Rename slot to `ok-button` and deprecate `modal-ok`\n          this.normalizeSlot(SLOT_NAME_MODAL_OK));\n          $modalFooter = [$cancelButton, $okButton];\n        }\n\n        $footer = h('footer', {\n          staticClass: 'modal-footer',\n          class: this.footerClasses,\n          attrs: {\n            id: this.modalFooterId\n          },\n          ref: 'footer'\n        }, [$modalFooter]);\n      } // Assemble modal content\n\n\n      var $modalContent = h('div', {\n        staticClass: 'modal-content',\n        class: this.contentClass,\n        attrs: {\n          id: this.modalContentId,\n          tabindex: '-1'\n        },\n        ref: 'content'\n      }, [$header, $body, $footer]); // Tab traps to prevent page from scrolling to next element in\n      // tab index during enforce-focus tab cycle\n\n      var $tabTrapTop = h();\n      var $tabTrapBottom = h();\n\n      if (this.isVisible && !this.noEnforceFocus) {\n        $tabTrapTop = h('span', {\n          attrs: {\n            tabindex: '0'\n          },\n          ref: 'top-trap'\n        });\n        $tabTrapBottom = h('span', {\n          attrs: {\n            tabindex: '0'\n          },\n          ref: 'bottom-trap'\n        });\n      } // Modal dialog wrapper\n\n\n      var $modalDialog = h('div', {\n        staticClass: 'modal-dialog',\n        class: this.dialogClasses,\n        on: {\n          mousedown: this.onDialogMousedown\n        },\n        ref: 'dialog'\n      }, [$tabTrapTop, $modalContent, $tabTrapBottom]); // Modal\n\n      var $modal = h('div', {\n        staticClass: 'modal',\n        class: this.modalClasses,\n        style: this.modalStyles,\n        attrs: this.computedModalAttrs,\n        on: {\n          keydown: this.onEsc,\n          click: this.onClickOut\n        },\n        directives: [{\n          name: 'show',\n          value: this.isVisible\n        }],\n        ref: 'modal'\n      }, [$modalDialog]); // Wrap modal in transition\n      // Sadly, we can't use `BVTransition` here due to the differences in\n      // transition durations for `.modal` and `.modal-dialog`\n      // At least until https://github.com/vuejs/vue/issues/9986 is resolved\n\n      $modal = h('transition', {\n        props: {\n          enterClass: '',\n          enterToClass: '',\n          enterActiveClass: '',\n          leaveClass: '',\n          leaveActiveClass: '',\n          leaveToClass: ''\n        },\n        on: {\n          beforeEnter: this.onBeforeEnter,\n          enter: this.onEnter,\n          afterEnter: this.onAfterEnter,\n          beforeLeave: this.onBeforeLeave,\n          leave: this.onLeave,\n          afterLeave: this.onAfterLeave\n        }\n      }, [$modal]); // Modal backdrop\n\n      var $backdrop = h();\n\n      if (!this.hideBackdrop && this.isVisible) {\n        $backdrop = h('div', {\n          staticClass: 'modal-backdrop',\n          attrs: {\n            id: this.modalBackdropId\n          }\n        }, // TODO: Rename slot to `backdrop` and deprecate `modal-backdrop`\n        this.normalizeSlot(SLOT_NAME_MODAL_BACKDROP));\n      }\n\n      $backdrop = h(BVTransition, {\n        props: {\n          noFade: this.noFade\n        }\n      }, [$backdrop]); // Assemble modal and backdrop in an outer <div>\n\n      return h('div', {\n        style: this.modalOuterStyle,\n        attrs: this.computedAttrs,\n        key: \"modal-outer-\".concat(this[COMPONENT_UID_KEY])\n      }, [$modal, $backdrop]);\n    }\n  },\n  render: function render(h) {\n    if (this.static) {\n      return this.lazy && this.isHidden ? h() : this.makeModal(h);\n    } else {\n      return this.isHidden ? h() : h(BVTransporter, [this.makeModal(h)]);\n    }\n  }\n});"]}]}