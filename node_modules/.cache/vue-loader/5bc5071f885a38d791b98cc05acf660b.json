{"remainingRequest":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/vue-loader/lib/index.js??vue-loader-options!/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/src/views/app/tools/applications/catch-up.vue?vue&type=script&lang=js&","dependencies":[{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/src/views/app/tools/applications/catch-up.vue","mtime":1625861420472},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8qIGVzbGludC1kaXNhYmxlIHZ1ZS9uby1zaWRlLWVmZmVjdHMtaW4tY29tcHV0ZWQtcHJvcGVydGllcyAqLwovKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqLwppbXBvcnQgeyBFdmVudEJ1cyB9IGZyb20gIi4uLy4uLy4uLy4uL3NlcnZpY2VzL2VidXMiOwppbXBvcnQgeyBodHRwU2VydmljZSB9IGZyb20gIi4uLy4uLy4uLy4uL3NlcnZpY2VzL2h0dHAiOwppbXBvcnQgeyBtYXBHZXR0ZXJzLCBtYXBBY3Rpb25zIH0gZnJvbSAidnVleCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRhdGVPcHRpb25zOiB7IHdlZWtkYXk6ICdsb25nJywgeWVhcjogJ251bWVyaWMnLCBtb250aDogJ2xvbmcnLCBkYXk6ICdudW1lcmljJyB9LAogICAgICBhY3RpdmVUYWI6IDAsCiAgICAgIHNlYXJjaDogbnVsbCwKICAgICAgaXNMb2FkaW5nOiBmYWxzZSwKICAgICAgc3RhdGlvbnM6IFtdLAogICAgICBzZWxlY3RlZDogbnVsbCwKICAgICAgc2VsZWN0ZWRTdGF0aW9uOiBudWxsLAogICAgICBtb3JlSW5mb01vZGFsOiBmYWxzZSwKICAgICAgeGRQcm86IHsKICAgICAgICBtb2RhbDogZmFsc2UsCiAgICAgICAgeGRwcm9faWQ6IDAsCiAgICAgICAgZG93bmxvYWRfZm9sZGVyOiAiIiwKICAgICAgfSwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyhbImN1cnJlbnRVc2VyIiwgInNldHRpbmdzIiwgInhkUHJvSW5zdGFuY2VzIiwgIm1vdmllU2VyaWVQbGF5bGlzdHMiLCAibW92aWVTZXJpZVBsYXlsaXN0IiwgImNhdGNoVXBHcm91cCIsICJjYXRjaFVwRGF5Il0pLAogICAgc2hvd1Rvb2x0aXBzICgpIHsKICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3Muc2hvd1Rvb2x0aXBzOwogICAgfSwKICAgIHNlYXJjaEZpbHRlcmVkKCkgewogICAgICBpZiAodGhpcy5zZWFyY2ggPT09IG51bGwpIHsKICAgICAgICByZXR1cm4gdGhpcy5zdHJlYW1zOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciByZSA9IG5ldyBSZWdFeHAodGhpcy5zZWFyY2gsICJpIik7CiAgICAgICAgcmV0dXJuIHRoaXMuc3RyZWFtcy5maWx0ZXIoKHN0cmVhbSkgPT4gewogICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgU3RyaW5nKHN0cmVhbS5zdHJlYW1fdHZnX25hbWUpLm1hdGNoKHJlKSB8fAogICAgICAgICAgICBTdHJpbmcoc3RyZWFtLnN0cmVhbV90dmdfaWQpLm1hdGNoKHJlKSB8fAogICAgICAgICAgICBTdHJpbmcoc3RyZWFtLnN0cmVhbV90dmdfbG9nbykubWF0Y2gocmUpIHx8CiAgICAgICAgICAgIFN0cmluZyhzdHJlYW0ucGxheWxpc3QpLm1hdGNoKHJlKSB8fAogICAgICAgICAgICBTdHJpbmcoc3RyZWFtLmdyb3VwKS5tYXRjaChyZSkKICAgICAgICAgICk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBjYW5Eb3dubG9hZCgpIHsKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWQgIT09IG51bGwpIHsKICAgICAgICBsZXQgbm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgICAgbGV0IG1heCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gKDg2NDAwMDAwICogdGhpcy5zZWxlY3RlZFN0YXRpb24uc291cmNlX3R2X2FyY2hpdmVfZHVyYXRpb24pOwogICAgICAgIHJldHVybiBuZXcgRGF0ZSh0aGlzLnNlbGVjdGVkLnN0YXJ0KS5nZXRUaW1lKCkgPiBtYXggJiYgbmV3IERhdGUodGhpcy5zZWxlY3RlZC5zdG9wKS5nZXRUaW1lKCkgPCBub3c7CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOyAKICAgIH0sCiAgICB4ZFByb0luc3RhbmNlSXRlbXMoKSB7CiAgICAgIHJldHVybiB0aGlzLnhkUHJvSW5zdGFuY2VzLm1hcCgoaW5zdGFuY2UpID0+IHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgdGV4dDogaW5zdGFuY2UubmFtZSwKICAgICAgICAgIHZhbHVlOiBpbnN0YW5jZS5pZCwKICAgICAgICB9OwogICAgICB9KTsKICAgIH0sCiAgICBwcm9ncmFtbWVDb250ZXh0ICgpIHsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgcmV0dXJuIFsKICAgICAgICB7CiAgICAgICAgICBpY29uOiAibGEtdHYiLAogICAgICAgICAgdGV4dDogdm0uJHQoIm1vdmllcy50b29sdGlwLXNob3ctbW9yZSIpLAogICAgICAgICAgb25DbGljazogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAodm0uc2VsZWN0ZWQgIT09IG51bGwpIHsKICAgICAgICAgICAgICB2bS5tb3JlSW5mb01vZGFsID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGRpdmlkZXI6IHRydWUsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBpY29uOiAibGEtZG93bmxvYWQiLAogICAgICAgICAgdGV4dDogdm0uJHQoIm1vdmllcy5kb3dubG9hZCIpLAogICAgICAgICAgb25DbGljazogZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2bS5kb3dubG9hZE1vZGFsKHRydWUpOwogICAgICAgICAgfSwKICAgICAgICB9LAogICAgICBdOwogICAgfSwKICAgIHNlbGVjdGVkU3RhdGlvbk5hbWUoKSB7CiAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkU3RhdGlvbiA/IHRoaXMuc2VsZWN0ZWRTdGF0aW9uLnN0cmVhbV90dmdfbmFtZSA6ICIiOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLi4ubWFwQWN0aW9ucyhbImxvYWRDYXRjaFVwRGF5cyIsICJhZGR4ZFByb0Rvd25sb2FkIiwgImxvYWR4ZFByb0luc3RhbmNlcyJdKSwKICAgIHNlYXJjaFN0cmVhbShzZWFyY2gpIHsKICAgICAgaWYgKHNlYXJjaC5sZW5ndGggPT09IDApIHsKICAgICAgICB0aGlzLnNlYXJjaCA9IG51bGw7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zZWFyY2ggPSBzZWFyY2g7CiAgICAgIH0KICAgIH0sCiAgICBwcmludFN0cmVhbXMoKSB7CiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzdHJlYW1zIikucHJpbnQoKTsKICAgIH0sCiAgICBmb3JtYXREYXRlKGRhdGUpIHsKICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGUpLnRvTG9jYWxlRGF0ZVN0cmluZygKICAgICAgICB0aGlzLiR0KCJkYXRlLmxvY2FsZSIpLAogICAgICAgIHRoaXMuZGF0ZU9wdGlvbnMKICAgICAgKTsKICAgIH0sCiAgICBmb3JtYXRUaW1lKGRhdGUpIHsKICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGUpLnRvTG9jYWxlVGltZVN0cmluZygKICAgICAgICB0aGlzLiR0KCJkYXRlLmxvY2FsZSIpLAogICAgICAgIHsgaG91cjogJzItZGlnaXQnLCBtaW51dGU6JzItZGlnaXQnIH0KICAgICAgKTsKICAgIH0sCiAgICBkYXRlUmFuZ2Uoc3RhcnREYXRlLCBlbmREYXRlKSB7CiAgICAgIGNvbnN0IGRhdGVBcnJheSA9IFtdOwogICAgICBsZXQgY3VycmVudERhdGUgPSBuZXcgRGF0ZShzdGFydERhdGUpOwoKICAgICAgd2hpbGUgKGN1cnJlbnREYXRlIDw9IG5ldyBEYXRlKGVuZERhdGUpKSB7CiAgICAgICAgZGF0ZUFycmF5LnB1c2goewogICAgICAgICAgdGV4dDogdGhpcy5mb3JtYXREYXRlKG5ldyBEYXRlKGN1cnJlbnREYXRlKSksCiAgICAgICAgICB2YWx1ZTogbmV3IERhdGUoY3VycmVudERhdGUpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXQogICAgICAgIH0pOwogICAgICAgIC8vIFVzZSBVVEMgZGF0ZSB0byBwcmV2ZW50IHByb2JsZW1zIHdpdGggdGltZSB6b25lcyBhbmQgRFNUCiAgICAgICAgY3VycmVudERhdGUuc2V0VVRDRGF0ZShjdXJyZW50RGF0ZS5nZXRVVENEYXRlKCkgKyAxKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGRhdGVBcnJheTsKICAgIH0sCiAgICBsb2FkU3RhdGlvbnMoKSB7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgaHR0cFNlcnZpY2UuZ2V0KGBsaXZlL2NhdGNoLXVwLyR7dGhpcy5tb3ZpZVNlcmllUGxheWxpc3R9LyR7dGhpcy5jYXRjaFVwR3JvdXB9LyR7dGhpcy5jYXRjaFVwRGF5fWApLnRoZW4oKHJlcykgPT4gewogICAgICAgIGlmIChyZXMuc3RhdHVzID09PSB0cnVlKSB7CiAgICAgICAgICB0aGlzLnN0YXRpb25zID0gcmVzLmRhdGE7CiAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgc2VsZWN0UHJvZ3JhbW1lKHByb2dyYW1tZSwgc3RhdGlvbikgewogICAgICB0aGlzLnNlbGVjdGVkID0gcHJvZ3JhbW1lOwogICAgICB0aGlzLnNlbGVjdGVkU3RhdGlvbiA9IHN0YXRpb247CiAgICAgIHRoaXMubW9yZUluZm9Nb2RhbCA9IHRydWU7CiAgICB9LAogICAgb3BlbkNvbnRleHQoZSkgewogICAgICBpZiAoZS5zcmNFbGVtZW50ICYmIGUuc3JjRWxlbWVudC5kYXRhc2V0ICYmIGUuc3JjRWxlbWVudC5kYXRhc2V0LnByb2dyYW1tZSAmJiBlLnNyY0VsZW1lbnQuZGF0YXNldC5zdGF0aW9uKSB7CiAgICAgICAgdGhpcy5zZWxlY3RlZCA9IHRoaXMuc3RhdGlvbnNbZS5zcmNFbGVtZW50LmRhdGFzZXQuc3RhdGlvbl0ucHJvZ3JhbW1lc1tlLnNyY0VsZW1lbnQuZGF0YXNldC5wcm9ncmFtbWVdOwogICAgICAgIHRoaXMuc2VsZWN0ZWRTdGF0aW9uID0gdGhpcy5zdGF0aW9uc1tlLnNyY0VsZW1lbnQuZGF0YXNldC5zdGF0aW9uXTsKICAgICAgfQogICAgICB0aGlzLiRyZWZzWydwcm9ncmFtbWUtY29udGV4dCddLm9wZW4oKTsKICAgIH0sCiAgICBmb3JtYXREYXRlRG93bmxvYWQoZGF0ZSkgewogICAgICB2YXIgZCA9IG5ldyBEYXRlKGRhdGUpLAogICAgICAgICAgbW9udGggPSAnJyArIChkLmdldE1vbnRoKCkgKyAxKSwKICAgICAgICAgIGRheSA9ICcnICsgZC5nZXREYXRlKCksCiAgICAgICAgICB5ZWFyID0gZC5nZXRGdWxsWWVhcigpOwoKICAgICAgaWYgKG1vbnRoLmxlbmd0aCA8IDIpIAogICAgICAgICAgbW9udGggPSAnMCcgKyBtb250aDsKICAgICAgaWYgKGRheS5sZW5ndGggPCAyKSAKICAgICAgICAgIGRheSA9ICcwJyArIGRheTsKCiAgICAgIGxldCBob3VyICAgID0gJycgKyBkLmdldEhvdXJzKCk7CiAgICAgIGxldCBtaW51dGVzID0gJycgKyBkLmdldE1pbnV0ZXMoKTsKCiAgICAgIGlmIChob3VyLmxlbmd0aCA8IDIpIAogICAgICAgICAgaG91ciA9ICcwJyArIGhvdXI7CiAgICAgIGlmIChtaW51dGVzLmxlbmd0aCA8IDIpIAogICAgICAgICAgbWludXRlcyA9ICcwJyArIG1pbnV0ZXM7CgogICAgICByZXR1cm4gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9OiR7aG91cn06JHttaW51dGVzfTowMGA7CiAgICB9LAogICAgZG93bmxvYWRNb2RhbChzaG93LCBzYXZlID0gZmFsc2UpIHsKICAgICAgaWYgKHNob3cpIHsKICAgICAgICB0aGlzLm1vcmVJbmZvTW9kYWwgPSBmYWxzZTsKICAgICAgfQogICAgICBpZiAoc2F2ZSkgewogICAgICAgIGxldCBwbGF5bGlzdCA9IHRoaXMubW92aWVTZXJpZVBsYXlsaXN0cy5maW5kKHAgPT4gcC52YWx1ZSA9PT0gdGhpcy5tb3ZpZVNlcmllUGxheWxpc3QpLnBsYXlsaXN0OwogICAgICAgIGxldCBkb3dubG9hZCA9IHsKICAgICAgICAgIHVzZXJfaWQ6IHRoaXMuY3VycmVudFVzZXIudXNlci5pZCwKICAgICAgICAgIHhkcHJvX2lkOiB0aGlzLnhkUHJvLnhkcHJvX2lkLAogICAgICAgICAgZmlsZW5hbWU6IGAke3RoaXMuc2VsZWN0ZWQudGl0bGV9LnRzYCwKICAgICAgICAgIGZpbGVfZXh0ZW5zaW9uOiAndHMnLAogICAgICAgICAgdHlwZTogMywKICAgICAgICAgIGVuYWJsZWQ6IDAsCiAgICAgICAgICBkb3dubG9hZF9mb2xkZXI6IHRoaXMueGRQcm8uZG93bmxvYWRfZm9sZGVyLAogICAgICAgICAgZG93bmxvYWRfdXJsOiBgaHR0cDovLyR7cGxheWxpc3Quc291cmNlX2hvc3R9OiR7U3RyaW5nKHBsYXlsaXN0LnNvdXJjZV9wb3J0KS5sZW5ndGggPyBwbGF5bGlzdC5zb3VyY2VfcG9ydCA6ICc4MCd9L3RpbWVzaGlmdC8ke3BsYXlsaXN0LnNvdXJjZV91c2VybmFtZX0vJHtwbGF5bGlzdC5zb3VyY2VfcGFzc3dvcmR9LyR7TWF0aC5jZWlsKCgobmV3IERhdGUodGhpcy5zZWxlY3RlZC5zdG9wKS5nZXRUaW1lKCkgLSBuZXcgRGF0ZSh0aGlzLnNlbGVjdGVkLnN0YXJ0KS5nZXRUaW1lKCkpIC8gMTAwMCkgLyA2MCl9LyR7dGhpcy5mb3JtYXREYXRlRG93bmxvYWQodGhpcy5zZWxlY3RlZC5zdGFydCl9LyR7dGhpcy5zZWxlY3RlZFN0YXRpb24uc291cmNlX3N0cmVhbV9pZH0udHNgLAogICAgICAgICAgZG93bmxvYWRfaG9zdDogcGxheWxpc3Quc291cmNlX2hvc3QsCiAgICAgICAgICBkb3dubG9hZF9wb3J0OiBwbGF5bGlzdC5zb3VyY2VfcG9ydCwKICAgICAgICAgIGRvd25sb2FkX3VzZXJuYW1lOiBwbGF5bGlzdC5zb3VyY2VfdXNlcm5hbWUsCiAgICAgICAgICBkb3dubG9hZF9wYXNzd29yZDogcGxheWxpc3Quc291cmNlX3Bhc3N3b3JkCiAgICAgICAgfTsKICAgICAgICB0aGlzLmFkZHhkUHJvRG93bmxvYWQoZG93bmxvYWQpCiAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgdGhpcy4kbm90aWZ5KAogICAgICAgICAgICAgICAgInByaW1hcnkiLAogICAgICAgICAgICAgICAgdGhpcy4kdCgicHJvZmlsZS5zdWNjZXNzIiksCiAgICAgICAgICAgICAgICB0aGlzLiR0KCJ4ZC1wcm8uZG93bmxvYWQtc2F2ZS1zdWNjZXNzIiksCiAgICAgICAgICAgICAgICAibGEtdXNlci1zaGllbGQiLAogICAgICAgICAgICAgICAgeyBkdXJhdGlvbjogNTAwMCwgcGVybWFuZW50OiBmYWxzZSB9CiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuJG5vdGlmeSgKICAgICAgICAgICAgICAiZXJyb3IiLAogICAgICAgICAgICAgIHRoaXMuJHQoInByb2ZpbGUuZmFpbGVkIiksCiAgICAgICAgICAgICAgdGhpcy4kdCgieGQtcHJvLmRvd25sb2FkLXNhdmUtZXJyb3IiKSwKICAgICAgICAgICAgICAibGEtdXNlci1zaGllbGQiLAogICAgICAgICAgICAgIHsgZHVyYXRpb246IDUwMDAsIHBlcm1hbmVudDogZmFsc2UgfQogICAgICAgICAgICApOwogICAgICAgICAgfSk7CiAgICAgIH0KICAgICAgdGhpcy54ZFByby5tb2RhbCA9IHNob3c7CiAgICB9LAogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGxldCBzdGFydCA9IG5ldyBEYXRlKCk7CiAgICBsZXQgZW5kICAgPSBuZXcgRGF0ZShzdGFydC5nZXRUaW1lKCkgLSAoODY0MDAwMDAgKiA3KSkKICAgIHRoaXMubG9hZENhdGNoVXBEYXlzKHRoaXMuZGF0ZVJhbmdlKGVuZCwgc3RhcnQpLnJldmVyc2UoKSk7CiAgfSwKICBiZWZvcmVNb3VudCgpIHsKICAgIHRoaXMubG9hZHhkUHJvSW5zdGFuY2VzKCk7CiAgICBpZiAodGhpcy5tb3ZpZVNlcmllUGxheWxpc3QgJiYgdGhpcy5jYXRjaFVwR3JvdXAgJiYgdGhpcy5jYXRjaFVwRGF5KSB7CiAgICAgIHRoaXMubG9hZFN0YXRpb25zKCk7CiAgICB9CiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoInJpZ2h0LW1lbnUiKTsKICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgiY2F0Y2gtdXAtYm9keSIpOwogICAgRXZlbnRCdXMuJG9uKCJzZWFyY2giLCB0aGlzLnNlYXJjaFN0cmVhbSk7CiAgICBFdmVudEJ1cy4kb24oInByaW50IiwgdGhpcy5wcmludFN0cmVhbXMpOwogIH0sCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgicmlnaHQtbWVudSIpOwogICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCJjYXRjaC11cC1ib2R5Iik7CiAgICBFdmVudEJ1cy4kb2ZmKCJzZWFyY2giLCB0aGlzLnNlYXJjaFN0cmVhbSk7CiAgICBFdmVudEJ1cy4kb2ZmKCJwcmludCIsIHRoaXMucHJpbnRTdHJlYW1zKTsKICB9LAogIHdhdGNoOiB7CiAgICBtb3ZpZVNlcmllUGxheWxpc3Q6IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHRoaXMubW92aWVTZXJpZVBsYXlsaXN0KSB7CiAgICAgICAgdGhpcy5sb2FkU3RhdGlvbnMoKTsKICAgICAgfQogICAgfSwKICAgIGNhdGNoVXBHcm91cDogZnVuY3Rpb24gKCkgewogICAgICBpZiAodGhpcy5tb3ZpZVNlcmllUGxheWxpc3QgJiYgdGhpcy5jYXRjaFVwR3JvdXAgJiYgdGhpcy5jYXRjaFVwRGF5KSB7CiAgICAgICAgdGhpcy5sb2FkU3RhdGlvbnMoKTsKICAgICAgfQogICAgfSwKICAgIGNhdGNoVXBEYXk6IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHRoaXMubW92aWVTZXJpZVBsYXlsaXN0ICYmIHRoaXMuY2F0Y2hVcEdyb3VwICYmIHRoaXMuY2F0Y2hVcERheSkgewogICAgICAgIHRoaXMubG9hZFN0YXRpb25zKCk7CiAgICAgIH0KICAgIH0sCiAgICAieGRQcm8ueGRwcm9faWQiOiBmdW5jdGlvbiAodmFsKSB7CiAgICAgIGxldCBpbnN0YW5jZSA9IHRoaXMueGRQcm9JbnN0YW5jZXMuZmluZCgoaW5zdGFuY2UpID0+IHsKICAgICAgICByZXR1cm4gaW5zdGFuY2UuaWQgPT0gdmFsOwogICAgICB9KTsKICAgICAgaWYgKGluc3RhbmNlKSB7CiAgICAgICAgdGhpcy54ZFByby5kb3dubG9hZF9mb2xkZXIgPSBpbnN0YW5jZS5kb3dubG9hZF9mb2xkZXI7CiAgICAgIH0KICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["catch-up.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+HA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"catch-up.vue","sourceRoot":"src/views/app/tools/applications","sourcesContent":["<template>\n  <erd-row class=\"m-0 p-0\"> \n    <!--  \n\n      DOWNLOAD EDITOR\n\n    -->\n    <erd-modal\n      v-show=\"moreInfoModal\"\n      @close=\"moreInfoModal = false\"\n      :title=\"selectedStationName\"\n      class=\"select-none\"\n      small\n    >\n      <div class=\"px-2\" v-if=\"selected\">\n        <div class=\"programme-modal-date\">\n          <div class=\"day\">{{ new Date(selected.start).toLocaleDateString($t(\"date.locale\"), { weekday: 'long' }) }}</div>\n          <div class=\"date\">{{ formatTime(selected.start) }} - {{ formatTime(selected.stop) }}</div>\n        </div>\n        <div class=\"programme-modal\">\n          <div class=\"title\">{{ selected.title }}</div>\n          <div class=\"subtitle\" v-if=\"selected.subtitle.length\">{{ selected.subtitle }}</div>\n          <div class=\"description\">{{ selected.description }}</div>\n        </div>\n      </div>\n      <template v-slot:footer>\n        <erd-button\n          icon=\"la-download\"\n          class=\"mr-1\"\n          variant=\"primary\"\n          :disabled=\"!canDownload\"\n          @click=\"downloadModal(true)\"\n          >{{ $t(\"movies.download\") }}</erd-button\n        >\n        <erd-button\n          @click=\"moreInfoModal = false\"\n          icon=\"la-times\"\n          variant=\"danger\"\n          >{{ $t(\"general.close\") }}</erd-button\n        >\n      </template>\n    </erd-modal>\n    <!--  \n\n      XD-PRO DOWNLOAD\n\n    -->\n    <erd-modal\n      v-show=\"xdPro.modal\"\n      @close=\"downloadModal(false)\"\n      :title=\"$t('xd-pro.xd-pro')\"\n      class=\"select-none\"\n      small\n    >\n      <div class=\"px-2\" style=\"min-height: 250px\">\n        <label class=\"w-100\">{{ $t(\"xd-pro.xd-pro-instance\") }}</label>\n        <erd-select\n          class=\"mt-1 mb-2 w-100\"\n          v-model=\"xdPro.xdpro_id\"\n          :items=\"xdProInstanceItems\"\n        ></erd-select>\n        <label class=\"w-100\">{{ $t(\"xd-pro.download-folder\") }}</label>\n        <erd-input\n          class=\"mt-1 mb-2 w-100\"\n          v-model=\"xdPro.download_folder\"\n        ></erd-input>\n      </div>\n      <template v-slot:footer>\n        <erd-button\n          @click=\"downloadModal(false)\"\n          icon=\"la-times\"\n          class=\"mr-1\"\n          variant=\"danger\"\n          >{{ $t(\"general.cancel\") }}</erd-button\n        >\n        <erd-button\n          icon=\"la-check\"\n          variant=\"success\"\n          :disabled=\"xdPro.xdpro_id == 0\"\n          @click=\"downloadModal(false, true)\"\n          >{{ $t(\"general.ok\") }}</erd-button\n        >\n      </template>\n    </erd-modal>\n    <erd-spinner v-if=\"isLoading\" size=\"lg\" overlay absolute></erd-spinner>\n    <div class=\"catch-up-grid my-0 pb-0 pt-2\">\n      <perfect-scrollbar>\n        <div class=\"catch-up-stations-grid\" :style=\"`width: calc(calc(100vh / 4) * ${stations.length}`\">\n          <erd-context-menu\n            :items=\"programmeContext\"\n            depth=\"1\"\n            ref=\"programme-context\"\n          ></erd-context-menu>\n          <div v-for=\"(station, index) in stations\" :key=\"`station-${index}-${station.stream_tvg_name}`\" class=\"catch-up-station\">\n            <div class=\"station-head\">\n              <img :src=\"station.stream_tvg_logo\" class=\"station-icon\">\n              <div class=\"station-title\">{{ station.stream_tvg_name }}</div>\n            </div>\n            <div class=\"programmes\">\n              <perfect-scrollbar>\n                <div \n                  :data-programme=\"pindex\"\n                  :data-station=\"index\"\n                  class=\"programme\" \n                  :class=\"{active: selected === programme}\" \n                  v-for=\"(programme, pindex) in station.programmes\" \n                  :key=\"`station-${index}-programme-${pindex}`\" \n                  @click=\"selectProgramme(programme, station)\"\n                  @contextmenu.prevent=\"openContext\"\n                >\n                  <div class=\"programme-start-stop\" :data-programme=\"pindex\" :data-station=\"index\">\n                    {{ formatTime(programme.start) }}\n                  </div>\n                  <div class=\"programme-title\" :data-programme=\"pindex\" :data-station=\"index\">\n                    {{ programme.title }}\n                  </div>\n                </div>\n              </perfect-scrollbar>\n            </div>\n          </div>\n        </div>\n      </perfect-scrollbar>\n    </div>\n  </erd-row>\n</template>\n\n<script>\n/* eslint-disable vue/no-side-effects-in-computed-properties */\n/* eslint-disable no-unused-vars */\nimport { EventBus } from \"../../../../services/ebus\";\nimport { httpService } from \"../../../../services/http\";\nimport { mapGetters, mapActions } from \"vuex\";\n\nexport default {\n  data() {\n    return {\n      dateOptions: { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' },\n      activeTab: 0,\n      search: null,\n      isLoading: false,\n      stations: [],\n      selected: null,\n      selectedStation: null,\n      moreInfoModal: false,\n      xdPro: {\n        modal: false,\n        xdpro_id: 0,\n        download_folder: \"\",\n      },\n    };\n  },\n  computed: {\n    ...mapGetters([\"currentUser\", \"settings\", \"xdProInstances\", \"movieSeriePlaylists\", \"movieSeriePlaylist\", \"catchUpGroup\", \"catchUpDay\"]),\n    showTooltips () {\n      return this.settings.showTooltips;\n    },\n    searchFiltered() {\n      if (this.search === null) {\n        return this.streams;\n      } else {\n        var re = new RegExp(this.search, \"i\");\n        return this.streams.filter((stream) => {\n          return (\n            String(stream.stream_tvg_name).match(re) ||\n            String(stream.stream_tvg_id).match(re) ||\n            String(stream.stream_tvg_logo).match(re) ||\n            String(stream.playlist).match(re) ||\n            String(stream.group).match(re)\n          );\n        });\n      }\n    },\n    canDownload() {\n      if (this.selected !== null) {\n        let now = new Date().getTime();\n        let max = new Date().getTime() - (86400000 * this.selectedStation.source_tv_archive_duration);\n        return new Date(this.selected.start).getTime() > max && new Date(this.selected.stop).getTime() < now;\n      }\n      return false; \n    },\n    xdProInstanceItems() {\n      return this.xdProInstances.map((instance) => {\n        return {\n          text: instance.name,\n          value: instance.id,\n        };\n      });\n    },\n    programmeContext () {\n      let vm = this;\n      return [\n        {\n          icon: \"la-tv\",\n          text: vm.$t(\"movies.tooltip-show-more\"),\n          onClick: function () {\n            if (vm.selected !== null) {\n              vm.moreInfoModal = true;\n            }\n          },\n        },\n        {\n          divider: true,\n        },\n        {\n          icon: \"la-download\",\n          text: vm.$t(\"movies.download\"),\n          onClick: function () {\n            vm.downloadModal(true);\n          },\n        },\n      ];\n    },\n    selectedStationName() {\n      return this.selectedStation ? this.selectedStation.stream_tvg_name : \"\";\n    }\n  },\n  methods: {\n    ...mapActions([\"loadCatchUpDays\", \"addxdProDownload\", \"loadxdProInstances\"]),\n    searchStream(search) {\n      if (search.length === 0) {\n        this.search = null;\n      } else {\n        this.search = search;\n      }\n    },\n    printStreams() {\n      document.getElementById(\"streams\").print();\n    },\n    formatDate(date) {\n      return new Date(date).toLocaleDateString(\n        this.$t(\"date.locale\"),\n        this.dateOptions\n      );\n    },\n    formatTime(date) {\n      return new Date(date).toLocaleTimeString(\n        this.$t(\"date.locale\"),\n        { hour: '2-digit', minute:'2-digit' }\n      );\n    },\n    dateRange(startDate, endDate) {\n      const dateArray = [];\n      let currentDate = new Date(startDate);\n\n      while (currentDate <= new Date(endDate)) {\n        dateArray.push({\n          text: this.formatDate(new Date(currentDate)),\n          value: new Date(currentDate).toISOString().split('T')[0]\n        });\n        // Use UTC date to prevent problems with time zones and DST\n        currentDate.setUTCDate(currentDate.getUTCDate() + 1);\n      }\n\n      return dateArray;\n    },\n    loadStations() {\n      this.isLoading = true;\n      httpService.get(`live/catch-up/${this.movieSeriePlaylist}/${this.catchUpGroup}/${this.catchUpDay}`).then((res) => {\n        if (res.status === true) {\n          this.stations = res.data;\n          this.isLoading = false;\n        }\n      });\n    },\n    selectProgramme(programme, station) {\n      this.selected = programme;\n      this.selectedStation = station;\n      this.moreInfoModal = true;\n    },\n    openContext(e) {\n      if (e.srcElement && e.srcElement.dataset && e.srcElement.dataset.programme && e.srcElement.dataset.station) {\n        this.selected = this.stations[e.srcElement.dataset.station].programmes[e.srcElement.dataset.programme];\n        this.selectedStation = this.stations[e.srcElement.dataset.station];\n      }\n      this.$refs['programme-context'].open();\n    },\n    formatDateDownload(date) {\n      var d = new Date(date),\n          month = '' + (d.getMonth() + 1),\n          day = '' + d.getDate(),\n          year = d.getFullYear();\n\n      if (month.length < 2) \n          month = '0' + month;\n      if (day.length < 2) \n          day = '0' + day;\n\n      let hour    = '' + d.getHours();\n      let minutes = '' + d.getMinutes();\n\n      if (hour.length < 2) \n          hour = '0' + hour;\n      if (minutes.length < 2) \n          minutes = '0' + minutes;\n\n      return `${year}-${month}-${day}:${hour}:${minutes}:00`;\n    },\n    downloadModal(show, save = false) {\n      if (show) {\n        this.moreInfoModal = false;\n      }\n      if (save) {\n        let playlist = this.movieSeriePlaylists.find(p => p.value === this.movieSeriePlaylist).playlist;\n        let download = {\n          user_id: this.currentUser.user.id,\n          xdpro_id: this.xdPro.xdpro_id,\n          filename: `${this.selected.title}.ts`,\n          file_extension: 'ts',\n          type: 3,\n          enabled: 0,\n          download_folder: this.xdPro.download_folder,\n          download_url: `http://${playlist.source_host}:${String(playlist.source_port).length ? playlist.source_port : '80'}/timeshift/${playlist.source_username}/${playlist.source_password}/${Math.ceil(((new Date(this.selected.stop).getTime() - new Date(this.selected.start).getTime()) / 1000) / 60)}/${this.formatDateDownload(this.selected.start)}/${this.selectedStation.source_stream_id}.ts`,\n          download_host: playlist.source_host,\n          download_port: playlist.source_port,\n          download_username: playlist.source_username,\n          download_password: playlist.source_password\n        };\n        this.addxdProDownload(download)\n          .then((res) => {\n            if (res.status === true) {\n              this.$notify(\n                \"primary\",\n                this.$t(\"profile.success\"),\n                this.$t(\"xd-pro.download-save-success\"),\n                \"la-user-shield\",\n                { duration: 5000, permanent: false }\n              );\n            }\n          })\n          .catch(() => {\n            this.$notify(\n              \"error\",\n              this.$t(\"profile.failed\"),\n              this.$t(\"xd-pro.download-save-error\"),\n              \"la-user-shield\",\n              { duration: 5000, permanent: false }\n            );\n          });\n      }\n      this.xdPro.modal = show;\n    },\n  },\n  created() {\n    let start = new Date();\n    let end   = new Date(start.getTime() - (86400000 * 7))\n    this.loadCatchUpDays(this.dateRange(end, start).reverse());\n  },\n  beforeMount() {\n    this.loadxdProInstances();\n    if (this.movieSeriePlaylist && this.catchUpGroup && this.catchUpDay) {\n      this.loadStations();\n    }\n    document.body.classList.add(\"right-menu\");\n    document.body.classList.add(\"catch-up-body\");\n    EventBus.$on(\"search\", this.searchStream);\n    EventBus.$on(\"print\", this.printStreams);\n  },\n  beforeDestroy() {\n    document.body.classList.remove(\"right-menu\");\n    document.body.classList.remove(\"catch-up-body\");\n    EventBus.$off(\"search\", this.searchStream);\n    EventBus.$off(\"print\", this.printStreams);\n  },\n  watch: {\n    movieSeriePlaylist: function () {\n      if (this.movieSeriePlaylist) {\n        this.loadStations();\n      }\n    },\n    catchUpGroup: function () {\n      if (this.movieSeriePlaylist && this.catchUpGroup && this.catchUpDay) {\n        this.loadStations();\n      }\n    },\n    catchUpDay: function () {\n      if (this.movieSeriePlaylist && this.catchUpGroup && this.catchUpDay) {\n        this.loadStations();\n      }\n    },\n    \"xdPro.xdpro_id\": function (val) {\n      let instance = this.xdProInstances.find((instance) => {\n        return instance.id == val;\n      });\n      if (instance) {\n        this.xdPro.download_folder = instance.download_folder;\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n  .catch-up-body {\n    padding-bottom: 0px;\n    min-height: calc(100% - 120px);\n  }\n\n  .catch-up-grid {\n    width: 100%;\n    height: calc(100vh - 230px);\n\n    .ps {\n      width: 100%;\n      height: 100%;//calc(100vh - 320px);\n    }\n  }\n\n  .catch-up-stations-grid {\n    display: flex;\n    text-align: center;\n    min-height: 100%; \n    align-items: stretch;\n\n    .station-head {\n      position: sticky;\n      width: 100%;\n      display: block;\n      height: 50px;\n      line-height: 50px;\n      background: $separator-color-light;\n      border-top: 1px solid $separator-color;\n      border-bottom: 1px solid $separator-color;\n      box-sizing: border-box;\n      -moz-box-sizing: border-box;\n      -webkit-box-sizing: border-box;\n\n      .station-icon {\n        max-height: 24px;\n        vertical-align: middle;\n        margin-right: 0.25rem;\n      }\n\n      .station-title {\n        line-height: 24px;\n        display: inline-block;\n        vertical-align: middle;\n      }\n\n    }\n  }\n\n  .catch-up-station {\n    width: calc((100vh / 4) - 1px);\n    display: inline-block;\n    min-height: 100%;\n\n    &:nth-child(2) {\n      .station-head {\n        border-left: 1px solid $separator-color;\n      }\n    }\n    \n    &:last-child {\n      .station-head {\n        border-right: 1px solid $separator-color;\n      }\n    }\n\n    &:not(:last-child) {\n      border-right: 1px solid $separator-color;\n    }\n\n    .programmes {\n      box-sizing: border-box;\n      -moz-box-sizing: border-box;\n      -webkit-box-sizing: border-box;\n      height: calc(100vh - 300px);\n\n      .ps {\n        width: 100%;\n        height: 100%;\n        box-sizing: border-box;\n        -moz-box-sizing: border-box;\n        -webkit-box-sizing: border-box;\n        padding: 0.25rem;\n      }\n\n    }\n\n    .programme {\n      width: 100%;\n      height: 50px;\n      display: inline-block;\n      text-align: left;\n      box-sizing: border-box;\n      -moz-box-sizing: border-box;\n      -webkit-box-sizing: border-box;\n      cursor: pointer;\n      padding: 5px;\n      \n      &.active {\n        background-color: $theme-color-1;\n        color: $foreground-color;\n        border: 1px solid $theme-color-1;\n      }      \n      \n      &:hover:not(.active) {\n        padding: 4px;\n        background-color: $input-background;\n        color: $theme-color-1;\n        border: 1px solid $theme-color-1;\n      }\n\n      .programme-start-stop {\n        display: block;\n        float: left;\n        height: 100%;\n        width: 44px;\n      }\n\n      .programme-title {\n        display: block;\n        box-sizing: border-box;\n        -moz-box-sizing: border-box;\n        -webkit-box-sizing: border-box;\n        float: left;\n        height: 100%;\n        width: calc(100% - 50px);\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding-right: 5px;\n        font-weight: bold;\n      }\n    }\n  }\n\n  .programme-modal-date {\n    width: 120px;\n    float: left;\n    padding-top: 6px;\n\n    .day {\n      text-transform: capitalize;\n      font-weight: bold;\n    }\n\n    .date {\n\n    }\n  }\n\n  .programme-modal {\n    width: calc(100% - 120px);\n    float: left;\n\n    .title {\n      font-size: 18px;\n      font-weight: bold;\n    }\n\n    .subtitle {\n      font-weight: bold;\n    }\n\n    .description {\n      margin-top: 0.25rem;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n  }\n</style>\n"]}]}