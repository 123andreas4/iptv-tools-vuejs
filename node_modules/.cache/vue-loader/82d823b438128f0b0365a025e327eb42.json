{"remainingRequest":"/home/ernst/Desktop/IPTV-Tools/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ernst/Desktop/IPTV-Tools/src/views/app/administration/subscriptions.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ernst/Desktop/IPTV-Tools/src/views/app/administration/subscriptions.vue","mtime":1622301689265},{"path":"/home/ernst/Desktop/IPTV-Tools/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ernst/Desktop/IPTV-Tools/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/ernst/Desktop/IPTV-Tools/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ernst/Desktop/IPTV-Tools/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8qIGVzbGludC1kaXNhYmxlIHZ1ZS9uby1zaWRlLWVmZmVjdHMtaW4tY29tcHV0ZWQtcHJvcGVydGllcyAqLwppbXBvcnQgeyBFdmVudEJ1cyB9IGZyb20gIi4uLy4uLy4uL3NlcnZpY2VzL2VidXMiOwppbXBvcnQgeyBodHRwU2VydmljZSB9IGZyb20gIi4uLy4uLy4uL3NlcnZpY2VzL2h0dHAiOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAidnVleCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlYXJjaDogbnVsbCwKICAgICAgaXNMb2FkaW5nOiBmYWxzZSwKICAgICAgZnJvbTogMCwKICAgICAgdG86IDAsCiAgICAgIHRvdGFsOiAwLAogICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgZWRpdG9yOiBmYWxzZSwKICAgICAgZWRpdG9yU3Vic2NyaXB0aW9uOiBudWxsLAogICAgICBzdWJzY3JpcHRpb25zOiBbXSwKICAgICAgZmllbGRzOiBbCiAgICAgICAgeyBrZXk6ICJ1c2VyX2lkIiwgbGFiZWw6IHRoaXMuJHQoInVzZXJzLmlkIiksIHNvcnRhYmxlOiB0cnVlIH0sCiAgICAgICAgewogICAgICAgICAga2V5OiAic3Vic2NyaXB0aW9uX3R5cGUiLAogICAgICAgICAgbGFiZWw6IHRoaXMuJHQoInN1YnNjcmlwdGlvbnMudHlwZSIpLAogICAgICAgICAgc29ydGFibGU6IHRydWUsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBrZXk6ICJlbmFibGVkIiwKICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCJzdWJzY3JpcHRpb25zLmVuYWJsZWQiKSwKICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAga2V5OiAiY3JlYXRlZCIsCiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgidXNlcnMuY3JlYXRlZCIpLAogICAgICAgICAgc29ydGFibGU6IHRydWUsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBrZXk6ICJsYXN0X3VwZGF0ZWQiLAogICAgICAgICAgbGFiZWw6IHRoaXMuJHQoInVzZXJzLmxhc3QtdXBkYXRlZCIpLAogICAgICAgICAgc29ydGFibGU6IHRydWUsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBrZXk6ICJlbmRfZGF0ZSIsCiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgic3Vic2NyaXB0aW9ucy5lbmRfZGF0ZSIpLAogICAgICAgICAgc29ydGFibGU6IHRydWUsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBrZXk6ICJhY3Rpb25zIiwKICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCJ1c2Vycy5hY3Rpb25zIiksCiAgICAgICAgICBzb3J0YWJsZTogZmFsc2UsCiAgICAgICAgICB0aENsYXNzOiAidGV4dC1yaWdodCIsCiAgICAgICAgICB0ZENsYXNzOiAidGV4dC1yaWdodCIsCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgc3Vic2NyaXB0aW9uVHlwZXM6IFsKICAgICAgICB7IHZhbHVlOiAwLCB0ZXh0OiB0aGlzLiR0KCJzdGF0dXMuMCIpIH0sCiAgICAgICAgeyB2YWx1ZTogMSwgdGV4dDogdGhpcy4kdCgic3RhdHVzLjEiKSB9LAogICAgICAgIHsgdmFsdWU6IDIsIHRleHQ6IHRoaXMuJHQoInN0YXR1cy4yIikgfSwKICAgICAgICB7IHZhbHVlOiAzLCB0ZXh0OiB0aGlzLiR0KCJzdGF0dXMuMyIpIH0sCiAgICAgICAgeyB2YWx1ZTogNCwgdGV4dDogdGhpcy4kdCgic3RhdHVzLjQiKSB9LAogICAgICAgIHsgdmFsdWU6IDUsIHRleHQ6IHRoaXMuJHQoInN0YXR1cy41IikgfSwKICAgICAgICB7IHZhbHVlOiAxOTg1LCB0ZXh0OiB0aGlzLiR0KCJzdGF0dXMuMTk4NSIpIH0sCiAgICAgIF0sCiAgICAgIHBsYXlsaXN0VHlwZXM6IFsKICAgICAgICB7IHZhbHVlOiAwLCB0ZXh0OiB0aGlzLiR0KCJwbGF5bGlzdC10eXBlLjAiKSB9LAogICAgICAgIHsgdmFsdWU6IDEsIHRleHQ6IHRoaXMuJHQoInBsYXlsaXN0LXR5cGUuMSIpIH0sCiAgICAgICAgeyB2YWx1ZTogMiwgdGV4dDogdGhpcy4kdCgicGxheWxpc3QtdHlwZS4yIikgfSwKICAgICAgICB7IHZhbHVlOiAzLCB0ZXh0OiB0aGlzLiR0KCJwbGF5bGlzdC10eXBlLjMiKSB9LAogICAgICBdLAogICAgICBlbmFibGVkVHlwZXM6IFsKICAgICAgICB7IHZhbHVlOiAwLCB0ZXh0OiB0aGlzLiR0KCJnZW5lcmFsLm5vIikgfSwKICAgICAgICB7IHZhbHVlOiAxLCB0ZXh0OiB0aGlzLiR0KCJnZW5lcmFsLnllcyIpIH0sCiAgICAgIF0sCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoWyJjdXJyZW50VXNlciIsICJzZXR0aW5ncyJdKSwKICAgIHBlclBhZ2UoKSB7CiAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLnBlclBhZ2U7CiAgICB9LAogICAgc2VhcmNoRmlsdGVyZWQoKSB7CiAgICAgIGlmICh0aGlzLnNlYXJjaCA9PT0gbnVsbCkgewogICAgICAgIHJldHVybiB0aGlzLnN1YnNjcmlwdGlvbnM7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHJlID0gbmV3IFJlZ0V4cCh0aGlzLnNlYXJjaCwgImkiKTsKICAgICAgICByZXR1cm4gdGhpcy5zdWJzY3JpcHRpb25zLmZpbHRlcigoc3Vic2NyaXB0aW9uKSA9PiB7CiAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICBTdHJpbmcoc3Vic2NyaXB0aW9uLnN1YnNjcmlwdGlvbl90eXBlKS5tYXRjaChyZSkgfHwKICAgICAgICAgICAgU3RyaW5nKHN1YnNjcmlwdGlvbi5lbmFibGVkKS5tYXRjaChyZSkgfHwKICAgICAgICAgICAgU3RyaW5nKHN1YnNjcmlwdGlvbi51c2VyX2lkKS5tYXRjaChyZSkgfHwKICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoc3Vic2NyaXB0aW9uLm5vdGUpLm1hdGNoKHJlKSB8fAogICAgICAgICAgICBTdHJpbmcoc3Vic2NyaXB0aW9uLmVuZF9kYXRlKS5tYXRjaChyZSkgfHwKICAgICAgICAgICAgU3RyaW5nKHN1YnNjcmlwdGlvbi5jcmVhdGVkKS5tYXRjaChyZSkgfHwKICAgICAgICAgICAgU3RyaW5nKHN1YnNjcmlwdGlvbi5sYXN0X3VwZGF0ZWQpLm1hdGNoKHJlKSB8fAogICAgICAgICAgICB0aGlzLmZvcm1hdERhdGUoc3Vic2NyaXB0aW9uLmVuZF9kYXRlKS5tYXRjaChyZSkgfHwKICAgICAgICAgICAgdGhpcy5mb3JtYXREYXRlKHN1YnNjcmlwdGlvbi5jcmVhdGVkKS5tYXRjaChyZSkgfHwKICAgICAgICAgICAgdGhpcy5mb3JtYXREYXRlKHN1YnNjcmlwdGlvbi5sYXN0X3VwZGF0ZWQpLm1hdGNoKHJlKQogICAgICAgICAgKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHBhZ2VkKCkgewogICAgICB0aGlzLnRvdGFsID0gdGhpcy5zZWFyY2hGaWx0ZXJlZC5sZW5ndGg7CiAgICAgIHRoaXMuZnJvbSA9ICh0aGlzLmN1cnJlbnRQYWdlIC0gMSkgKiB0aGlzLnBlclBhZ2U7CiAgICAgIHRoaXMudG8gPQogICAgICAgIHRoaXMuZnJvbSArIHRoaXMucGVyUGFnZSA+IHRoaXMudG90YWwKICAgICAgICAgID8gdGhpcy50b3RhbAogICAgICAgICAgOiB0aGlzLmZyb20gKyB0aGlzLnBlclBhZ2U7CiAgICAgIHJldHVybiB0aGlzLnNlYXJjaEZpbHRlcmVkLnNsaWNlKHRoaXMuZnJvbSwgdGhpcy50byk7CiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgZm9ybWF0RGF0ZShkYXRlKSB7CiAgICAgIHJldHVybiBkYXRlID09IG51bGwgfHwgZGF0ZSA9PSB1bmRlZmluZWQKICAgICAgICA/ICItIgogICAgICAgIDogbmV3IERhdGUoZGF0ZSkudG9Mb2NhbGVTdHJpbmcoCiAgICAgICAgICAgIHRoaXMuJHQoImRhdGUubG9jYWxlIiksCiAgICAgICAgICAgIHRoaXMuZGF0ZU9wdGlvbnMKICAgICAgICAgICk7CiAgICB9LAogICAgbG9hZFN1YnNjcmlwdGlvbnMoKSB7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgaHR0cFNlcnZpY2UKICAgICAgICAuZ2V0KCJhZG1pbmlzdHJhdGlvbi9zdWJzY3JpcHRpb25zIikKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IHRydWUpIHsKICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gcmVzLmRhdGE7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuJG5vdGlmeSgKICAgICAgICAgICAgImVycm9yIiwKICAgICAgICAgICAgdGhpcy4kdCgicHJvZmlsZS5mYWlsZWQiKSwKICAgICAgICAgICAgdGhpcy4kdCgic3Vic2NyaXB0aW9ucy5sb2FkLWVycm9yIiksCiAgICAgICAgICAgICJsYS11c2VyLXNoaWVsZCIsCiAgICAgICAgICAgIHsgZHVyYXRpb246IDUwMDAsIHBlcm1hbmVudDogZmFsc2UgfQogICAgICAgICAgKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBlZGl0U3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbikgewogICAgICB0aGlzLmVkaXRvclN1YnNjcmlwdGlvbiA9IE9iamVjdC5hc3NpZ24oe30sIHN1YnNjcmlwdGlvbik7CiAgICAgIHRoaXMuZWRpdG9yU3Vic2NyaXB0aW9uLmVuZF9kYXRlID0KICAgICAgICB0aGlzLmVkaXRvclN1YnNjcmlwdGlvbi5lbmRfZGF0ZSAhPSBudWxsICYmCiAgICAgICAgdGhpcy5lZGl0b3JTdWJzY3JpcHRpb24uZW5kX2RhdGUgIT0gdW5kZWZpbmVkCiAgICAgICAgICA/IG5ldyBEYXRlKHRoaXMuZWRpdG9yU3Vic2NyaXB0aW9uLmVuZF9kYXRlKQogICAgICAgICAgOiBudWxsOwogICAgICB0aGlzLmVkaXRvciA9IHRydWU7CiAgICB9LAogICAgc2F2ZVN1YnNjcmlwdGlvbigpIHsKICAgICAgdGhpcy5lZGl0b3IgPSBmYWxzZTsKICAgICAgbGV0IHN1YnNjcmlwdGlvbiA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZWRpdG9yU3Vic2NyaXB0aW9uKTsKICAgICAgc3Vic2NyaXB0aW9uLmxhc3RfdXBkYXRlZCA9IG5ldyBEYXRlKCk7CiAgICAgIGRlbGV0ZSBzdWJzY3JpcHRpb24uaWQ7CiAgICAgIGh0dHBTZXJ2aWNlCiAgICAgICAgLnBvc3QoImFkbWluaXN0cmF0aW9uL3N1YnNjcmlwdGlvbi91cGRhdGUiLCB7CiAgICAgICAgICBpZDogdGhpcy5lZGl0b3JTdWJzY3JpcHRpb24uaWQsCiAgICAgICAgICBzdWJzY3JpcHRpb246IHN1YnNjcmlwdGlvbiwKICAgICAgICB9KQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gdHJ1ZSkgewogICAgICAgICAgICB0aGlzLiRub3RpZnkoCiAgICAgICAgICAgICAgInByaW1hcnkiLAogICAgICAgICAgICAgIHRoaXMuJHQoInByb2ZpbGUuc3VjY2VzcyIpLAogICAgICAgICAgICAgIHRoaXMuJHQoInN1YnNjcmlwdGlvbnMuc2F2ZS1zdWNjZXNzIiksCiAgICAgICAgICAgICAgImxhLXVzZXItc2hpZWxkIiwKICAgICAgICAgICAgICB7IGR1cmF0aW9uOiA1MDAwLCBwZXJtYW5lbnQ6IGZhbHNlIH0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgdGhpcy5sb2FkU3Vic2NyaXB0aW9ucygpOwogICAgICAgICAgICB0aGlzLmVkaXRvciA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICB0aGlzLiRub3RpZnkoCiAgICAgICAgICAgICJlcnJvciIsCiAgICAgICAgICAgIHRoaXMuJHQoInByb2ZpbGUuZmFpbGVkIiksCiAgICAgICAgICAgIHRoaXMuJHQoInN1YnNjcmlwdGlvbnMuc2F2ZS1lcnJvciIpLAogICAgICAgICAgICAibGEtdXNlci1zaGllbGQiLAogICAgICAgICAgICB7IGR1cmF0aW9uOiA1MDAwLCBwZXJtYW5lbnQ6IGZhbHNlIH0KICAgICAgICAgICk7CiAgICAgICAgfSk7CiAgICB9LAogICAgZGVsZXRlU3Vic2NyaXB0aW9uKGlkKSB7CiAgICAgIGh0dHBTZXJ2aWNlCiAgICAgICAgLnBvc3QoImFkbWluaXN0cmF0aW9uL3N1YnNjcmlwdGlvbi9kZWxldGUiLCB7IGlkOiBpZCB9KQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gdHJ1ZSkgewogICAgICAgICAgICB0aGlzLiRub3RpZnkoCiAgICAgICAgICAgICAgInByaW1hcnkiLAogICAgICAgICAgICAgIHRoaXMuJHQoInByb2ZpbGUuc3VjY2VzcyIpLAogICAgICAgICAgICAgIHRoaXMuJHQoInN1YnNjcmlwdGlvbnMuZGVsZXRlLXN1Y2Nlc3MiKSwKICAgICAgICAgICAgICAibGEtdXNlci1zaGllbGQiLAogICAgICAgICAgICAgIHsgZHVyYXRpb246IDUwMDAsIHBlcm1hbmVudDogZmFsc2UgfQogICAgICAgICAgICApOwogICAgICAgICAgICB0aGlzLmxvYWRTdWJzY3JpcHRpb25zKCk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuJG5vdGlmeSgKICAgICAgICAgICAgImVycm9yIiwKICAgICAgICAgICAgdGhpcy4kdCgicHJvZmlsZS5mYWlsZWQiKSwKICAgICAgICAgICAgdGhpcy4kdCgic3Vic2NyaXB0aW9ucy5kZWxldGUtZXJyb3IiKSwKICAgICAgICAgICAgImxhLXVzZXItc2hpZWxkIiwKICAgICAgICAgICAgeyBkdXJhdGlvbjogNTAwMCwgcGVybWFuZW50OiBmYWxzZSB9CiAgICAgICAgICApOwogICAgICAgIH0pOwogICAgfSwKICAgIGNhbmNlbFN1YnNjcmlwdGlvbigpIHsKICAgICAgdGhpcy5lZGl0b3IgPSBmYWxzZTsKICAgIH0sCiAgICB1c2VyKGlkKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAidXNlcnMiLAogICAgICAgIHBhcmFtczogeyBlZGl0b3I6IHRydWUsIGlkOiBpZCB9LAogICAgICB9KTsKICAgIH0sCiAgICBzZWFyY2hTdWJzY3JpcHRpb24oc2VhcmNoKSB7CiAgICAgIGlmIChzZWFyY2gubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy5zZWFyY2ggPSBudWxsOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2VhcmNoID0gc2VhcmNoOwogICAgICB9CiAgICB9LAogICAgcHJpbnRTdWJzY3JpcHRpb25zKCkgewogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3Vic2NyaXB0aW9ucyIpLnByaW50KCk7CiAgICB9LAogIH0sCiAgYmVmb3JlTW91bnQoKSB7CiAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zLmVkaXRvciAmJiB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQgIT09IHVuZGVmaW5lZCkgewogICAgICBodHRwU2VydmljZQogICAgICAgIC5nZXQoImFkbWluaXN0cmF0aW9uL3N1YnNjcmlwdGlvbnMiKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gdHJ1ZSkgewogICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSByZXMuZGF0YTsKICAgICAgICAgICAgbGV0IHN1YnNjcmlwdGlvbiA9IHRoaXMuc3Vic2NyaXB0aW9ucy5maW5kKAogICAgICAgICAgICAgIChzdWJzY3JpcHRpb24pID0+IHN1YnNjcmlwdGlvbi51c2VyX2lkID09PSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQKICAgICAgICAgICAgKTsKICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbikgewogICAgICAgICAgICAgIHRoaXMuZWRpdFN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuJG5vdGlmeSgKICAgICAgICAgICAgImVycm9yIiwKICAgICAgICAgICAgdGhpcy4kdCgicHJvZmlsZS5mYWlsZWQiKSwKICAgICAgICAgICAgdGhpcy4kdCgic3Vic2NyaXB0aW9ucy5sb2FkLWVycm9yIiksCiAgICAgICAgICAgICJsYS11c2VyLXNoaWVsZCIsCiAgICAgICAgICAgIHsgZHVyYXRpb246IDUwMDAsIHBlcm1hbmVudDogZmFsc2UgfQogICAgICAgICAgKTsKICAgICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMubG9hZFN1YnNjcmlwdGlvbnMoKTsKICAgIH0KICAgIEV2ZW50QnVzLiRvbigicmVmcmVzaCIsIHRoaXMubG9hZFN1YnNjcmlwdGlvbnMpOwogICAgRXZlbnRCdXMuJG9uKCJzYXZlIiwgdGhpcy5zYXZlU3Vic2NyaXB0aW9uKTsKICAgIEV2ZW50QnVzLiRvbigiY2FuY2VsIiwgdGhpcy5jYW5jZWxTdWJzY3JpcHRpb24pOwogICAgRXZlbnRCdXMuJG9uKCJzZWFyY2giLCB0aGlzLnNlYXJjaFN1YnNjcmlwdGlvbik7CiAgICBFdmVudEJ1cy4kb24oInByaW50IiwgdGhpcy5wcmludFN1YnNjcmlwdGlvbnMpOwogIH0sCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIEV2ZW50QnVzLiRvZmYoInJlZnJlc2giLCB0aGlzLmxvYWRTdWJzY3JpcHRpb25zKTsKICAgIEV2ZW50QnVzLiRvZmYoInNhdmUiLCB0aGlzLnNhdmVTdWJzY3JpcHRpb24pOwogICAgRXZlbnRCdXMuJG9mZigiY2FuY2VsIiwgdGhpcy5jYW5jZWxTdWJzY3JpcHRpb24pOwogICAgRXZlbnRCdXMuJG9mZigic2VhcmNoIiwgdGhpcy5zZWFyY2hTdWJzY3JpcHRpb24pOwogICAgRXZlbnRCdXMuJG9mZigicHJpbnQiLCB0aGlzLnByaW50U3Vic2NyaXB0aW9ucyk7CiAgfSwKICB3YXRjaDogewogICAgZnJvbTogZnVuY3Rpb24gKHZhbCkgewogICAgICBFdmVudEJ1cy4kZW1pdCgidXBkYXRlLWZyb20iLCB2YWwpOwogICAgfSwKICAgIHRvOiBmdW5jdGlvbiAodmFsKSB7CiAgICAgIEV2ZW50QnVzLiRlbWl0KCJ1cGRhdGUtdG8iLCB2YWwpOwogICAgfSwKICAgIHRvdGFsOiBmdW5jdGlvbiAodmFsKSB7CiAgICAgIEV2ZW50QnVzLiRlbWl0KCJ1cGRhdGUtdG90YWwiLCB2YWwpOwogICAgfSwKICAgIGVkaXRvcjogZnVuY3Rpb24gKHZhbCkgewogICAgICBFdmVudEJ1cy4kZW1pdCgidXBkYXRlLWVkaXRvciIsIHZhbCk7CiAgICB9LAogICAgImVkaXRvclN1YnNjcmlwdGlvbi5zdWJzY3JpcHRpb25fdHlwZSI6IGZ1bmN0aW9uICh2YWwpIHsKICAgICAgaWYgKHZhbC52YWx1ZSA9PT0gMTk4NSB8fCB2YWwgPT09IDE5ODUpIHsKICAgICAgICB0aGlzLmVkaXRvclN1YnNjcmlwdGlvbi5lbmRfZGF0ZSA9IG51bGw7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5lZGl0b3JTdWJzY3JpcHRpb24uZW5kX2RhdGUgPQogICAgICAgICAgdGhpcy5lZGl0b3JTdWJzY3JpcHRpb24uZW5kX2RhdGUgPT09IG51bGwKICAgICAgICAgICAgPyBuZXcgRGF0ZSgpCiAgICAgICAgICAgIDogdGhpcy5lZGl0b3JTdWJzY3JpcHRpb24uZW5kX2RhdGU7CiAgICAgIH0KICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["subscriptions.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsHA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"subscriptions.vue","sourceRoot":"src/views/app/administration","sourcesContent":["<template>\n  <erd-row class=\"m-0 p-0\">\n    <erd-spinner v-if=\"isLoading\" size=\"lg\" overlay absolute></erd-spinner>\n    <erd-col xl=\"12\" v-if=\"!editor\" id=\"subscriptions\">\n      <b-table :items=\"paged\" :fields=\"fields\" striped small>\n        <template v-slot:cell(user_id)=\"row\">\n          <router-link\n            :to=\"{\n              name: 'users',\n              params: { editor: true, id: row.item.user_id },\n            }\"\n            >{{ row.item.user_id }}</router-link\n          >\n        </template>\n        <template v-slot:cell(subscription_type)=\"row\">\n          {{ $t(`status.${row.item.subscription_type}`) }}\n        </template>\n        <template v-slot:cell(enabled)=\"row\">\n          <erd-badge\n            class=\"py-1\"\n            :variant=\"row.item.enabled ? 'success' : 'danger'\"\n            >{{\n              row.item.enabled ? $t(\"general.yes\") : $t(\"general.no\")\n            }}</erd-badge\n          >\n        </template>\n        <template v-slot:cell(created)=\"row\">\n          {{ formatDate(row.item.created) }}\n        </template>\n        <template v-slot:cell(last_updated)=\"row\">\n          {{ formatDate(row.item.last_updated) }}\n        </template>\n        <template v-slot:cell(end_date)=\"row\">\n          {{ formatDate(row.item.end_date) }}\n        </template>\n\n        <template v-slot:cell(actions)=\"row\">\n          <erd-button\n            variant=\"info\"\n            class=\"btn-table\"\n            @click=\"user(row.item.user_id)\"\n            ><i class=\"las la-user\"></i\n          ></erd-button>\n          <erd-button\n            variant=\"primary\"\n            class=\"btn-table\"\n            @click=\"editSubscription(row.item)\"\n            ><i class=\"las la-user-edit\"></i\n          ></erd-button>\n          <erd-button\n            variant=\"danger\"\n            class=\"btn-table\"\n            @click=\"deleteSubscription(row.item.id)\"\n            ><i class=\"las la-trash\"></i\n          ></erd-button>\n        </template>\n      </b-table>\n      <b-pagination\n        class=\"w-100 my-3\"\n        size=\"sm\"\n        align=\"center\"\n        :total-rows=\"total\"\n        :per-page=\"perPage\"\n        v-model=\"currentPage\"\n      >\n        <template v-slot:next-text>\n          <i class=\"las la-angle-right\" />\n        </template>\n        <template v-slot:prev-text>\n          <i class=\"las la-angle-left\" />\n        </template>\n        <template v-slot:first-text>\n          <i class=\"las la-angle-double-left\" />\n        </template>\n        <template v-slot:last-text>\n          <i class=\"las la-angle-double-right\" />\n        </template>\n      </b-pagination>\n    </erd-col>\n    <erd-col xl=\"12\" v-if=\"editor\">\n      <label for=\"subscription-type\">{{ $t(\"subscriptions.type\") }}</label>\n      <erd-select\n        id=\"subscription-type\"\n        class=\"mt-1 mb-2 w-100\"\n        :items=\"subscriptionTypes\"\n        v-model=\"editorSubscription.subscription_type\"\n      ></erd-select>\n      <label for=\"subscription-type\">{{\n        $t(\"subscriptions.playlist-type\")\n      }}</label>\n      <erd-select\n        id=\"playlist-type\"\n        class=\"mt-1 mb-2 w-100\"\n        :items=\"playlistTypes\"\n        v-model=\"editorSubscription.playlist_type\"\n      ></erd-select>\n      <label for=\"enabled\">{{ $t(\"subscriptions.enabled\") }}</label>\n      <erd-select\n        id=\"enabled\"\n        class=\"mt-1 mb-2 w-100\"\n        :items=\"enabledTypes\"\n        v-model=\"editorSubscription.enabled\"\n      ></erd-select>\n      <label for=\"end-date\" v-if=\"editorSubscription.end_date !== null\">{{\n        $t(\"subscriptions.end_date\")\n      }}</label>\n      <erd-calendar\n        class=\"form-control mt-1 mb-2\"\n        id=\"end-date\"\n        v-if=\"editorSubscription.end_date !== null\"\n        v-model=\"editorSubscription.end_date\"\n        :date-locale=\"$t('date.locale')\"\n      ></erd-calendar>\n    </erd-col>\n  </erd-row>\n</template>\n\n<script>\n/* eslint-disable vue/no-side-effects-in-computed-properties */\nimport { EventBus } from \"../../../services/ebus\";\nimport { httpService } from \"../../../services/http\";\nimport { mapGetters } from \"vuex\";\n\nexport default {\n  data() {\n    return {\n      search: null,\n      isLoading: false,\n      from: 0,\n      to: 0,\n      total: 0,\n      currentPage: 1,\n      editor: false,\n      editorSubscription: null,\n      subscriptions: [],\n      fields: [\n        { key: \"user_id\", label: this.$t(\"users.id\"), sortable: true },\n        {\n          key: \"subscription_type\",\n          label: this.$t(\"subscriptions.type\"),\n          sortable: true,\n        },\n        {\n          key: \"enabled\",\n          label: this.$t(\"subscriptions.enabled\"),\n          sortable: true,\n        },\n        {\n          key: \"created\",\n          label: this.$t(\"users.created\"),\n          sortable: true,\n        },\n        {\n          key: \"last_updated\",\n          label: this.$t(\"users.last-updated\"),\n          sortable: true,\n        },\n        {\n          key: \"end_date\",\n          label: this.$t(\"subscriptions.end_date\"),\n          sortable: true,\n        },\n        {\n          key: \"actions\",\n          label: this.$t(\"users.actions\"),\n          sortable: false,\n          thClass: \"text-right\",\n          tdClass: \"text-right\",\n        },\n      ],\n      subscriptionTypes: [\n        { value: 0, text: this.$t(\"status.0\") },\n        { value: 1, text: this.$t(\"status.1\") },\n        { value: 2, text: this.$t(\"status.2\") },\n        { value: 3, text: this.$t(\"status.3\") },\n        { value: 4, text: this.$t(\"status.4\") },\n        { value: 5, text: this.$t(\"status.5\") },\n        { value: 1985, text: this.$t(\"status.1985\") },\n      ],\n      playlistTypes: [\n        { value: 0, text: this.$t(\"playlist-type.0\") },\n        { value: 1, text: this.$t(\"playlist-type.1\") },\n        { value: 2, text: this.$t(\"playlist-type.2\") },\n        { value: 3, text: this.$t(\"playlist-type.3\") },\n      ],\n      enabledTypes: [\n        { value: 0, text: this.$t(\"general.no\") },\n        { value: 1, text: this.$t(\"general.yes\") },\n      ],\n    };\n  },\n  computed: {\n    ...mapGetters([\"currentUser\", \"settings\"]),\n    perPage() {\n      return this.settings.perPage;\n    },\n    searchFiltered() {\n      if (this.search === null) {\n        return this.subscriptions;\n      } else {\n        var re = new RegExp(this.search, \"i\");\n        return this.subscriptions.filter((subscription) => {\n          return (\n            String(subscription.subscription_type).match(re) ||\n            String(subscription.enabled).match(re) ||\n            String(subscription.user_id).match(re) ||\n            JSON.stringify(subscription.note).match(re) ||\n            String(subscription.end_date).match(re) ||\n            String(subscription.created).match(re) ||\n            String(subscription.last_updated).match(re) ||\n            this.formatDate(subscription.end_date).match(re) ||\n            this.formatDate(subscription.created).match(re) ||\n            this.formatDate(subscription.last_updated).match(re)\n          );\n        });\n      }\n    },\n    paged() {\n      this.total = this.searchFiltered.length;\n      this.from = (this.currentPage - 1) * this.perPage;\n      this.to =\n        this.from + this.perPage > this.total\n          ? this.total\n          : this.from + this.perPage;\n      return this.searchFiltered.slice(this.from, this.to);\n    },\n  },\n  methods: {\n    formatDate(date) {\n      return date == null || date == undefined\n        ? \"-\"\n        : new Date(date).toLocaleString(\n            this.$t(\"date.locale\"),\n            this.dateOptions\n          );\n    },\n    loadSubscriptions() {\n      this.isLoading = true;\n      httpService\n        .get(\"administration/subscriptions\")\n        .then((res) => {\n          this.isLoading = false;\n          if (res.status === true) {\n            this.subscriptions = res.data;\n          }\n        })\n        .catch(() => {\n          this.isLoading = false;\n          this.$notify(\n            \"error\",\n            this.$t(\"profile.failed\"),\n            this.$t(\"subscriptions.load-error\"),\n            \"la-user-shield\",\n            { duration: 5000, permanent: false }\n          );\n        });\n    },\n    editSubscription(subscription) {\n      this.editorSubscription = Object.assign({}, subscription);\n      this.editorSubscription.end_date =\n        this.editorSubscription.end_date != null &&\n        this.editorSubscription.end_date != undefined\n          ? new Date(this.editorSubscription.end_date)\n          : null;\n      this.editor = true;\n    },\n    saveSubscription() {\n      this.editor = false;\n      let subscription = Object.assign({}, this.editorSubscription);\n      subscription.last_updated = new Date();\n      delete subscription.id;\n      httpService\n        .post(\"administration/subscription/update\", {\n          id: this.editorSubscription.id,\n          subscription: subscription,\n        })\n        .then((res) => {\n          this.isLoading = false;\n          if (res.status === true) {\n            this.$notify(\n              \"primary\",\n              this.$t(\"profile.success\"),\n              this.$t(\"subscriptions.save-success\"),\n              \"la-user-shield\",\n              { duration: 5000, permanent: false }\n            );\n            this.loadSubscriptions();\n            this.editor = false;\n          }\n        })\n        .catch(() => {\n          this.isLoading = false;\n          this.$notify(\n            \"error\",\n            this.$t(\"profile.failed\"),\n            this.$t(\"subscriptions.save-error\"),\n            \"la-user-shield\",\n            { duration: 5000, permanent: false }\n          );\n        });\n    },\n    deleteSubscription(id) {\n      httpService\n        .post(\"administration/subscription/delete\", { id: id })\n        .then((res) => {\n          this.isLoading = false;\n          if (res.status === true) {\n            this.$notify(\n              \"primary\",\n              this.$t(\"profile.success\"),\n              this.$t(\"subscriptions.delete-success\"),\n              \"la-user-shield\",\n              { duration: 5000, permanent: false }\n            );\n            this.loadSubscriptions();\n          }\n        })\n        .catch(() => {\n          this.isLoading = false;\n          this.$notify(\n            \"error\",\n            this.$t(\"profile.failed\"),\n            this.$t(\"subscriptions.delete-error\"),\n            \"la-user-shield\",\n            { duration: 5000, permanent: false }\n          );\n        });\n    },\n    cancelSubscription() {\n      this.editor = false;\n    },\n    user(id) {\n      this.$router.push({\n        name: \"users\",\n        params: { editor: true, id: id },\n      });\n    },\n    searchSubscription(search) {\n      if (search.length === 0) {\n        this.search = null;\n      } else {\n        this.search = search;\n      }\n    },\n    printSubscriptions() {\n      document.getElementById(\"subscriptions\").print();\n    },\n  },\n  beforeMount() {\n    if (this.$route.params.editor && this.$route.params.id !== undefined) {\n      httpService\n        .get(\"administration/subscriptions\")\n        .then((res) => {\n          this.isLoading = false;\n          if (res.status === true) {\n            this.subscriptions = res.data;\n            let subscription = this.subscriptions.find(\n              (subscription) => subscription.user_id === this.$route.params.id\n            );\n            if (subscription) {\n              this.editSubscription(subscription);\n            }\n          }\n        })\n        .catch(() => {\n          this.isLoading = false;\n          this.$notify(\n            \"error\",\n            this.$t(\"profile.failed\"),\n            this.$t(\"subscriptions.load-error\"),\n            \"la-user-shield\",\n            { duration: 5000, permanent: false }\n          );\n        });\n    } else {\n      this.loadSubscriptions();\n    }\n    EventBus.$on(\"refresh\", this.loadSubscriptions);\n    EventBus.$on(\"save\", this.saveSubscription);\n    EventBus.$on(\"cancel\", this.cancelSubscription);\n    EventBus.$on(\"search\", this.searchSubscription);\n    EventBus.$on(\"print\", this.printSubscriptions);\n  },\n  beforeDestroy() {\n    EventBus.$off(\"refresh\", this.loadSubscriptions);\n    EventBus.$off(\"save\", this.saveSubscription);\n    EventBus.$off(\"cancel\", this.cancelSubscription);\n    EventBus.$off(\"search\", this.searchSubscription);\n    EventBus.$off(\"print\", this.printSubscriptions);\n  },\n  watch: {\n    from: function (val) {\n      EventBus.$emit(\"update-from\", val);\n    },\n    to: function (val) {\n      EventBus.$emit(\"update-to\", val);\n    },\n    total: function (val) {\n      EventBus.$emit(\"update-total\", val);\n    },\n    editor: function (val) {\n      EventBus.$emit(\"update-editor\", val);\n    },\n    \"editorSubscription.subscription_type\": function (val) {\n      if (val.value === 1985 || val === 1985) {\n        this.editorSubscription.end_date = null;\n      } else {\n        this.editorSubscription.end_date =\n          this.editorSubscription.end_date === null\n            ? new Date()\n            : this.editorSubscription.end_date;\n      }\n    },\n  },\n};\n</script>\n"]}]}