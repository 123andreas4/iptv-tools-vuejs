{"remainingRequest":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/vue-loader/lib/index.js??vue-loader-options!/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/src/views/app/financial/invoices.vue?vue&type=script&lang=js&","dependencies":[{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/src/views/app/financial/invoices.vue","mtime":1620487844615},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8qIGVzbGludC1kaXNhYmxlIHZ1ZS9uby1zaWRlLWVmZmVjdHMtaW4tY29tcHV0ZWQtcHJvcGVydGllcyAqLwppbXBvcnQgeyBFdmVudEJ1cyB9IGZyb20gIi4uLy4uLy4uL3NlcnZpY2VzL2VidXMiOwppbXBvcnQgeyBodHRwU2VydmljZSB9IGZyb20gIi4uLy4uLy4uL3NlcnZpY2VzL2h0dHAiOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAidnVleCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHZpZXdlcjogZmFsc2UsCiAgICAgIHZpZXdlckludm9pY2U6IG51bGwsCiAgICAgIHZpZXdlckludm9pY2VQcm9maWxlOiBudWxsLAogICAgICBzZWFyY2g6IG51bGwsCiAgICAgIGlzTG9hZGluZzogZmFsc2UsCiAgICAgIGZyb206IDAsCiAgICAgIHRvOiAwLAogICAgICB0b3RhbDogMCwKICAgICAgY3VycmVudFBhZ2U6IDEsCiAgICAgIGludm9pY2VzOiBbXSwKICAgICAgZmllbGRzOiBbCiAgICAgICAgeyBrZXk6ICJ1c2VyX2lkIiwgbGFiZWw6IHRoaXMuJHQoInVzZXJzLmlkIiksIHNvcnRhYmxlOiB0cnVlIH0sCiAgICAgICAgewogICAgICAgICAga2V5OiAiaW52b2ljZV9kYXRlIiwKICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCJpbnZvaWNlcy5pbnZvaWNlLWRhdGUiKSwKICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLAogICAgICAgIH0sCiAgICAgICAgeyBrZXk6ICJpdGVtcyIsIGxhYmVsOiB0aGlzLiR0KCJpbnZvaWNlcy5pdGVtcyIpLCBzb3J0YWJsZTogdHJ1ZSB9LAogICAgICAgIHsga2V5OiAidmlzaWJsZSIsIGxhYmVsOiB0aGlzLiR0KCJpbnZvaWNlcy52aXNpYmxlIiksIHNvcnRhYmxlOiB0cnVlIH0sCiAgICAgICAgewogICAgICAgICAga2V5OiAiY29uZmlybWVkIiwKICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCJpbnZvaWNlcy5jb25maXJtZWQiKSwKICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLAogICAgICAgIH0sCiAgICAgICAgeyBrZXk6ICJub3RlIiwgbGFiZWw6IHRoaXMuJHQoImludm9pY2VzLm5vdGUiKSwgc29ydGFibGU6IHRydWUgfSwKICAgICAgICB7CiAgICAgICAgICBrZXk6ICJhY3Rpb25zIiwKICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCJ1c2Vycy5hY3Rpb25zIiksCiAgICAgICAgICBzb3J0YWJsZTogZmFsc2UsCiAgICAgICAgICB0aENsYXNzOiAidGV4dC1yaWdodCIsCiAgICAgICAgICB0ZENsYXNzOiAidGV4dC1yaWdodCIsCiAgICAgICAgfSwKICAgICAgXSwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyhbImN1cnJlbnRVc2VyIiwgInNldHRpbmdzIl0pLAogICAgcGVyUGFnZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MucGVyUGFnZTsKICAgIH0sCiAgICBzZWFyY2hGaWx0ZXJlZCgpIHsKICAgICAgaWYgKHRoaXMuc2VhcmNoID09PSBudWxsKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuaW52b2ljZXM7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHJlID0gbmV3IFJlZ0V4cCh0aGlzLnNlYXJjaCwgImkiKTsKICAgICAgICByZXR1cm4gdGhpcy5pbnZvaWNlcy5maWx0ZXIoKGludm9pY2UpID0+IHsKICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIFN0cmluZyhpbnZvaWNlLnVzZXJfaWQpLm1hdGNoKHJlKSB8fAogICAgICAgICAgICBTdHJpbmcoaW52b2ljZS5pbnZvaWNlX2RhdGUpLm1hdGNoKHJlKSB8fAogICAgICAgICAgICBKU09OLnN0cmluZ2lmeShpbnZvaWNlLml0ZW1zKS5tYXRjaChyZSkgfHwKICAgICAgICAgICAgdGhpcy5mb3JtYXREYXRlKGludm9pY2UuaW52b2ljZV9kYXRlKS5tYXRjaChyZSkKICAgICAgICAgICk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBwYWdlZCgpIHsKICAgICAgdGhpcy50b3RhbCA9IHRoaXMuc2VhcmNoRmlsdGVyZWQubGVuZ3RoOwogICAgICB0aGlzLmZyb20gPSAodGhpcy5jdXJyZW50UGFnZSAtIDEpICogdGhpcy5wZXJQYWdlOwogICAgICB0aGlzLnRvID0KICAgICAgICB0aGlzLmZyb20gKyB0aGlzLnBlclBhZ2UgPiB0aGlzLnRvdGFsCiAgICAgICAgICA/IHRoaXMudG90YWwKICAgICAgICAgIDogdGhpcy5mcm9tICsgdGhpcy5wZXJQYWdlOwogICAgICByZXR1cm4gdGhpcy5zZWFyY2hGaWx0ZXJlZC5zbGljZSh0aGlzLmZyb20sIHRoaXMudG8pOwogICAgfSwKICAgIHJlY2lwaWVudCgpIHsKICAgICAgbGV0IHByb2ZpbGUgPSB0aGlzLnZpZXdlckludm9pY2VQcm9maWxlCiAgICAgICAgPyB0aGlzLnZpZXdlckludm9pY2VQcm9maWxlCiAgICAgICAgOiB7CiAgICAgICAgICAgIGZpcnN0X25hbWU6ICIiLAogICAgICAgICAgICBsYXN0X25hbWU6ICIiLAogICAgICAgICAgICBhZGRyZXNzOiAiIiwKICAgICAgICAgICAgemlwY29kZTogIiIsCiAgICAgICAgICAgIGNpdHk6ICIiLAogICAgICAgICAgICBjb3VudHJ5OiAiIiwKICAgICAgICAgICAgZW1haWw6ICIiLAogICAgICAgICAgICBwaG9uZTogIiIsCiAgICAgICAgICB9OwogICAgICByZXR1cm4gWwogICAgICAgIGAke3Byb2ZpbGUubmFtZV9maXJzdH0gJHtwcm9maWxlLm5hbWVfbGFzdH1gLAogICAgICAgIGAke3Byb2ZpbGUuYWRkcmVzc30gJHtwcm9maWxlLnppcGNvZGV9ICR7cHJvZmlsZS5jaXR5fSwgJHtwcm9maWxlLmNvdW50cnl9YCwKICAgICAgXTsKICAgIH0sCiAgICBpbnZvaWNlQ29udGV4dCgpIHsKICAgICAgcmV0dXJuIFsKICAgICAgICB7CiAgICAgICAgICB0ZXh0OiB0aGlzLiR0KCJzdWJzY3JpcHRpb25zLnByaW50LWludm9pY2UiKSwKICAgICAgICAgIGljb246ICJsYS1wcmludCIsCiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJpbnZvaWNlIikucHJpbnQoKTsKICAgICAgICAgIH0sCiAgICAgICAgfSwKICAgICAgXTsKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICBmb3JtYXREYXRlKGRhdGUpIHsKICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGUpLnRvTG9jYWxlU3RyaW5nKAogICAgICAgIHRoaXMuJHQoImRhdGUubG9jYWxlIiksCiAgICAgICAgdGhpcy5kYXRlT3B0aW9ucwogICAgICApOwogICAgfSwKICAgIGl0ZW1zKGl0ZW1zKSB7CiAgICAgIGxldCBpID0gWy4uLml0ZW1zXTsKICAgICAgcmV0dXJuIGkubWFwKChpdGVtKSA9PiBpdGVtLmRlc2NyaXB0aW9uKS5qb2luKCIsIik7CiAgICB9LAogICAgY2xvc2VWaWV3ZXIoKSB7CiAgICAgIHRoaXMudmlld2VyID0gZmFsc2U7CiAgICB9LAogICAgcHJpbnRJbnZvaWNlKCkgewogICAgICBpZiAodGhpcy52aWV3ZXIpIHsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaW52b2ljZSIpLnByaW50KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImludm9pY2VzIikucHJpbnQoKTsKICAgICAgfQogICAgfSwKICAgIGxvYWRJbnZvaWNlcygpIHsKICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlOwogICAgICBodHRwU2VydmljZQogICAgICAgIC5nZXQoImFkbWluaXN0cmF0aW9uL2ludm9pY2VzIikKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IHRydWUpIHsKICAgICAgICAgICAgdGhpcy5pbnZvaWNlcyA9IHJlcy5kYXRhOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICB0aGlzLiRub3RpZnkoCiAgICAgICAgICAgICJlcnJvciIsCiAgICAgICAgICAgIHRoaXMuJHQoInByb2ZpbGUuZmFpbGVkIiksCiAgICAgICAgICAgIHRoaXMuJHQoImNvbmZpcm0ubG9hZC1lcnJvciIpLAogICAgICAgICAgICAibGEtdXNlci1zaGllbGQiLAogICAgICAgICAgICB7IGR1cmF0aW9uOiA1MDAwLCBwZXJtYW5lbnQ6IGZhbHNlIH0KICAgICAgICAgICk7CiAgICAgICAgfSk7CiAgICB9LAogICAgZGVsZXRlSW52b2ljZShpZCkgewogICAgICBodHRwU2VydmljZQogICAgICAgIC5wb3N0KCJhZG1pbmlzdHJhdGlvbi9pbnZvaWNlL2RlbGV0ZSIsIHsgaWQ6IGlkIH0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSB0cnVlKSB7CiAgICAgICAgICAgIHRoaXMuJG5vdGlmeSgKICAgICAgICAgICAgICAicHJpbWFyeSIsCiAgICAgICAgICAgICAgdGhpcy4kdCgicHJvZmlsZS5zdWNjZXNzIiksCiAgICAgICAgICAgICAgdGhpcy4kdCgiY29uZmlybS5kZWxldGUtc3VjY2VzcyIpLAogICAgICAgICAgICAgICJsYS11c2VyLXNoaWVsZCIsCiAgICAgICAgICAgICAgeyBkdXJhdGlvbjogNTAwMCwgcGVybWFuZW50OiBmYWxzZSB9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHRoaXMubG9hZEludm9pY2VzKCk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuJG5vdGlmeSgKICAgICAgICAgICAgImVycm9yIiwKICAgICAgICAgICAgdGhpcy4kdCgicHJvZmlsZS5mYWlsZWQiKSwKICAgICAgICAgICAgdGhpcy4kdCgiY29uZmlybS5kZWxldGUtZXJyb3IiKSwKICAgICAgICAgICAgImxhLXVzZXItc2hpZWxkIiwKICAgICAgICAgICAgeyBkdXJhdGlvbjogNTAwMCwgcGVybWFuZW50OiBmYWxzZSB9CiAgICAgICAgICApOwogICAgICAgIH0pOwogICAgfSwKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycwogICAgdmlld0ludm9pY2UoaW52b2ljZSkgewogICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7CiAgICAgIGh0dHBTZXJ2aWNlCiAgICAgICAgLmdldChgYWRtaW5pc3RyYXRpb24vcHJvZmlsZS8ke2ludm9pY2UudXNlcl9pZH1gKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gdHJ1ZSkgewogICAgICAgICAgICB0aGlzLnZpZXdlckludm9pY2VQcm9maWxlID0gcmVzLmRhdGFbMF07CiAgICAgICAgICAgIHRoaXMudmlld2VySW52b2ljZSA9IGludm9pY2U7CiAgICAgICAgICAgIHRoaXMudmlld2VyID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgdGhpcy4kbm90aWZ5KAogICAgICAgICAgICAiZXJyb3IiLAogICAgICAgICAgICB0aGlzLiR0KCJwcm9maWxlLmZhaWxlZCIpLAogICAgICAgICAgICB0aGlzLiR0KCJpbnZvaWNlLmxvYWQtZXJyb3IiKSwKICAgICAgICAgICAgImxhLXVzZXItc2hpZWxkIiwKICAgICAgICAgICAgeyBkdXJhdGlvbjogNTAwMCwgcGVybWFuZW50OiBmYWxzZSB9CiAgICAgICAgICApOwogICAgICAgIH0pOwogICAgfSwKICAgIHNlYXJjaEludm9pY2Uoc2VhcmNoKSB7CiAgICAgIGlmIChzZWFyY2gubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy5zZWFyY2ggPSBudWxsOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2VhcmNoID0gc2VhcmNoOwogICAgICB9CiAgICB9LAogIH0sCiAgYmVmb3JlTW91bnQoKSB7CiAgICB0aGlzLmxvYWRJbnZvaWNlcygpOwogICAgRXZlbnRCdXMuJG9uKCJyZWZyZXNoIiwgdGhpcy5sb2FkSW52b2ljZXMpOwogICAgRXZlbnRCdXMuJG9uKCJzZWFyY2giLCB0aGlzLnNlYXJjaEludm9pY2UpOwogICAgRXZlbnRCdXMuJG9uKCJjYW5jZWwiLCB0aGlzLmNsb3NlVmlld2VyKTsKICAgIEV2ZW50QnVzLiRvbigicHJpbnQiLCB0aGlzLnByaW50SW52b2ljZSk7CiAgfSwKICBiZWZvcmVEZXN0cm95KCkgewogICAgRXZlbnRCdXMuJG9mZigicmVmcmVzaCIsIHRoaXMubG9hZEludm9pY2VzKTsKICAgIEV2ZW50QnVzLiRvZmYoInNlYXJjaCIsIHRoaXMuc2VhcmNoSW52b2ljZSk7CiAgICBFdmVudEJ1cy4kb2ZmKCJjYW5jZWwiLCB0aGlzLmNsb3NlVmlld2VyKTsKICAgIEV2ZW50QnVzLiRvZmYoInByaW50IiwgdGhpcy5wcmludEludm9pY2UpOwogIH0sCiAgd2F0Y2g6IHsKICAgIGZyb206IGZ1bmN0aW9uICh2YWwpIHsKICAgICAgRXZlbnRCdXMuJGVtaXQoInVwZGF0ZS1mcm9tIiwgdmFsKTsKICAgIH0sCiAgICB0bzogZnVuY3Rpb24gKHZhbCkgewogICAgICBFdmVudEJ1cy4kZW1pdCgidXBkYXRlLXRvIiwgdmFsKTsKICAgIH0sCiAgICB0b3RhbDogZnVuY3Rpb24gKHZhbCkgewogICAgICBFdmVudEJ1cy4kZW1pdCgidXBkYXRlLXRvdGFsIiwgdmFsKTsKICAgIH0sCiAgICB2aWV3ZXI6IGZ1bmN0aW9uICh2YWwpIHsKICAgICAgRXZlbnRCdXMuJGVtaXQoInVwZGF0ZS12aWV3ZXIiLCB2YWwpOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["invoices.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"invoices.vue","sourceRoot":"src/views/app/financial","sourcesContent":["<template>\n  <erd-row class=\"m-0 p-0\" :class=\"{ 'erd-report': viewer }\">\n    <erd-spinner v-if=\"isLoading\" size=\"lg\" overlay absolute></erd-spinner>\n    <erd-col xl=\"12\" v-if=\"!viewer\" id=\"invoices\">\n      <b-table :items=\"paged\" :fields=\"fields\" striped small>\n        <template v-slot:cell(user_id)=\"row\">\n          <router-link\n            :to=\"{\n              name: 'users',\n              params: { editor: true, id: row.item.user_id },\n            }\"\n            >{{ row.item.user_id }}</router-link\n          >\n        </template>\n        <template v-slot:cell(invoice_date)=\"row\">\n          {{ formatDate(row.item.invoice_date) }}\n        </template>\n        <template v-slot:cell(items)=\"row\">\n          {{ items(row.item.items) }}\n        </template>\n        <template v-slot:cell(visible)=\"row\">\n          {{ row.item.visible ? $t(\"general.yes\") : $t(\"general.no\") }}\n        </template>\n        <template v-slot:cell(confirmed)=\"row\">\n          {{ row.item.confirmed ? $t(\"general.yes\") : $t(\"general.no\") }}\n        </template>\n        <template v-slot:cell(actions)=\"row\">\n          <erd-button\n            variant=\"info\"\n            class=\"btn-table\"\n            @click=\"viewInvoice(row.item)\"\n            ><i class=\"las la-search\"></i\n          ></erd-button>\n          <erd-button\n            variant=\"danger\"\n            class=\"btn-table\"\n            @click=\"deleteInvoice(row.item.id)\"\n            ><i class=\"las la-trash\"></i\n          ></erd-button>\n        </template>\n      </b-table>\n      <b-pagination\n        class=\"w-100 my-3\"\n        size=\"sm\"\n        align=\"center\"\n        :total-rows=\"total\"\n        :per-page=\"perPage\"\n        v-model=\"currentPage\"\n      >\n        <template v-slot:next-text>\n          <i class=\"las la-angle-right\" />\n        </template>\n        <template v-slot:prev-text>\n          <i class=\"las la-angle-left\" />\n        </template>\n        <template v-slot:first-text>\n          <i class=\"las la-angle-double-left\" />\n        </template>\n        <template v-slot:last-text>\n          <i class=\"las la-angle-double-right\" />\n        </template>\n      </b-pagination>\n    </erd-col>\n    <erd-col v-if=\"viewer && viewerInvoice !== null\" flex center>\n      <erd-report\n        id=\"invoice\"\n        :number=\"viewerInvoice.id\"\n        :recipient=\"recipient\"\n        :items=\"viewerInvoice.items\"\n        :date=\"new Date(viewerInvoice.invoice_date)\"\n        :context-items=\"invoiceContext\"\n      ></erd-report>\n    </erd-col>\n  </erd-row>\n</template>\n\n<script>\n/* eslint-disable vue/no-side-effects-in-computed-properties */\nimport { EventBus } from \"../../../services/ebus\";\nimport { httpService } from \"../../../services/http\";\nimport { mapGetters } from \"vuex\";\n\nexport default {\n  data() {\n    return {\n      viewer: false,\n      viewerInvoice: null,\n      viewerInvoiceProfile: null,\n      search: null,\n      isLoading: false,\n      from: 0,\n      to: 0,\n      total: 0,\n      currentPage: 1,\n      invoices: [],\n      fields: [\n        { key: \"user_id\", label: this.$t(\"users.id\"), sortable: true },\n        {\n          key: \"invoice_date\",\n          label: this.$t(\"invoices.invoice-date\"),\n          sortable: true,\n        },\n        { key: \"items\", label: this.$t(\"invoices.items\"), sortable: true },\n        { key: \"visible\", label: this.$t(\"invoices.visible\"), sortable: true },\n        {\n          key: \"confirmed\",\n          label: this.$t(\"invoices.confirmed\"),\n          sortable: true,\n        },\n        { key: \"note\", label: this.$t(\"invoices.note\"), sortable: true },\n        {\n          key: \"actions\",\n          label: this.$t(\"users.actions\"),\n          sortable: false,\n          thClass: \"text-right\",\n          tdClass: \"text-right\",\n        },\n      ],\n    };\n  },\n  computed: {\n    ...mapGetters([\"currentUser\", \"settings\"]),\n    perPage() {\n      return this.settings.perPage;\n    },\n    searchFiltered() {\n      if (this.search === null) {\n        return this.invoices;\n      } else {\n        var re = new RegExp(this.search, \"i\");\n        return this.invoices.filter((invoice) => {\n          return (\n            String(invoice.user_id).match(re) ||\n            String(invoice.invoice_date).match(re) ||\n            JSON.stringify(invoice.items).match(re) ||\n            this.formatDate(invoice.invoice_date).match(re)\n          );\n        });\n      }\n    },\n    paged() {\n      this.total = this.searchFiltered.length;\n      this.from = (this.currentPage - 1) * this.perPage;\n      this.to =\n        this.from + this.perPage > this.total\n          ? this.total\n          : this.from + this.perPage;\n      return this.searchFiltered.slice(this.from, this.to);\n    },\n    recipient() {\n      let profile = this.viewerInvoiceProfile\n        ? this.viewerInvoiceProfile\n        : {\n            first_name: \"\",\n            last_name: \"\",\n            address: \"\",\n            zipcode: \"\",\n            city: \"\",\n            country: \"\",\n            email: \"\",\n            phone: \"\",\n          };\n      return [\n        `${profile.name_first} ${profile.name_last}`,\n        `${profile.address} ${profile.zipcode} ${profile.city}, ${profile.country}`,\n      ];\n    },\n    invoiceContext() {\n      return [\n        {\n          text: this.$t(\"subscriptions.print-invoice\"),\n          icon: \"la-print\",\n          onClick: function () {\n            document.getElementById(\"invoice\").print();\n          },\n        },\n      ];\n    },\n  },\n  methods: {\n    formatDate(date) {\n      return new Date(date).toLocaleString(\n        this.$t(\"date.locale\"),\n        this.dateOptions\n      );\n    },\n    items(items) {\n      let i = [...items];\n      return i.map((item) => item.description).join(\",\");\n    },\n    closeViewer() {\n      this.viewer = false;\n    },\n    printInvoice() {\n      if (this.viewer) {\n        document.getElementById(\"invoice\").print();\n      } else {\n        document.getElementById(\"invoices\").print();\n      }\n    },\n    loadInvoices() {\n      this.isLoading = true;\n      httpService\n        .get(\"administration/invoices\")\n        .then((res) => {\n          this.isLoading = false;\n          if (res.status === true) {\n            this.invoices = res.data;\n          }\n        })\n        .catch(() => {\n          this.isLoading = false;\n          this.$notify(\n            \"error\",\n            this.$t(\"profile.failed\"),\n            this.$t(\"confirm.load-error\"),\n            \"la-user-shield\",\n            { duration: 5000, permanent: false }\n          );\n        });\n    },\n    deleteInvoice(id) {\n      httpService\n        .post(\"administration/invoice/delete\", { id: id })\n        .then((res) => {\n          this.isLoading = false;\n          if (res.status === true) {\n            this.$notify(\n              \"primary\",\n              this.$t(\"profile.success\"),\n              this.$t(\"confirm.delete-success\"),\n              \"la-user-shield\",\n              { duration: 5000, permanent: false }\n            );\n            this.loadInvoices();\n          }\n        })\n        .catch(() => {\n          this.isLoading = false;\n          this.$notify(\n            \"error\",\n            this.$t(\"profile.failed\"),\n            this.$t(\"confirm.delete-error\"),\n            \"la-user-shield\",\n            { duration: 5000, permanent: false }\n          );\n        });\n    },\n    // eslint-disable-next-line no-unused-vars\n    viewInvoice(invoice) {\n      this.isLoading = true;\n      httpService\n        .get(`administration/profile/${invoice.user_id}`)\n        .then((res) => {\n          this.isLoading = false;\n          if (res.status === true) {\n            this.viewerInvoiceProfile = res.data[0];\n            this.viewerInvoice = invoice;\n            this.viewer = true;\n          }\n        })\n        .catch(() => {\n          this.isLoading = false;\n          this.$notify(\n            \"error\",\n            this.$t(\"profile.failed\"),\n            this.$t(\"invoice.load-error\"),\n            \"la-user-shield\",\n            { duration: 5000, permanent: false }\n          );\n        });\n    },\n    searchInvoice(search) {\n      if (search.length === 0) {\n        this.search = null;\n      } else {\n        this.search = search;\n      }\n    },\n  },\n  beforeMount() {\n    this.loadInvoices();\n    EventBus.$on(\"refresh\", this.loadInvoices);\n    EventBus.$on(\"search\", this.searchInvoice);\n    EventBus.$on(\"cancel\", this.closeViewer);\n    EventBus.$on(\"print\", this.printInvoice);\n  },\n  beforeDestroy() {\n    EventBus.$off(\"refresh\", this.loadInvoices);\n    EventBus.$off(\"search\", this.searchInvoice);\n    EventBus.$off(\"cancel\", this.closeViewer);\n    EventBus.$off(\"print\", this.printInvoice);\n  },\n  watch: {\n    from: function (val) {\n      EventBus.$emit(\"update-from\", val);\n    },\n    to: function (val) {\n      EventBus.$emit(\"update-to\", val);\n    },\n    total: function (val) {\n      EventBus.$emit(\"update-total\", val);\n    },\n    viewer: function (val) {\n      EventBus.$emit(\"update-viewer\", val);\n    },\n  },\n};\n</script>\n"]}]}