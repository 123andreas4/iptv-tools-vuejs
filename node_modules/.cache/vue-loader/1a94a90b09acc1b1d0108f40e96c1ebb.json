{"remainingRequest":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/vue-loader/lib/index.js??vue-loader-options!/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/src/views/app/xtream/playlists.vue?vue&type=script&lang=js&","dependencies":[{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/src/views/app/xtream/playlists.vue","mtime":1627752044710},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8qIGVzbGludC1kaXNhYmxlIHZ1ZS9uby1zaWRlLWVmZmVjdHMtaW4tY29tcHV0ZWQtcHJvcGVydGllcyAqLwppbXBvcnQgeyBFdmVudEJ1cyB9IGZyb20gIi4uLy4uLy4uL3NlcnZpY2VzL2VidXMiOwppbXBvcnQgeyBodHRwU2VydmljZSB9IGZyb20gIi4uLy4uLy4uL3NlcnZpY2VzL2h0dHAiOwppbXBvcnQgeyBsYW5ndWFnZXMgfSBmcm9tICIuLi8uLi8uLi9oZWxwZXJzIjsKaW1wb3J0IHsgVXNlclJvbGUsIFN1YnNjcmlwdGlvblR5cGUgfSBmcm9tICIuLi8uLi8uLi9jb25zdGFudHMvY29uZmlnIjsKaW1wb3J0IHsgbWFwR2V0dGVycywgbWFwQWN0aW9ucyB9IGZyb20gInZ1ZXgiOwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkYXRlT3B0aW9uczogeyBkYXk6ICIyLWRpZ2l0IiwgbW9udGg6ICJudW1lcmljIiwgeWVhcjogIm51bWVyaWMiIH0sCiAgICAgIGxhbmd1YWdlcywKICAgICAgYWN0aXZlVGFiOiAwLAogICAgICBwbGF5bGlzdEdyb3VwczogewogICAgICAgIGxpdmU6IFtdLAogICAgICAgIG1vdmllczogW10sCiAgICAgICAgc2VyaWVzOiBbXSwKICAgICAgfSwKICAgICAgcGxheWxpc3RJbmZvOiB7CiAgICAgICAgbW9kYWw6IGZhbHNlLAogICAgICAgIHVzZXJuYW1lOiAiIiwKICAgICAgICBwYXNzd29yZDogIiIsCiAgICAgIH0sCiAgICAgIHBsYXlsaXN0czogW10sCiAgICAgIHBsYXlsaXN0OiBudWxsLAogICAgICBlZGl0b3I6IGZhbHNlLAogICAgICBzZWFyY2g6IG51bGwsCiAgICAgIGlzTG9hZGluZzogZmFsc2UsCiAgICAgIGZyb206IDAsCiAgICAgIHRvOiAwLAogICAgICB0b3RhbDogMCwKICAgICAgY3VycmVudFBhZ2U6IDEsCiAgICAgIGZpZWxkczogWwogICAgICAgIHsga2V5OiAiY3JlYXRlZF9hdCIsIGxhYmVsOiB0aGlzLiR0KCJ4dHJlYW0uY3JlYXRlZCIpLCBzb3J0YWJsZTogdHJ1ZSB9LAogICAgICAgIHsKICAgICAgICAgIGtleTogImxhc3RfdXBkYXRlZCIsCiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgieHRyZWFtLmxhc3QtdXBkYXRlZCIpLAogICAgICAgICAgc29ydGFibGU6IHRydWUsCiAgICAgICAgfSwKICAgICAgICB7IGtleTogIm5hbWUiLCBsYWJlbDogdGhpcy4kdCgieHRyZWFtLm5hbWUiKSwgc29ydGFibGU6IHRydWUgfSwKICAgICAgICB7IGtleTogImdyb3VwcyIsIGxhYmVsOiB0aGlzLiR0KCJ4dHJlYW0uZ3JvdXBzIiksIHNvcnRhYmxlOiB0cnVlIH0sCiAgICAgICAgeyBrZXk6ICJzdHJlYW1zIiwgbGFiZWw6IHRoaXMuJHQoInh0cmVhbS5zdHJlYW1zIiksIHNvcnRhYmxlOiB0cnVlIH0sCiAgICAgICAgewogICAgICAgICAga2V5OiAic3luY19pbnRlcnZhbCIsCiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgieHRyZWFtLnN5bmMtaW50ZXJ2YWwiKSwKICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAga2V5OiAic3luY2VkX2F0IiwKICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCJ4dHJlYW0uc3luY2VkLWF0IiksCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGtleTogInNvdXJjZV9leHBfZGF0ZSIsCiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgieHRyZWFtLmV4cGlyZSIpLAogICAgICAgICAgc29ydGFibGU6IHRydWUsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBrZXk6ICJzb3VyY2VfbWF4X2Nvbm5lY3Rpb25zIiwKICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCJ4dHJlYW0ubWF4LWNvbm5lY3Rpb25zIiksCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGtleTogImFjdGlvbnMiLAogICAgICAgICAgbGFiZWw6IHRoaXMuJHQoInVzZXJzLmFjdGlvbnMiKSwKICAgICAgICAgIHNvcnRhYmxlOiBmYWxzZSwKICAgICAgICAgIHRoQ2xhc3M6ICJ0ZXh0LXJpZ2h0IiwKICAgICAgICAgIHRkQ2xhc3M6ICJ0ZXh0LXJpZ2h0IiwKICAgICAgICB9LAogICAgICBdLAogICAgICBzeW5jSW50ZXJ2YWxzOiBbCiAgICAgICAgeyB0ZXh0OiB0aGlzLiR0KCJzeW5jLWludGVydmFsLjQ4IiksIHZhbHVlOiA0OCB9LAogICAgICAgIHsgdGV4dDogdGhpcy4kdCgic3luYy1pbnRlcnZhbC4yNCIpLCB2YWx1ZTogMjQgfSwKICAgICAgICB7IHRleHQ6IHRoaXMuJHQoInN5bmMtaW50ZXJ2YWwuMTIiKSwgdmFsdWU6IDEyIH0sCiAgICAgICAgeyB0ZXh0OiB0aGlzLiR0KCJzeW5jLWludGVydmFsLjYiKSwgdmFsdWU6IDYgfSwKICAgICAgICB7IHRleHQ6IHRoaXMuJHQoInN5bmMtaW50ZXJ2YWwuMSIpLCB2YWx1ZTogMSB9LAogICAgICBdLAogICAgICBvdXRwdXRUeXBlczogWwogICAgICAgIHsgdGV4dDogdGhpcy4kdCgib3V0cHV0LjEiKSwgdmFsdWU6IDEgfSwKICAgICAgICB7IHRleHQ6IHRoaXMuJHQoIm91dHB1dC4yIiksIHZhbHVlOiAyIH0sCiAgICAgIF0sCiAgICAgIGlwdHZUb29sc0hvc3Q6ICJodHRwOi8vdHYuaXB0di10b29scy5jb20iLAogICAgICBpcHR2VG9vbHNQb3J0OiA4MCwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyhbImN1cnJlbnRVc2VyIiwgInNldHRpbmdzIiwgInN5bmNUTURCIiwgInN5bmNQbGF5bGlzdCJdKSwKICAgIHNob3dUb29sdGlwcyAoKSB7CiAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLnNob3dUb29sdGlwczsKICAgIH0sCiAgICBlcGdPZmZzZXQoKSB7CiAgICAgIGxldCBkdCA9IG5ldyBEYXRlKCk7CiAgICAgIHJldHVybiBNYXRoLmFicyhkdC5nZXRUaW1lem9uZU9mZnNldCgpIC8gNjApOwogICAgfSwKICAgIHBlclBhZ2UoKSB7CiAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLnBlclBhZ2U7CiAgICB9LAogICAgc2VhcmNoRmlsdGVyZWQoKSB7CiAgICAgIGlmICh0aGlzLnNlYXJjaCA9PT0gbnVsbCkgewogICAgICAgIHJldHVybiB0aGlzLnBsYXlsaXN0czsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgcmUgPSBuZXcgUmVnRXhwKHRoaXMuc2VhcmNoLCAiaSIpOwogICAgICAgIHJldHVybiB0aGlzLnBsYXlsaXN0cy5maWx0ZXIoKGFjY291bnQpID0+IHsKICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIFN0cmluZyhhY2NvdW50LnRpdGxlKS5tYXRjaChyZSkgfHwKICAgICAgICAgICAgU3RyaW5nKGFjY291bnQuaG9zdCkubWF0Y2gocmUpIHx8CiAgICAgICAgICAgIFN0cmluZyhhY2NvdW50LnBvcnQpLm1hdGNoKHJlKSB8fAogICAgICAgICAgICBTdHJpbmcoYWNjb3VudC51c2VybmFtZSkubWF0Y2gocmUpIHx8CiAgICAgICAgICAgIFN0cmluZyhhY2NvdW50LnBhc3N3b3JkKS5tYXRjaChyZSkgfHwKICAgICAgICAgICAgdGhpcy5mb3JtYXREYXRlKGFjY291bnQuc3luY2VkX2F0KS5tYXRjaChyZSkgfHwKICAgICAgICAgICAgdGhpcy4kdChgc3luYy1pbnRlcnZhbC4ke2FjY291bnQuc3luY19pbnRlcnZhbH1gKS5tYXRjaChyZSkKICAgICAgICAgICk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBwYWdlZCgpIHsKICAgICAgdGhpcy50b3RhbCA9IHRoaXMuc2VhcmNoRmlsdGVyZWQubGVuZ3RoOwogICAgICB0aGlzLmZyb20gPSAodGhpcy5jdXJyZW50UGFnZSAtIDEpICogdGhpcy5wZXJQYWdlIHx8IDA7CiAgICAgIHRoaXMudG8gPQogICAgICAgIHRoaXMuZnJvbSArIHRoaXMucGVyUGFnZSA+IHRoaXMudG90YWwKICAgICAgICAgID8gdGhpcy50b3RhbAogICAgICAgICAgOiB0aGlzLmZyb20gKyB0aGlzLnBlclBhZ2U7CiAgICAgIHJldHVybiB0aGlzLnNlYXJjaEZpbHRlcmVkLnNsaWNlKHRoaXMuZnJvbSwgdGhpcy50byk7CiAgICB9LAogICAgYWxsb3dlZElwczogewogICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5wbGF5bGlzdC5pcF9hbGxvd2VkCiAgICAgICAgICA/IHRoaXMucGxheWxpc3QuaXBfYWxsb3dlZC5qb2luKCIsIikKICAgICAgICAgIDogIiI7CiAgICAgIH0sCiAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkgewogICAgICAgIHRoaXMucGxheWxpc3QuaXBfYWxsb3dlZCA9IHZhbC5zcGxpdCgiLCIpLm1hcCgoaXApID0+IHsKICAgICAgICAgIHJldHVybiBpcC50cmltKCk7CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICB9LAogICAgY29udGV4dExpdmUoKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIGxldCBsaXZlID0gWy4uLnZtLnBsYXlsaXN0R3JvdXBzLmxpdmVdOwogICAgICByZXR1cm4gWwogICAgICAgIHsKICAgICAgICAgIHRleHQ6IHZtLiR0KCJnZW5lcmFsLnNlbGVjdC1hbGwiKSwKICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdm0ucGxheWxpc3Quc3luY19saXZlID0gWy4uLmxpdmUubWFwKChnKSA9PiBnLmNhdGVnb3J5X2lkKV07CiAgICAgICAgICB9LAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGV4dDogdm0uJHQoImdlbmVyYWwuc2VsZWN0LW5vbmUiKSwKICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdm0ucGxheWxpc3Quc3luY19saXZlID0gW107CiAgICAgICAgICB9LAogICAgICAgIH0sCiAgICAgIF07CiAgICB9LAogICAgY29udGV4dE1vdmllcygpIHsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgbGV0IG1vdmllcyA9IFsuLi52bS5wbGF5bGlzdEdyb3Vwcy5tb3ZpZXNdOwogICAgICByZXR1cm4gWwogICAgICAgIHsKICAgICAgICAgIHRleHQ6IHZtLiR0KCJnZW5lcmFsLnNlbGVjdC1hbGwiKSwKICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKHZtLmNhblVzZU1vdmllc1NlcmllcykgewogICAgICAgICAgICAgIHZtLnBsYXlsaXN0LnN5bmNfbW92aWVzID0gWy4uLm1vdmllcy5tYXAoKGcpID0+IGcuY2F0ZWdvcnlfaWQpXTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIGRpc2FibGVkOiAhdm0uY2FuVXNlTW92aWVzU2VyaWVzLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGV4dDogdm0uJHQoImdlbmVyYWwuc2VsZWN0LW5vbmUiKSwKICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdm0ucGxheWxpc3Quc3luY19tb3ZpZXMgPSBbXTsKICAgICAgICAgIH0sCiAgICAgICAgICBkaXNhYmxlZDogIXZtLmNhblVzZU1vdmllc1NlcmllcywKICAgICAgICB9LAogICAgICBdOwogICAgfSwKICAgIGNvbnRleHRTZXJpZXMoKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIGxldCBzZXJpZXMgPSBbLi4udm0ucGxheWxpc3RHcm91cHMuc2VyaWVzXTsKICAgICAgcmV0dXJuIFsKICAgICAgICB7CiAgICAgICAgICB0ZXh0OiB2bS4kdCgiZ2VuZXJhbC5zZWxlY3QtYWxsIiksCiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmICh2bS5jYW5Vc2VNb3ZpZXNTZXJpZXMpIHsKICAgICAgICAgICAgICB2bS5wbGF5bGlzdC5zeW5jX3NlcmllcyA9IFsuLi5zZXJpZXMubWFwKChnKSA9PiBnLmNhdGVnb3J5X2lkKV07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBkaXNhYmxlZDogIXZtLmNhblVzZU1vdmllc1NlcmllcywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRleHQ6IHZtLiR0KCJnZW5lcmFsLnNlbGVjdC1ub25lIiksCiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZtLnBsYXlsaXN0LnN5bmNfc2VyaWVzID0gW107CiAgICAgICAgICB9LAogICAgICAgICAgZGlzYWJsZWQ6ICF2bS5jYW5Vc2VNb3ZpZXNTZXJpZXMsCiAgICAgICAgfSwKICAgICAgXTsKICAgIH0sCiAgICB0bWRiTGFuZ3VhZ2VzKCkgewogICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5sYW5ndWFnZXMpLm1hcCgobGFuZ3VhZ2UpID0+IHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgdmFsdWU6IGxhbmd1YWdlLAogICAgICAgICAgdGV4dDogYCR7dGhpcy5sYW5ndWFnZXNbbGFuZ3VhZ2VdLm5hbWV9ICgke3RoaXMubGFuZ3VhZ2VzW2xhbmd1YWdlXS5uYXRpdmVOYW1lfSlgLAogICAgICAgIH07CiAgICAgIH0pOwogICAgfSwKICAgIGNhblVzZUN1c3RvbVVzZXJQYXNzKCkgewogICAgICByZXR1cm4gW1VzZXJSb2xlLlN1cGVyQWRtaW4sIFVzZXJSb2xlLkFkbWluLCBVc2VyUm9sZS5Nb2RlcmF0b3JdLmluY2x1ZGVzKAogICAgICAgIHRoaXMuY3VycmVudFVzZXIudXNlci5yb2xlCiAgICAgICk7CiAgICB9LAogICAgY2FuVXNlTW92aWVzU2VyaWVzKCkgewogICAgICByZXR1cm4gWwogICAgICAgIFN1YnNjcmlwdGlvblR5cGUuUHJvZmVzc2lvbmFsLAogICAgICAgIFN1YnNjcmlwdGlvblR5cGUuRmFtaWx5LAogICAgICAgIFN1YnNjcmlwdGlvblR5cGUuQnVzaW5lc3NTbWFsbCwKICAgICAgICBTdWJzY3JpcHRpb25UeXBlLkJ1c2luZXNzUHJvZmVzc2lvbmFsLAogICAgICAgIFN1YnNjcmlwdGlvblR5cGUuQnVzaW5lc3NFbnRlcnByaXNlLAogICAgICAgIFN1YnNjcmlwdGlvblR5cGUuTWFuYWdlciwKICAgICAgXS5pbmNsdWRlcyh0aGlzLmN1cnJlbnRVc2VyLnN1YnNjcmlwdGlvbi5zdWJzY3JpcHRpb25fdHlwZSk7CiAgICB9LAogICAgcGxheWxpc3RJc0VtcHR5KCkgewogICAgICByZXR1cm4gKAogICAgICAgICh0aGlzLnBsYXlsaXN0ICYmIHRoaXMucGxheWxpc3QuZ3JvdXBzID09IDApIHx8CiAgICAgICAgdGhpcy5wbGF5bGlzdC5zdHJlYW1zID09IDAKICAgICAgKTsKICAgIH0sCiAgICBjYW5BZGRQbGF5bGlzdCgpIHsKICAgICAgaWYgKHRoaXMuY3VycmVudFVzZXIuc3Vic2NyaXB0aW9uKSB7CiAgICAgICAgbGV0IHN1YnNjcmlwdGlvbiA9IHRoaXMuY3VycmVudFVzZXIuc3Vic2NyaXB0aW9uOwogICAgICAgIGlmIChzdWJzY3JpcHRpb24uZW5kX2RhdGUgIT0gbnVsbCAmJiBuZXcgRGF0ZShzdWJzY3JpcHRpb24uZW5kX2RhdGUpLmdldFRpbWUoKSA8IG5ldyBEYXRlKCkuZ2V0VGltZSgpKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGlmIChzdWJzY3JpcHRpb24uY3VzdG9tX3BsYW4gPT0gMSkgewogICAgICAgICAgcmV0dXJuIHRoaXMucGxheWxpc3RzLmxlbmd0aCA8IHN1YnNjcmlwdGlvbi5tYXhfcGxheWxpc3Q7CiAgICAgICAgfQogICAgICAgIGlmIChzdWJzY3JpcHRpb24uZW5hYmxlZCAhPSAxKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIHN3aXRjaCAoc3Vic2NyaXB0aW9uLnN1YnNjcmlwdGlvbl90eXBlKSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIHJldHVybiB0aGlzLnBsYXlsaXN0cy5sZW5ndGggPCAyOwogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gdGhpcy5wbGF5bGlzdHMubGVuZ3RoIDwgNTsKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgcmV0dXJuIHRoaXMucGxheWxpc3RzLmxlbmd0aCA8IDU7CiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIHJldHVybiB0aGlzLnBsYXlsaXN0cy5sZW5ndGggPCAxMDsKICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgcmV0dXJuIHRoaXMucGxheWxpc3RzLmxlbmd0aCA8IDI1OwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgLi4ubWFwQWN0aW9ucyhbInN5bmNocm9uaXplVE1EQiIsICJzeW5jaHJvbml6ZVBsYXlsaXN0Il0pLAogICAgb3BlbkNvbnRleHQoY29udGV4dCkgewogICAgICB0aGlzLiRyZWZzW2NvbnRleHRdLm9wZW4oKTsKICAgIH0sCiAgICBsb2FkR3JvdXBzKCkgewogICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7CiAgICAgIGh0dHBTZXJ2aWNlCiAgICAgICAgLnBvc3QoInBsYXlsaXN0L2xvYWQtZ3JvdXBzIiwgewogICAgICAgICAgaG9zdDogdGhpcy5wbGF5bGlzdC5zb3VyY2VfaG9zdCwKICAgICAgICAgIHBvcnQ6IHRoaXMucGxheWxpc3Quc291cmNlX3BvcnQsCiAgICAgICAgICB1c2VybmFtZTogdGhpcy5wbGF5bGlzdC5zb3VyY2VfdXNlcm5hbWUsCiAgICAgICAgICBwYXNzd29yZDogdGhpcy5wbGF5bGlzdC5zb3VyY2VfcGFzc3dvcmQsCiAgICAgICAgfSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVzLmRhdGEubGl2ZSkgJiYgQXJyYXkuaXNBcnJheShyZXMuZGF0YS5tb3ZpZXMpICYmIEFycmF5LmlzQXJyYXkocmVzLmRhdGEuc2VyaWVzKSkgewogICAgICAgICAgICB0aGlzLnBsYXlsaXN0R3JvdXBzID0gcmVzLmRhdGE7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9LAogICAgbG9hZFBsYXlsaXN0cygpIHsKICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlOwogICAgICBodHRwU2VydmljZQogICAgICAgIC5nZXQoInBsYXlsaXN0IikKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IHRydWUpIHsKICAgICAgICAgICAgdGhpcy5wbGF5bGlzdHMgPSByZXMuZGF0YTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgdGhpcy4kbm90aWZ5KAogICAgICAgICAgICAiZXJyb3IiLAogICAgICAgICAgICB0aGlzLiR0KCJwcm9maWxlLmZhaWxlZCIpLAogICAgICAgICAgICB0aGlzLiR0KCJ4dHJlYW0ueHRyZWFtLWxvYWQtZXJyb3IiKSwKICAgICAgICAgICAgImxhLXVzZXItc2hpZWxkIiwKICAgICAgICAgICAgeyBkdXJhdGlvbjogNTAwMCwgcGVybWFuZW50OiBmYWxzZSB9CiAgICAgICAgICApOwogICAgICAgIH0pOwogICAgfSwKICAgIGFkZFBsYXlsaXN0KCkgewogICAgICBpZiAodGhpcy5jYW5BZGRQbGF5bGlzdCAhPT0gdHJ1ZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBodHRwU2VydmljZQogICAgICAgIC5wb3N0KCJwbGF5bGlzdC9hZGQiKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSB0cnVlICYmIHJlcy5kYXRhICE9PSBmYWxzZSkgewogICAgICAgICAgICB0aGlzLnBsYXlsaXN0ID0gewogICAgICAgICAgICAgIGlkOiByZXMuZGF0YSwKICAgICAgICAgICAgICB1cmw6ICIiLAogICAgICAgICAgICAgIGVuYWJsZWQ6IDEsCiAgICAgICAgICAgICAgc291cmNlX2hvc3Q6ICIiLAogICAgICAgICAgICAgIHNvdXJjZV9wb3J0OiAiIiwKICAgICAgICAgICAgICBzb3VyY2VfdXNlcm5hbWU6ICIiLAogICAgICAgICAgICAgIHNvdXJjZV9wYXNzd29yZDogIiIsCiAgICAgICAgICAgICAgc291cmNlX2V4cF9kYXRlOiBmYWxzZSwKICAgICAgICAgICAgICBzb3VyY2VfbWF4X2Nvbm5lY3Rpb25zOiBmYWxzZSwKICAgICAgICAgICAgICBzeW5jX2VuYWJsZWQ6IDEsCiAgICAgICAgICAgICAgc3luY19pbnRlcnZhbDogNDgsCiAgICAgICAgICAgICAgc3luY19saXZlOiBbXSwKICAgICAgICAgICAgICBzeW5jX21vdmllczogW10sCiAgICAgICAgICAgICAgc3luY19zZXJpZXM6IFtdLAogICAgICAgICAgICAgIGlwX3Byb3RlY3Rpb246IDAsCiAgICAgICAgICAgICAgaXBfYWxsb3dlZDogW10sCiAgICAgICAgICAgICAgYXBpX3VzZXJuYW1lOiB0aGlzLmN1cnJlbnRVc2VyLnVzZXIudXNlcm5hbWUsCiAgICAgICAgICAgICAgYXBpX3Bhc3N3b3JkOiAiIiwKICAgICAgICAgICAgICBhcGlfbWVzc2FnZTogIldlbGNvbWUgdG8gSVBUVi1Ub29scy5jb20iLAogICAgICAgICAgICAgIGFwaV9vdXRwdXRfZm9ybWF0OiAxLAogICAgICAgICAgICAgIG5hbWU6ICIiLAogICAgICAgICAgICAgIHRtZGJfbGFuZ3VhZ2U6IHRoaXMuJGkxOG4ubG9jYWxlLAogICAgICAgICAgICAgIGVwZ19vZmZzZXQ6IHRoaXMuZXBnT2Zmc2V0LAogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLnBsYXlsaXN0R3JvdXBzID0gewogICAgICAgICAgICAgIGxpdmU6IFtdLAogICAgICAgICAgICAgIG1vdmllczogW10sCiAgICAgICAgICAgICAgc2VyaWVzOiBbXSwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy5yYW5kb21QYXNzd29yZCgpOwogICAgICAgICAgICB0aGlzLmVkaXRvciA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy4kbm90aWZ5KAogICAgICAgICAgICAiZXJyb3IiLAogICAgICAgICAgICB0aGlzLiR0KCJwcm9maWxlLmZhaWxlZCIpLAogICAgICAgICAgICB0aGlzLiR0KCJ4dHJlYW0ueHRyZWFtLW5ldy1lcnJvciIpLAogICAgICAgICAgICAibGEtdXNlci1zaGllbGQiLAogICAgICAgICAgICB7IGR1cmF0aW9uOiA1MDAwLCBwZXJtYW5lbnQ6IGZhbHNlIH0KICAgICAgICAgICk7CiAgICAgICAgfSk7CiAgICB9LAogICAgZWRpdFBsYXlsaXN0KHBsYXlsaXN0KSB7CiAgICAgIHRoaXMucGxheWxpc3QgPSBPYmplY3QuYXNzaWduKHt9LCBwbGF5bGlzdCk7CiAgICAgIHRoaXMucGxheWxpc3RBdXRoKCk7CiAgICAgIHRoaXMuZWRpdG9yID0gdHJ1ZTsKICAgIH0sCiAgICBwbGF5bGlzdEluZm9Nb2RhbChzaG93LCBwbGF5bGlzdCkgewogICAgICBpZiAocGxheWxpc3QpIHsKICAgICAgICB0aGlzLnBsYXlsaXN0SW5mby51c2VybmFtZSA9IHBsYXlsaXN0LmFwaV91c2VybmFtZTsKICAgICAgICB0aGlzLnBsYXlsaXN0SW5mby5wYXNzd29yZCA9IHBsYXlsaXN0LmFwaV9wYXNzd29yZDsKICAgICAgfQogICAgICB0aGlzLnBsYXlsaXN0SW5mby5tb2RhbCA9IHNob3c7CiAgICB9LAogICAgY2FuY2VsRWRpdG9yKCkgewogICAgICB0aGlzLmVkaXRvciA9IGZhbHNlOwogICAgfSwKICAgIHNhdmVFZGl0b3IoKSB7CiAgICAgIGxldCBwbGF5bGlzdCA9IHRoaXMucGxheWxpc3Q7CiAgICAgIGxldCBwbGF5bGlzdElkID0gdGhpcy5wbGF5bGlzdC5pZDsKICAgICAgZGVsZXRlIHBsYXlsaXN0LmlkOwogICAgICBkZWxldGUgcGxheWxpc3QudXJsOwogICAgICBkZWxldGUgcGxheWxpc3QuZ3JvdXBzOwogICAgICBkZWxldGUgcGxheWxpc3Quc3RyZWFtczsKCiAgICAgIHBsYXlsaXN0Lmxhc3RfdXBkYXRlZCA9IG5ldyBEYXRlKCk7CiAgICAgIGh0dHBTZXJ2aWNlCiAgICAgICAgLnB1dChgcGxheWxpc3QvJHtwbGF5bGlzdElkfWAsIHBsYXlsaXN0KQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSB0cnVlICYmIHJlcy5kYXRhID09PSB0cnVlKSB7CiAgICAgICAgICAgIHRoaXMuJG5vdGlmeSgKICAgICAgICAgICAgICAicHJpbWFyeSIsCiAgICAgICAgICAgICAgdGhpcy4kdCgicHJvZmlsZS5zdWNjZXNzIiksCiAgICAgICAgICAgICAgdGhpcy4kdCgieHRyZWFtLnh0cmVhbS1zYXZlLXN1Y2Nlc3MiKSwKICAgICAgICAgICAgICAibGEtdXNlci1zaGllbGQiLAogICAgICAgICAgICAgIHsgZHVyYXRpb246IDUwMDAsIHBlcm1hbmVudDogZmFsc2UgfQogICAgICAgICAgICApOwogICAgICAgICAgICB0aGlzLmVkaXRvciA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLmxvYWRQbGF5bGlzdHMoKTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICB0aGlzLiRub3RpZnkoCiAgICAgICAgICAgICJlcnJvciIsCiAgICAgICAgICAgIHRoaXMuJHQoInByb2ZpbGUuZmFpbGVkIiksCiAgICAgICAgICAgIHRoaXMuJHQoInh0cmVhbS54dHJlYW0tc2F2ZS1lcnJvciIpLAogICAgICAgICAgICAibGEtdXNlci1zaGllbGQiLAogICAgICAgICAgICB7IGR1cmF0aW9uOiA1MDAwLCBwZXJtYW5lbnQ6IGZhbHNlIH0KICAgICAgICAgICk7CiAgICAgICAgfSk7CiAgICB9LAogICAgZGVsZXRlUGxheWxpc3QoaWQpIHsKICAgICAgaHR0cFNlcnZpY2UKICAgICAgICAuZGVsZXRlKGBwbGF5bGlzdC8ke2lkfWApCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IHRydWUpIHsKICAgICAgICAgICAgdGhpcy4kbm90aWZ5KAogICAgICAgICAgICAgICJwcmltYXJ5IiwKICAgICAgICAgICAgICB0aGlzLiR0KCJwcm9maWxlLnN1Y2Nlc3MiKSwKICAgICAgICAgICAgICB0aGlzLiR0KCJ4dHJlYW0ueHRyZWFtLWRlbGV0ZS1zdWNjZXNzIiksCiAgICAgICAgICAgICAgImxhLXVzZXItc2hpZWxkIiwKICAgICAgICAgICAgICB7IGR1cmF0aW9uOiA1MDAwLCBwZXJtYW5lbnQ6IGZhbHNlIH0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgdGhpcy5sb2FkUGxheWxpc3RzKCk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy4kbm90aWZ5KAogICAgICAgICAgICAiZXJyb3IiLAogICAgICAgICAgICB0aGlzLiR0KCJwcm9maWxlLmZhaWxlZCIpLAogICAgICAgICAgICB0aGlzLiR0KCJ4dHJlYW0ueHRyZWFtLWRlbGV0ZS1lcnJvciIpLAogICAgICAgICAgICAibGEtdXNlci1zaGllbGQiLAogICAgICAgICAgICB7IGR1cmF0aW9uOiA1MDAwLCBwZXJtYW5lbnQ6IGZhbHNlIH0KICAgICAgICAgICk7CiAgICAgICAgfSk7CiAgICB9LAogICAgc2VhcmNoQWNjb3VudChzZWFyY2gpIHsKICAgICAgaWYgKHNlYXJjaC5sZW5ndGggPT09IDApIHsKICAgICAgICB0aGlzLnNlYXJjaCA9IG51bGw7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zZWFyY2ggPSBzZWFyY2g7CiAgICAgIH0KICAgIH0sCiAgICBwcmludEFjY291bnRzKCkgewogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicGxheWxpc3RzIikucHJpbnQoKTsKICAgIH0sCiAgICBmb3JtYXREYXRlKGRhdGUpIHsKICAgICAgcmV0dXJuIGRhdGUgPT09IGZhbHNlCiAgICAgICAgPyAiIgogICAgICAgIDogZGF0ZSA9PT0gbnVsbCB8fAogICAgICAgICAgZGF0ZSA9PT0gIjAwMDAtMDAtMDAgMDA6MDA6MDAiIHx8CiAgICAgICAgICBkYXRlID09PSAwIHx8CiAgICAgICAgICBkYXRlID09PSAiIgogICAgICAgID8gdGhpcy4kdCgieHRyZWFtLnVubGltaXRlZCIpCiAgICAgICAgOiBuZXcgRGF0ZShkYXRlKS50b0xvY2FsZVN0cmluZygKICAgICAgICAgICAgdGhpcy4kdCgiZGF0ZS5sb2NhbGUiKSwKICAgICAgICAgICAgdGhpcy5kYXRlT3B0aW9ucwogICAgICAgICAgKTsKICAgIH0sCiAgICBmb3JtYXRNYXhDb25uZWN0aW9ucyhtYXgpIHsKICAgICAgcmV0dXJuIG1heCA9PT0gZmFsc2UKICAgICAgICA/ICIiCiAgICAgICAgOiBtYXggPT09IG51bGwgfHwgbWF4IDw9IDAKICAgICAgICA/IHRoaXMuJHQoInh0cmVhbS51bmxpbWl0ZWQiKQogICAgICAgIDogbWF4OwogICAgfSwKICAgIGRvVGFiQ2hhbmdlKHRhYikgewogICAgICBpZiAodGFiID09IDIpIHsKICAgICAgICB0aGlzLmxvYWRHcm91cHMoKTsKICAgICAgfQogICAgICB0aGlzLmFjdGl2ZVRhYiA9IHRhYjsKICAgIH0sCiAgICByYW5kb21QYXNzd29yZCgpIHsKICAgICAgaHR0cFNlcnZpY2UKICAgICAgICAucG9zdCgicGxheWxpc3QvcmFuZG9tLXBhc3N3b3JkIiwgewogICAgICAgICAgdXNlcm5hbWU6IHRoaXMucGxheWxpc3QuYXBpX3VzZXJuYW1lLAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IHRydWUpIHsKICAgICAgICAgICAgdGhpcy5wbGF5bGlzdC5hcGlfcGFzc3dvcmQgPSByZXMuZGF0YTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBwbGF5bGlzdEF1dGgoKSB7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgaHR0cFNlcnZpY2UKICAgICAgICAucG9zdCgicGxheWxpc3QvYXV0aGVudGljYXRlIiwgewogICAgICAgICAgaG9zdDogdGhpcy5wbGF5bGlzdC5zb3VyY2VfaG9zdCwKICAgICAgICAgIHBvcnQ6IHRoaXMucGxheWxpc3Quc291cmNlX3BvcnQsCiAgICAgICAgICB1c2VybmFtZTogdGhpcy5wbGF5bGlzdC5zb3VyY2VfdXNlcm5hbWUsCiAgICAgICAgICBwYXNzd29yZDogdGhpcy5wbGF5bGlzdC5zb3VyY2VfcGFzc3dvcmQsCiAgICAgICAgfSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IHRydWUgJiYgcmVzLmRhdGEuYXV0aCkgewogICAgICAgICAgICB0aGlzLnBsYXlsaXN0LnNvdXJjZV9leHBfZGF0ZSA9IHJlcy5kYXRhLmV4cF9kYXRlOwogICAgICAgICAgICB0aGlzLnBsYXlsaXN0LnNvdXJjZV9tYXhfY29ubmVjdGlvbnMgPSByZXMuZGF0YS5tYXhfY29ubmVjdGlvbnM7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9KTsKICAgIH0sCiAgICBnZXRJUEFkZHJlc3MoKSB7CiAgICAgIGh0dHBTZXJ2aWNlCiAgICAgICAgLmdldCgicGxheWxpc3QvaXAtYWRkcmVzcyIpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IHRydWUpIHsKICAgICAgICAgICAgdGhpcy5wbGF5bGlzdC5pcF9hbGxvd2VkLnB1c2gocmVzLmRhdGEpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgIH0pOwogICAgfSwKICAgIGNoZWNrQXZhaWxhYmlsaXR5KCkgewogICAgICBodHRwU2VydmljZQogICAgICAgIC5wb3N0KCJwbGF5bGlzdC91c2VyLXBhc3MtZXhpc3RzIiwgewogICAgICAgICAgdXNlcm5hbWU6IHRoaXMucGxheWxpc3QuYXBpX3VzZXJuYW1lLAogICAgICAgICAgcGFzc3dvcmQ6IHRoaXMucGxheWxpc3QuYXBpX3Bhc3N3b3JkLAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IHRydWUpIHsKICAgICAgICAgICAgaWYgKHJlcy5kYXRhID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgdGhpcy4kbm90aWZ5KAogICAgICAgICAgICAgICAgImVycm9yIiwKICAgICAgICAgICAgICAgIHRoaXMuJHQoInh0cmVhbS5ub3QtYXZhaWxhYmxlIiksCiAgICAgICAgICAgICAgICB0aGlzLiR0KCJ4dHJlYW0udXNlci1wYXNzLXVzZWQiKSwKICAgICAgICAgICAgICAgICJsYS1leGNsYW1hdGlvbi10cmlhbmdsZSIsCiAgICAgICAgICAgICAgICB7IGR1cmF0aW9uOiA1MDAwLCBwZXJtYW5lbnQ6IGZhbHNlIH0KICAgICAgICAgICAgICApOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuJG5vdGlmeSgKICAgICAgICAgICAgICAgICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgIHRoaXMuJHQoInh0cmVhbS5hdmFpbGFibGUiKSwKICAgICAgICAgICAgICAgIHRoaXMuJHQoInh0cmVhbS51c2VyLXBhc3MtYXZhaWxhYmxlIiksCiAgICAgICAgICAgICAgICAibGEtY2hlY2stY2lyY2xlIiwKICAgICAgICAgICAgICAgIHsgZHVyYXRpb246IDUwMDAsIHBlcm1hbmVudDogZmFsc2UgfQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBleHBvcnRNM1UoKSB7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgaHR0cFNlcnZpY2UKICAgICAgICAuZG93bmxvYWQoYHBsYXlsaXN0L2V4cG9ydC9tM3UvJHt0aGlzLnBsYXlsaXN0LmlkfWApCiAgICAgICAgLnRoZW4oKGJsb2IpID0+IHsKICAgICAgICAgIHZhciB1cmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgICAgICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwogICAgICAgICAgYS5ocmVmID0gdXJsOwogICAgICAgICAgYS5kb3dubG9hZCA9ICJleHBvcnQubTN1IjsKICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7CiAgICAgICAgICBhLmNsaWNrKCk7CiAgICAgICAgICBhLnJlbW92ZSgpOwogICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9KTsKICAgIH0sCiAgICBleHBvcnRTSVBUVigpIHsKICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlOwogICAgICBodHRwU2VydmljZQogICAgICAgIC5kb3dubG9hZChgcGxheWxpc3QvZXhwb3J0L3NpcHR2LyR7dGhpcy5wbGF5bGlzdC5pZH1gKQogICAgICAgIC50aGVuKChibG9iKSA9PiB7CiAgICAgICAgICB2YXIgdXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgICAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgICAgIGEuaHJlZiA9IHVybDsKICAgICAgICAgIGEuZG93bmxvYWQgPSAiZXhwb3J0LnR4dCI7CiAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOwogICAgICAgICAgYS5jbGljaygpOwogICAgICAgICAgYS5yZW1vdmUoKTsKICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICB9LAogICAgZXhwb3J0Qm91cXVldCgpIHsKICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlOwogICAgICBodHRwU2VydmljZQogICAgICAgIC5kb3dubG9hZChgcGxheWxpc3QvZXhwb3J0L2JvdXF1ZXQvJHt0aGlzLnBsYXlsaXN0LmlkfWApCiAgICAgICAgLnRoZW4oKGJsb2IpID0+IHsKICAgICAgICAgIHZhciB1cmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgICAgICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwogICAgICAgICAgYS5ocmVmID0gdXJsOwogICAgICAgICAgYS5kb3dubG9hZCA9ICJleHBvcnQuemlwIjsKICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7CiAgICAgICAgICBhLmNsaWNrKCk7CiAgICAgICAgICBhLnJlbW92ZSgpOwogICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9KTsKICAgIH0sCiAgICBleHBvcnRDU1YoKSB7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgaHR0cFNlcnZpY2UKICAgICAgICAuZG93bmxvYWQoYHBsYXlsaXN0L2V4cG9ydC9jc3YvJHt0aGlzLnBsYXlsaXN0LmlkfWApCiAgICAgICAgLnRoZW4oKGJsb2IpID0+IHsKICAgICAgICAgIHZhciB1cmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgICAgICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwogICAgICAgICAgYS5ocmVmID0gdXJsOwogICAgICAgICAgYS5kb3dubG9hZCA9ICJleHBvcnQuemlwIjsKICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7CiAgICAgICAgICBhLmNsaWNrKCk7CiAgICAgICAgICBhLnJlbW92ZSgpOwogICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9KTsKICAgIH0sCiAgICBleHBvcnRKU09OKCkgewogICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7CiAgICAgIGh0dHBTZXJ2aWNlCiAgICAgICAgLmRvd25sb2FkKGBwbGF5bGlzdC9leHBvcnQvanNvbi8ke3RoaXMucGxheWxpc3QuaWR9YCkKICAgICAgICAudGhlbigoYmxvYikgPT4gewogICAgICAgICAgdmFyIHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgICAgICBhLmhyZWYgPSB1cmw7CiAgICAgICAgICBhLmRvd25sb2FkID0gImV4cG9ydC56aXAiOwogICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsKICAgICAgICAgIGEuY2xpY2soKTsKICAgICAgICAgIGEucmVtb3ZlKCk7CiAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0pOwogICAgfSwKICAgIGJhY2t1cFBsYXlsaXN0KHBhdGgpIHsKICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlOwogICAgICBodHRwU2VydmljZQogICAgICAgIC5kb3dubG9hZChgcGxheWxpc3QvYmFjay11cC8ke3BhdGh9LyR7dGhpcy5wbGF5bGlzdC5pZH1gKQogICAgICAgIC50aGVuKChibG9iKSA9PiB7CiAgICAgICAgICB2YXIgdXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgICAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgICAgIGEuaHJlZiA9IHVybDsKICAgICAgICAgIGEuZG93bmxvYWQgPSAiYmFja3VwLnppcCI7CiAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOwogICAgICAgICAgYS5jbGljaygpOwogICAgICAgICAgYS5yZW1vdmUoKTsKICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICB9LAogICAgYmFja3VwRVBHQ29kZXMoKSB7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgaHR0cFNlcnZpY2UKICAgICAgICAuZG93bmxvYWQoYHBsYXlsaXN0L2JhY2stdXAvZXBnLWNvZGVzLyR7dGhpcy5wbGF5bGlzdC5pZH1gKQogICAgICAgIC50aGVuKChibG9iKSA9PiB7CiAgICAgICAgICB2YXIgdXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgICAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgICAgIGEuaHJlZiA9IHVybDsKICAgICAgICAgIGEuZG93bmxvYWQgPSAiYmFja3VwLnppcCI7CiAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOwogICAgICAgICAgYS5jbGljaygpOwogICAgICAgICAgYS5yZW1vdmUoKTsKICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICB9LAogICAgcmVzdG9yZUVQR0NvZGVzKGUpIHsKICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlOwogICAgICBpZiAoZSAmJiBlLnRhcmdldC5maWxlcy5sZW5ndGggPT0gMSkgewogICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgiYmFja3VwLnppcCIsIGUudGFyZ2V0LmZpbGVzWzBdKTsKICAgICAgICBodHRwU2VydmljZQogICAgICAgICAgLnBvc3RGaWxlKGBwbGF5bGlzdC9yZXN0b3JlL2VwZy1jb2Rlcy8ke3RoaXMucGxheWxpc3QuaWR9YCwgZm9ybURhdGEpCiAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSB0cnVlICYmIHJlcy5kYXRhID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgdGhpcy4kbm90aWZ5KAogICAgICAgICAgICAgICAgInByaW1hcnkiLAogICAgICAgICAgICAgICAgdGhpcy4kdCgicHJvZmlsZS5zdWNjZXNzIiksCiAgICAgICAgICAgICAgICB0aGlzLiR0KCJ4dHJlYW0ucmVzdG9yZS1lcGdjb2Rlcy1zdWNjZXNzIiksCiAgICAgICAgICAgICAgICAibGEtdXNlci1zaGllbGQiLAogICAgICAgICAgICAgICAgeyBkdXJhdGlvbjogNTAwMCwgcGVybWFuZW50OiBmYWxzZSB9CiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLiRub3RpZnkoCiAgICAgICAgICAgICAgICAiZXJyb3IiLAogICAgICAgICAgICAgICAgdGhpcy4kdCgicHJvZmlsZS5mYWlsZWQiKSwKICAgICAgICAgICAgICAgIHRoaXMuJHQoInh0cmVhbS5yZXN0b3JlLWVwZ2NvZGVzLWVycm9yIiksCiAgICAgICAgICAgICAgICAibGEtdXNlci1zaGllbGQiLAogICAgICAgICAgICAgICAgeyBkdXJhdGlvbjogNTAwMCwgcGVybWFuZW50OiBmYWxzZSB9CiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuJG5vdGlmeSgKICAgICAgICAgICAgICAiZXJyb3IiLAogICAgICAgICAgICAgIHRoaXMuJHQoInByb2ZpbGUuZmFpbGVkIiksCiAgICAgICAgICAgICAgdGhpcy4kdCgieHRyZWFtLnJlc3RvcmUtZXBnY29kZXMtZXJyb3IiKSwKICAgICAgICAgICAgICAibGEtdXNlci1zaGllbGQiLAogICAgICAgICAgICAgIHsgZHVyYXRpb246IDUwMDAsIHBlcm1hbmVudDogZmFsc2UgfQogICAgICAgICAgICApOwogICAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICByZXN0b3JlUGxheWxpc3QoZSkgewogICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7CiAgICAgIGlmIChlICYmIGUudGFyZ2V0LmZpbGVzLmxlbmd0aCA9PSAxKSB7CiAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCJiYWNrdXAuemlwIiwgZS50YXJnZXQuZmlsZXNbMF0pOwogICAgICAgIGh0dHBTZXJ2aWNlCiAgICAgICAgICAucG9zdEZpbGUoYHBsYXlsaXN0L3Jlc3RvcmUvcGxheWxpc3QvJHt0aGlzLnBsYXlsaXN0LmlkfWAsIGZvcm1EYXRhKQogICAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gdHJ1ZSAmJiByZXMuZGF0YSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgIHRoaXMuJG5vdGlmeSgKICAgICAgICAgICAgICAgICJwcmltYXJ5IiwKICAgICAgICAgICAgICAgIHRoaXMuJHQoInByb2ZpbGUuc3VjY2VzcyIpLAogICAgICAgICAgICAgICAgdGhpcy4kdCgieHRyZWFtLnJlc3RvcmUtcGxheWxpc3Qtc3VjY2VzcyIpLAogICAgICAgICAgICAgICAgImxhLXVzZXItc2hpZWxkIiwKICAgICAgICAgICAgICAgIHsgZHVyYXRpb246IDUwMDAsIHBlcm1hbmVudDogZmFsc2UgfQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy4kbm90aWZ5KAogICAgICAgICAgICAgICAgImVycm9yIiwKICAgICAgICAgICAgICAgIHRoaXMuJHQoInByb2ZpbGUuZmFpbGVkIiksCiAgICAgICAgICAgICAgICB0aGlzLiR0KCJ4dHJlYW0ucmVzdG9yZS1wbGF5bGlzdC1lcnJvciIpLAogICAgICAgICAgICAgICAgImxhLXVzZXItc2hpZWxkIiwKICAgICAgICAgICAgICAgIHsgZHVyYXRpb246IDUwMDAsIHBlcm1hbmVudDogZmFsc2UgfQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLiRub3RpZnkoCiAgICAgICAgICAgICAgImVycm9yIiwKICAgICAgICAgICAgICB0aGlzLiR0KCJwcm9maWxlLmZhaWxlZCIpLAogICAgICAgICAgICAgIHRoaXMuJHQoInh0cmVhbS5yZXN0b3JlLXBsYXlsaXN0LWVycm9yIiksCiAgICAgICAgICAgICAgImxhLXVzZXItc2hpZWxkIiwKICAgICAgICAgICAgICB7IGR1cmF0aW9uOiA1MDAwLCBwZXJtYW5lbnQ6IGZhbHNlIH0KICAgICAgICAgICAgKTsKICAgICAgICAgIH0pOwogICAgICB9CiAgICB9LAogIH0sCiAgYmVmb3JlTW91bnQoKSB7CiAgICB0aGlzLmxvYWRQbGF5bGlzdHMoKTsKICAgIEV2ZW50QnVzLiRlbWl0KCJjYW4tYWRkLXBsYXlsaXN0IiwgdGhpcy5jYW5BZGRQbGF5bGlzdCk7CiAgICBFdmVudEJ1cy4kb24oInNlYXJjaCIsIHRoaXMuc2VhcmNoQWNjb3VudCk7CiAgICBFdmVudEJ1cy4kb24oInByaW50IiwgdGhpcy5wcmludEFjY291bnRzKTsKICAgIEV2ZW50QnVzLiRvbigicmVmcmVzaCIsIHRoaXMubG9hZFBsYXlsaXN0cyk7CiAgICBFdmVudEJ1cy4kb24oImFkZCIsIHRoaXMuYWRkUGxheWxpc3QpOwogICAgRXZlbnRCdXMuJG9uKCJjYW5jZWwiLCB0aGlzLmNhbmNlbEVkaXRvcik7CiAgICBFdmVudEJ1cy4kb24oInNhdmUiLCB0aGlzLnNhdmVFZGl0b3IpOwogICAgRXZlbnRCdXMuJG9uKCJ0YWItY2hhbmdlIiwgdGhpcy5kb1RhYkNoYW5nZSk7CiAgfSwKICBiZWZvcmVEZXN0cm95KCkgewogICAgRXZlbnRCdXMuJG9mZigic2VhcmNoIiwgdGhpcy5zZWFyY2hBY2NvdW50KTsKICAgIEV2ZW50QnVzLiRvZmYoInByaW50IiwgdGhpcy5wcmludEFjY291bnRzKTsKICAgIEV2ZW50QnVzLiRvZmYoInJlZnJlc2giLCB0aGlzLmxvYWRQbGF5bGlzdHMpOwogICAgRXZlbnRCdXMuJG9mZigiYWRkIiwgdGhpcy5hZGRQbGF5bGlzdCk7CiAgICBFdmVudEJ1cy4kb2ZmKCJjYW5jZWwiLCB0aGlzLmNhbmNlbEVkaXRvcik7CiAgICBFdmVudEJ1cy4kb2ZmKCJzYXZlIiwgdGhpcy5zYXZlRWRpdG9yKTsKICAgIEV2ZW50QnVzLiRvZmYoInRhYi1jaGFuZ2UiLCB0aGlzLmRvVGFiQ2hhbmdlKTsKICB9LAogIHdhdGNoOiB7CiAgICBmcm9tOiBmdW5jdGlvbiAodmFsKSB7CiAgICAgIEV2ZW50QnVzLiRlbWl0KCJ1cGRhdGUtZnJvbSIsIHZhbCk7CiAgICAgIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wID0gMDsKICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCA9IDA7CiAgICB9LAogICAgdG86IGZ1bmN0aW9uICh2YWwpIHsKICAgICAgRXZlbnRCdXMuJGVtaXQoInVwZGF0ZS10byIsIHZhbCk7CiAgICB9LAogICAgdG90YWw6IGZ1bmN0aW9uICh2YWwpIHsKICAgICAgRXZlbnRCdXMuJGVtaXQoInVwZGF0ZS10b3RhbCIsIHZhbCk7CiAgICB9LAogICAgZWRpdG9yOiBmdW5jdGlvbiAodmFsKSB7CiAgICAgIEV2ZW50QnVzLiRlbWl0KCJ1cGRhdGUtZWRpdG9yIiwgdmFsKTsKICAgICAgaWYgKCF2YWwpIHsKICAgICAgICB0aGlzLmxvYWRQbGF5bGlzdHMoKTsKICAgICAgfQogICAgfSwKICAgIGNhbkFkZFBsYXlsaXN0OiBmdW5jdGlvbiAodmFsKSB7CiAgICAgIEV2ZW50QnVzLiRlbWl0KCJjYW4tYWRkLXBsYXlsaXN0IiwgdmFsKTsKICAgIH0sCiAgICAicGxheWxpc3Quc291cmNlX2hvc3QiOiBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICgKICAgICAgICB0aGlzLnBsYXlsaXN0LnNvdXJjZV9ob3N0ICYmCiAgICAgICAgdGhpcy5wbGF5bGlzdC5zb3VyY2VfaG9zdC5sZW5ndGggJiYKICAgICAgICB0aGlzLnBsYXlsaXN0LnNvdXJjZV91c2VybmFtZSAmJgogICAgICAgIHRoaXMucGxheWxpc3Quc291cmNlX3VzZXJuYW1lLmxlbmd0aCAmJgogICAgICAgIHRoaXMucGxheWxpc3Quc291cmNlX3Bhc3N3b3JkICYmCiAgICAgICAgdGhpcy5wbGF5bGlzdC5zb3VyY2VfcGFzc3dvcmQubGVuZ3RoICYmCiAgICAgICAgdGhpcy5lZGl0b3IKICAgICAgKSB7CiAgICAgICAgdGhpcy5wbGF5bGlzdEF1dGgoKTsKICAgICAgICB0aGlzLmxvYWRHcm91cHMoKTsKICAgICAgfQogICAgfSwKICAgICJwbGF5bGlzdC51cmwiOiBmdW5jdGlvbiAodXJsKSB7CiAgICAgIGlmICh1cmwgIT09IHVuZGVmaW5lZCAmJiB1cmwubGVuZ3RoKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGxldCB1ID0gbmV3IFVSTCh1cmwpOwogICAgICAgICAgdGhpcy5wbGF5bGlzdC5zb3VyY2VfaG9zdCA9IHUuaG9zdG5hbWU7CiAgICAgICAgICB0aGlzLnBsYXlsaXN0LnNvdXJjZV9wb3J0ID0gdS5wb3J0OwogICAgICAgICAgdGhpcy5wbGF5bGlzdC5zb3VyY2VfdXNlcm5hbWUgPSB1LnNlYXJjaFBhcmFtcy5nZXQoInVzZXJuYW1lIik7CiAgICAgICAgICB0aGlzLnBsYXlsaXN0LnNvdXJjZV9wYXNzd29yZCA9IHUuc2VhcmNoUGFyYW1zLmdldCgicGFzc3dvcmQiKTsKICAgICAgICAgIGlmICghdGhpcy5wbGF5bGlzdC5uYW1lLmxlbmd0aCkgewogICAgICAgICAgICB0aGlzLnBsYXlsaXN0Lm5hbWUgPSB1Lmhvc3RuYW1lLnRvVXBwZXJDYXNlKCk7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCB7CiAgICAgICAgICAvLwogICAgICAgIH0KICAgICAgfQogICAgfSwKICB9LAp9Owo="},null]}