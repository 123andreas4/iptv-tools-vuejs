{"remainingRequest":"/home/ernst/Desktop/IPTV-Tools/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ernst/Desktop/IPTV-Tools/src/views/app/xtream/playlists.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ernst/Desktop/IPTV-Tools/src/views/app/xtream/playlists.vue","mtime":1622716998178},{"path":"/home/ernst/Desktop/IPTV-Tools/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ernst/Desktop/IPTV-Tools/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/ernst/Desktop/IPTV-Tools/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ernst/Desktop/IPTV-Tools/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8qIGVzbGludC1kaXNhYmxlIHZ1ZS9uby1zaWRlLWVmZmVjdHMtaW4tY29tcHV0ZWQtcHJvcGVydGllcyAqLwppbXBvcnQgeyBFdmVudEJ1cyB9IGZyb20gIi4uLy4uLy4uL3NlcnZpY2VzL2VidXMiOwppbXBvcnQgeyBodHRwU2VydmljZSB9IGZyb20gIi4uLy4uLy4uL3NlcnZpY2VzL2h0dHAiOwppbXBvcnQgeyBsYW5ndWFnZXMgfSBmcm9tICIuLi8uLi8uLi9oZWxwZXJzIjsKaW1wb3J0IHsgVXNlclJvbGUsIFN1YnNjcmlwdGlvblR5cGUgfSBmcm9tICIuLi8uLi8uLi9jb25zdGFudHMvY29uZmlnIjsKaW1wb3J0IHsgbWFwR2V0dGVycywgbWFwQWN0aW9ucyB9IGZyb20gInZ1ZXgiOwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsYW5ndWFnZXMsCiAgICAgIGFjdGl2ZVRhYjogMCwKICAgICAgcGxheWxpc3RHcm91cHM6IHsKICAgICAgICBsaXZlOiBbXSwKICAgICAgICBtb3ZpZXM6IFtdLAogICAgICAgIHNlcmllczogW10sCiAgICAgIH0sCiAgICAgIHBsYXlsaXN0czogW10sCiAgICAgIHBsYXlsaXN0OiBudWxsLAogICAgICBlZGl0b3I6IGZhbHNlLAogICAgICBzZWFyY2g6IG51bGwsCiAgICAgIGlzTG9hZGluZzogZmFsc2UsCiAgICAgIGZyb206IDAsCiAgICAgIHRvOiAwLAogICAgICB0b3RhbDogMCwKICAgICAgY3VycmVudFBhZ2U6IDEsCiAgICAgIGZpZWxkczogWwogICAgICAgIHsga2V5OiAiY3JlYXRlZF9hdCIsIGxhYmVsOiB0aGlzLiR0KCJ4dHJlYW0uY3JlYXRlZCIpLCBzb3J0YWJsZTogdHJ1ZSB9LAogICAgICAgIHsKICAgICAgICAgIGtleTogImxhc3RfdXBkYXRlZCIsCiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgieHRyZWFtLmxhc3QtdXBkYXRlZCIpLAogICAgICAgICAgc29ydGFibGU6IHRydWUsCiAgICAgICAgfSwKICAgICAgICB7IGtleTogIm5hbWUiLCBsYWJlbDogdGhpcy4kdCgieHRyZWFtLm5hbWUiKSwgc29ydGFibGU6IHRydWUgfSwKICAgICAgICB7IGtleTogImdyb3VwcyIsIGxhYmVsOiB0aGlzLiR0KCJ4dHJlYW0uZ3JvdXBzIiksIHNvcnRhYmxlOiB0cnVlIH0sCiAgICAgICAgeyBrZXk6ICJzdHJlYW1zIiwgbGFiZWw6IHRoaXMuJHQoInh0cmVhbS5zdHJlYW1zIiksIHNvcnRhYmxlOiB0cnVlIH0sCiAgICAgICAgewogICAgICAgICAga2V5OiAic3luY19pbnRlcnZhbCIsCiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgieHRyZWFtLnN5bmMtaW50ZXJ2YWwiKSwKICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAga2V5OiAic3luY2VkX2F0IiwKICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCJ4dHJlYW0uc3luY2VkLWF0IiksCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGtleTogInNvdXJjZV9leHBfZGF0ZSIsCiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgieHRyZWFtLmV4cGlyZSIpLAogICAgICAgICAgc29ydGFibGU6IHRydWUsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBrZXk6ICJzb3VyY2VfbWF4X2Nvbm5lY3Rpb25zIiwKICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCJ4dHJlYW0ubWF4LWNvbm5lY3Rpb25zIiksCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGtleTogImFjdGlvbnMiLAogICAgICAgICAgbGFiZWw6IHRoaXMuJHQoInVzZXJzLmFjdGlvbnMiKSwKICAgICAgICAgIHNvcnRhYmxlOiBmYWxzZSwKICAgICAgICAgIHRoQ2xhc3M6ICJ0ZXh0LXJpZ2h0IiwKICAgICAgICAgIHRkQ2xhc3M6ICJ0ZXh0LXJpZ2h0IiwKICAgICAgICB9LAogICAgICBdLAogICAgICBzeW5jSW50ZXJ2YWxzOiBbCiAgICAgICAgeyB0ZXh0OiB0aGlzLiR0KCJzeW5jLWludGVydmFsLjQ4IiksIHZhbHVlOiA0OCB9LAogICAgICAgIHsgdGV4dDogdGhpcy4kdCgic3luYy1pbnRlcnZhbC4yNCIpLCB2YWx1ZTogMjQgfSwKICAgICAgICB7IHRleHQ6IHRoaXMuJHQoInN5bmMtaW50ZXJ2YWwuMTIiKSwgdmFsdWU6IDEyIH0sCiAgICAgICAgeyB0ZXh0OiB0aGlzLiR0KCJzeW5jLWludGVydmFsLjYiKSwgdmFsdWU6IDYgfSwKICAgICAgICB7IHRleHQ6IHRoaXMuJHQoInN5bmMtaW50ZXJ2YWwuMSIpLCB2YWx1ZTogMSB9LAogICAgICBdLAogICAgICBvdXRwdXRUeXBlczogWwogICAgICAgIHsgdGV4dDogdGhpcy4kdCgib3V0cHV0LjEiKSwgdmFsdWU6IDEgfSwKICAgICAgICB7IHRleHQ6IHRoaXMuJHQoIm91dHB1dC4yIiksIHZhbHVlOiAyIH0sCiAgICAgIF0sCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoWyJjdXJyZW50VXNlciIsICJzZXR0aW5ncyIsICJzeW5jVE1EQiIsICJzeW5jUGxheWxpc3QiXSksCiAgICBwZXJQYWdlKCkgewogICAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5wZXJQYWdlOwogICAgfSwKICAgIHNlYXJjaEZpbHRlcmVkKCkgewogICAgICBpZiAodGhpcy5zZWFyY2ggPT09IG51bGwpIHsKICAgICAgICByZXR1cm4gdGhpcy5wbGF5bGlzdHM7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHJlID0gbmV3IFJlZ0V4cCh0aGlzLnNlYXJjaCwgImkiKTsKICAgICAgICByZXR1cm4gdGhpcy5wbGF5bGlzdHMuZmlsdGVyKChhY2NvdW50KSA9PiB7CiAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICBTdHJpbmcoYWNjb3VudC50aXRsZSkubWF0Y2gocmUpIHx8CiAgICAgICAgICAgIFN0cmluZyhhY2NvdW50Lmhvc3QpLm1hdGNoKHJlKSB8fAogICAgICAgICAgICBTdHJpbmcoYWNjb3VudC5wb3J0KS5tYXRjaChyZSkgfHwKICAgICAgICAgICAgU3RyaW5nKGFjY291bnQudXNlcm5hbWUpLm1hdGNoKHJlKSB8fAogICAgICAgICAgICBTdHJpbmcoYWNjb3VudC5wYXNzd29yZCkubWF0Y2gocmUpIHx8CiAgICAgICAgICAgIHRoaXMuZm9ybWF0RGF0ZShhY2NvdW50LnN5bmNlZF9hdCkubWF0Y2gocmUpIHx8CiAgICAgICAgICAgIHRoaXMuJHQoYHN5bmMtaW50ZXJ2YWwuJHthY2NvdW50LnN5bmNfaW50ZXJ2YWx9YCkubWF0Y2gocmUpCiAgICAgICAgICApOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgcGFnZWQoKSB7CiAgICAgIHRoaXMudG90YWwgPSB0aGlzLnNlYXJjaEZpbHRlcmVkLmxlbmd0aDsKICAgICAgdGhpcy5mcm9tID0gKHRoaXMuY3VycmVudFBhZ2UgLSAxKSAqIHRoaXMucGVyUGFnZTsKICAgICAgdGhpcy50byA9CiAgICAgICAgdGhpcy5mcm9tICsgdGhpcy5wZXJQYWdlID4gdGhpcy50b3RhbAogICAgICAgICAgPyB0aGlzLnRvdGFsCiAgICAgICAgICA6IHRoaXMuZnJvbSArIHRoaXMucGVyUGFnZTsKICAgICAgcmV0dXJuIHRoaXMuc2VhcmNoRmlsdGVyZWQuc2xpY2UodGhpcy5mcm9tLCB0aGlzLnRvKTsKICAgIH0sCiAgICBhbGxvd2VkSXBzOiB7CiAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLnBsYXlsaXN0LmlwX2FsbG93ZWQuam9pbigiLCIpOwogICAgICB9LAogICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICB0aGlzLnBsYXlsaXN0LmlwX2FsbG93ZWQgPSB2YWwuc3BsaXQoIiwiKS5tYXAoKGlwKSA9PiB7CiAgICAgICAgICByZXR1cm4gaXAudHJpbSgpOwogICAgICAgIH0pOwogICAgICB9LAogICAgfSwKICAgIGNvbnRleHRMaXZlKCkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICBsZXQgbGl2ZSA9IFsuLi52bS5wbGF5bGlzdEdyb3Vwcy5saXZlXTsKICAgICAgcmV0dXJuIFsKICAgICAgICB7CiAgICAgICAgICB0ZXh0OiB2bS4kdCgiZ2VuZXJhbC5zZWxlY3QtYWxsIiksCiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZtLnBsYXlsaXN0LnN5bmNfbGl2ZSA9IFsuLi5saXZlLm1hcCgoZykgPT4gZy5jYXRlZ29yeV9pZCldOwogICAgICAgICAgfSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRleHQ6IHZtLiR0KCJnZW5lcmFsLnNlbGVjdC1ub25lIiksCiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZtLnBsYXlsaXN0LnN5bmNfbGl2ZSA9IFtdOwogICAgICAgICAgfSwKICAgICAgICB9LAogICAgICBdOwogICAgfSwKICAgIGNvbnRleHRNb3ZpZXMoKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIGxldCBtb3ZpZXMgPSBbLi4udm0ucGxheWxpc3RHcm91cHMubW92aWVzXTsKICAgICAgcmV0dXJuIFsKICAgICAgICB7CiAgICAgICAgICB0ZXh0OiB2bS4kdCgiZ2VuZXJhbC5zZWxlY3QtYWxsIiksCiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmICh2bS5jYW5Vc2VNb3ZpZXNTZXJpZXMpIHsKICAgICAgICAgICAgICB2bS5wbGF5bGlzdC5zeW5jX21vdmllcyA9IFsuLi5tb3ZpZXMubWFwKChnKSA9PiBnLmNhdGVnb3J5X2lkKV07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBkaXNhYmxlZDogIXZtLmNhblVzZU1vdmllc1NlcmllcywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRleHQ6IHZtLiR0KCJnZW5lcmFsLnNlbGVjdC1ub25lIiksCiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZtLnBsYXlsaXN0LnN5bmNfbW92aWVzID0gW107CiAgICAgICAgICB9LAogICAgICAgICAgZGlzYWJsZWQ6ICF2bS5jYW5Vc2VNb3ZpZXNTZXJpZXMsCiAgICAgICAgfSwKICAgICAgXTsKICAgIH0sCiAgICBjb250ZXh0U2VyaWVzKCkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICBsZXQgc2VyaWVzID0gWy4uLnZtLnBsYXlsaXN0R3JvdXBzLnNlcmllc107CiAgICAgIHJldHVybiBbCiAgICAgICAgewogICAgICAgICAgdGV4dDogdm0uJHQoImdlbmVyYWwuc2VsZWN0LWFsbCIpLAogICAgICAgICAgb25DbGljazogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAodm0uY2FuVXNlTW92aWVzU2VyaWVzKSB7CiAgICAgICAgICAgICAgdm0ucGxheWxpc3Quc3luY19zZXJpZXMgPSBbLi4uc2VyaWVzLm1hcCgoZykgPT4gZy5jYXRlZ29yeV9pZCldOwogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgZGlzYWJsZWQ6ICF2bS5jYW5Vc2VNb3ZpZXNTZXJpZXMsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0ZXh0OiB2bS4kdCgiZ2VuZXJhbC5zZWxlY3Qtbm9uZSIpLAogICAgICAgICAgb25DbGljazogZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2bS5wbGF5bGlzdC5zeW5jX3NlcmllcyA9IFtdOwogICAgICAgICAgfSwKICAgICAgICAgIGRpc2FibGVkOiAhdm0uY2FuVXNlTW92aWVzU2VyaWVzLAogICAgICAgIH0sCiAgICAgIF07CiAgICB9LAogICAgdG1kYkxhbmd1YWdlcygpIHsKICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMubGFuZ3VhZ2VzKS5tYXAoKGxhbmd1YWdlKSA9PiB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHZhbHVlOiBsYW5ndWFnZSwKICAgICAgICAgIHRleHQ6IGAke3RoaXMubGFuZ3VhZ2VzW2xhbmd1YWdlXS5uYW1lfSAoJHt0aGlzLmxhbmd1YWdlc1tsYW5ndWFnZV0ubmF0aXZlTmFtZX0pYCwKICAgICAgICB9OwogICAgICB9KTsKICAgIH0sCiAgICBjYW5Vc2VDdXN0b21Vc2VyUGFzcygpIHsKICAgICAgcmV0dXJuIFtVc2VyUm9sZS5TdXBlckFkbWluLCBVc2VyUm9sZS5BZG1pbiwgVXNlclJvbGUuTW9kZXJhdG9yXS5pbmNsdWRlcygKICAgICAgICB0aGlzLmN1cnJlbnRVc2VyLnVzZXIucm9sZQogICAgICApOwogICAgfSwKICAgIGNhblVzZU1vdmllc1NlcmllcygpIHsKICAgICAgcmV0dXJuIFsKICAgICAgICBTdWJzY3JpcHRpb25UeXBlLlByb2Zlc3Npb25hbCwKICAgICAgICBTdWJzY3JpcHRpb25UeXBlLkZhbWlseSwKICAgICAgICBTdWJzY3JpcHRpb25UeXBlLkJ1c2luZXNzU21hbGwsCiAgICAgICAgU3Vic2NyaXB0aW9uVHlwZS5CdXNpbmVzc1Byb2Zlc3Npb25hbCwKICAgICAgICBTdWJzY3JpcHRpb25UeXBlLkJ1c2luZXNzRW50ZXJwcmlzZSwKICAgICAgICBTdWJzY3JpcHRpb25UeXBlLk1hbmFnZXIsCiAgICAgIF0uaW5jbHVkZXModGhpcy5jdXJyZW50VXNlci5zdWJzY3JpcHRpb24uc3Vic2NyaXB0aW9uX3R5cGUpOwogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoWyJzeW5jaHJvbml6ZVRNREIiLCAic3luY2hyb25pemVQbGF5bGlzdCJdKSwKICAgIG9wZW5Db250ZXh0KGNvbnRleHQpIHsKICAgICAgdGhpcy4kcmVmc1tjb250ZXh0XS5vcGVuKCk7CiAgICB9LAogICAgbG9hZEdyb3VwcygpIHsKICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlOwogICAgICBodHRwU2VydmljZQogICAgICAgIC5wb3N0KCJwbGF5bGlzdC9sb2FkLWdyb3VwcyIsIHsKICAgICAgICAgIGhvc3Q6IHRoaXMucGxheWxpc3Quc291cmNlX2hvc3QsCiAgICAgICAgICBwb3J0OiB0aGlzLnBsYXlsaXN0LnNvdXJjZV9wb3J0LAogICAgICAgICAgdXNlcm5hbWU6IHRoaXMucGxheWxpc3Quc291cmNlX3VzZXJuYW1lLAogICAgICAgICAgcGFzc3dvcmQ6IHRoaXMucGxheWxpc3Quc291cmNlX3Bhc3N3b3JkLAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSB0cnVlKSB7CiAgICAgICAgICAgIHRoaXMucGxheWxpc3RHcm91cHMgPSByZXMuZGF0YTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCiAgICBsb2FkUGxheWxpc3RzKCkgewogICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7CiAgICAgIGh0dHBTZXJ2aWNlCiAgICAgICAgLmdldCgicGxheWxpc3QiKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gdHJ1ZSkgewogICAgICAgICAgICB0aGlzLnBsYXlsaXN0cyA9IHJlcy5kYXRhOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICB0aGlzLiRub3RpZnkoCiAgICAgICAgICAgICJlcnJvciIsCiAgICAgICAgICAgIHRoaXMuJHQoInByb2ZpbGUuZmFpbGVkIiksCiAgICAgICAgICAgIHRoaXMuJHQoInh0cmVhbS54dHJlYW0tbG9hZC1lcnJvciIpLAogICAgICAgICAgICAibGEtdXNlci1zaGllbGQiLAogICAgICAgICAgICB7IGR1cmF0aW9uOiA1MDAwLCBwZXJtYW5lbnQ6IGZhbHNlIH0KICAgICAgICAgICk7CiAgICAgICAgfSk7CiAgICB9LAogICAgYWRkUGxheWxpc3QoKSB7CiAgICAgIGh0dHBTZXJ2aWNlCiAgICAgICAgLnBvc3QoInBsYXlsaXN0L2FkZCIpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IHRydWUgJiYgcmVzLmRhdGEgIT09IGZhbHNlKSB7CiAgICAgICAgICAgIHRoaXMucGxheWxpc3QgPSB7CiAgICAgICAgICAgICAgaWQ6IHJlcy5kYXRhLAogICAgICAgICAgICAgIHVybDogIiIsCiAgICAgICAgICAgICAgZW5hYmxlZDogMSwKICAgICAgICAgICAgICBzb3VyY2VfaG9zdDogIiIsCiAgICAgICAgICAgICAgc291cmNlX3BvcnQ6ICIiLAogICAgICAgICAgICAgIHNvdXJjZV91c2VybmFtZTogIiIsCiAgICAgICAgICAgICAgc291cmNlX3Bhc3N3b3JkOiAiIiwKICAgICAgICAgICAgICBzb3VyY2VfZXhwX2RhdGU6IGZhbHNlLAogICAgICAgICAgICAgIHNvdXJjZV9tYXhfY29ubmVjdGlvbnM6IGZhbHNlLAogICAgICAgICAgICAgIHN5bmNfZW5hYmxlZDogMSwKICAgICAgICAgICAgICBzeW5jX2ludGVydmFsOiA0OCwKICAgICAgICAgICAgICBzeW5jX2xpdmU6IFtdLAogICAgICAgICAgICAgIHN5bmNfbW92aWVzOiBbXSwKICAgICAgICAgICAgICBzeW5jX3NlcmllczogW10sCiAgICAgICAgICAgICAgaXBfcHJvdGVjdGlvbjogMCwKICAgICAgICAgICAgICBpcF9hbGxvd2VkOiBbXSwKICAgICAgICAgICAgICBhcGlfdXNlcm5hbWU6IHRoaXMuY3VycmVudFVzZXIudXNlci51c2VybmFtZSwKICAgICAgICAgICAgICBhcGlfcGFzc3dvcmQ6ICIiLAogICAgICAgICAgICAgIGFwaV9tZXNzYWdlOiAiIiwKICAgICAgICAgICAgICBhcGlfb3V0cHV0X2Zvcm1hdDogMSwKICAgICAgICAgICAgICBuYW1lOiAiIiwKICAgICAgICAgICAgICB0bWRiX2xhbmd1YWdlOiB0aGlzLiRpMThuLmxvY2FsZSwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy5wbGF5bGlzdEdyb3VwcyA9IHsKICAgICAgICAgICAgICBsaXZlOiBbXSwKICAgICAgICAgICAgICBtb3ZpZXM6IFtdLAogICAgICAgICAgICAgIHNlcmllczogW10sCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMucmFuZG9tUGFzc3dvcmQoKTsKICAgICAgICAgICAgdGhpcy5lZGl0b3IgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMuJG5vdGlmeSgKICAgICAgICAgICAgImVycm9yIiwKICAgICAgICAgICAgdGhpcy4kdCgicHJvZmlsZS5mYWlsZWQiKSwKICAgICAgICAgICAgdGhpcy4kdCgieHRyZWFtLnh0cmVhbS1uZXctZXJyb3IiKSwKICAgICAgICAgICAgImxhLXVzZXItc2hpZWxkIiwKICAgICAgICAgICAgeyBkdXJhdGlvbjogNTAwMCwgcGVybWFuZW50OiBmYWxzZSB9CiAgICAgICAgICApOwogICAgICAgIH0pOwogICAgfSwKICAgIGVkaXRQbGF5bGlzdChwbGF5bGlzdCkgewogICAgICB0aGlzLnBsYXlsaXN0ID0gT2JqZWN0LmFzc2lnbih7fSwgcGxheWxpc3QpOwogICAgICB0aGlzLmVkaXRvciA9IHRydWU7CiAgICB9LAogICAgY2FuY2VsRWRpdG9yKCkgewogICAgICB0aGlzLmVkaXRvciA9IGZhbHNlOwogICAgfSwKICAgIHNhdmVFZGl0b3IoKSB7CiAgICAgIGxldCBwbGF5bGlzdCA9IHRoaXMucGxheWxpc3Q7CiAgICAgIGxldCBwbGF5bGlzdElkID0gdGhpcy5wbGF5bGlzdC5pZDsKICAgICAgZGVsZXRlIHBsYXlsaXN0LmlkOwogICAgICBkZWxldGUgcGxheWxpc3QudXJsOwogICAgICBkZWxldGUgcGxheWxpc3QuZ3JvdXBzOwogICAgICBkZWxldGUgcGxheWxpc3Quc3RyZWFtczsKCiAgICAgIHBsYXlsaXN0Lmxhc3RfdXBkYXRlZCA9IG5ldyBEYXRlKCk7CiAgICAgIGh0dHBTZXJ2aWNlCiAgICAgICAgLnB1dChgcGxheWxpc3QvJHtwbGF5bGlzdElkfWAsIHBsYXlsaXN0KQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSB0cnVlICYmIHJlcy5kYXRhID09PSB0cnVlKSB7CiAgICAgICAgICAgIHRoaXMuJG5vdGlmeSgKICAgICAgICAgICAgICAicHJpbWFyeSIsCiAgICAgICAgICAgICAgdGhpcy4kdCgicHJvZmlsZS5zdWNjZXNzIiksCiAgICAgICAgICAgICAgdGhpcy4kdCgieHRyZWFtLnh0cmVhbS1zYXZlLXN1Y2Nlc3MiKSwKICAgICAgICAgICAgICAibGEtdXNlci1zaGllbGQiLAogICAgICAgICAgICAgIHsgZHVyYXRpb246IDUwMDAsIHBlcm1hbmVudDogZmFsc2UgfQogICAgICAgICAgICApOwogICAgICAgICAgICB0aGlzLmVkaXRvciA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLmxvYWRQbGF5bGlzdHMoKTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICB0aGlzLiRub3RpZnkoCiAgICAgICAgICAgICJlcnJvciIsCiAgICAgICAgICAgIHRoaXMuJHQoInByb2ZpbGUuZmFpbGVkIiksCiAgICAgICAgICAgIHRoaXMuJHQoInh0cmVhbS54dHJlYW0tc2F2ZS1lcnJvciIpLAogICAgICAgICAgICAibGEtdXNlci1zaGllbGQiLAogICAgICAgICAgICB7IGR1cmF0aW9uOiA1MDAwLCBwZXJtYW5lbnQ6IGZhbHNlIH0KICAgICAgICAgICk7CiAgICAgICAgfSk7CiAgICB9LAogICAgZGVsZXRlUGxheWxpc3QoaWQpIHsKICAgICAgaHR0cFNlcnZpY2UKICAgICAgICAuZGVsZXRlKGBwbGF5bGlzdC8ke2lkfWApCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IHRydWUpIHsKICAgICAgICAgICAgdGhpcy4kbm90aWZ5KAogICAgICAgICAgICAgICJwcmltYXJ5IiwKICAgICAgICAgICAgICB0aGlzLiR0KCJwcm9maWxlLnN1Y2Nlc3MiKSwKICAgICAgICAgICAgICB0aGlzLiR0KCJ4dHJlYW0ueHRyZWFtLWRlbGV0ZS1zdWNjZXNzIiksCiAgICAgICAgICAgICAgImxhLXVzZXItc2hpZWxkIiwKICAgICAgICAgICAgICB7IGR1cmF0aW9uOiA1MDAwLCBwZXJtYW5lbnQ6IGZhbHNlIH0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgdGhpcy5sb2FkUGxheWxpc3RzKCk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy4kbm90aWZ5KAogICAgICAgICAgICAiZXJyb3IiLAogICAgICAgICAgICB0aGlzLiR0KCJwcm9maWxlLmZhaWxlZCIpLAogICAgICAgICAgICB0aGlzLiR0KCJ4dHJlYW0ueHRyZWFtLWRlbGV0ZS1lcnJvciIpLAogICAgICAgICAgICAibGEtdXNlci1zaGllbGQiLAogICAgICAgICAgICB7IGR1cmF0aW9uOiA1MDAwLCBwZXJtYW5lbnQ6IGZhbHNlIH0KICAgICAgICAgICk7CiAgICAgICAgfSk7CiAgICB9LAogICAgc2VhcmNoQWNjb3VudChzZWFyY2gpIHsKICAgICAgaWYgKHNlYXJjaC5sZW5ndGggPT09IDApIHsKICAgICAgICB0aGlzLnNlYXJjaCA9IG51bGw7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zZWFyY2ggPSBzZWFyY2g7CiAgICAgIH0KICAgIH0sCiAgICBwcmludEFjY291bnRzKCkgewogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicGxheWxpc3RzIikucHJpbnQoKTsKICAgIH0sCiAgICBmb3JtYXREYXRlKGRhdGUpIHsKICAgICAgcmV0dXJuIGRhdGUgPT09IGZhbHNlCiAgICAgICAgPyAiIgogICAgICAgIDogZGF0ZSA9PT0gbnVsbCB8fCBkYXRlID09PSAiMDAwMC0wMC0wMCAwMDowMDowMCIgfHwgZGF0ZSA9PT0gMAogICAgICAgID8gdGhpcy4kdCgieHRyZWFtLnVubGltaXRlZCIpCiAgICAgICAgOiBuZXcgRGF0ZShkYXRlKS50b0xvY2FsZVN0cmluZygKICAgICAgICAgICAgdGhpcy4kdCgiZGF0ZS5sb2NhbGUiKSwKICAgICAgICAgICAgdGhpcy5kYXRlT3B0aW9ucwogICAgICAgICAgKTsKICAgIH0sCiAgICBmb3JtYXRNYXhDb25uZWN0aW9ucyhtYXgpIHsKICAgICAgcmV0dXJuIG1heCA9PT0gZmFsc2UKICAgICAgICA/ICIiCiAgICAgICAgOiBtYXggPT09IG51bGwgfHwgbWF4IDw9IDAKICAgICAgICA/IHRoaXMuJHQoInh0cmVhbS51bmxpbWl0ZWQiKQogICAgICAgIDogbWF4OwogICAgfSwKICAgIGRvVGFiQ2hhbmdlKHRhYikgewogICAgICBpZiAodGFiID09IDEpIHsKICAgICAgICAvL3RoaXMubG9hZEdyb3VwcygpOwogICAgICB9CiAgICAgIHRoaXMuYWN0aXZlVGFiID0gdGFiOwogICAgfSwKICAgIHJhbmRvbVBhc3N3b3JkKCkgewogICAgICBodHRwU2VydmljZQogICAgICAgIC5wb3N0KCJwbGF5bGlzdC9yYW5kb20tcGFzc3dvcmQiLCB7CiAgICAgICAgICB1c2VybmFtZTogdGhpcy5wbGF5bGlzdC5hcGlfdXNlcm5hbWUsCiAgICAgICAgfSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gdHJ1ZSkgewogICAgICAgICAgICB0aGlzLnBsYXlsaXN0LmFwaV9wYXNzd29yZCA9IHJlcy5kYXRhOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgIH0pOwogICAgfSwKICAgIHBsYXlsaXN0QXV0aCgpIHsKICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlOwogICAgICBodHRwU2VydmljZQogICAgICAgIC5wb3N0KCJwbGF5bGlzdC9hdXRoZW50aWNhdGUiLCB7CiAgICAgICAgICBob3N0OiB0aGlzLnBsYXlsaXN0LnNvdXJjZV9ob3N0LAogICAgICAgICAgcG9ydDogdGhpcy5wbGF5bGlzdC5zb3VyY2VfcG9ydCwKICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLnBsYXlsaXN0LnNvdXJjZV91c2VybmFtZSwKICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLnBsYXlsaXN0LnNvdXJjZV9wYXNzd29yZCwKICAgICAgICB9KQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gdHJ1ZSAmJiByZXMuZGF0YS5hdXRoKSB7CiAgICAgICAgICAgIHRoaXMucGxheWxpc3Quc291cmNlX2V4cF9kYXRlID0gcmVzLmRhdGEuZXhwX2RhdGU7CiAgICAgICAgICAgIHRoaXMucGxheWxpc3Quc291cmNlX21heF9jb25uZWN0aW9ucyA9IHJlcy5kYXRhLm1heF9jb25uZWN0aW9uczsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgfSk7CiAgICB9LAogICAgZ2V0SVBBZGRyZXNzKCkgewogICAgICBodHRwU2VydmljZQogICAgICAgIC5nZXQoInBsYXlsaXN0L2lwLWFkZHJlc3MiKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSB0cnVlKSB7CiAgICAgICAgICAgIHRoaXMucGxheWxpc3QuaXBfYWxsb3dlZC5wdXNoKHJlcy5kYXRhKTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBjaGVja0F2YWlsYWJpbGl0eSgpIHsKICAgICAgaHR0cFNlcnZpY2UKICAgICAgICAucG9zdCgicGxheWxpc3QvdXNlci1wYXNzLWV4aXN0cyIsIHsKICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLnBsYXlsaXN0LmFwaV91c2VybmFtZSwKICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLnBsYXlsaXN0LmFwaV9wYXNzd29yZCwKICAgICAgICB9KQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSB0cnVlKSB7CiAgICAgICAgICAgIGlmIChyZXMuZGF0YSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgIHRoaXMuJG5vdGlmeSgKICAgICAgICAgICAgICAgICJlcnJvciIsCiAgICAgICAgICAgICAgICB0aGlzLiR0KCJ4dHJlYW0ubm90LWF2YWlsYWJsZSIpLAogICAgICAgICAgICAgICAgdGhpcy4kdCgieHRyZWFtLnVzZXItcGFzcy11c2VkIiksCiAgICAgICAgICAgICAgICAibGEtZXhjbGFtYXRpb24tdHJpYW5nbGUiLAogICAgICAgICAgICAgICAgeyBkdXJhdGlvbjogNTAwMCwgcGVybWFuZW50OiBmYWxzZSB9CiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLiRub3RpZnkoCiAgICAgICAgICAgICAgICAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICB0aGlzLiR0KCJ4dHJlYW0uYXZhaWxhYmxlIiksCiAgICAgICAgICAgICAgICB0aGlzLiR0KCJ4dHJlYW0udXNlci1wYXNzLWF2YWlsYWJsZSIpLAogICAgICAgICAgICAgICAgImxhLWNoZWNrLWNpcmNsZSIsCiAgICAgICAgICAgICAgICB7IGR1cmF0aW9uOiA1MDAwLCBwZXJtYW5lbnQ6IGZhbHNlIH0KICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgfSk7CiAgICB9LAogIH0sCiAgYmVmb3JlTW91bnQoKSB7CiAgICB0aGlzLmxvYWRQbGF5bGlzdHMoKTsKICAgIEV2ZW50QnVzLiRvbigic2VhcmNoIiwgdGhpcy5zZWFyY2hBY2NvdW50KTsKICAgIEV2ZW50QnVzLiRvbigicHJpbnQiLCB0aGlzLnByaW50QWNjb3VudHMpOwogICAgRXZlbnRCdXMuJG9uKCJyZWZyZXNoIiwgdGhpcy5sb2FkUGxheWxpc3RzKTsKICAgIEV2ZW50QnVzLiRvbigiYWRkIiwgdGhpcy5hZGRQbGF5bGlzdCk7CiAgICBFdmVudEJ1cy4kb24oImNhbmNlbCIsIHRoaXMuY2FuY2VsRWRpdG9yKTsKICAgIEV2ZW50QnVzLiRvbigic2F2ZSIsIHRoaXMuc2F2ZUVkaXRvcik7CiAgICBFdmVudEJ1cy4kb24oInRhYi1jaGFuZ2UiLCB0aGlzLmRvVGFiQ2hhbmdlKTsKICB9LAogIGJlZm9yZURlc3Ryb3koKSB7CiAgICBFdmVudEJ1cy4kb2ZmKCJzZWFyY2giLCB0aGlzLnNlYXJjaEFjY291bnQpOwogICAgRXZlbnRCdXMuJG9mZigicHJpbnQiLCB0aGlzLnByaW50QWNjb3VudHMpOwogICAgRXZlbnRCdXMuJG9mZigicmVmcmVzaCIsIHRoaXMubG9hZFBsYXlsaXN0cyk7CiAgICBFdmVudEJ1cy4kb2ZmKCJhZGQiLCB0aGlzLmFkZFBsYXlsaXN0KTsKICAgIEV2ZW50QnVzLiRvZmYoImNhbmNlbCIsIHRoaXMuY2FuY2VsRWRpdG9yKTsKICAgIEV2ZW50QnVzLiRvZmYoInNhdmUiLCB0aGlzLnNhdmVFZGl0b3IpOwogICAgRXZlbnRCdXMuJG9mZigidGFiLWNoYW5nZSIsIHRoaXMuZG9UYWJDaGFuZ2UpOwogIH0sCiAgd2F0Y2g6IHsKICAgIGZyb206IGZ1bmN0aW9uICh2YWwpIHsKICAgICAgRXZlbnRCdXMuJGVtaXQoInVwZGF0ZS1mcm9tIiwgdmFsKTsKICAgICAgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgPSAwOwogICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wID0gMDsKICAgIH0sCiAgICB0bzogZnVuY3Rpb24gKHZhbCkgewogICAgICBFdmVudEJ1cy4kZW1pdCgidXBkYXRlLXRvIiwgdmFsKTsKICAgIH0sCiAgICB0b3RhbDogZnVuY3Rpb24gKHZhbCkgewogICAgICBFdmVudEJ1cy4kZW1pdCgidXBkYXRlLXRvdGFsIiwgdmFsKTsKICAgIH0sCiAgICBlZGl0b3I6IGZ1bmN0aW9uICh2YWwpIHsKICAgICAgRXZlbnRCdXMuJGVtaXQoInVwZGF0ZS1lZGl0b3IiLCB2YWwpOwogICAgICBpZiAoIXZhbCkgewogICAgICAgIHRoaXMubG9hZFBsYXlsaXN0cygpOwogICAgICB9CiAgICB9LAogICAgInBsYXlsaXN0LnNvdXJjZV9ob3N0IjogZnVuY3Rpb24gKCkgewogICAgICBpZiAoCiAgICAgICAgdGhpcy5wbGF5bGlzdC5zb3VyY2VfaG9zdC5sZW5ndGggJiYKICAgICAgICB0aGlzLnBsYXlsaXN0LnNvdXJjZV91c2VybmFtZS5sZW5ndGggJiYKICAgICAgICB0aGlzLnBsYXlsaXN0LnNvdXJjZV9wYXNzd29yZC5sZW5ndGggJiYKICAgICAgICB0aGlzLmVkaXRvcgogICAgICApIHsKICAgICAgICB0aGlzLnBsYXlsaXN0QXV0aCgpOwogICAgICAgIHRoaXMubG9hZEdyb3VwcygpOwogICAgICB9CiAgICB9LAogICAgInBsYXlsaXN0LnVybCI6IGZ1bmN0aW9uICh1cmwpIHsKICAgICAgaWYgKHVybCAhPT0gdW5kZWZpbmVkICYmIHVybC5sZW5ndGgpIHsKICAgICAgICB0cnkgewogICAgICAgICAgbGV0IHUgPSBuZXcgVVJMKHVybCk7CiAgICAgICAgICB0aGlzLnBsYXlsaXN0LnNvdXJjZV9ob3N0ID0gdS5ob3N0bmFtZTsKICAgICAgICAgIHRoaXMucGxheWxpc3Quc291cmNlX3BvcnQgPSB1LnBvcnQ7CiAgICAgICAgICB0aGlzLnBsYXlsaXN0LnNvdXJjZV91c2VybmFtZSA9IHUuc2VhcmNoUGFyYW1zLmdldCgidXNlcm5hbWUiKTsKICAgICAgICAgIHRoaXMucGxheWxpc3Quc291cmNlX3Bhc3N3b3JkID0gdS5zZWFyY2hQYXJhbXMuZ2V0KCJwYXNzd29yZCIpOwogICAgICAgICAgaWYgKCF0aGlzLnBsYXlsaXN0Lm5hbWUubGVuZ3RoKSB7CiAgICAgICAgICAgIHRoaXMucGxheWxpc3QubmFtZSA9IHUuaG9zdG5hbWUudG9VcHBlckNhc2UoKTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgIC8vCiAgICAgICAgfQogICAgICB9CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["playlists.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqVA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"playlists.vue","sourceRoot":"src/views/app/xtream","sourcesContent":["<template>\n  <erd-row class=\"m-0 p-0\" id=\"playlists\">\n    <erd-spinner v-if=\"isLoading\" size=\"lg\" overlay absolute></erd-spinner>\n    <erd-col xl=\"12\" sm=\"12\" v-if=\"!editor\">\n      <b-table :items=\"paged\" :fields=\"fields\" striped small>\n        <template v-slot:cell(created_at)=\"row\">\n          {{ formatDate(row.item.created_at) }}\n        </template>\n        <template v-slot:cell(last_updated)=\"row\">\n          {{ formatDate(row.item.last_updated) }}\n        </template>\n        <template v-slot:cell(synced_at)=\"row\">\n          {{\n            row.item.synced_at && row.item.synced_at !== \"0000-00-00 00:00:00\"\n              ? formatDate(row.item.synced_at)\n              : $t(\"general.not-available\")\n          }}\n        </template>\n        <template v-slot:cell(source_exp_date)=\"row\">\n          {{ formatDate(row.item.source_exp_date) }}\n        </template>\n        <template v-slot:cell(sync_interval)=\"row\">\n          {{ $t(`sync-interval.${row.item.sync_interval}`) }}\n        </template>\n        <template v-slot:cell(actions)=\"row\">\n          <erd-button\n            variant=\"info\"\n            class=\"btn-table\"\n            :disabled=\"syncPlaylist\"\n            @click=\"synchronizePlaylist(row.item.id)\"\n            ><i class=\"las la-sync\"></i\n          ></erd-button>\n          <erd-button\n            variant=\"info\"\n            class=\"btn-table\"\n            :disabled=\"syncTMDB\"\n            @click=\"synchronizeTMDB(row.item.id)\"\n            ><i class=\"lab la-imdb\"></i\n          ></erd-button>\n          <erd-button\n            variant=\"info\"\n            class=\"btn-table\"\n            @click=\"editPlaylist(row.item)\"\n            ><i class=\"las la-pen\"></i\n          ></erd-button>\n          <erd-button\n            variant=\"danger\"\n            class=\"btn-table\"\n            @click=\"deletePlaylist(row.item.id)\"\n            ><i class=\"las la-trash\"></i\n          ></erd-button>\n        </template>\n      </b-table>\n      <b-pagination\n        class=\"w-100 my-3\"\n        size=\"sm\"\n        align=\"center\"\n        :total-rows=\"total\"\n        :per-page=\"perPage\"\n        v-model=\"currentPage\"\n      >\n        <template v-slot:next-text>\n          <i class=\"las la-angle-right\" />\n        </template>\n        <template v-slot:prev-text>\n          <i class=\"las la-angle-left\" />\n        </template>\n        <template v-slot:first-text>\n          <i class=\"las la-angle-double-left\" />\n        </template>\n        <template v-slot:last-text>\n          <i class=\"las la-angle-double-right\" />\n        </template>\n      </b-pagination>\n    </erd-col>\n    <!-- SOURCE -->\n    <erd-col xl=\"12\" sm=\"12\" v-if=\"editor && activeTab === 0\">\n      <label class=\"d-block\" for=\"source-title\">{{ $t(\"xtream.title\") }}</label>\n      <erd-input\n        id=\"source-title\"\n        class=\"mt-1 mb-2 w-100\"\n        v-model=\"playlist.name\"\n      ></erd-input>\n      <div v-if=\"playlist.url !== undefined\">\n        <label class=\"d-block\" for=\"source-url\">{{ $t(\"xtream.url\") }}</label>\n        <erd-input\n          id=\"source-url\"\n          class=\"mt-1 mb-2 w-100\"\n          :placeholder=\"$t('xtream.url-placeholder')\"\n          v-model=\"playlist.url\"\n        ></erd-input>\n      </div>\n      <label class=\"d-block\" for=\"source-host\">{{ $t(\"xtream.host\") }}</label>\n      <erd-input\n        id=\"source-host\"\n        class=\"mt-1 mb-2 w-100\"\n        v-model=\"playlist.source_host\"\n      ></erd-input>\n      <label class=\"d-block\" for=\"source-port\">{{ $t(\"xtream.port\") }}</label>\n      <erd-input\n        id=\"source-port\"\n        class=\"mt-1 mb-2 w-100\"\n        v-model=\"playlist.source_port\"\n      ></erd-input>\n      <label class=\"d-block\" for=\"source-username\">{{\n        $t(\"xtream.username\")\n      }}</label>\n      <erd-input\n        id=\"source-username\"\n        class=\"mt-1 mb-2 w-100\"\n        v-model=\"playlist.source_username\"\n      ></erd-input>\n      <label class=\"d-block\" for=\"source-password\">{{\n        $t(\"xtream.password\")\n      }}</label>\n      <erd-input\n        id=\"source-password\"\n        class=\"mt-1 mb-2 w-100\"\n        v-model=\"playlist.source_password\"\n      ></erd-input>\n      <label class=\"d-block\" for=\"source-expiry\">{{\n        $t(\"xtream.expire\")\n      }}</label>\n      <erd-input\n        id=\"source-expiry\"\n        class=\"mt-1 mb-2 w-100\"\n        :value=\"formatDate(playlist.source_exp_date)\"\n        disabled\n      ></erd-input>\n      <label class=\"d-block\" for=\"max-connections\">{{\n        $t(\"xtream.max-connections\")\n      }}</label>\n      <erd-input\n        id=\"source-max-connections\"\n        class=\"mt-1 mb-2 w-100\"\n        :value=\"formatMaxConnections(playlist.source_max_connections)\"\n        disabled\n      ></erd-input>\n    </erd-col>\n    <!-- API -->\n    <erd-col xl=\"12\" sm=\"12\" v-if=\"editor && activeTab === 1\">\n      <erd-checkbox\n        class=\"mb-2 w-100\"\n        v-model=\"playlist.enabled\"\n        :true-value=\"1\"\n        :false-value=\"0\"\n        >{{ $t(\"xtream.enabled\") }}</erd-checkbox\n      >\n      <label class=\"d-block\" for=\"api-username\">{{\n        $t(\"xtream.username\")\n      }}</label>\n      <erd-input\n        id=\"api-username\"\n        class=\"mt-1 mb-2 w-100\"\n        v-model=\"playlist.api_username\"\n        :disabled=\"!canUseCustomUserPass\"\n      ></erd-input>\n      <label class=\"d-block\" for=\"api-password\">{{\n        $t(\"xtream.password\")\n      }}</label>\n      <erd-input\n        id=\"api-password\"\n        class=\"mt-1 mb-2 w-100\"\n        v-model=\"playlist.api_password\"\n        :disabled=\"!canUseCustomUserPass\"\n      ></erd-input>\n      <erd-button\n        icon=\"la-random\"\n        variant=\"info\"\n        class=\"mb-3\"\n        v-if=\"!canUseCustomUserPass\"\n        @click=\"randomPassword\"\n        >{{ $t(\"xtream.generate-password\") }}</erd-button\n      >\n      <erd-button\n        icon=\"la-search\"\n        variant=\"info\"\n        class=\"mb-3\"\n        v-if=\"canUseCustomUserPass\"\n        @click=\"checkAvailability\"\n        >{{ $t(\"xtream.check-availability\") }}</erd-button\n      >\n      <label class=\"d-block\" for=\"api-message\">{{\n        $t(\"xtream.message\")\n      }}</label>\n      <erd-textarea\n        class=\"w-100\"\n        id=\"api-message\"\n        rows=\"3\"\n        v-model=\"playlist.api_message\"\n      ></erd-textarea>\n      <label class=\"d-block\" for=\"api-output\">{{\n        $t(\"xtream.output-format\")\n      }}</label>\n      <erd-select\n        id=\"api-output\"\n        class=\"mt-1 mb-2 w-100\"\n        v-model=\"playlist.api_output_format\"\n        :items=\"outputTypes\"\n        :placeholder=\"$t('xtream.output-format')\"\n      ></erd-select>\n    </erd-col>\n    <!-- SYNC -->\n    <erd-col xl=\"12\" sm=\"12\" v-if=\"editor && activeTab === 2\">\n      <erd-checkbox\n        class=\"mb-2 w-100\"\n        v-model=\"playlist.sync_enabled\"\n        :true-value=\"1\"\n        :false-value=\"0\"\n        >{{ $t(\"xtream.enabled\") }}</erd-checkbox\n      >\n      <label class=\"d-block\" for=\"sync-interval\">{{\n        $t(\"xtream.sync-interval\")\n      }}</label>\n      <erd-select\n        id=\"sync-interval\"\n        ref=\"sync-interval\"\n        class=\"mt-1 mb-2 w-100\"\n        v-model=\"playlist.sync_interval\"\n        :items=\"syncIntervals\"\n        :disabled=\"!playlist.sync_enabled\"\n      ></erd-select>\n      <label class=\"d-block\" for=\"sync-tmdb-language\">{{\n        $t(\"xtream.tmdb-language\")\n      }}</label>\n      <erd-select\n        id=\"sync-tmdb-language\"\n        ref=\"sync-tmdb-language\"\n        class=\"mt-1 mb-2 w-100\"\n        v-model=\"playlist.tmdb_language\"\n        :items=\"tmdbLanguages\"\n        :disabled=\"!playlist.sync_enabled || !canUseMoviesSeries\"\n      ></erd-select>\n      <erd-row class=\"m-0 p-0\">\n        <erd-col xl=\"4\" md=\"4\" sm=\"12\" class=\"pl-0\">\n          <erd-context-menu\n            :items=\"contextLive\"\n            depth=\"1\"\n            ref=\"context-live\"\n          ></erd-context-menu>\n          <label class=\"mt-0\">{{ $t(\"dashboard.live-streams\") }}</label>\n          <div\n            class=\"form-control sync-groups\"\n            @contextmenu.prevent=\"openContext('context-live')\"\n          >\n            <erd-checkbox\n              v-for=\"(group, index) in playlistGroups.live\"\n              :key=\"`group-1-${index}`\"\n              :value=\"group.category_id\"\n              v-model=\"playlist.sync_live\"\n              >{{ group.category_name }}</erd-checkbox\n            >\n            <div class=\"empty-group\" v-if=\"playlistGroups.live.length === 0\">\n              <i class=\"las la-folder-open la-3x\"></i>\n              <p class=\"mt-1\">{{ $t(\"general.not-available\") }}</p>\n            </div>\n          </div>\n        </erd-col>\n        <erd-col xl=\"4\" md=\"4\" sm=\"12\" class=\"p-0\">\n          <erd-context-menu\n            :items=\"contextMovies\"\n            depth=\"1\"\n            ref=\"context-movies\"\n          ></erd-context-menu>\n          <label class=\"mt-0\">{{ $t(\"dashboard.movies\") }}</label>\n          <div\n            class=\"form-control sync-groups\"\n            @contextmenu.prevent=\"openContext('context-movies')\"\n          >\n            <erd-checkbox\n              v-for=\"(group, index) in playlistGroups.movies\"\n              :key=\"`group-2-${index}`\"\n              :value=\"group.category_id\"\n              v-model=\"playlist.sync_movies\"\n              :disabled=\"!canUseMoviesSeries\"\n              >{{ group.category_name }}</erd-checkbox\n            >\n            <div class=\"empty-group\" v-if=\"playlistGroups.movies.length === 0\">\n              <i class=\"las la-folder-open la-3x\"></i>\n              <p class=\"mt-1\">{{ $t(\"general.not-available\") }}</p>\n            </div>\n          </div>\n        </erd-col>\n        <erd-col xl=\"4\" md=\"4\" sm=\"12\" class=\"pr-0\">\n          <erd-context-menu\n            :items=\"contextSeries\"\n            depth=\"1\"\n            ref=\"context-series\"\n          ></erd-context-menu>\n          <label class=\"mt-0\">{{ $t(\"dashboard.series\") }}</label>\n          <div\n            class=\"form-control sync-groups\"\n            @contextmenu.prevent=\"openContext('context-series')\"\n          >\n            <erd-checkbox\n              v-for=\"(group, index) in playlistGroups.series\"\n              :key=\"`group-3-${index}`\"\n              :value=\"group.category_id\"\n              v-model=\"playlist.sync_series\"\n              :disabled=\"!canUseMoviesSeries\"\n              >{{ group.category_name }}</erd-checkbox\n            >\n            <div class=\"empty-group\" v-if=\"playlistGroups.series.length === 0\">\n              <i class=\"las la-folder-open la-3x\"></i>\n              <p class=\"mt-1\">{{ $t(\"general.not-available\") }}</p>\n            </div>\n          </div>\n        </erd-col>\n      </erd-row>\n    </erd-col>\n    <!-- SECURITY -->\n    <erd-col xl=\"12\" sm=\"12\" v-if=\"editor && activeTab === 3\">\n      <erd-checkbox\n        :true-value=\"1\"\n        :false-value=\"0\"\n        class=\"mb-2\"\n        v-model=\"playlist.ip_protection\"\n        >{{ $t(\"xtream.ip-security\") }}</erd-checkbox\n      >\n      <label class=\"d-block\" for=\"allowed-ips\">{{\n        $t(\"xtream.allow-only-ips\")\n      }}</label>\n      <erd-textarea\n        class=\"w-100 mb-1\"\n        id=\"allowed-ips\"\n        rows=\"3\"\n        v-model=\"allowedIps\"\n        :disabled=\"!playlist.ip_protection\"\n      ></erd-textarea>\n      <erd-button\n        variant=\"info\"\n        icon=\"la-server\"\n        :disabled=\"!playlist.ip_protection\"\n        @click=\"getIPAddress\"\n        >{{ $t(\"xtream.get-ip\") }}</erd-button\n      >\n    </erd-col>\n  </erd-row>\n</template>\n\n<script>\n/* eslint-disable vue/no-side-effects-in-computed-properties */\nimport { EventBus } from \"../../../services/ebus\";\nimport { httpService } from \"../../../services/http\";\nimport { languages } from \"../../../helpers\";\nimport { UserRole, SubscriptionType } from \"../../../constants/config\";\nimport { mapGetters, mapActions } from \"vuex\";\n\nexport default {\n  data() {\n    return {\n      languages,\n      activeTab: 0,\n      playlistGroups: {\n        live: [],\n        movies: [],\n        series: [],\n      },\n      playlists: [],\n      playlist: null,\n      editor: false,\n      search: null,\n      isLoading: false,\n      from: 0,\n      to: 0,\n      total: 0,\n      currentPage: 1,\n      fields: [\n        { key: \"created_at\", label: this.$t(\"xtream.created\"), sortable: true },\n        {\n          key: \"last_updated\",\n          label: this.$t(\"xtream.last-updated\"),\n          sortable: true,\n        },\n        { key: \"name\", label: this.$t(\"xtream.name\"), sortable: true },\n        { key: \"groups\", label: this.$t(\"xtream.groups\"), sortable: true },\n        { key: \"streams\", label: this.$t(\"xtream.streams\"), sortable: true },\n        {\n          key: \"sync_interval\",\n          label: this.$t(\"xtream.sync-interval\"),\n          sortable: true,\n        },\n        {\n          key: \"synced_at\",\n          label: this.$t(\"xtream.synced-at\"),\n          sortable: true,\n        },\n        {\n          key: \"source_exp_date\",\n          label: this.$t(\"xtream.expire\"),\n          sortable: true,\n        },\n        {\n          key: \"source_max_connections\",\n          label: this.$t(\"xtream.max-connections\"),\n          sortable: true,\n        },\n        {\n          key: \"actions\",\n          label: this.$t(\"users.actions\"),\n          sortable: false,\n          thClass: \"text-right\",\n          tdClass: \"text-right\",\n        },\n      ],\n      syncIntervals: [\n        { text: this.$t(\"sync-interval.48\"), value: 48 },\n        { text: this.$t(\"sync-interval.24\"), value: 24 },\n        { text: this.$t(\"sync-interval.12\"), value: 12 },\n        { text: this.$t(\"sync-interval.6\"), value: 6 },\n        { text: this.$t(\"sync-interval.1\"), value: 1 },\n      ],\n      outputTypes: [\n        { text: this.$t(\"output.1\"), value: 1 },\n        { text: this.$t(\"output.2\"), value: 2 },\n      ],\n    };\n  },\n  computed: {\n    ...mapGetters([\"currentUser\", \"settings\", \"syncTMDB\", \"syncPlaylist\"]),\n    perPage() {\n      return this.settings.perPage;\n    },\n    searchFiltered() {\n      if (this.search === null) {\n        return this.playlists;\n      } else {\n        var re = new RegExp(this.search, \"i\");\n        return this.playlists.filter((account) => {\n          return (\n            String(account.title).match(re) ||\n            String(account.host).match(re) ||\n            String(account.port).match(re) ||\n            String(account.username).match(re) ||\n            String(account.password).match(re) ||\n            this.formatDate(account.synced_at).match(re) ||\n            this.$t(`sync-interval.${account.sync_interval}`).match(re)\n          );\n        });\n      }\n    },\n    paged() {\n      this.total = this.searchFiltered.length;\n      this.from = (this.currentPage - 1) * this.perPage;\n      this.to =\n        this.from + this.perPage > this.total\n          ? this.total\n          : this.from + this.perPage;\n      return this.searchFiltered.slice(this.from, this.to);\n    },\n    allowedIps: {\n      get: function () {\n        return this.playlist.ip_allowed.join(\",\");\n      },\n      set: function (val) {\n        this.playlist.ip_allowed = val.split(\",\").map((ip) => {\n          return ip.trim();\n        });\n      },\n    },\n    contextLive() {\n      let vm = this;\n      let live = [...vm.playlistGroups.live];\n      return [\n        {\n          text: vm.$t(\"general.select-all\"),\n          onClick: function () {\n            vm.playlist.sync_live = [...live.map((g) => g.category_id)];\n          },\n        },\n        {\n          text: vm.$t(\"general.select-none\"),\n          onClick: function () {\n            vm.playlist.sync_live = [];\n          },\n        },\n      ];\n    },\n    contextMovies() {\n      let vm = this;\n      let movies = [...vm.playlistGroups.movies];\n      return [\n        {\n          text: vm.$t(\"general.select-all\"),\n          onClick: function () {\n            if (vm.canUseMoviesSeries) {\n              vm.playlist.sync_movies = [...movies.map((g) => g.category_id)];\n            }\n          },\n          disabled: !vm.canUseMoviesSeries,\n        },\n        {\n          text: vm.$t(\"general.select-none\"),\n          onClick: function () {\n            vm.playlist.sync_movies = [];\n          },\n          disabled: !vm.canUseMoviesSeries,\n        },\n      ];\n    },\n    contextSeries() {\n      let vm = this;\n      let series = [...vm.playlistGroups.series];\n      return [\n        {\n          text: vm.$t(\"general.select-all\"),\n          onClick: function () {\n            if (vm.canUseMoviesSeries) {\n              vm.playlist.sync_series = [...series.map((g) => g.category_id)];\n            }\n          },\n          disabled: !vm.canUseMoviesSeries,\n        },\n        {\n          text: vm.$t(\"general.select-none\"),\n          onClick: function () {\n            vm.playlist.sync_series = [];\n          },\n          disabled: !vm.canUseMoviesSeries,\n        },\n      ];\n    },\n    tmdbLanguages() {\n      return Object.keys(this.languages).map((language) => {\n        return {\n          value: language,\n          text: `${this.languages[language].name} (${this.languages[language].nativeName})`,\n        };\n      });\n    },\n    canUseCustomUserPass() {\n      return [UserRole.SuperAdmin, UserRole.Admin, UserRole.Moderator].includes(\n        this.currentUser.user.role\n      );\n    },\n    canUseMoviesSeries() {\n      return [\n        SubscriptionType.Professional,\n        SubscriptionType.Family,\n        SubscriptionType.BusinessSmall,\n        SubscriptionType.BusinessProfessional,\n        SubscriptionType.BusinessEnterprise,\n        SubscriptionType.Manager,\n      ].includes(this.currentUser.subscription.subscription_type);\n    },\n  },\n  methods: {\n    ...mapActions([\"synchronizeTMDB\", \"synchronizePlaylist\"]),\n    openContext(context) {\n      this.$refs[context].open();\n    },\n    loadGroups() {\n      this.isLoading = true;\n      httpService\n        .post(\"playlist/load-groups\", {\n          host: this.playlist.source_host,\n          port: this.playlist.source_port,\n          username: this.playlist.source_username,\n          password: this.playlist.source_password,\n        })\n        .then((res) => {\n          this.isLoading = false;\n          if (res.status === true) {\n            this.playlistGroups = res.data;\n          }\n        });\n    },\n    loadPlaylists() {\n      this.isLoading = true;\n      httpService\n        .get(\"playlist\")\n        .then((res) => {\n          this.isLoading = false;\n          if (res.status === true) {\n            this.playlists = res.data;\n          }\n        })\n        .catch(() => {\n          this.isLoading = false;\n          this.$notify(\n            \"error\",\n            this.$t(\"profile.failed\"),\n            this.$t(\"xtream.xtream-load-error\"),\n            \"la-user-shield\",\n            { duration: 5000, permanent: false }\n          );\n        });\n    },\n    addPlaylist() {\n      httpService\n        .post(\"playlist/add\")\n        .then((res) => {\n          if (res.status === true && res.data !== false) {\n            this.playlist = {\n              id: res.data,\n              url: \"\",\n              enabled: 1,\n              source_host: \"\",\n              source_port: \"\",\n              source_username: \"\",\n              source_password: \"\",\n              source_exp_date: false,\n              source_max_connections: false,\n              sync_enabled: 1,\n              sync_interval: 48,\n              sync_live: [],\n              sync_movies: [],\n              sync_series: [],\n              ip_protection: 0,\n              ip_allowed: [],\n              api_username: this.currentUser.user.username,\n              api_password: \"\",\n              api_message: \"\",\n              api_output_format: 1,\n              name: \"\",\n              tmdb_language: this.$i18n.locale,\n            };\n            this.playlistGroups = {\n              live: [],\n              movies: [],\n              series: [],\n            };\n            this.randomPassword();\n            this.editor = true;\n          }\n        })\n        .catch(() => {\n          this.$notify(\n            \"error\",\n            this.$t(\"profile.failed\"),\n            this.$t(\"xtream.xtream-new-error\"),\n            \"la-user-shield\",\n            { duration: 5000, permanent: false }\n          );\n        });\n    },\n    editPlaylist(playlist) {\n      this.playlist = Object.assign({}, playlist);\n      this.editor = true;\n    },\n    cancelEditor() {\n      this.editor = false;\n    },\n    saveEditor() {\n      let playlist = this.playlist;\n      let playlistId = this.playlist.id;\n      delete playlist.id;\n      delete playlist.url;\n      delete playlist.groups;\n      delete playlist.streams;\n\n      playlist.last_updated = new Date();\n      httpService\n        .put(`playlist/${playlistId}`, playlist)\n        .then((res) => {\n          if (res.status === true && res.data === true) {\n            this.$notify(\n              \"primary\",\n              this.$t(\"profile.success\"),\n              this.$t(\"xtream.xtream-save-success\"),\n              \"la-user-shield\",\n              { duration: 5000, permanent: false }\n            );\n            this.editor = false;\n            this.loadPlaylists();\n          }\n        })\n        .catch(() => {\n          this.$notify(\n            \"error\",\n            this.$t(\"profile.failed\"),\n            this.$t(\"xtream.xtream-save-error\"),\n            \"la-user-shield\",\n            { duration: 5000, permanent: false }\n          );\n        });\n    },\n    deletePlaylist(id) {\n      httpService\n        .delete(`playlist/${id}`)\n        .then((res) => {\n          if (res.status === true) {\n            this.$notify(\n              \"primary\",\n              this.$t(\"profile.success\"),\n              this.$t(\"xtream.xtream-delete-success\"),\n              \"la-user-shield\",\n              { duration: 5000, permanent: false }\n            );\n            this.loadPlaylists();\n          }\n        })\n        .catch(() => {\n          this.$notify(\n            \"error\",\n            this.$t(\"profile.failed\"),\n            this.$t(\"xtream.xtream-delete-error\"),\n            \"la-user-shield\",\n            { duration: 5000, permanent: false }\n          );\n        });\n    },\n    searchAccount(search) {\n      if (search.length === 0) {\n        this.search = null;\n      } else {\n        this.search = search;\n      }\n    },\n    printAccounts() {\n      document.getElementById(\"playlists\").print();\n    },\n    formatDate(date) {\n      return date === false\n        ? \"\"\n        : date === null || date === \"0000-00-00 00:00:00\" || date === 0\n        ? this.$t(\"xtream.unlimited\")\n        : new Date(date).toLocaleString(\n            this.$t(\"date.locale\"),\n            this.dateOptions\n          );\n    },\n    formatMaxConnections(max) {\n      return max === false\n        ? \"\"\n        : max === null || max <= 0\n        ? this.$t(\"xtream.unlimited\")\n        : max;\n    },\n    doTabChange(tab) {\n      if (tab == 1) {\n        //this.loadGroups();\n      }\n      this.activeTab = tab;\n    },\n    randomPassword() {\n      httpService\n        .post(\"playlist/random-password\", {\n          username: this.playlist.api_username,\n        })\n        .then((res) => {\n          if (res.status === true) {\n            this.playlist.api_password = res.data;\n          }\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    },\n    playlistAuth() {\n      this.isLoading = true;\n      httpService\n        .post(\"playlist/authenticate\", {\n          host: this.playlist.source_host,\n          port: this.playlist.source_port,\n          username: this.playlist.source_username,\n          password: this.playlist.source_password,\n        })\n        .then((res) => {\n          this.isLoading = false;\n          if (res.status === true && res.data.auth) {\n            this.playlist.source_exp_date = res.data.exp_date;\n            this.playlist.source_max_connections = res.data.max_connections;\n          }\n        })\n        .catch((error) => {\n          this.isLoading = false;\n          console.log(error);\n        });\n    },\n    getIPAddress() {\n      httpService\n        .get(\"playlist/ip-address\")\n        .then((res) => {\n          if (res.status === true) {\n            this.playlist.ip_allowed.push(res.data);\n          }\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    },\n    checkAvailability() {\n      httpService\n        .post(\"playlist/user-pass-exists\", {\n          username: this.playlist.api_username,\n          password: this.playlist.api_password,\n        })\n        .then((res) => {\n          if (res.status === true) {\n            if (res.data === true) {\n              this.$notify(\n                \"error\",\n                this.$t(\"xtream.not-available\"),\n                this.$t(\"xtream.user-pass-used\"),\n                \"la-exclamation-triangle\",\n                { duration: 5000, permanent: false }\n              );\n            } else {\n              this.$notify(\n                \"success\",\n                this.$t(\"xtream.available\"),\n                this.$t(\"xtream.user-pass-available\"),\n                \"la-check-circle\",\n                { duration: 5000, permanent: false }\n              );\n            }\n          }\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    },\n  },\n  beforeMount() {\n    this.loadPlaylists();\n    EventBus.$on(\"search\", this.searchAccount);\n    EventBus.$on(\"print\", this.printAccounts);\n    EventBus.$on(\"refresh\", this.loadPlaylists);\n    EventBus.$on(\"add\", this.addPlaylist);\n    EventBus.$on(\"cancel\", this.cancelEditor);\n    EventBus.$on(\"save\", this.saveEditor);\n    EventBus.$on(\"tab-change\", this.doTabChange);\n  },\n  beforeDestroy() {\n    EventBus.$off(\"search\", this.searchAccount);\n    EventBus.$off(\"print\", this.printAccounts);\n    EventBus.$off(\"refresh\", this.loadPlaylists);\n    EventBus.$off(\"add\", this.addPlaylist);\n    EventBus.$off(\"cancel\", this.cancelEditor);\n    EventBus.$off(\"save\", this.saveEditor);\n    EventBus.$off(\"tab-change\", this.doTabChange);\n  },\n  watch: {\n    from: function (val) {\n      EventBus.$emit(\"update-from\", val);\n      document.body.scrollTop = 0;\n      document.documentElement.scrollTop = 0;\n    },\n    to: function (val) {\n      EventBus.$emit(\"update-to\", val);\n    },\n    total: function (val) {\n      EventBus.$emit(\"update-total\", val);\n    },\n    editor: function (val) {\n      EventBus.$emit(\"update-editor\", val);\n      if (!val) {\n        this.loadPlaylists();\n      }\n    },\n    \"playlist.source_host\": function () {\n      if (\n        this.playlist.source_host.length &&\n        this.playlist.source_username.length &&\n        this.playlist.source_password.length &&\n        this.editor\n      ) {\n        this.playlistAuth();\n        this.loadGroups();\n      }\n    },\n    \"playlist.url\": function (url) {\n      if (url !== undefined && url.length) {\n        try {\n          let u = new URL(url);\n          this.playlist.source_host = u.hostname;\n          this.playlist.source_port = u.port;\n          this.playlist.source_username = u.searchParams.get(\"username\");\n          this.playlist.source_password = u.searchParams.get(\"password\");\n          if (!this.playlist.name.length) {\n            this.playlist.name = u.hostname.toUpperCase();\n          }\n        } catch {\n          //\n        }\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.modal-groups {\n  max-height: 250px;\n  overflow: hidden;\n\n  .ps {\n    max-height: 250px;\n  }\n}\n\n.sync-groups {\n  .checkbox-text {\n    margin-top: 2px;\n  }\n}\n\n.empty-group {\n  text-align: center;\n  color: $separator-color;\n  padding-top: 1rem;\n\n  i {\n    display: block;\n  }\n  p {\n    padding: 0;\n    display: block;\n  }\n}\n</style>\n"]}]}