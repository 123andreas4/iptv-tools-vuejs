{"remainingRequest":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/vue-loader/lib/index.js??vue-loader-options!/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/src/views/user/register.vue?vue&type=script&lang=js&","dependencies":[{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/src/views/user/register.vue","mtime":1618568112167},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcEFjdGlvbnMgfSBmcm9tICJ2dWV4IjsKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcm5hbWU6ICIiLAogICAgICBwYXNzd29yZDogIiIsCiAgICAgIGNvbmZpcm06ICIiLAogICAgICBhY2NlcHQ6IGZhbHNlLAogICAgICBlcnJvcjogewogICAgICAgIHVzZXJuYW1lOiB7CiAgICAgICAgICB2aXNpYmxlOiBmYWxzZSwKICAgICAgICAgIG1lc3NhZ2U6ICIiLAogICAgICAgIH0sCiAgICAgICAgcGFzc3dvcmQ6IHsKICAgICAgICAgIHZpc2libGU6IGZhbHNlLAogICAgICAgICAgbWVzc2FnZTogIiIsCiAgICAgICAgfSwKICAgICAgICBjb25maXJtOiB7CiAgICAgICAgICB2aXNpYmxlOiBmYWxzZSwKICAgICAgICAgIG1lc3NhZ2U6ICIiLAogICAgICAgIH0sCiAgICAgIH0sCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoWyJwcm9jZXNzaW5nIl0pLAogICAgZm9ybUlzVmFsaWQoKSB7CiAgICAgIHJldHVybiAoCiAgICAgICAgdGhpcy5lcnJvci51c2VybmFtZS52aXNpYmxlID09PSBmYWxzZSAmJgogICAgICAgIHRoaXMuZXJyb3IucGFzc3dvcmQudmlzaWJsZSA9PT0gZmFsc2UgJiYKICAgICAgICB0aGlzLmVycm9yLmNvbmZpcm0udmlzaWJsZSA9PT0gZmFsc2UKICAgICAgKTsKICAgIH0sCiAgICByZWdpc3RlckRpc2FibGVkKCkgewogICAgICByZXR1cm4gKAogICAgICAgIHRoaXMuYWNjZXB0ICE9PSB0cnVlIHx8CiAgICAgICAgdGhpcy51c2VybmFtZS5sZW5ndGggPT09IDAgfHwKICAgICAgICB0aGlzLnBhc3N3b3JkLmxlbmd0aCA9PT0gMCB8fAogICAgICAgIHRoaXMuY29uZmlybS5sZW5ndGggPT09IDAKICAgICAgKTsKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5tYXBBY3Rpb25zKFsiY2hlY2tVc2VybmFtZSIsICJyZWdpc3RlciJdKSwKICAgIHZhbGlkYXRlVXNlcm5hbWUoKSB7CiAgICAgIGlmICgKICAgICAgICB0aGlzLnVzZXJuYW1lLm1hdGNoKAogICAgICAgICAgL14oPz0uezYsMjB9JCkoPyFbXy5dKSg/IS4qW18uXXsyfSlbYS16QS1aMC05Ll9dKyg/PCFbXy5dKSQvCiAgICAgICAgKQogICAgICApIHsKICAgICAgICB0aGlzLmVycm9yLnVzZXJuYW1lLnZpc2libGUgPSBmYWxzZTsKICAgICAgICB0aGlzLmVycm9yLnVzZXJuYW1lLm1lc3NhZ2UgPSAiIjsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmVycm9yLnVzZXJuYW1lLnZpc2libGUgPSB0cnVlOwogICAgICAgIHRoaXMuZXJyb3IudXNlcm5hbWUubWVzc2FnZSA9IHRoaXMuJHQoInJlZ2lzdGVyLnVzZXJuYW1lLWVycm9yIik7CiAgICAgIH0KICAgIH0sCiAgICB2YWxpZGF0ZVBhc3N3b3JkKCkgewogICAgICBpZiAoCiAgICAgICAgdGhpcy5wYXNzd29yZC5tYXRjaCgKICAgICAgICAgIC9eKD89LipbYS16XSkoPz0uKltBLVpdKSg/PS4qXGQpKD89LipbIyRAISUmKj9dKVtBLVphLXpcZCMkQCElJio/XXs2LDMwfSQvCiAgICAgICAgKQogICAgICApIHsKICAgICAgICB0aGlzLmVycm9yLnBhc3N3b3JkLnZpc2libGUgPSBmYWxzZTsKICAgICAgICB0aGlzLmVycm9yLnBhc3N3b3JkLm1lc3NhZ2UgPSAiIjsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmVycm9yLnBhc3N3b3JkLnZpc2libGUgPSB0cnVlOwogICAgICAgIHRoaXMuZXJyb3IucGFzc3dvcmQubWVzc2FnZSA9IHRoaXMuJHQoInJlZ2lzdGVyLnBhc3N3b3JkLWVycm9yIik7CiAgICAgIH0KICAgIH0sCiAgICB2YWxpZGF0ZUNvbmZpcm0oKSB7CiAgICAgIGlmICghdGhpcy5jb25maXJtLmxvY2FsZUNvbXBhcmUodGhpcy5wYXNzd29yZCkpIHsKICAgICAgICB0aGlzLmVycm9yLmNvbmZpcm0udmlzaWJsZSA9IGZhbHNlOwogICAgICAgIHRoaXMuZXJyb3IuY29uZmlybS5tZXNzYWdlID0gIiI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5lcnJvci5jb25maXJtLnZpc2libGUgPSBmYWxzZTsKICAgICAgICB0aGlzLmVycm9yLmNvbmZpcm0ubWVzc2FnZSA9IHRoaXMuJHQoInJlZ2lzdGVyLmNvbmZpcm0tZXJyb3IiKTsKICAgICAgfQogICAgfSwKICAgIHJlZ2lzdGVyQ2xpY2soKSB7CiAgICAgIHRoaXMudmFsaWRhdGVVc2VybmFtZSgpOwogICAgICB0aGlzLnZhbGlkYXRlUGFzc3dvcmQoKTsKICAgICAgdGhpcy52YWxpZGF0ZUNvbmZpcm0oKTsKICAgICAgaWYgKHRoaXMuZm9ybUlzVmFsaWQpIHsKICAgICAgICB0aGlzLmNoZWNrVXNlcm5hbWUodGhpcy51c2VybmFtZSkKICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmF2YWlsYWJsZSA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgICB0aGlzLmVycm9yLnVzZXJuYW1lLnZpc2libGUgPSB0cnVlOwogICAgICAgICAgICAgIHRoaXMuZXJyb3IudXNlcm5hbWUubWVzc2FnZSA9IHRoaXMuJHQoInJlZ2lzdGVyLnVzZXJuYW1lLXRha2VuIik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5yZWdpc3Rlcih7CiAgICAgICAgICAgICAgICB1c2VybmFtZTogdGhpcy51c2VybmFtZSwKICAgICAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkLAogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSB0cnVlICYmIHJlcy5kYXRhID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbm90aWZ5KAogICAgICAgICAgICAgICAgICAgICAgInByaW1hcnkiLAogICAgICAgICAgICAgICAgICAgICAgdGhpcy4kdCgicmVnaXN0ZXIuc3VjY2Vzcy10aXRsZSIpLAogICAgICAgICAgICAgICAgICAgICAgdGhpcy4kdCgicmVnaXN0ZXIuc3VjY2Vzcy1tZXNzYWdlIiksCiAgICAgICAgICAgICAgICAgICAgICAibGEtc2lnbi1pbi1hbHQiLAogICAgICAgICAgICAgICAgICAgICAgeyBkdXJhdGlvbjogNTAwMCwgcGVybWFuZW50OiBmYWxzZSB9CiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL3VzZXIvbG9naW4iKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9yLnVzZXJuYW1lLnZpc2libGUgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IudXNlcm5hbWUubWVzc2FnZSA9IHRoaXMuJHQoCiAgICAgICAgICAgICAgICAgICAgICAicmVnaXN0ZXIuZXJyb3ItbWVzc2FnZSIKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IudXNlcm5hbWUudmlzaWJsZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IudXNlcm5hbWUubWVzc2FnZSA9IHRoaXMuJHQoCiAgICAgICAgICAgICAgICAgICAgInJlZ2lzdGVyLmVycm9yLW1lc3NhZ2UiCiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAgICAgICAgIHRoaXMuZXJyb3IudXNlcm5hbWUudmlzaWJsZSA9IHRydWU7CiAgICAgICAgICAgIHRoaXMuZXJyb3IudXNlcm5hbWUubWVzc2FnZSA9IHRoaXMuJHQoInJlZ2lzdGVyLmVycm9yLW1lc3NhZ2UiKTsKICAgICAgICAgIH0pOwogICAgICB9CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["register.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"register.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\n  <erd-row class=\"h-100\">\n    <erd-col sm=\"12\" md=\"10\" lg=\"7\" class=\"mx-auto my-auto pb-5\">\n      <erd-card class=\"depth-4 register\">\n        <div class=\"image-side\">\n          <div class=\"title\">\n            <h1>{{ $t(\"register.head\") }}</h1>\n            <h5>{{ $t(\"register.subtitle\") }}</h5>\n          </div>\n          <transition name=\"fade\">\n            <erd-spinner\n              variant=\"primary\"\n              v-if=\"processing\"\n              size=\"lg\"\n            ></erd-spinner>\n          </transition>\n        </div>\n        <div class=\"form-side\">\n          <h1 class=\"title\">{{ $t(\"register.title\") }}</h1>\n          <div class=\"form\">\n            <div class=\"pb-2\">\n              <label for=\"username\">{{ $t(\"register.username\") }}</label>\n              <erd-input\n                id=\"username\"\n                :placeholder=\"$t('register.username')\"\n                v-model=\"username\"\n              ></erd-input>\n              <div\n                class=\"pt-1 color-theme-2 text-center\"\n                v-if=\"error.username.visible\"\n              >\n                {{ error.username.message }}\n              </div>\n            </div>\n            <div class=\"pb-2\">\n              <label for=\"password\">{{ $t(\"register.password\") }}</label>\n              <erd-input\n                id=\"password\"\n                :placeholder=\"$t('register.password')\"\n                type=\"password\"\n                v-model=\"password\"\n              ></erd-input>\n              <div\n                class=\"pt-1 color-theme-2 text-center\"\n                v-if=\"error.password.visible\"\n              >\n                {{ error.password.message }}\n              </div>\n            </div>\n            <div class=\"pb-4\">\n              <label for=\"confirm\">{{ $t(\"register.confirm\") }}</label>\n              <erd-input\n                id=\"confirm\"\n                :placeholder=\"$t('register.confirm')\"\n                type=\"password\"\n                v-model=\"confirm\"\n              ></erd-input>\n              <div\n                class=\"pt-1 color-theme-2 text-center\"\n                v-if=\"error.confirm.visible\"\n              >\n                {{ error.confirm.message }}\n              </div>\n            </div>\n            <div class=\"pb-5\">\n              <erd-checkbox v-model=\"accept\">{{\n                $t(\"register.accept\")\n              }}</erd-checkbox>\n              <erd-button\n                variant=\"primary\"\n                @click=\"registerClick\"\n                :disabled=\"registerDisabled\"\n                >{{ $t(\"register.submit\") }}</erd-button\n              >\n            </div>\n            <div class=\"pb-2\">\n              <router-link to=\"/user/login\">{{\n                $t(\"register.login\")\n              }}</router-link>\n            </div>\n          </div>\n        </div>\n      </erd-card>\n    </erd-col>\n  </erd-row>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from \"vuex\";\n\nexport default {\n  data() {\n    return {\n      username: \"\",\n      password: \"\",\n      confirm: \"\",\n      accept: false,\n      error: {\n        username: {\n          visible: false,\n          message: \"\",\n        },\n        password: {\n          visible: false,\n          message: \"\",\n        },\n        confirm: {\n          visible: false,\n          message: \"\",\n        },\n      },\n    };\n  },\n  computed: {\n    ...mapGetters([\"processing\"]),\n    formIsValid() {\n      return (\n        this.error.username.visible === false &&\n        this.error.password.visible === false &&\n        this.error.confirm.visible === false\n      );\n    },\n    registerDisabled() {\n      return (\n        this.accept !== true ||\n        this.username.length === 0 ||\n        this.password.length === 0 ||\n        this.confirm.length === 0\n      );\n    },\n  },\n  methods: {\n    ...mapActions([\"checkUsername\", \"register\"]),\n    validateUsername() {\n      if (\n        this.username.match(\n          /^(?=.{6,20}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$/\n        )\n      ) {\n        this.error.username.visible = false;\n        this.error.username.message = \"\";\n      } else {\n        this.error.username.visible = true;\n        this.error.username.message = this.$t(\"register.username-error\");\n      }\n    },\n    validatePassword() {\n      if (\n        this.password.match(\n          /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[#$@!%&*?])[A-Za-z\\d#$@!%&*?]{6,30}$/\n        )\n      ) {\n        this.error.password.visible = false;\n        this.error.password.message = \"\";\n      } else {\n        this.error.password.visible = true;\n        this.error.password.message = this.$t(\"register.password-error\");\n      }\n    },\n    validateConfirm() {\n      if (!this.confirm.localeCompare(this.password)) {\n        this.error.confirm.visible = false;\n        this.error.confirm.message = \"\";\n      } else {\n        this.error.confirm.visible = false;\n        this.error.confirm.message = this.$t(\"register.confirm-error\");\n      }\n    },\n    registerClick() {\n      this.validateUsername();\n      this.validatePassword();\n      this.validateConfirm();\n      if (this.formIsValid) {\n        this.checkUsername(this.username)\n          .then((res) => {\n            if (res.data.available === false) {\n              this.error.username.visible = true;\n              this.error.username.message = this.$t(\"register.username-taken\");\n            } else {\n              this.register({\n                username: this.username,\n                password: this.password,\n              })\n                .then((res) => {\n                  if (res.status === true && res.data === true) {\n                    this.$notify(\n                      \"primary\",\n                      this.$t(\"register.success-title\"),\n                      this.$t(\"register.success-message\"),\n                      \"la-sign-in-alt\",\n                      { duration: 5000, permanent: false }\n                    );\n                    this.$router.push(\"/user/login\");\n                  } else {\n                    this.error.username.visible = true;\n                    this.error.username.message = this.$t(\n                      \"register.error-message\"\n                    );\n                  }\n                })\n                .catch((error) => {\n                  console.log(error);\n                  this.error.username.visible = true;\n                  this.error.username.message = this.$t(\n                    \"register.error-message\"\n                  );\n                });\n            }\n          })\n          .catch((error) => {\n            console.error(error);\n            this.error.username.visible = true;\n            this.error.username.message = this.$t(\"register.error-message\");\n          });\n      }\n    },\n  },\n};\n</script>\n"]}]}