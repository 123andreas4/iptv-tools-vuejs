{"remainingRequest":"/home/ernst/Desktop/IPTV-Tools/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ernst/Desktop/IPTV-Tools/src/views/app/administration/users.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ernst/Desktop/IPTV-Tools/src/views/app/administration/users.vue","mtime":1620487590487},{"path":"/home/ernst/Desktop/IPTV-Tools/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ernst/Desktop/IPTV-Tools/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/ernst/Desktop/IPTV-Tools/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ernst/Desktop/IPTV-Tools/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8qIGVzbGludC1kaXNhYmxlIHZ1ZS9uby1zaWRlLWVmZmVjdHMtaW4tY29tcHV0ZWQtcHJvcGVydGllcyAqLwppbXBvcnQgeyBFdmVudEJ1cyB9IGZyb20gIi4uLy4uLy4uL3NlcnZpY2VzL2VidXMiOwppbXBvcnQgeyBodHRwU2VydmljZSB9IGZyb20gIi4uLy4uLy4uL3NlcnZpY2VzL2h0dHAiOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAidnVleCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlYXJjaDogbnVsbCwKICAgICAgaXNMb2FkaW5nOiBmYWxzZSwKICAgICAgZnJvbTogMCwKICAgICAgdG86IDAsCiAgICAgIHRvdGFsOiAwLAogICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgZWRpdG9yOiBmYWxzZSwKICAgICAgZWRpdG9yVXNlcjogbnVsbCwKICAgICAgdXNlcnM6IFtdLAogICAgICBmaWVsZHM6IFsKICAgICAgICB7IGtleTogImlkIiwgbGFiZWw6IHRoaXMuJHQoInVzZXJzLmlkIiksIHNvcnRhYmxlOiB0cnVlIH0sCiAgICAgICAgeyBrZXk6ICJ1c2VybmFtZSIsIGxhYmVsOiB0aGlzLiR0KCJ1c2Vycy51c2VybmFtZSIpLCBzb3J0YWJsZTogdHJ1ZSB9LAogICAgICAgIHsga2V5OiAic3RhdHVzIiwgbGFiZWw6IHRoaXMuJHQoInVzZXJzLnN0YXR1cyIpLCBzb3J0YWJsZTogdHJ1ZSB9LAogICAgICAgIHsga2V5OiAicm9sZSIsIGxhYmVsOiB0aGlzLiR0KCJ1c2Vycy5yb2xlIiksIHNvcnRhYmxlOiB0cnVlIH0sCiAgICAgICAgewogICAgICAgICAga2V5OiAiY3JlYXRlZCIsCiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgidXNlcnMuY3JlYXRlZCIpLAogICAgICAgICAgc29ydGFibGU6IHRydWUsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBrZXk6ICJsYXN0X3VwZGF0ZWQiLAogICAgICAgICAgbGFiZWw6IHRoaXMuJHQoInVzZXJzLmxhc3QtdXBkYXRlZCIpLAogICAgICAgICAgc29ydGFibGU6IHRydWUsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBrZXk6ICJhY3Rpb25zIiwKICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCJ1c2Vycy5hY3Rpb25zIiksCiAgICAgICAgICBzb3J0YWJsZTogZmFsc2UsCiAgICAgICAgICB0aENsYXNzOiAidGV4dC1yaWdodCIsCiAgICAgICAgICB0ZENsYXNzOiAidGV4dC1yaWdodCIsCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgc3RhdHVzTGlzdDogWwogICAgICAgIHsgdmFsdWU6IDEsIHRleHQ6IHRoaXMuJHQoInVzZXItc3RhdHVzLjEiKSB9LAogICAgICAgIHsgdmFsdWU6IDIsIHRleHQ6IHRoaXMuJHQoInVzZXItc3RhdHVzLjIiKSB9LAogICAgICAgIHsgdmFsdWU6IDMsIHRleHQ6IHRoaXMuJHQoInVzZXItc3RhdHVzLjMiKSB9LAogICAgICAgIHsgdmFsdWU6IDQsIHRleHQ6IHRoaXMuJHQoInVzZXItc3RhdHVzLjQiKSB9LAogICAgICAgIHsgdmFsdWU6IDUsIHRleHQ6IHRoaXMuJHQoInVzZXItc3RhdHVzLjUiKSB9LAogICAgICBdLAogICAgICByb2xlTGlzdDogWwogICAgICAgIHsgdmFsdWU6IDEsIHRleHQ6IHRoaXMuJHQoInJvbGVzLjEiKSB9LAogICAgICAgIHsgdmFsdWU6IDIsIHRleHQ6IHRoaXMuJHQoInJvbGVzLjIiKSB9LAogICAgICAgIHsgdmFsdWU6IDMsIHRleHQ6IHRoaXMuJHQoInJvbGVzLjMiKSB9LAogICAgICAgIHsgdmFsdWU6IDQsIHRleHQ6IHRoaXMuJHQoInJvbGVzLjQiKSB9LAogICAgICAgIHsgdmFsdWU6IDUsIHRleHQ6IHRoaXMuJHQoInJvbGVzLjUiKSB9LAogICAgICAgIHsgdmFsdWU6IDE5ODUsIHRleHQ6IHRoaXMuJHQoInJvbGVzLjE5ODUiKSB9LAogICAgICBdLAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKFsiY3VycmVudFVzZXIiLCAic2V0dGluZ3MiXSksCiAgICBwZXJQYWdlKCkgewogICAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5wZXJQYWdlOwogICAgfSwKICAgIHNlYXJjaEZpbHRlcmVkKCkgewogICAgICBpZiAodGhpcy5zZWFyY2ggPT09IG51bGwpIHsKICAgICAgICByZXR1cm4gdGhpcy51c2VyczsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgcmUgPSBuZXcgUmVnRXhwKHRoaXMuc2VhcmNoLCAiaSIpOwogICAgICAgIHJldHVybiB0aGlzLnVzZXJzLmZpbHRlcigodXNlcikgPT4gewogICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgU3RyaW5nKHVzZXIuaWQpLm1hdGNoKHJlKSB8fAogICAgICAgICAgICBTdHJpbmcodXNlci51c2VybmFtZSkubWF0Y2gocmUpIHx8CiAgICAgICAgICAgIFN0cmluZyh1c2VyLmNyZWF0ZWQpLm1hdGNoKHJlKSB8fAogICAgICAgICAgICBTdHJpbmcodXNlci5sYXN0X3VwZGF0ZWQpLm1hdGNoKHJlKSB8fAogICAgICAgICAgICB0aGlzLmZvcm1hdERhdGUodXNlci5jcmVhdGVkKS5tYXRjaChyZSkgfHwKICAgICAgICAgICAgdGhpcy5mb3JtYXREYXRlKHVzZXIubGFzdF91cGRhdGVkKS5tYXRjaChyZSkKICAgICAgICAgICk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBwYWdlZCgpIHsKICAgICAgdGhpcy50b3RhbCA9IHRoaXMuc2VhcmNoRmlsdGVyZWQubGVuZ3RoOwogICAgICB0aGlzLmZyb20gPSAodGhpcy5jdXJyZW50UGFnZSAtIDEpICogdGhpcy5wZXJQYWdlOwogICAgICB0aGlzLnRvID0KICAgICAgICB0aGlzLmZyb20gKyB0aGlzLnBlclBhZ2UgPiB0aGlzLnRvdGFsCiAgICAgICAgICA/IHRoaXMudG90YWwKICAgICAgICAgIDogdGhpcy5mcm9tICsgdGhpcy5wZXJQYWdlOwogICAgICByZXR1cm4gdGhpcy5zZWFyY2hGaWx0ZXJlZC5zbGljZSh0aGlzLmZyb20sIHRoaXMudG8pOwogICAgfSwKICAgIGZpbHRlcmVkUm9sZUxpc3QoKSB7CiAgICAgIGxldCByb2xlcyA9IFsuLi50aGlzLnJvbGVMaXN0XTsKICAgICAgcm9sZXMubWFwKChyb2xlKSA9PiB7CiAgICAgICAgaWYgKHRoaXMuY3VycmVudFVzZXIudXNlci5yb2xlID09PSAxOTg1KSB7CiAgICAgICAgICByb2xlLmRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChyb2xlLnZhbHVlID09PSAxOTg1KSB7CiAgICAgICAgICAgIHJvbGUuZGlzYWJsZWQgPSB0cnVlOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcm9sZS5kaXNhYmxlZCA9IHJvbGUudmFsdWUgPD0gdGhpcy5jdXJyZW50VXNlci51c2VyLnJvbGU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIHJvbGVzOwogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIHVwZGF0ZVBlclBhZ2UocGVyUGFnZSkgewogICAgICB0aGlzLnBlclBhZ2UgPSBwZXJQYWdlOwogICAgfSwKICAgIGZvcm1hdERhdGUoZGF0ZSkgewogICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZSkudG9Mb2NhbGVTdHJpbmcoCiAgICAgICAgdGhpcy4kdCgiZGF0ZS5sb2NhbGUiKSwKICAgICAgICB0aGlzLmRhdGVPcHRpb25zCiAgICAgICk7CiAgICB9LAogICAgbG9hZFVzZXJzKCkgewogICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7CiAgICAgIGh0dHBTZXJ2aWNlCiAgICAgICAgLmdldCgiYWRtaW5pc3RyYXRpb24vdXNlcnMiKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gdHJ1ZSkgewogICAgICAgICAgICB0aGlzLnVzZXJzID0gcmVzLmRhdGE7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuJG5vdGlmeSgKICAgICAgICAgICAgImVycm9yIiwKICAgICAgICAgICAgdGhpcy4kdCgicHJvZmlsZS5mYWlsZWQiKSwKICAgICAgICAgICAgdGhpcy4kdCgidXNlcnMubG9hZC1lcnJvciIpLAogICAgICAgICAgICAibGEtdXNlci1zaGllbGQiLAogICAgICAgICAgICB7IGR1cmF0aW9uOiA1MDAwLCBwZXJtYW5lbnQ6IGZhbHNlIH0KICAgICAgICAgICk7CiAgICAgICAgfSk7CiAgICB9LAogICAgZWRpdFVzZXIodXNlcikgewogICAgICB0aGlzLmVkaXRvclVzZXIgPSBPYmplY3QuYXNzaWduKHt9LCB1c2VyKTsKICAgICAgdGhpcy5lZGl0b3IgPSB0cnVlOwogICAgfSwKICAgIHNhdmVVc2VyKCkgewogICAgICB0aGlzLmVkaXRvciA9IGZhbHNlOwogICAgICBsZXQgdXNlciA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZWRpdG9yVXNlcik7CiAgICAgIGRlbGV0ZSB1c2VyLmlkOwogICAgICBodHRwU2VydmljZQogICAgICAgIC5wb3N0KCJhZG1pbmlzdHJhdGlvbi91c2VyL3VwZGF0ZSIsIHsKICAgICAgICAgIGlkOiB0aGlzLmVkaXRvclVzZXIuaWQsCiAgICAgICAgICB1c2VyOiB1c2VyLAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSB0cnVlKSB7CiAgICAgICAgICAgIHRoaXMuJG5vdGlmeSgKICAgICAgICAgICAgICAicHJpbWFyeSIsCiAgICAgICAgICAgICAgdGhpcy4kdCgicHJvZmlsZS5zdWNjZXNzIiksCiAgICAgICAgICAgICAgdGhpcy4kdCgidXNlcnMuc2F2ZS1zdWNjZXNzIiksCiAgICAgICAgICAgICAgImxhLXVzZXItc2hpZWxkIiwKICAgICAgICAgICAgICB7IGR1cmF0aW9uOiA1MDAwLCBwZXJtYW5lbnQ6IGZhbHNlIH0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgdGhpcy5sb2FkVXNlcnMoKTsKICAgICAgICAgICAgdGhpcy5lZGl0b3IgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgdGhpcy4kbm90aWZ5KAogICAgICAgICAgICAiZXJyb3IiLAogICAgICAgICAgICB0aGlzLiR0KCJwcm9maWxlLmZhaWxlZCIpLAogICAgICAgICAgICB0aGlzLiR0KCJ1c2Vycy5zYXZlLWVycm9yIiksCiAgICAgICAgICAgICJsYS11c2VyLXNoaWVsZCIsCiAgICAgICAgICAgIHsgZHVyYXRpb246IDUwMDAsIHBlcm1hbmVudDogZmFsc2UgfQogICAgICAgICAgKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBkZWxldGVVc2VyKGlkKSB7CiAgICAgIGh0dHBTZXJ2aWNlCiAgICAgICAgLnBvc3QoImFkbWluaXN0cmF0aW9uL3VzZXIvZGVsZXRlIiwgeyBpZDogaWQgfSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IHRydWUpIHsKICAgICAgICAgICAgdGhpcy4kbm90aWZ5KAogICAgICAgICAgICAgICJwcmltYXJ5IiwKICAgICAgICAgICAgICB0aGlzLiR0KCJwcm9maWxlLnN1Y2Nlc3MiKSwKICAgICAgICAgICAgICB0aGlzLiR0KCJ1c2Vycy5kZWxldGUtc3VjY2VzcyIpLAogICAgICAgICAgICAgICJsYS11c2VyLXNoaWVsZCIsCiAgICAgICAgICAgICAgeyBkdXJhdGlvbjogNTAwMCwgcGVybWFuZW50OiBmYWxzZSB9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHRoaXMubG9hZFVzZXJzKCk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuJG5vdGlmeSgKICAgICAgICAgICAgImVycm9yIiwKICAgICAgICAgICAgdGhpcy4kdCgicHJvZmlsZS5mYWlsZWQiKSwKICAgICAgICAgICAgdGhpcy4kdCgidXNlcnMuZGVsZXRlLWVycm9yIiksCiAgICAgICAgICAgICJsYS11c2VyLXNoaWVsZCIsCiAgICAgICAgICAgIHsgZHVyYXRpb246IDUwMDAsIHBlcm1hbmVudDogZmFsc2UgfQogICAgICAgICAgKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBjYW5jZWxVc2VyKCkgewogICAgICB0aGlzLmVkaXRvciA9IGZhbHNlOwogICAgfSwKICAgIHVzZXJQcm9maWxlKGlkKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAicHJvZmlsZXMiLAogICAgICAgIHBhcmFtczogeyBlZGl0b3I6IHRydWUsIGlkOiBpZCB9LAogICAgICB9KTsKICAgIH0sCiAgICB1c2VyU3Vic2NyaXB0aW9uKGlkKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAic3Vic2NyaXB0aW9ucyIsCiAgICAgICAgcGFyYW1zOiB7IGVkaXRvcjogdHJ1ZSwgaWQ6IGlkIH0sCiAgICAgIH0pOwogICAgfSwKICAgIHNlYXJjaFVzZXIoc2VhcmNoKSB7CiAgICAgIGlmIChzZWFyY2gubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy5zZWFyY2ggPSBudWxsOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2VhcmNoID0gc2VhcmNoOwogICAgICB9CiAgICB9LAogICAgcHJpbnRVc2VycygpIHsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInVzZXJzIikucHJpbnQoKTsKICAgIH0sCiAgfSwKICBiZWZvcmVNb3VudCgpIHsKICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMuZWRpdG9yICYmIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIGh0dHBTZXJ2aWNlCiAgICAgICAgLmdldCgiYWRtaW5pc3RyYXRpb24vdXNlcnMiKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gdHJ1ZSkgewogICAgICAgICAgICB0aGlzLnVzZXJzID0gcmVzLmRhdGE7CiAgICAgICAgICAgIGxldCB1c2VyID0gdGhpcy51c2Vycy5maW5kKAogICAgICAgICAgICAgICh1c2VyKSA9PiB1c2VyLmlkID09PSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQKICAgICAgICAgICAgKTsKICAgICAgICAgICAgaWYgKHVzZXIpIHsKICAgICAgICAgICAgICB0aGlzLmVkaXRVc2VyKHVzZXIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuJG5vdGlmeSgKICAgICAgICAgICAgImVycm9yIiwKICAgICAgICAgICAgdGhpcy4kdCgicHJvZmlsZS5mYWlsZWQiKSwKICAgICAgICAgICAgdGhpcy4kdCgidXNlcnMubG9hZC1lcnJvciIpLAogICAgICAgICAgICAibGEtdXNlci1zaGllbGQiLAogICAgICAgICAgICB7IGR1cmF0aW9uOiA1MDAwLCBwZXJtYW5lbnQ6IGZhbHNlIH0KICAgICAgICAgICk7CiAgICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLmxvYWRVc2VycygpOwogICAgfQogICAgRXZlbnRCdXMuJG9uKCJyZWZyZXNoIiwgdGhpcy5sb2FkVXNlcnMpOwogICAgRXZlbnRCdXMuJG9uKCJzYXZlIiwgdGhpcy5zYXZlVXNlcik7CiAgICBFdmVudEJ1cy4kb24oImNhbmNlbCIsIHRoaXMuY2FuY2VsVXNlcik7CiAgICBFdmVudEJ1cy4kb24oInNlYXJjaCIsIHRoaXMuc2VhcmNoVXNlcik7CiAgICBFdmVudEJ1cy4kb24oInByaW50IiwgdGhpcy5wcmludFVzZXJzKTsKICB9LAogIGJlZm9yZURlc3Ryb3koKSB7CiAgICBFdmVudEJ1cy4kb2ZmKCJyZWZyZXNoIiwgdGhpcy5sb2FkVXNlcnMpOwogICAgRXZlbnRCdXMuJG9mZigic2F2ZSIsIHRoaXMuc2F2ZVVzZXIpOwogICAgRXZlbnRCdXMuJG9mZigiY2FuY2VsIiwgdGhpcy5jYW5jZWxVc2VyKTsKICAgIEV2ZW50QnVzLiRvZmYoInNlYXJjaCIsIHRoaXMuc2VhcmNoVXNlcik7CiAgICBFdmVudEJ1cy4kb2ZmKCJwcmludCIsIHRoaXMucHJpbnRVc2Vycyk7CiAgfSwKICB3YXRjaDogewogICAgZnJvbTogZnVuY3Rpb24gKHZhbCkgewogICAgICBFdmVudEJ1cy4kZW1pdCgidXBkYXRlLWZyb20iLCB2YWwpOwogICAgfSwKICAgIHRvOiBmdW5jdGlvbiAodmFsKSB7CiAgICAgIEV2ZW50QnVzLiRlbWl0KCJ1cGRhdGUtdG8iLCB2YWwpOwogICAgfSwKICAgIHRvdGFsOiBmdW5jdGlvbiAodmFsKSB7CiAgICAgIEV2ZW50QnVzLiRlbWl0KCJ1cGRhdGUtdG90YWwiLCB2YWwpOwogICAgfSwKICAgIGVkaXRvcjogZnVuY3Rpb24gKHZhbCkgewogICAgICBFdmVudEJ1cy4kZW1pdCgidXBkYXRlLWVkaXRvciIsIHZhbCk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["users.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"users.vue","sourceRoot":"src/views/app/administration","sourcesContent":["<template>\n  <erd-row class=\"m-0 p-0\">\n    <erd-spinner v-if=\"isLoading\" size=\"lg\" overlay absolute></erd-spinner>\n    <erd-col xl=\"12\" v-if=\"!editor\" id=\"users\">\n      <b-table :items=\"paged\" :fields=\"fields\" striped small>\n        <template v-slot:cell(created)=\"row\">\n          {{ formatDate(row.item.created) }}\n        </template>\n        <template v-slot:cell(last_updated)=\"row\">\n          {{ formatDate(row.item.last_updated) }}\n        </template>\n        <template v-slot:cell(username)=\"row\">\n          <span class=\"text-capitalize\">{{ row.item.username }}</span>\n        </template>\n        <template v-slot:cell(status)=\"row\">\n          {{ $t(`user-status.${row.item.status}`) }}\n        </template>\n        <template v-slot:cell(role)=\"row\">\n          {{ $t(`roles.${row.item.role}`) }}\n        </template>\n        <template v-slot:cell(actions)=\"row\">\n          <erd-button\n            variant=\"info\"\n            class=\"btn-table\"\n            @click=\"userSubscription(row.item.id)\"\n            ><i class=\"las la-user-tag\"></i\n          ></erd-button>\n          <erd-button\n            variant=\"info\"\n            class=\"btn-table\"\n            @click=\"userProfile(row.item.id)\"\n            ><i class=\"las la-user\"></i\n          ></erd-button>\n          <erd-button\n            variant=\"primary\"\n            class=\"btn-table\"\n            @click=\"editUser(row.item)\"\n            ><i class=\"las la-user-edit\"></i\n          ></erd-button>\n          <erd-button\n            variant=\"danger\"\n            class=\"btn-table\"\n            @click=\"deleteUser(row.item.id)\"\n            ><i class=\"las la-trash\"></i\n          ></erd-button>\n        </template>\n      </b-table>\n      <b-pagination\n        class=\"w-100 my-3\"\n        size=\"sm\"\n        align=\"center\"\n        :total-rows=\"total\"\n        :per-page=\"perPage\"\n        v-model=\"currentPage\"\n      >\n        <template v-slot:next-text>\n          <i class=\"las la-angle-right\" />\n        </template>\n        <template v-slot:prev-text>\n          <i class=\"las la-angle-left\" />\n        </template>\n        <template v-slot:first-text>\n          <i class=\"las la-angle-double-left\" />\n        </template>\n        <template v-slot:last-text>\n          <i class=\"las la-angle-double-right\" />\n        </template>\n      </b-pagination>\n    </erd-col>\n    <erd-col xl=\"12\" v-if=\"editor\">\n      <label for=\"username\">{{ $t(\"users.username\") }}</label>\n      <erd-input\n        id=\"username\"\n        class=\"mt-1 mb-2 w-100\"\n        :placeholder=\"$t('users.username')\"\n        v-model=\"editorUser.username\"\n      ></erd-input>\n      <label for=\"password\">{{ $t(\"users.password\") }}</label>\n      <erd-input\n        id=\"password\"\n        class=\"mt-1 mb-2 w-100\"\n        :placeholder=\"$t('users.password')\"\n        v-model=\"editorUser.password\"\n      ></erd-input>\n      <label for=\"status\">{{ $t(\"users.status\") }}</label>\n      <erd-select\n        id=\"status\"\n        class=\"mt-1 mb-2 w-100\"\n        :items=\"statusList\"\n        v-model=\"editorUser.status\"\n      ></erd-select>\n      <label for=\"role\">{{ $t(\"users.role\") }}</label>\n      <erd-select\n        id=\"role\"\n        class=\"mt-1 mb-2 w-100\"\n        :items=\"filteredRoleList\"\n        v-model=\"editorUser.role\"\n      ></erd-select>\n    </erd-col>\n  </erd-row>\n</template>\n\n<script>\n/* eslint-disable vue/no-side-effects-in-computed-properties */\nimport { EventBus } from \"../../../services/ebus\";\nimport { httpService } from \"../../../services/http\";\nimport { mapGetters } from \"vuex\";\n\nexport default {\n  data() {\n    return {\n      search: null,\n      isLoading: false,\n      from: 0,\n      to: 0,\n      total: 0,\n      currentPage: 1,\n      editor: false,\n      editorUser: null,\n      users: [],\n      fields: [\n        { key: \"id\", label: this.$t(\"users.id\"), sortable: true },\n        { key: \"username\", label: this.$t(\"users.username\"), sortable: true },\n        { key: \"status\", label: this.$t(\"users.status\"), sortable: true },\n        { key: \"role\", label: this.$t(\"users.role\"), sortable: true },\n        {\n          key: \"created\",\n          label: this.$t(\"users.created\"),\n          sortable: true,\n        },\n        {\n          key: \"last_updated\",\n          label: this.$t(\"users.last-updated\"),\n          sortable: true,\n        },\n        {\n          key: \"actions\",\n          label: this.$t(\"users.actions\"),\n          sortable: false,\n          thClass: \"text-right\",\n          tdClass: \"text-right\",\n        },\n      ],\n      statusList: [\n        { value: 1, text: this.$t(\"user-status.1\") },\n        { value: 2, text: this.$t(\"user-status.2\") },\n        { value: 3, text: this.$t(\"user-status.3\") },\n        { value: 4, text: this.$t(\"user-status.4\") },\n        { value: 5, text: this.$t(\"user-status.5\") },\n      ],\n      roleList: [\n        { value: 1, text: this.$t(\"roles.1\") },\n        { value: 2, text: this.$t(\"roles.2\") },\n        { value: 3, text: this.$t(\"roles.3\") },\n        { value: 4, text: this.$t(\"roles.4\") },\n        { value: 5, text: this.$t(\"roles.5\") },\n        { value: 1985, text: this.$t(\"roles.1985\") },\n      ],\n    };\n  },\n  computed: {\n    ...mapGetters([\"currentUser\", \"settings\"]),\n    perPage() {\n      return this.settings.perPage;\n    },\n    searchFiltered() {\n      if (this.search === null) {\n        return this.users;\n      } else {\n        var re = new RegExp(this.search, \"i\");\n        return this.users.filter((user) => {\n          return (\n            String(user.id).match(re) ||\n            String(user.username).match(re) ||\n            String(user.created).match(re) ||\n            String(user.last_updated).match(re) ||\n            this.formatDate(user.created).match(re) ||\n            this.formatDate(user.last_updated).match(re)\n          );\n        });\n      }\n    },\n    paged() {\n      this.total = this.searchFiltered.length;\n      this.from = (this.currentPage - 1) * this.perPage;\n      this.to =\n        this.from + this.perPage > this.total\n          ? this.total\n          : this.from + this.perPage;\n      return this.searchFiltered.slice(this.from, this.to);\n    },\n    filteredRoleList() {\n      let roles = [...this.roleList];\n      roles.map((role) => {\n        if (this.currentUser.user.role === 1985) {\n          role.disabled = false;\n        } else {\n          if (role.value === 1985) {\n            role.disabled = true;\n          } else {\n            role.disabled = role.value <= this.currentUser.user.role;\n          }\n        }\n      });\n      return roles;\n    },\n  },\n  methods: {\n    updatePerPage(perPage) {\n      this.perPage = perPage;\n    },\n    formatDate(date) {\n      return new Date(date).toLocaleString(\n        this.$t(\"date.locale\"),\n        this.dateOptions\n      );\n    },\n    loadUsers() {\n      this.isLoading = true;\n      httpService\n        .get(\"administration/users\")\n        .then((res) => {\n          this.isLoading = false;\n          if (res.status === true) {\n            this.users = res.data;\n          }\n        })\n        .catch(() => {\n          this.isLoading = false;\n          this.$notify(\n            \"error\",\n            this.$t(\"profile.failed\"),\n            this.$t(\"users.load-error\"),\n            \"la-user-shield\",\n            { duration: 5000, permanent: false }\n          );\n        });\n    },\n    editUser(user) {\n      this.editorUser = Object.assign({}, user);\n      this.editor = true;\n    },\n    saveUser() {\n      this.editor = false;\n      let user = Object.assign({}, this.editorUser);\n      delete user.id;\n      httpService\n        .post(\"administration/user/update\", {\n          id: this.editorUser.id,\n          user: user,\n        })\n        .then((res) => {\n          this.isLoading = false;\n          if (res.status === true) {\n            this.$notify(\n              \"primary\",\n              this.$t(\"profile.success\"),\n              this.$t(\"users.save-success\"),\n              \"la-user-shield\",\n              { duration: 5000, permanent: false }\n            );\n            this.loadUsers();\n            this.editor = false;\n          }\n        })\n        .catch(() => {\n          this.isLoading = false;\n          this.$notify(\n            \"error\",\n            this.$t(\"profile.failed\"),\n            this.$t(\"users.save-error\"),\n            \"la-user-shield\",\n            { duration: 5000, permanent: false }\n          );\n        });\n    },\n    deleteUser(id) {\n      httpService\n        .post(\"administration/user/delete\", { id: id })\n        .then((res) => {\n          this.isLoading = false;\n          if (res.status === true) {\n            this.$notify(\n              \"primary\",\n              this.$t(\"profile.success\"),\n              this.$t(\"users.delete-success\"),\n              \"la-user-shield\",\n              { duration: 5000, permanent: false }\n            );\n            this.loadUsers();\n          }\n        })\n        .catch(() => {\n          this.isLoading = false;\n          this.$notify(\n            \"error\",\n            this.$t(\"profile.failed\"),\n            this.$t(\"users.delete-error\"),\n            \"la-user-shield\",\n            { duration: 5000, permanent: false }\n          );\n        });\n    },\n    cancelUser() {\n      this.editor = false;\n    },\n    userProfile(id) {\n      this.$router.push({\n        name: \"profiles\",\n        params: { editor: true, id: id },\n      });\n    },\n    userSubscription(id) {\n      this.$router.push({\n        name: \"subscriptions\",\n        params: { editor: true, id: id },\n      });\n    },\n    searchUser(search) {\n      if (search.length === 0) {\n        this.search = null;\n      } else {\n        this.search = search;\n      }\n    },\n    printUsers() {\n      document.getElementById(\"users\").print();\n    },\n  },\n  beforeMount() {\n    if (this.$route.params.editor && this.$route.params.id !== undefined) {\n      httpService\n        .get(\"administration/users\")\n        .then((res) => {\n          this.isLoading = false;\n          if (res.status === true) {\n            this.users = res.data;\n            let user = this.users.find(\n              (user) => user.id === this.$route.params.id\n            );\n            if (user) {\n              this.editUser(user);\n            }\n          }\n        })\n        .catch(() => {\n          this.isLoading = false;\n          this.$notify(\n            \"error\",\n            this.$t(\"profile.failed\"),\n            this.$t(\"users.load-error\"),\n            \"la-user-shield\",\n            { duration: 5000, permanent: false }\n          );\n        });\n    } else {\n      this.loadUsers();\n    }\n    EventBus.$on(\"refresh\", this.loadUsers);\n    EventBus.$on(\"save\", this.saveUser);\n    EventBus.$on(\"cancel\", this.cancelUser);\n    EventBus.$on(\"search\", this.searchUser);\n    EventBus.$on(\"print\", this.printUsers);\n  },\n  beforeDestroy() {\n    EventBus.$off(\"refresh\", this.loadUsers);\n    EventBus.$off(\"save\", this.saveUser);\n    EventBus.$off(\"cancel\", this.cancelUser);\n    EventBus.$off(\"search\", this.searchUser);\n    EventBus.$off(\"print\", this.printUsers);\n  },\n  watch: {\n    from: function (val) {\n      EventBus.$emit(\"update-from\", val);\n    },\n    to: function (val) {\n      EventBus.$emit(\"update-to\", val);\n    },\n    total: function (val) {\n      EventBus.$emit(\"update-total\", val);\n    },\n    editor: function (val) {\n      EventBus.$emit(\"update-editor\", val);\n    },\n  },\n};\n</script>\n"]}]}