{"remainingRequest":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/vue-loader/lib/index.js??vue-loader-options!/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/src/views/app/m3u/playlists.vue?vue&type=script&lang=js&","dependencies":[{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/src/views/app/m3u/playlists.vue","mtime":1626865338801},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8qIGVzbGludC1kaXNhYmxlIHZ1ZS9uby1zaWRlLWVmZmVjdHMtaW4tY29tcHV0ZWQtcHJvcGVydGllcyAqLwppbXBvcnQgeyBFdmVudEJ1cyB9IGZyb20gIi4uLy4uLy4uL3NlcnZpY2VzL2VidXMiOwppbXBvcnQgeyBodHRwU2VydmljZSB9IGZyb20gIi4uLy4uLy4uL3NlcnZpY2VzL2h0dHAiOwppbXBvcnQgeyBsYW5ndWFnZXMgfSBmcm9tICIuLi8uLi8uLi9oZWxwZXJzIjsKaW1wb3J0IHsgVXNlclJvbGUsIFN1YnNjcmlwdGlvblR5cGUgfSBmcm9tICIuLi8uLi8uLi9jb25zdGFudHMvY29uZmlnIjsKaW1wb3J0IHsgbWFwR2V0dGVycywgbWFwQWN0aW9ucyB9IGZyb20gInZ1ZXgiOwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkYXRlT3B0aW9uczogeyBkYXk6ICIyLWRpZ2l0IiwgbW9udGg6ICJudW1lcmljIiwgeWVhcjogIm51bWVyaWMiIH0sCiAgICAgIGxhbmd1YWdlcywKICAgICAgYWN0aXZlVGFiOiAwLAogICAgICBwbGF5bGlzdEdyb3VwczogewogICAgICAgIGxpdmU6IFtdLAogICAgICAgIG1vdmllczogW10sCiAgICAgICAgc2VyaWVzOiBbXSwKICAgICAgfSwKICAgICAgcGxheWxpc3RJbmZvOiB7CiAgICAgICAgbW9kYWw6IGZhbHNlLAogICAgICAgIHVzZXJuYW1lOiAiIiwKICAgICAgICBwYXNzd29yZDogIiIsCiAgICAgIH0sCiAgICAgIHBsYXlsaXN0czogW10sCiAgICAgIHBsYXlsaXN0OiBudWxsLAogICAgICBlZGl0b3I6IGZhbHNlLAogICAgICBzZWFyY2g6IG51bGwsCiAgICAgIGlzTG9hZGluZzogZmFsc2UsCiAgICAgIGZyb206IDAsCiAgICAgIHRvOiAwLAogICAgICB0b3RhbDogMCwKICAgICAgY3VycmVudFBhZ2U6IDEsCiAgICAgIGZpZWxkczogWwogICAgICAgIHsga2V5OiAiY3JlYXRlZF9hdCIsIGxhYmVsOiB0aGlzLiR0KCJ4dHJlYW0uY3JlYXRlZCIpLCBzb3J0YWJsZTogdHJ1ZSB9LAogICAgICAgIHsKICAgICAgICAgIGtleTogImxhc3RfdXBkYXRlZCIsCiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgieHRyZWFtLmxhc3QtdXBkYXRlZCIpLAogICAgICAgICAgc29ydGFibGU6IHRydWUsCiAgICAgICAgfSwKICAgICAgICB7IGtleTogIm5hbWUiLCBsYWJlbDogdGhpcy4kdCgieHRyZWFtLm5hbWUiKSwgc29ydGFibGU6IHRydWUgfSwKICAgICAgICB7IGtleTogImdyb3VwcyIsIGxhYmVsOiB0aGlzLiR0KCJ4dHJlYW0uZ3JvdXBzIiksIHNvcnRhYmxlOiB0cnVlIH0sCiAgICAgICAgeyBrZXk6ICJzdHJlYW1zIiwgbGFiZWw6IHRoaXMuJHQoInh0cmVhbS5zdHJlYW1zIiksIHNvcnRhYmxlOiB0cnVlIH0sCiAgICAgICAgewogICAgICAgICAga2V5OiAic3luY19pbnRlcnZhbCIsCiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgieHRyZWFtLnN5bmMtaW50ZXJ2YWwiKSwKICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAga2V5OiAic3luY2VkX2F0IiwKICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCJ4dHJlYW0uc3luY2VkLWF0IiksCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGtleTogInNvdXJjZV9leHBfZGF0ZSIsCiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgieHRyZWFtLmV4cGlyZSIpLAogICAgICAgICAgc29ydGFibGU6IHRydWUsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBrZXk6ICJzb3VyY2VfbWF4X2Nvbm5lY3Rpb25zIiwKICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCJ4dHJlYW0ubWF4LWNvbm5lY3Rpb25zIiksCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGtleTogImFjdGlvbnMiLAogICAgICAgICAgbGFiZWw6IHRoaXMuJHQoInVzZXJzLmFjdGlvbnMiKSwKICAgICAgICAgIHNvcnRhYmxlOiBmYWxzZSwKICAgICAgICAgIHRoQ2xhc3M6ICJ0ZXh0LXJpZ2h0IiwKICAgICAgICAgIHRkQ2xhc3M6ICJ0ZXh0LXJpZ2h0IiwKICAgICAgICB9LAogICAgICBdLAogICAgICBzeW5jSW50ZXJ2YWxzOiBbCiAgICAgICAgeyB0ZXh0OiB0aGlzLiR0KCJzeW5jLWludGVydmFsLjQ4IiksIHZhbHVlOiA0OCB9LAogICAgICAgIHsgdGV4dDogdGhpcy4kdCgic3luYy1pbnRlcnZhbC4yNCIpLCB2YWx1ZTogMjQgfSwKICAgICAgICB7IHRleHQ6IHRoaXMuJHQoInN5bmMtaW50ZXJ2YWwuMTIiKSwgdmFsdWU6IDEyIH0sCiAgICAgICAgeyB0ZXh0OiB0aGlzLiR0KCJzeW5jLWludGVydmFsLjYiKSwgdmFsdWU6IDYgfSwKICAgICAgICB7IHRleHQ6IHRoaXMuJHQoInN5bmMtaW50ZXJ2YWwuMSIpLCB2YWx1ZTogMSB9LAogICAgICBdLAogICAgICBvdXRwdXRUeXBlczogWwogICAgICAgIHsgdGV4dDogdGhpcy4kdCgib3V0cHV0LjEiKSwgdmFsdWU6IDEgfSwKICAgICAgICB7IHRleHQ6IHRoaXMuJHQoIm91dHB1dC4yIiksIHZhbHVlOiAyIH0sCiAgICAgIF0sCiAgICAgIGlwdHZUb29sc0hvc3Q6ICJodHRwOi8vdHYuaXB0di10b29scy5jb20iLAogICAgICBpcHR2VG9vbHNQb3J0OiA4MCwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyhbImN1cnJlbnRVc2VyIiwgInNldHRpbmdzIiwgInN5bmNUTURCIiwgInN5bmNQbGF5bGlzdCJdKSwKICAgIHNob3dUb29sdGlwcyAoKSB7CiAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLnNob3dUb29sdGlwczsKICAgIH0sCiAgICBlcGdPZmZzZXQoKSB7CiAgICAgIGxldCBkdCA9IG5ldyBEYXRlKCk7CiAgICAgIHJldHVybiBNYXRoLmFicyhkdC5nZXRUaW1lem9uZU9mZnNldCgpIC8gNjApOwogICAgfSwKICAgIHBlclBhZ2UoKSB7CiAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLnBlclBhZ2U7CiAgICB9LAogICAgc2VhcmNoRmlsdGVyZWQoKSB7CiAgICAgIGlmICh0aGlzLnNlYXJjaCA9PT0gbnVsbCkgewogICAgICAgIHJldHVybiB0aGlzLnBsYXlsaXN0czsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgcmUgPSBuZXcgUmVnRXhwKHRoaXMuc2VhcmNoLCAiaSIpOwogICAgICAgIHJldHVybiB0aGlzLnBsYXlsaXN0cy5maWx0ZXIoKGFjY291bnQpID0+IHsKICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIFN0cmluZyhhY2NvdW50LnRpdGxlKS5tYXRjaChyZSkgfHwKICAgICAgICAgICAgU3RyaW5nKGFjY291bnQuaG9zdCkubWF0Y2gocmUpIHx8CiAgICAgICAgICAgIFN0cmluZyhhY2NvdW50LnBvcnQpLm1hdGNoKHJlKSB8fAogICAgICAgICAgICBTdHJpbmcoYWNjb3VudC51c2VybmFtZSkubWF0Y2gocmUpIHx8CiAgICAgICAgICAgIFN0cmluZyhhY2NvdW50LnBhc3N3b3JkKS5tYXRjaChyZSkgfHwKICAgICAgICAgICAgdGhpcy5mb3JtYXREYXRlKGFjY291bnQuc3luY2VkX2F0KS5tYXRjaChyZSkgfHwKICAgICAgICAgICAgdGhpcy4kdChgc3luYy1pbnRlcnZhbC4ke2FjY291bnQuc3luY19pbnRlcnZhbH1gKS5tYXRjaChyZSkKICAgICAgICAgICk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBwYWdlZCgpIHsKICAgICAgdGhpcy50b3RhbCA9IHRoaXMuc2VhcmNoRmlsdGVyZWQubGVuZ3RoOwogICAgICB0aGlzLmZyb20gPSAodGhpcy5jdXJyZW50UGFnZSAtIDEpICogdGhpcy5wZXJQYWdlIHx8IDA7CiAgICAgIHRoaXMudG8gPQogICAgICAgIHRoaXMuZnJvbSArIHRoaXMucGVyUGFnZSA+IHRoaXMudG90YWwKICAgICAgICAgID8gdGhpcy50b3RhbAogICAgICAgICAgOiB0aGlzLmZyb20gKyB0aGlzLnBlclBhZ2U7CiAgICAgIHJldHVybiB0aGlzLnNlYXJjaEZpbHRlcmVkLnNsaWNlKHRoaXMuZnJvbSwgdGhpcy50byk7CiAgICB9LAogICAgYWxsb3dlZElwczogewogICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5wbGF5bGlzdC5pcF9hbGxvd2VkCiAgICAgICAgICA/IHRoaXMucGxheWxpc3QuaXBfYWxsb3dlZC5qb2luKCIsIikKICAgICAgICAgIDogIiI7CiAgICAgIH0sCiAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkgewogICAgICAgIHRoaXMucGxheWxpc3QuaXBfYWxsb3dlZCA9IHZhbC5zcGxpdCgiLCIpLm1hcCgoaXApID0+IHsKICAgICAgICAgIHJldHVybiBpcC50cmltKCk7CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICB9LAogICAgY29udGV4dExpdmUoKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIGxldCBsaXZlID0gWy4uLnZtLnBsYXlsaXN0R3JvdXBzLmxpdmVdOwogICAgICByZXR1cm4gWwogICAgICAgIHsKICAgICAgICAgIHRleHQ6IHZtLiR0KCJnZW5lcmFsLnNlbGVjdC1hbGwiKSwKICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdm0ucGxheWxpc3Quc3luY19saXZlID0gWy4uLmxpdmUubWFwKChnKSA9PiBnLmNhdGVnb3J5X2lkKV07CiAgICAgICAgICB9LAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGV4dDogdm0uJHQoImdlbmVyYWwuc2VsZWN0LW5vbmUiKSwKICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdm0ucGxheWxpc3Quc3luY19saXZlID0gW107CiAgICAgICAgICB9LAogICAgICAgIH0sCiAgICAgIF07CiAgICB9LAogICAgY29udGV4dE1vdmllcygpIHsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgbGV0IG1vdmllcyA9IFsuLi52bS5wbGF5bGlzdEdyb3Vwcy5tb3ZpZXNdOwogICAgICByZXR1cm4gWwogICAgICAgIHsKICAgICAgICAgIHRleHQ6IHZtLiR0KCJnZW5lcmFsLnNlbGVjdC1hbGwiKSwKICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKHZtLmNhblVzZU1vdmllc1NlcmllcykgewogICAgICAgICAgICAgIHZtLnBsYXlsaXN0LnN5bmNfbW92aWVzID0gWy4uLm1vdmllcy5tYXAoKGcpID0+IGcuY2F0ZWdvcnlfaWQpXTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIGRpc2FibGVkOiAhdm0uY2FuVXNlTW92aWVzU2VyaWVzLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGV4dDogdm0uJHQoImdlbmVyYWwuc2VsZWN0LW5vbmUiKSwKICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdm0ucGxheWxpc3Quc3luY19tb3ZpZXMgPSBbXTsKICAgICAgICAgIH0sCiAgICAgICAgICBkaXNhYmxlZDogIXZtLmNhblVzZU1vdmllc1NlcmllcywKICAgICAgICB9LAogICAgICBdOwogICAgfSwKICAgIGNvbnRleHRTZXJpZXMoKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIGxldCBzZXJpZXMgPSBbLi4udm0ucGxheWxpc3RHcm91cHMuc2VyaWVzXTsKICAgICAgcmV0dXJuIFsKICAgICAgICB7CiAgICAgICAgICB0ZXh0OiB2bS4kdCgiZ2VuZXJhbC5zZWxlY3QtYWxsIiksCiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmICh2bS5jYW5Vc2VNb3ZpZXNTZXJpZXMpIHsKICAgICAgICAgICAgICB2bS5wbGF5bGlzdC5zeW5jX3NlcmllcyA9IFsuLi5zZXJpZXMubWFwKChnKSA9PiBnLmNhdGVnb3J5X2lkKV07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBkaXNhYmxlZDogIXZtLmNhblVzZU1vdmllc1NlcmllcywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRleHQ6IHZtLiR0KCJnZW5lcmFsLnNlbGVjdC1ub25lIiksCiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZtLnBsYXlsaXN0LnN5bmNfc2VyaWVzID0gW107CiAgICAgICAgICB9LAogICAgICAgICAgZGlzYWJsZWQ6ICF2bS5jYW5Vc2VNb3ZpZXNTZXJpZXMsCiAgICAgICAgfSwKICAgICAgXTsKICAgIH0sCiAgICB0bWRiTGFuZ3VhZ2VzKCkgewogICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5sYW5ndWFnZXMpLm1hcCgobGFuZ3VhZ2UpID0+IHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgdmFsdWU6IGxhbmd1YWdlLAogICAgICAgICAgdGV4dDogYCR7dGhpcy5sYW5ndWFnZXNbbGFuZ3VhZ2VdLm5hbWV9ICgke3RoaXMubGFuZ3VhZ2VzW2xhbmd1YWdlXS5uYXRpdmVOYW1lfSlgLAogICAgICAgIH07CiAgICAgIH0pOwogICAgfSwKICAgIGNhblVzZUN1c3RvbVVzZXJQYXNzKCkgewogICAgICByZXR1cm4gW1VzZXJSb2xlLlN1cGVyQWRtaW4sIFVzZXJSb2xlLkFkbWluLCBVc2VyUm9sZS5Nb2RlcmF0b3JdLmluY2x1ZGVzKAogICAgICAgIHRoaXMuY3VycmVudFVzZXIudXNlci5yb2xlCiAgICAgICk7CiAgICB9LAogICAgY2FuVXNlTW92aWVzU2VyaWVzKCkgewogICAgICByZXR1cm4gWwogICAgICAgIFN1YnNjcmlwdGlvblR5cGUuUHJvZmVzc2lvbmFsLAogICAgICAgIFN1YnNjcmlwdGlvblR5cGUuRmFtaWx5LAogICAgICAgIFN1YnNjcmlwdGlvblR5cGUuQnVzaW5lc3NTbWFsbCwKICAgICAgICBTdWJzY3JpcHRpb25UeXBlLkJ1c2luZXNzUHJvZmVzc2lvbmFsLAogICAgICAgIFN1YnNjcmlwdGlvblR5cGUuQnVzaW5lc3NFbnRlcnByaXNlLAogICAgICAgIFN1YnNjcmlwdGlvblR5cGUuTWFuYWdlciwKICAgICAgXS5pbmNsdWRlcyh0aGlzLmN1cnJlbnRVc2VyLnN1YnNjcmlwdGlvbi5zdWJzY3JpcHRpb25fdHlwZSk7CiAgICB9LAogICAgcGxheWxpc3RJc0VtcHR5KCkgewogICAgICByZXR1cm4gKAogICAgICAgICh0aGlzLnBsYXlsaXN0ICYmIHRoaXMucGxheWxpc3QuZ3JvdXBzID09IDApIHx8CiAgICAgICAgdGhpcy5wbGF5bGlzdC5zdHJlYW1zID09IDAKICAgICAgKTsKICAgIH0sCiAgICBjYW5BZGRQbGF5bGlzdCgpIHsKICAgICAgaWYgKHRoaXMuY3VycmVudFVzZXIuc3Vic2NyaXB0aW9uKSB7CiAgICAgICAgbGV0IHN1YnNjcmlwdGlvbiA9IHRoaXMuY3VycmVudFVzZXIuc3Vic2NyaXB0aW9uOwogICAgICAgIGlmIChzdWJzY3JpcHRpb24uZW5kX2RhdGUgIT0gbnVsbCAmJiBuZXcgRGF0ZShzdWJzY3JpcHRpb24uZW5kX2RhdGUpLmdldFRpbWUoKSA8IG5ldyBEYXRlKCkuZ2V0VGltZSgpKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGlmIChwYXJzZUludChzdWJzY3JpcHRpb24uY3VzdG9tX3BsYW4pID09PSAxKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5wbGF5bGlzdHMubGVuZ3RoIDwgc3Vic2NyaXB0aW9uLm1heF9wbGF5bGlzdDsKICAgICAgICB9CiAgICAgICAgaWYgKHBhcnNlSW50KHN1YnNjcmlwdGlvbi5lbmFibGVkKSAhPT0gMSkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBzd2l0Y2ggKHN1YnNjcmlwdGlvbi5zdWJzY3JpcHRpb25fdHlwZSkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICByZXR1cm4gdGhpcy5wbGF5bGlzdHMubGVuZ3RoIDwgMjsKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIHRoaXMucGxheWxpc3RzLmxlbmd0aCA8IDU7CiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIHJldHVybiB0aGlzLnBsYXlsaXN0cy5sZW5ndGggPCA1OwogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICByZXR1cm4gdGhpcy5wbGF5bGlzdHMubGVuZ3RoIDwgMTA7CiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIHJldHVybiB0aGlzLnBsYXlsaXN0cy5sZW5ndGggPCAyNTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoWyJzeW5jaHJvbml6ZVRNREIiLCAic3luY2hyb25pemVQbGF5bGlzdCJdKSwKICAgIG9wZW5Db250ZXh0KGNvbnRleHQpIHsKICAgICAgdGhpcy4kcmVmc1tjb250ZXh0XS5vcGVuKCk7CiAgICB9LAogICAgbG9hZEdyb3VwcygpIHsKICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlOwogICAgICBodHRwU2VydmljZQogICAgICAgIC5wb3N0KCJwbGF5bGlzdC9sb2FkLWdyb3VwcyIsIHsKICAgICAgICAgIGhvc3Q6IHRoaXMucGxheWxpc3Quc291cmNlX2hvc3QsCiAgICAgICAgICBwb3J0OiB0aGlzLnBsYXlsaXN0LnNvdXJjZV9wb3J0LAogICAgICAgICAgdXNlcm5hbWU6IHRoaXMucGxheWxpc3Quc291cmNlX3VzZXJuYW1lLAogICAgICAgICAgcGFzc3dvcmQ6IHRoaXMucGxheWxpc3Quc291cmNlX3Bhc3N3b3JkLAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSB0cnVlKSB7CiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJlcy5kYXRhLmxpdmUpICYmIEFycmF5LmlzQXJyYXkocmVzLmRhdGEubW92aWVzKSAmJiBBcnJheS5pc0FycmF5KHJlcy5kYXRhLnNlcmllcykpIHsKICAgICAgICAgICAgICB0aGlzLnBsYXlsaXN0R3JvdXBzID0gcmVzLmRhdGE7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCiAgICBsb2FkUGxheWxpc3RzKCkgewogICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7CiAgICAgIGh0dHBTZXJ2aWNlCiAgICAgICAgLmdldCgicGxheWxpc3QiKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gdHJ1ZSkgewogICAgICAgICAgICB0aGlzLnBsYXlsaXN0cyA9IHJlcy5kYXRhOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICB0aGlzLiRub3RpZnkoCiAgICAgICAgICAgICJlcnJvciIsCiAgICAgICAgICAgIHRoaXMuJHQoInByb2ZpbGUuZmFpbGVkIiksCiAgICAgICAgICAgIHRoaXMuJHQoInh0cmVhbS54dHJlYW0tbG9hZC1lcnJvciIpLAogICAgICAgICAgICAibGEtdXNlci1zaGllbGQiLAogICAgICAgICAgICB7IGR1cmF0aW9uOiA1MDAwLCBwZXJtYW5lbnQ6IGZhbHNlIH0KICAgICAgICAgICk7CiAgICAgICAgfSk7CiAgICB9LAogICAgYWRkUGxheWxpc3QoKSB7CiAgICAgIGlmICh0aGlzLmNhbkFkZFBsYXlsaXN0ICE9PSB0cnVlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGh0dHBTZXJ2aWNlCiAgICAgICAgLnBvc3QoInBsYXlsaXN0L2FkZCIpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IHRydWUgJiYgcmVzLmRhdGEgIT09IGZhbHNlKSB7CiAgICAgICAgICAgIHRoaXMucGxheWxpc3QgPSB7CiAgICAgICAgICAgICAgaWQ6IHJlcy5kYXRhLAogICAgICAgICAgICAgIHVybDogIiIsCiAgICAgICAgICAgICAgZW5hYmxlZDogMSwKICAgICAgICAgICAgICBzb3VyY2VfaG9zdDogIiIsCiAgICAgICAgICAgICAgc291cmNlX3BvcnQ6ICIiLAogICAgICAgICAgICAgIHNvdXJjZV91c2VybmFtZTogIiIsCiAgICAgICAgICAgICAgc291cmNlX3Bhc3N3b3JkOiAiIiwKICAgICAgICAgICAgICBzb3VyY2VfZXhwX2RhdGU6IGZhbHNlLAogICAgICAgICAgICAgIHNvdXJjZV9tYXhfY29ubmVjdGlvbnM6IGZhbHNlLAogICAgICAgICAgICAgIHN5bmNfZW5hYmxlZDogMSwKICAgICAgICAgICAgICBzeW5jX2ludGVydmFsOiA0OCwKICAgICAgICAgICAgICBzeW5jX2xpdmU6IFtdLAogICAgICAgICAgICAgIHN5bmNfbW92aWVzOiBbXSwKICAgICAgICAgICAgICBzeW5jX3NlcmllczogW10sCiAgICAgICAgICAgICAgaXBfcHJvdGVjdGlvbjogMCwKICAgICAgICAgICAgICBpcF9hbGxvd2VkOiBbXSwKICAgICAgICAgICAgICBhcGlfdXNlcm5hbWU6IHRoaXMuY3VycmVudFVzZXIudXNlci51c2VybmFtZSwKICAgICAgICAgICAgICBhcGlfcGFzc3dvcmQ6ICIiLAogICAgICAgICAgICAgIGFwaV9tZXNzYWdlOiAiV2VsY29tZSB0byBJUFRWLVRvb2xzLmNvbSIsCiAgICAgICAgICAgICAgYXBpX291dHB1dF9mb3JtYXQ6IDEsCiAgICAgICAgICAgICAgbmFtZTogIiIsCiAgICAgICAgICAgICAgdG1kYl9sYW5ndWFnZTogdGhpcy4kaTE4bi5sb2NhbGUsCiAgICAgICAgICAgICAgZXBnX29mZnNldDogdGhpcy5lcGdPZmZzZXQsCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMucGxheWxpc3RHcm91cHMgPSB7CiAgICAgICAgICAgICAgbGl2ZTogW10sCiAgICAgICAgICAgICAgbW92aWVzOiBbXSwKICAgICAgICAgICAgICBzZXJpZXM6IFtdLAogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLnJhbmRvbVBhc3N3b3JkKCk7CiAgICAgICAgICAgIHRoaXMuZWRpdG9yID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICB0aGlzLiRub3RpZnkoCiAgICAgICAgICAgICJlcnJvciIsCiAgICAgICAgICAgIHRoaXMuJHQoInByb2ZpbGUuZmFpbGVkIiksCiAgICAgICAgICAgIHRoaXMuJHQoInh0cmVhbS54dHJlYW0tbmV3LWVycm9yIiksCiAgICAgICAgICAgICJsYS11c2VyLXNoaWVsZCIsCiAgICAgICAgICAgIHsgZHVyYXRpb246IDUwMDAsIHBlcm1hbmVudDogZmFsc2UgfQogICAgICAgICAgKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBlZGl0UGxheWxpc3QocGxheWxpc3QpIHsKICAgICAgdGhpcy5wbGF5bGlzdCA9IE9iamVjdC5hc3NpZ24oe30sIHBsYXlsaXN0KTsKICAgICAgdGhpcy5wbGF5bGlzdEF1dGgoKTsKICAgICAgdGhpcy5lZGl0b3IgPSB0cnVlOwogICAgfSwKICAgIHBsYXlsaXN0SW5mb01vZGFsKHNob3csIHBsYXlsaXN0KSB7CiAgICAgIGlmIChwbGF5bGlzdCkgewogICAgICAgIHRoaXMucGxheWxpc3RJbmZvLnVzZXJuYW1lID0gcGxheWxpc3QuYXBpX3VzZXJuYW1lOwogICAgICAgIHRoaXMucGxheWxpc3RJbmZvLnBhc3N3b3JkID0gcGxheWxpc3QuYXBpX3Bhc3N3b3JkOwogICAgICB9CiAgICAgIHRoaXMucGxheWxpc3RJbmZvLm1vZGFsID0gc2hvdzsKICAgIH0sCiAgICBjYW5jZWxFZGl0b3IoKSB7CiAgICAgIHRoaXMuZWRpdG9yID0gZmFsc2U7CiAgICB9LAogICAgc2F2ZUVkaXRvcigpIHsKICAgICAgbGV0IHBsYXlsaXN0ID0gdGhpcy5wbGF5bGlzdDsKICAgICAgbGV0IHBsYXlsaXN0SWQgPSB0aGlzLnBsYXlsaXN0LmlkOwogICAgICBkZWxldGUgcGxheWxpc3QuaWQ7CiAgICAgIGRlbGV0ZSBwbGF5bGlzdC51cmw7CiAgICAgIGRlbGV0ZSBwbGF5bGlzdC5ncm91cHM7CiAgICAgIGRlbGV0ZSBwbGF5bGlzdC5zdHJlYW1zOwoKICAgICAgcGxheWxpc3QubGFzdF91cGRhdGVkID0gbmV3IERhdGUoKTsKICAgICAgaHR0cFNlcnZpY2UKICAgICAgICAucHV0KGBwbGF5bGlzdC8ke3BsYXlsaXN0SWR9YCwgcGxheWxpc3QpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IHRydWUgJiYgcmVzLmRhdGEgPT09IHRydWUpIHsKICAgICAgICAgICAgdGhpcy4kbm90aWZ5KAogICAgICAgICAgICAgICJwcmltYXJ5IiwKICAgICAgICAgICAgICB0aGlzLiR0KCJwcm9maWxlLnN1Y2Nlc3MiKSwKICAgICAgICAgICAgICB0aGlzLiR0KCJ4dHJlYW0ueHRyZWFtLXNhdmUtc3VjY2VzcyIpLAogICAgICAgICAgICAgICJsYS11c2VyLXNoaWVsZCIsCiAgICAgICAgICAgICAgeyBkdXJhdGlvbjogNTAwMCwgcGVybWFuZW50OiBmYWxzZSB9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHRoaXMuZWRpdG9yID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMubG9hZFBsYXlsaXN0cygpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMuJG5vdGlmeSgKICAgICAgICAgICAgImVycm9yIiwKICAgICAgICAgICAgdGhpcy4kdCgicHJvZmlsZS5mYWlsZWQiKSwKICAgICAgICAgICAgdGhpcy4kdCgieHRyZWFtLnh0cmVhbS1zYXZlLWVycm9yIiksCiAgICAgICAgICAgICJsYS11c2VyLXNoaWVsZCIsCiAgICAgICAgICAgIHsgZHVyYXRpb246IDUwMDAsIHBlcm1hbmVudDogZmFsc2UgfQogICAgICAgICAgKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBkZWxldGVQbGF5bGlzdChpZCkgewogICAgICBodHRwU2VydmljZQogICAgICAgIC5kZWxldGUoYHBsYXlsaXN0LyR7aWR9YCkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gdHJ1ZSkgewogICAgICAgICAgICB0aGlzLiRub3RpZnkoCiAgICAgICAgICAgICAgInByaW1hcnkiLAogICAgICAgICAgICAgIHRoaXMuJHQoInByb2ZpbGUuc3VjY2VzcyIpLAogICAgICAgICAgICAgIHRoaXMuJHQoInh0cmVhbS54dHJlYW0tZGVsZXRlLXN1Y2Nlc3MiKSwKICAgICAgICAgICAgICAibGEtdXNlci1zaGllbGQiLAogICAgICAgICAgICAgIHsgZHVyYXRpb246IDUwMDAsIHBlcm1hbmVudDogZmFsc2UgfQogICAgICAgICAgICApOwogICAgICAgICAgICB0aGlzLmxvYWRQbGF5bGlzdHMoKTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICB0aGlzLiRub3RpZnkoCiAgICAgICAgICAgICJlcnJvciIsCiAgICAgICAgICAgIHRoaXMuJHQoInByb2ZpbGUuZmFpbGVkIiksCiAgICAgICAgICAgIHRoaXMuJHQoInh0cmVhbS54dHJlYW0tZGVsZXRlLWVycm9yIiksCiAgICAgICAgICAgICJsYS11c2VyLXNoaWVsZCIsCiAgICAgICAgICAgIHsgZHVyYXRpb246IDUwMDAsIHBlcm1hbmVudDogZmFsc2UgfQogICAgICAgICAgKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBzZWFyY2hBY2NvdW50KHNlYXJjaCkgewogICAgICBpZiAoc2VhcmNoLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHRoaXMuc2VhcmNoID0gbnVsbDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnNlYXJjaCA9IHNlYXJjaDsKICAgICAgfQogICAgfSwKICAgIHByaW50QWNjb3VudHMoKSB7CiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwbGF5bGlzdHMiKS5wcmludCgpOwogICAgfSwKICAgIGZvcm1hdERhdGUoZGF0ZSkgewogICAgICByZXR1cm4gZGF0ZSA9PT0gZmFsc2UKICAgICAgICA/ICIiCiAgICAgICAgOiBkYXRlID09PSBudWxsIHx8CiAgICAgICAgICBkYXRlID09PSAiMDAwMC0wMC0wMCAwMDowMDowMCIgfHwKICAgICAgICAgIGRhdGUgPT09IDAgfHwKICAgICAgICAgIGRhdGUgPT09ICIiCiAgICAgICAgPyB0aGlzLiR0KCJ4dHJlYW0udW5saW1pdGVkIikKICAgICAgICA6IG5ldyBEYXRlKGRhdGUpLnRvTG9jYWxlU3RyaW5nKAogICAgICAgICAgICB0aGlzLiR0KCJkYXRlLmxvY2FsZSIpLAogICAgICAgICAgICB0aGlzLmRhdGVPcHRpb25zCiAgICAgICAgICApOwogICAgfSwKICAgIGZvcm1hdE1heENvbm5lY3Rpb25zKG1heCkgewogICAgICByZXR1cm4gbWF4ID09PSBmYWxzZQogICAgICAgID8gIiIKICAgICAgICA6IG1heCA9PT0gbnVsbCB8fCBtYXggPD0gMAogICAgICAgID8gdGhpcy4kdCgieHRyZWFtLnVubGltaXRlZCIpCiAgICAgICAgOiBtYXg7CiAgICB9LAogICAgZG9UYWJDaGFuZ2UodGFiKSB7CiAgICAgIGlmICh0YWIgPT0gMSkgewogICAgICAgIC8vdGhpcy5sb2FkR3JvdXBzKCk7CiAgICAgIH0KICAgICAgdGhpcy5hY3RpdmVUYWIgPSB0YWI7CiAgICB9LAogICAgcmFuZG9tUGFzc3dvcmQoKSB7CiAgICAgIGh0dHBTZXJ2aWNlCiAgICAgICAgLnBvc3QoInBsYXlsaXN0L3JhbmRvbS1wYXNzd29yZCIsIHsKICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLnBsYXlsaXN0LmFwaV91c2VybmFtZSwKICAgICAgICB9KQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSB0cnVlKSB7CiAgICAgICAgICAgIHRoaXMucGxheWxpc3QuYXBpX3Bhc3N3b3JkID0gcmVzLmRhdGE7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgfSk7CiAgICB9LAogICAgcGxheWxpc3RBdXRoKCkgewogICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7CiAgICAgIGh0dHBTZXJ2aWNlCiAgICAgICAgLnBvc3QoInBsYXlsaXN0L2F1dGhlbnRpY2F0ZSIsIHsKICAgICAgICAgIGhvc3Q6IHRoaXMucGxheWxpc3Quc291cmNlX2hvc3QsCiAgICAgICAgICBwb3J0OiB0aGlzLnBsYXlsaXN0LnNvdXJjZV9wb3J0LAogICAgICAgICAgdXNlcm5hbWU6IHRoaXMucGxheWxpc3Quc291cmNlX3VzZXJuYW1lLAogICAgICAgICAgcGFzc3dvcmQ6IHRoaXMucGxheWxpc3Quc291cmNlX3Bhc3N3b3JkLAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSB0cnVlICYmIHJlcy5kYXRhLmF1dGgpIHsKICAgICAgICAgICAgdGhpcy5wbGF5bGlzdC5zb3VyY2VfZXhwX2RhdGUgPSByZXMuZGF0YS5leHBfZGF0ZTsKICAgICAgICAgICAgdGhpcy5wbGF5bGlzdC5zb3VyY2VfbWF4X2Nvbm5lY3Rpb25zID0gcmVzLmRhdGEubWF4X2Nvbm5lY3Rpb25zOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICB9LAogICAgZ2V0SVBBZGRyZXNzKCkgewogICAgICBodHRwU2VydmljZQogICAgICAgIC5nZXQoInBsYXlsaXN0L2lwLWFkZHJlc3MiKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSB0cnVlKSB7CiAgICAgICAgICAgIHRoaXMucGxheWxpc3QuaXBfYWxsb3dlZC5wdXNoKHJlcy5kYXRhKTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBjaGVja0F2YWlsYWJpbGl0eSgpIHsKICAgICAgaHR0cFNlcnZpY2UKICAgICAgICAucG9zdCgicGxheWxpc3QvdXNlci1wYXNzLWV4aXN0cyIsIHsKICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLnBsYXlsaXN0LmFwaV91c2VybmFtZSwKICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLnBsYXlsaXN0LmFwaV9wYXNzd29yZCwKICAgICAgICB9KQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSB0cnVlKSB7CiAgICAgICAgICAgIGlmIChyZXMuZGF0YSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgIHRoaXMuJG5vdGlmeSgKICAgICAgICAgICAgICAgICJlcnJvciIsCiAgICAgICAgICAgICAgICB0aGlzLiR0KCJ4dHJlYW0ubm90LWF2YWlsYWJsZSIpLAogICAgICAgICAgICAgICAgdGhpcy4kdCgieHRyZWFtLnVzZXItcGFzcy11c2VkIiksCiAgICAgICAgICAgICAgICAibGEtZXhjbGFtYXRpb24tdHJpYW5nbGUiLAogICAgICAgICAgICAgICAgeyBkdXJhdGlvbjogNTAwMCwgcGVybWFuZW50OiBmYWxzZSB9CiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLiRub3RpZnkoCiAgICAgICAgICAgICAgICAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICB0aGlzLiR0KCJ4dHJlYW0uYXZhaWxhYmxlIiksCiAgICAgICAgICAgICAgICB0aGlzLiR0KCJ4dHJlYW0udXNlci1wYXNzLWF2YWlsYWJsZSIpLAogICAgICAgICAgICAgICAgImxhLWNoZWNrLWNpcmNsZSIsCiAgICAgICAgICAgICAgICB7IGR1cmF0aW9uOiA1MDAwLCBwZXJtYW5lbnQ6IGZhbHNlIH0KICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgfSk7CiAgICB9LAogICAgZXhwb3J0TTNVKCkgewogICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7CiAgICAgIGh0dHBTZXJ2aWNlCiAgICAgICAgLmRvd25sb2FkKGBwbGF5bGlzdC9leHBvcnQvbTN1LyR7dGhpcy5wbGF5bGlzdC5pZH1gKQogICAgICAgIC50aGVuKChibG9iKSA9PiB7CiAgICAgICAgICB2YXIgdXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgICAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgICAgIGEuaHJlZiA9IHVybDsKICAgICAgICAgIGEuZG93bmxvYWQgPSAiZXhwb3J0Lm0zdSI7CiAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOwogICAgICAgICAgYS5jbGljaygpOwogICAgICAgICAgYS5yZW1vdmUoKTsKICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICB9LAogICAgZXhwb3J0U0lQVFYoKSB7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgaHR0cFNlcnZpY2UKICAgICAgICAuZG93bmxvYWQoYHBsYXlsaXN0L2V4cG9ydC9zaXB0di8ke3RoaXMucGxheWxpc3QuaWR9YCkKICAgICAgICAudGhlbigoYmxvYikgPT4gewogICAgICAgICAgdmFyIHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgICAgICBhLmhyZWYgPSB1cmw7CiAgICAgICAgICBhLmRvd25sb2FkID0gImV4cG9ydC50eHQiOwogICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsKICAgICAgICAgIGEuY2xpY2soKTsKICAgICAgICAgIGEucmVtb3ZlKCk7CiAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0pOwogICAgfSwKICAgIGV4cG9ydEJvdXF1ZXQoKSB7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgaHR0cFNlcnZpY2UKICAgICAgICAuZG93bmxvYWQoYHBsYXlsaXN0L2V4cG9ydC9ib3VxdWV0LyR7dGhpcy5wbGF5bGlzdC5pZH1gKQogICAgICAgIC50aGVuKChibG9iKSA9PiB7CiAgICAgICAgICB2YXIgdXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgICAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgICAgIGEuaHJlZiA9IHVybDsKICAgICAgICAgIGEuZG93bmxvYWQgPSAiZXhwb3J0LnppcCI7CiAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOwogICAgICAgICAgYS5jbGljaygpOwogICAgICAgICAgYS5yZW1vdmUoKTsKICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICB9LAogICAgZXhwb3J0Q1NWKCkgewogICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7CiAgICAgIGh0dHBTZXJ2aWNlCiAgICAgICAgLmRvd25sb2FkKGBwbGF5bGlzdC9leHBvcnQvY3N2LyR7dGhpcy5wbGF5bGlzdC5pZH1gKQogICAgICAgIC50aGVuKChibG9iKSA9PiB7CiAgICAgICAgICB2YXIgdXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgICAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgICAgIGEuaHJlZiA9IHVybDsKICAgICAgICAgIGEuZG93bmxvYWQgPSAiZXhwb3J0LnppcCI7CiAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOwogICAgICAgICAgYS5jbGljaygpOwogICAgICAgICAgYS5yZW1vdmUoKTsKICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICB9LAogICAgZXhwb3J0SlNPTigpIHsKICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlOwogICAgICBodHRwU2VydmljZQogICAgICAgIC5kb3dubG9hZChgcGxheWxpc3QvZXhwb3J0L2pzb24vJHt0aGlzLnBsYXlsaXN0LmlkfWApCiAgICAgICAgLnRoZW4oKGJsb2IpID0+IHsKICAgICAgICAgIHZhciB1cmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgICAgICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwogICAgICAgICAgYS5ocmVmID0gdXJsOwogICAgICAgICAgYS5kb3dubG9hZCA9ICJleHBvcnQuemlwIjsKICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7CiAgICAgICAgICBhLmNsaWNrKCk7CiAgICAgICAgICBhLnJlbW92ZSgpOwogICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9KTsKICAgIH0sCiAgICBiYWNrdXBQbGF5bGlzdChwYXRoKSB7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgaHR0cFNlcnZpY2UKICAgICAgICAuZG93bmxvYWQoYHBsYXlsaXN0L2JhY2stdXAvJHtwYXRofS8ke3RoaXMucGxheWxpc3QuaWR9YCkKICAgICAgICAudGhlbigoYmxvYikgPT4gewogICAgICAgICAgdmFyIHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgICAgICBhLmhyZWYgPSB1cmw7CiAgICAgICAgICBhLmRvd25sb2FkID0gImJhY2t1cC56aXAiOwogICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsKICAgICAgICAgIGEuY2xpY2soKTsKICAgICAgICAgIGEucmVtb3ZlKCk7CiAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0pOwogICAgfSwKICAgIGJhY2t1cEVQR0NvZGVzKCkgewogICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7CiAgICAgIGh0dHBTZXJ2aWNlCiAgICAgICAgLmRvd25sb2FkKGBwbGF5bGlzdC9iYWNrLXVwL2VwZy1jb2Rlcy8ke3RoaXMucGxheWxpc3QuaWR9YCkKICAgICAgICAudGhlbigoYmxvYikgPT4gewogICAgICAgICAgdmFyIHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgICAgICBhLmhyZWYgPSB1cmw7CiAgICAgICAgICBhLmRvd25sb2FkID0gImJhY2t1cC56aXAiOwogICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsKICAgICAgICAgIGEuY2xpY2soKTsKICAgICAgICAgIGEucmVtb3ZlKCk7CiAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0pOwogICAgfSwKICAgIHJlc3RvcmVFUEdDb2RlcyhlKSB7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgaWYgKGUgJiYgZS50YXJnZXQuZmlsZXMubGVuZ3RoID09IDEpIHsKICAgICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICBmb3JtRGF0YS5hcHBlbmQoImJhY2t1cC56aXAiLCBlLnRhcmdldC5maWxlc1swXSk7CiAgICAgICAgaHR0cFNlcnZpY2UKICAgICAgICAgIC5wb3N0RmlsZShgcGxheWxpc3QvcmVzdG9yZS9lcGctY29kZXMvJHt0aGlzLnBsYXlsaXN0LmlkfWAsIGZvcm1EYXRhKQogICAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gdHJ1ZSAmJiByZXMuZGF0YSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgIHRoaXMuJG5vdGlmeSgKICAgICAgICAgICAgICAgICJwcmltYXJ5IiwKICAgICAgICAgICAgICAgIHRoaXMuJHQoInByb2ZpbGUuc3VjY2VzcyIpLAogICAgICAgICAgICAgICAgdGhpcy4kdCgieHRyZWFtLnJlc3RvcmUtZXBnY29kZXMtc3VjY2VzcyIpLAogICAgICAgICAgICAgICAgImxhLXVzZXItc2hpZWxkIiwKICAgICAgICAgICAgICAgIHsgZHVyYXRpb246IDUwMDAsIHBlcm1hbmVudDogZmFsc2UgfQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy4kbm90aWZ5KAogICAgICAgICAgICAgICAgImVycm9yIiwKICAgICAgICAgICAgICAgIHRoaXMuJHQoInByb2ZpbGUuZmFpbGVkIiksCiAgICAgICAgICAgICAgICB0aGlzLiR0KCJ4dHJlYW0ucmVzdG9yZS1lcGdjb2Rlcy1lcnJvciIpLAogICAgICAgICAgICAgICAgImxhLXVzZXItc2hpZWxkIiwKICAgICAgICAgICAgICAgIHsgZHVyYXRpb246IDUwMDAsIHBlcm1hbmVudDogZmFsc2UgfQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLiRub3RpZnkoCiAgICAgICAgICAgICAgImVycm9yIiwKICAgICAgICAgICAgICB0aGlzLiR0KCJwcm9maWxlLmZhaWxlZCIpLAogICAgICAgICAgICAgIHRoaXMuJHQoInh0cmVhbS5yZXN0b3JlLWVwZ2NvZGVzLWVycm9yIiksCiAgICAgICAgICAgICAgImxhLXVzZXItc2hpZWxkIiwKICAgICAgICAgICAgICB7IGR1cmF0aW9uOiA1MDAwLCBwZXJtYW5lbnQ6IGZhbHNlIH0KICAgICAgICAgICAgKTsKICAgICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgcmVzdG9yZVBsYXlsaXN0KGUpIHsKICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlOwogICAgICBpZiAoZSAmJiBlLnRhcmdldC5maWxlcy5sZW5ndGggPT0gMSkgewogICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgiYmFja3VwLnppcCIsIGUudGFyZ2V0LmZpbGVzWzBdKTsKICAgICAgICBodHRwU2VydmljZQogICAgICAgICAgLnBvc3RGaWxlKGBwbGF5bGlzdC9yZXN0b3JlL3BsYXlsaXN0LyR7dGhpcy5wbGF5bGlzdC5pZH1gLCBmb3JtRGF0YSkKICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IHRydWUgJiYgcmVzLmRhdGEgPT09IHRydWUpIHsKICAgICAgICAgICAgICB0aGlzLiRub3RpZnkoCiAgICAgICAgICAgICAgICAicHJpbWFyeSIsCiAgICAgICAgICAgICAgICB0aGlzLiR0KCJwcm9maWxlLnN1Y2Nlc3MiKSwKICAgICAgICAgICAgICAgIHRoaXMuJHQoInh0cmVhbS5yZXN0b3JlLXBsYXlsaXN0LXN1Y2Nlc3MiKSwKICAgICAgICAgICAgICAgICJsYS11c2VyLXNoaWVsZCIsCiAgICAgICAgICAgICAgICB7IGR1cmF0aW9uOiA1MDAwLCBwZXJtYW5lbnQ6IGZhbHNlIH0KICAgICAgICAgICAgICApOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuJG5vdGlmeSgKICAgICAgICAgICAgICAgICJlcnJvciIsCiAgICAgICAgICAgICAgICB0aGlzLiR0KCJwcm9maWxlLmZhaWxlZCIpLAogICAgICAgICAgICAgICAgdGhpcy4kdCgieHRyZWFtLnJlc3RvcmUtcGxheWxpc3QtZXJyb3IiKSwKICAgICAgICAgICAgICAgICJsYS11c2VyLXNoaWVsZCIsCiAgICAgICAgICAgICAgICB7IGR1cmF0aW9uOiA1MDAwLCBwZXJtYW5lbnQ6IGZhbHNlIH0KICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy4kbm90aWZ5KAogICAgICAgICAgICAgICJlcnJvciIsCiAgICAgICAgICAgICAgdGhpcy4kdCgicHJvZmlsZS5mYWlsZWQiKSwKICAgICAgICAgICAgICB0aGlzLiR0KCJ4dHJlYW0ucmVzdG9yZS1wbGF5bGlzdC1lcnJvciIpLAogICAgICAgICAgICAgICJsYS11c2VyLXNoaWVsZCIsCiAgICAgICAgICAgICAgeyBkdXJhdGlvbjogNTAwMCwgcGVybWFuZW50OiBmYWxzZSB9CiAgICAgICAgICAgICk7CiAgICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICB9LAogIGJlZm9yZU1vdW50KCkgewogICAgdGhpcy5sb2FkUGxheWxpc3RzKCk7CiAgICBFdmVudEJ1cy4kZW1pdCgiY2FuLWFkZC1wbGF5bGlzdCIsIHRoaXMuY2FuQWRkUGxheWxpc3QpOwogICAgRXZlbnRCdXMuJG9uKCJzZWFyY2giLCB0aGlzLnNlYXJjaEFjY291bnQpOwogICAgRXZlbnRCdXMuJG9uKCJwcmludCIsIHRoaXMucHJpbnRBY2NvdW50cyk7CiAgICBFdmVudEJ1cy4kb24oInJlZnJlc2giLCB0aGlzLmxvYWRQbGF5bGlzdHMpOwogICAgRXZlbnRCdXMuJG9uKCJhZGQiLCB0aGlzLmFkZFBsYXlsaXN0KTsKICAgIEV2ZW50QnVzLiRvbigiY2FuY2VsIiwgdGhpcy5jYW5jZWxFZGl0b3IpOwogICAgRXZlbnRCdXMuJG9uKCJzYXZlIiwgdGhpcy5zYXZlRWRpdG9yKTsKICAgIEV2ZW50QnVzLiRvbigidGFiLWNoYW5nZSIsIHRoaXMuZG9UYWJDaGFuZ2UpOwogIH0sCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIEV2ZW50QnVzLiRvZmYoInNlYXJjaCIsIHRoaXMuc2VhcmNoQWNjb3VudCk7CiAgICBFdmVudEJ1cy4kb2ZmKCJwcmludCIsIHRoaXMucHJpbnRBY2NvdW50cyk7CiAgICBFdmVudEJ1cy4kb2ZmKCJyZWZyZXNoIiwgdGhpcy5sb2FkUGxheWxpc3RzKTsKICAgIEV2ZW50QnVzLiRvZmYoImFkZCIsIHRoaXMuYWRkUGxheWxpc3QpOwogICAgRXZlbnRCdXMuJG9mZigiY2FuY2VsIiwgdGhpcy5jYW5jZWxFZGl0b3IpOwogICAgRXZlbnRCdXMuJG9mZigic2F2ZSIsIHRoaXMuc2F2ZUVkaXRvcik7CiAgICBFdmVudEJ1cy4kb2ZmKCJ0YWItY2hhbmdlIiwgdGhpcy5kb1RhYkNoYW5nZSk7CiAgfSwKICB3YXRjaDogewogICAgZnJvbTogZnVuY3Rpb24gKHZhbCkgewogICAgICBFdmVudEJ1cy4kZW1pdCgidXBkYXRlLWZyb20iLCB2YWwpOwogICAgICBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCA9IDA7CiAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgPSAwOwogICAgfSwKICAgIHRvOiBmdW5jdGlvbiAodmFsKSB7CiAgICAgIEV2ZW50QnVzLiRlbWl0KCJ1cGRhdGUtdG8iLCB2YWwpOwogICAgfSwKICAgIHRvdGFsOiBmdW5jdGlvbiAodmFsKSB7CiAgICAgIEV2ZW50QnVzLiRlbWl0KCJ1cGRhdGUtdG90YWwiLCB2YWwpOwogICAgfSwKICAgIGVkaXRvcjogZnVuY3Rpb24gKHZhbCkgewogICAgICBFdmVudEJ1cy4kZW1pdCgidXBkYXRlLWVkaXRvciIsIHZhbCk7CiAgICAgIGlmICghdmFsKSB7CiAgICAgICAgdGhpcy5sb2FkUGxheWxpc3RzKCk7CiAgICAgIH0KICAgIH0sCiAgICBjYW5BZGRQbGF5bGlzdDogZnVuY3Rpb24gKHZhbCkgewogICAgICBFdmVudEJ1cy4kZW1pdCgiY2FuLWFkZC1wbGF5bGlzdCIsIHZhbCk7CiAgICB9LAogICAgInBsYXlsaXN0LnNvdXJjZV9ob3N0IjogZnVuY3Rpb24gKCkgewogICAgICBpZiAoCiAgICAgICAgdGhpcy5wbGF5bGlzdC5zb3VyY2VfaG9zdCAmJgogICAgICAgIHRoaXMucGxheWxpc3Quc291cmNlX2hvc3QubGVuZ3RoICYmCiAgICAgICAgdGhpcy5wbGF5bGlzdC5zb3VyY2VfdXNlcm5hbWUgJiYKICAgICAgICB0aGlzLnBsYXlsaXN0LnNvdXJjZV91c2VybmFtZS5sZW5ndGggJiYKICAgICAgICB0aGlzLnBsYXlsaXN0LnNvdXJjZV9wYXNzd29yZCAmJgogICAgICAgIHRoaXMucGxheWxpc3Quc291cmNlX3Bhc3N3b3JkLmxlbmd0aCAmJgogICAgICAgIHRoaXMuZWRpdG9yCiAgICAgICkgewogICAgICAgIHRoaXMucGxheWxpc3RBdXRoKCk7CiAgICAgICAgdGhpcy5sb2FkR3JvdXBzKCk7CiAgICAgIH0KICAgIH0sCiAgICAicGxheWxpc3QudXJsIjogZnVuY3Rpb24gKHVybCkgewogICAgICBpZiAodXJsICE9PSB1bmRlZmluZWQgJiYgdXJsLmxlbmd0aCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICBsZXQgdSA9IG5ldyBVUkwodXJsKTsKICAgICAgICAgIHRoaXMucGxheWxpc3Quc291cmNlX2hvc3QgPSB1Lmhvc3RuYW1lOwogICAgICAgICAgdGhpcy5wbGF5bGlzdC5zb3VyY2VfcG9ydCA9IHUucG9ydDsKICAgICAgICAgIHRoaXMucGxheWxpc3Quc291cmNlX3VzZXJuYW1lID0gdS5zZWFyY2hQYXJhbXMuZ2V0KCJ1c2VybmFtZSIpOwogICAgICAgICAgdGhpcy5wbGF5bGlzdC5zb3VyY2VfcGFzc3dvcmQgPSB1LnNlYXJjaFBhcmFtcy5nZXQoInBhc3N3b3JkIik7CiAgICAgICAgICBpZiAoIXRoaXMucGxheWxpc3QubmFtZS5sZW5ndGgpIHsKICAgICAgICAgICAgdGhpcy5wbGF5bGlzdC5uYW1lID0gdS5ob3N0bmFtZS50b1VwcGVyQ2FzZSgpOwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggewogICAgICAgICAgLy8KICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgfSwKfTsK"},null]}