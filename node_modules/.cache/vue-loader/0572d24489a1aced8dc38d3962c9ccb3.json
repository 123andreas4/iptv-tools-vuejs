{"remainingRequest":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/vue-loader/lib/index.js??vue-loader-options!/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/src/views/app/tools/applications/catch-up.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/src/views/app/tools/applications/catch-up.vue","mtime":1625861420472},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouY2F0Y2gtdXAtYm9keSB7CiAgcGFkZGluZy1ib3R0b206IDBweDsKICBtaW4taGVpZ2h0OiBjYWxjKDEwMCUgLSAxMjBweCk7Cn0KCi5jYXRjaC11cC1ncmlkIHsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IGNhbGMoMTAwdmggLSAyMzBweCk7CgogIC5wcyB7CiAgICB3aWR0aDogMTAwJTsKICAgIGhlaWdodDogMTAwJTsvL2NhbGMoMTAwdmggLSAzMjBweCk7CiAgfQp9CgouY2F0Y2gtdXAtc3RhdGlvbnMtZ3JpZCB7CiAgZGlzcGxheTogZmxleDsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgbWluLWhlaWdodDogMTAwJTsgCiAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7CgogIC5zdGF0aW9uLWhlYWQgewogICAgcG9zaXRpb246IHN0aWNreTsKICAgIHdpZHRoOiAxMDAlOwogICAgZGlzcGxheTogYmxvY2s7CiAgICBoZWlnaHQ6IDUwcHg7CiAgICBsaW5lLWhlaWdodDogNTBweDsKICAgIGJhY2tncm91bmQ6ICRzZXBhcmF0b3ItY29sb3ItbGlnaHQ7CiAgICBib3JkZXItdG9wOiAxcHggc29saWQgJHNlcGFyYXRvci1jb2xvcjsKICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAkc2VwYXJhdG9yLWNvbG9yOwogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgIC1tb3otYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgIC13ZWJraXQtYm94LXNpemluZzogYm9yZGVyLWJveDsKCiAgICAuc3RhdGlvbi1pY29uIHsKICAgICAgbWF4LWhlaWdodDogMjRweDsKICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKICAgICAgbWFyZ2luLXJpZ2h0OiAwLjI1cmVtOwogICAgfQoKICAgIC5zdGF0aW9uLXRpdGxlIHsKICAgICAgbGluZS1oZWlnaHQ6IDI0cHg7CiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKICAgIH0KCiAgfQp9CgouY2F0Y2gtdXAtc3RhdGlvbiB7CiAgd2lkdGg6IGNhbGMoKDEwMHZoIC8gNCkgLSAxcHgpOwogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICBtaW4taGVpZ2h0OiAxMDAlOwoKICAmOm50aC1jaGlsZCgyKSB7CiAgICAuc3RhdGlvbi1oZWFkIHsKICAgICAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAkc2VwYXJhdG9yLWNvbG9yOwogICAgfQogIH0KICAKICAmOmxhc3QtY2hpbGQgewogICAgLnN0YXRpb24taGVhZCB7CiAgICAgIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICRzZXBhcmF0b3ItY29sb3I7CiAgICB9CiAgfQoKICAmOm5vdCg6bGFzdC1jaGlsZCkgewogICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgJHNlcGFyYXRvci1jb2xvcjsKICB9CgogIC5wcm9ncmFtbWVzIHsKICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAtbW96LWJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAtd2Via2l0LWJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICBoZWlnaHQ6IGNhbGMoMTAwdmggLSAzMDBweCk7CgogICAgLnBzIHsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIGhlaWdodDogMTAwJTsKICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgICAgLW1vei1ib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAtd2Via2l0LWJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgIHBhZGRpbmc6IDAuMjVyZW07CiAgICB9CgogIH0KCiAgLnByb2dyYW1tZSB7CiAgICB3aWR0aDogMTAwJTsKICAgIGhlaWdodDogNTBweDsKICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgIHRleHQtYWxpZ246IGxlZnQ7CiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgLW1vei1ib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgcGFkZGluZzogNXB4OwogICAgCiAgICAmLmFjdGl2ZSB7CiAgICAgIGJhY2tncm91bmQtY29sb3I6ICR0aGVtZS1jb2xvci0xOwogICAgICBjb2xvcjogJGZvcmVncm91bmQtY29sb3I7CiAgICAgIGJvcmRlcjogMXB4IHNvbGlkICR0aGVtZS1jb2xvci0xOwogICAgfSAgICAgIAogICAgCiAgICAmOmhvdmVyOm5vdCguYWN0aXZlKSB7CiAgICAgIHBhZGRpbmc6IDRweDsKICAgICAgYmFja2dyb3VuZC1jb2xvcjogJGlucHV0LWJhY2tncm91bmQ7CiAgICAgIGNvbG9yOiAkdGhlbWUtY29sb3ItMTsKICAgICAgYm9yZGVyOiAxcHggc29saWQgJHRoZW1lLWNvbG9yLTE7CiAgICB9CgogICAgLnByb2dyYW1tZS1zdGFydC1zdG9wIHsKICAgICAgZGlzcGxheTogYmxvY2s7CiAgICAgIGZsb2F0OiBsZWZ0OwogICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgIHdpZHRoOiA0NHB4OwogICAgfQoKICAgIC5wcm9ncmFtbWUtdGl0bGUgewogICAgICBkaXNwbGF5OiBibG9jazsKICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgICAgLW1vei1ib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAtd2Via2l0LWJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgIGZsb2F0OiBsZWZ0OwogICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgIHdpZHRoOiBjYWxjKDEwMCUgLSA1MHB4KTsKICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7CiAgICAgIHBhZGRpbmctcmlnaHQ6IDVweDsKICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICB9CiAgfQp9CgoucHJvZ3JhbW1lLW1vZGFsLWRhdGUgewogIHdpZHRoOiAxMjBweDsKICBmbG9hdDogbGVmdDsKICBwYWRkaW5nLXRvcDogNnB4OwoKICAuZGF5IHsKICAgIHRleHQtdHJhbnNmb3JtOiBjYXBpdGFsaXplOwogICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgfQoKICAuZGF0ZSB7CgogIH0KfQoKLnByb2dyYW1tZS1tb2RhbCB7CiAgd2lkdGg6IGNhbGMoMTAwJSAtIDEyMHB4KTsKICBmbG9hdDogbGVmdDsKCiAgLnRpdGxlIHsKICAgIGZvbnQtc2l6ZTogMThweDsKICAgIGZvbnQtd2VpZ2h0OiBib2xkOwogIH0KCiAgLnN1YnRpdGxlIHsKICAgIGZvbnQtd2VpZ2h0OiBib2xkOwogIH0KCiAgLmRlc2NyaXB0aW9uIHsKICAgIG1hcmdpbi10b3A6IDAuMjVyZW07CiAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7CiAgfQp9Cg=="},{"version":3,"sources":["catch-up.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwYA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"catch-up.vue","sourceRoot":"src/views/app/tools/applications","sourcesContent":["<template>\n  <erd-row class=\"m-0 p-0\"> \n    <!--  \n\n      DOWNLOAD EDITOR\n\n    -->\n    <erd-modal\n      v-show=\"moreInfoModal\"\n      @close=\"moreInfoModal = false\"\n      :title=\"selectedStationName\"\n      class=\"select-none\"\n      small\n    >\n      <div class=\"px-2\" v-if=\"selected\">\n        <div class=\"programme-modal-date\">\n          <div class=\"day\">{{ new Date(selected.start).toLocaleDateString($t(\"date.locale\"), { weekday: 'long' }) }}</div>\n          <div class=\"date\">{{ formatTime(selected.start) }} - {{ formatTime(selected.stop) }}</div>\n        </div>\n        <div class=\"programme-modal\">\n          <div class=\"title\">{{ selected.title }}</div>\n          <div class=\"subtitle\" v-if=\"selected.subtitle.length\">{{ selected.subtitle }}</div>\n          <div class=\"description\">{{ selected.description }}</div>\n        </div>\n      </div>\n      <template v-slot:footer>\n        <erd-button\n          icon=\"la-download\"\n          class=\"mr-1\"\n          variant=\"primary\"\n          :disabled=\"!canDownload\"\n          @click=\"downloadModal(true)\"\n          >{{ $t(\"movies.download\") }}</erd-button\n        >\n        <erd-button\n          @click=\"moreInfoModal = false\"\n          icon=\"la-times\"\n          variant=\"danger\"\n          >{{ $t(\"general.close\") }}</erd-button\n        >\n      </template>\n    </erd-modal>\n    <!--  \n\n      XD-PRO DOWNLOAD\n\n    -->\n    <erd-modal\n      v-show=\"xdPro.modal\"\n      @close=\"downloadModal(false)\"\n      :title=\"$t('xd-pro.xd-pro')\"\n      class=\"select-none\"\n      small\n    >\n      <div class=\"px-2\" style=\"min-height: 250px\">\n        <label class=\"w-100\">{{ $t(\"xd-pro.xd-pro-instance\") }}</label>\n        <erd-select\n          class=\"mt-1 mb-2 w-100\"\n          v-model=\"xdPro.xdpro_id\"\n          :items=\"xdProInstanceItems\"\n        ></erd-select>\n        <label class=\"w-100\">{{ $t(\"xd-pro.download-folder\") }}</label>\n        <erd-input\n          class=\"mt-1 mb-2 w-100\"\n          v-model=\"xdPro.download_folder\"\n        ></erd-input>\n      </div>\n      <template v-slot:footer>\n        <erd-button\n          @click=\"downloadModal(false)\"\n          icon=\"la-times\"\n          class=\"mr-1\"\n          variant=\"danger\"\n          >{{ $t(\"general.cancel\") }}</erd-button\n        >\n        <erd-button\n          icon=\"la-check\"\n          variant=\"success\"\n          :disabled=\"xdPro.xdpro_id == 0\"\n          @click=\"downloadModal(false, true)\"\n          >{{ $t(\"general.ok\") }}</erd-button\n        >\n      </template>\n    </erd-modal>\n    <erd-spinner v-if=\"isLoading\" size=\"lg\" overlay absolute></erd-spinner>\n    <div class=\"catch-up-grid my-0 pb-0 pt-2\">\n      <perfect-scrollbar>\n        <div class=\"catch-up-stations-grid\" :style=\"`width: calc(calc(100vh / 4) * ${stations.length}`\">\n          <erd-context-menu\n            :items=\"programmeContext\"\n            depth=\"1\"\n            ref=\"programme-context\"\n          ></erd-context-menu>\n          <div v-for=\"(station, index) in stations\" :key=\"`station-${index}-${station.stream_tvg_name}`\" class=\"catch-up-station\">\n            <div class=\"station-head\">\n              <img :src=\"station.stream_tvg_logo\" class=\"station-icon\">\n              <div class=\"station-title\">{{ station.stream_tvg_name }}</div>\n            </div>\n            <div class=\"programmes\">\n              <perfect-scrollbar>\n                <div \n                  :data-programme=\"pindex\"\n                  :data-station=\"index\"\n                  class=\"programme\" \n                  :class=\"{active: selected === programme}\" \n                  v-for=\"(programme, pindex) in station.programmes\" \n                  :key=\"`station-${index}-programme-${pindex}`\" \n                  @click=\"selectProgramme(programme, station)\"\n                  @contextmenu.prevent=\"openContext\"\n                >\n                  <div class=\"programme-start-stop\" :data-programme=\"pindex\" :data-station=\"index\">\n                    {{ formatTime(programme.start) }}\n                  </div>\n                  <div class=\"programme-title\" :data-programme=\"pindex\" :data-station=\"index\">\n                    {{ programme.title }}\n                  </div>\n                </div>\n              </perfect-scrollbar>\n            </div>\n          </div>\n        </div>\n      </perfect-scrollbar>\n    </div>\n  </erd-row>\n</template>\n\n<script>\n/* eslint-disable vue/no-side-effects-in-computed-properties */\n/* eslint-disable no-unused-vars */\nimport { EventBus } from \"../../../../services/ebus\";\nimport { httpService } from \"../../../../services/http\";\nimport { mapGetters, mapActions } from \"vuex\";\n\nexport default {\n  data() {\n    return {\n      dateOptions: { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' },\n      activeTab: 0,\n      search: null,\n      isLoading: false,\n      stations: [],\n      selected: null,\n      selectedStation: null,\n      moreInfoModal: false,\n      xdPro: {\n        modal: false,\n        xdpro_id: 0,\n        download_folder: \"\",\n      },\n    };\n  },\n  computed: {\n    ...mapGetters([\"currentUser\", \"settings\", \"xdProInstances\", \"movieSeriePlaylists\", \"movieSeriePlaylist\", \"catchUpGroup\", \"catchUpDay\"]),\n    showTooltips () {\n      return this.settings.showTooltips;\n    },\n    searchFiltered() {\n      if (this.search === null) {\n        return this.streams;\n      } else {\n        var re = new RegExp(this.search, \"i\");\n        return this.streams.filter((stream) => {\n          return (\n            String(stream.stream_tvg_name).match(re) ||\n            String(stream.stream_tvg_id).match(re) ||\n            String(stream.stream_tvg_logo).match(re) ||\n            String(stream.playlist).match(re) ||\n            String(stream.group).match(re)\n          );\n        });\n      }\n    },\n    canDownload() {\n      if (this.selected !== null) {\n        let now = new Date().getTime();\n        let max = new Date().getTime() - (86400000 * this.selectedStation.source_tv_archive_duration);\n        return new Date(this.selected.start).getTime() > max && new Date(this.selected.stop).getTime() < now;\n      }\n      return false; \n    },\n    xdProInstanceItems() {\n      return this.xdProInstances.map((instance) => {\n        return {\n          text: instance.name,\n          value: instance.id,\n        };\n      });\n    },\n    programmeContext () {\n      let vm = this;\n      return [\n        {\n          icon: \"la-tv\",\n          text: vm.$t(\"movies.tooltip-show-more\"),\n          onClick: function () {\n            if (vm.selected !== null) {\n              vm.moreInfoModal = true;\n            }\n          },\n        },\n        {\n          divider: true,\n        },\n        {\n          icon: \"la-download\",\n          text: vm.$t(\"movies.download\"),\n          onClick: function () {\n            vm.downloadModal(true);\n          },\n        },\n      ];\n    },\n    selectedStationName() {\n      return this.selectedStation ? this.selectedStation.stream_tvg_name : \"\";\n    }\n  },\n  methods: {\n    ...mapActions([\"loadCatchUpDays\", \"addxdProDownload\", \"loadxdProInstances\"]),\n    searchStream(search) {\n      if (search.length === 0) {\n        this.search = null;\n      } else {\n        this.search = search;\n      }\n    },\n    printStreams() {\n      document.getElementById(\"streams\").print();\n    },\n    formatDate(date) {\n      return new Date(date).toLocaleDateString(\n        this.$t(\"date.locale\"),\n        this.dateOptions\n      );\n    },\n    formatTime(date) {\n      return new Date(date).toLocaleTimeString(\n        this.$t(\"date.locale\"),\n        { hour: '2-digit', minute:'2-digit' }\n      );\n    },\n    dateRange(startDate, endDate) {\n      const dateArray = [];\n      let currentDate = new Date(startDate);\n\n      while (currentDate <= new Date(endDate)) {\n        dateArray.push({\n          text: this.formatDate(new Date(currentDate)),\n          value: new Date(currentDate).toISOString().split('T')[0]\n        });\n        // Use UTC date to prevent problems with time zones and DST\n        currentDate.setUTCDate(currentDate.getUTCDate() + 1);\n      }\n\n      return dateArray;\n    },\n    loadStations() {\n      this.isLoading = true;\n      httpService.get(`live/catch-up/${this.movieSeriePlaylist}/${this.catchUpGroup}/${this.catchUpDay}`).then((res) => {\n        if (res.status === true) {\n          this.stations = res.data;\n          this.isLoading = false;\n        }\n      });\n    },\n    selectProgramme(programme, station) {\n      this.selected = programme;\n      this.selectedStation = station;\n      this.moreInfoModal = true;\n    },\n    openContext(e) {\n      if (e.srcElement && e.srcElement.dataset && e.srcElement.dataset.programme && e.srcElement.dataset.station) {\n        this.selected = this.stations[e.srcElement.dataset.station].programmes[e.srcElement.dataset.programme];\n        this.selectedStation = this.stations[e.srcElement.dataset.station];\n      }\n      this.$refs['programme-context'].open();\n    },\n    formatDateDownload(date) {\n      var d = new Date(date),\n          month = '' + (d.getMonth() + 1),\n          day = '' + d.getDate(),\n          year = d.getFullYear();\n\n      if (month.length < 2) \n          month = '0' + month;\n      if (day.length < 2) \n          day = '0' + day;\n\n      let hour    = '' + d.getHours();\n      let minutes = '' + d.getMinutes();\n\n      if (hour.length < 2) \n          hour = '0' + hour;\n      if (minutes.length < 2) \n          minutes = '0' + minutes;\n\n      return `${year}-${month}-${day}:${hour}:${minutes}:00`;\n    },\n    downloadModal(show, save = false) {\n      if (show) {\n        this.moreInfoModal = false;\n      }\n      if (save) {\n        let playlist = this.movieSeriePlaylists.find(p => p.value === this.movieSeriePlaylist).playlist;\n        let download = {\n          user_id: this.currentUser.user.id,\n          xdpro_id: this.xdPro.xdpro_id,\n          filename: `${this.selected.title}.ts`,\n          file_extension: 'ts',\n          type: 3,\n          enabled: 0,\n          download_folder: this.xdPro.download_folder,\n          download_url: `http://${playlist.source_host}:${String(playlist.source_port).length ? playlist.source_port : '80'}/timeshift/${playlist.source_username}/${playlist.source_password}/${Math.ceil(((new Date(this.selected.stop).getTime() - new Date(this.selected.start).getTime()) / 1000) / 60)}/${this.formatDateDownload(this.selected.start)}/${this.selectedStation.source_stream_id}.ts`,\n          download_host: playlist.source_host,\n          download_port: playlist.source_port,\n          download_username: playlist.source_username,\n          download_password: playlist.source_password\n        };\n        this.addxdProDownload(download)\n          .then((res) => {\n            if (res.status === true) {\n              this.$notify(\n                \"primary\",\n                this.$t(\"profile.success\"),\n                this.$t(\"xd-pro.download-save-success\"),\n                \"la-user-shield\",\n                { duration: 5000, permanent: false }\n              );\n            }\n          })\n          .catch(() => {\n            this.$notify(\n              \"error\",\n              this.$t(\"profile.failed\"),\n              this.$t(\"xd-pro.download-save-error\"),\n              \"la-user-shield\",\n              { duration: 5000, permanent: false }\n            );\n          });\n      }\n      this.xdPro.modal = show;\n    },\n  },\n  created() {\n    let start = new Date();\n    let end   = new Date(start.getTime() - (86400000 * 7))\n    this.loadCatchUpDays(this.dateRange(end, start).reverse());\n  },\n  beforeMount() {\n    this.loadxdProInstances();\n    if (this.movieSeriePlaylist && this.catchUpGroup && this.catchUpDay) {\n      this.loadStations();\n    }\n    document.body.classList.add(\"right-menu\");\n    document.body.classList.add(\"catch-up-body\");\n    EventBus.$on(\"search\", this.searchStream);\n    EventBus.$on(\"print\", this.printStreams);\n  },\n  beforeDestroy() {\n    document.body.classList.remove(\"right-menu\");\n    document.body.classList.remove(\"catch-up-body\");\n    EventBus.$off(\"search\", this.searchStream);\n    EventBus.$off(\"print\", this.printStreams);\n  },\n  watch: {\n    movieSeriePlaylist: function () {\n      if (this.movieSeriePlaylist) {\n        this.loadStations();\n      }\n    },\n    catchUpGroup: function () {\n      if (this.movieSeriePlaylist && this.catchUpGroup && this.catchUpDay) {\n        this.loadStations();\n      }\n    },\n    catchUpDay: function () {\n      if (this.movieSeriePlaylist && this.catchUpGroup && this.catchUpDay) {\n        this.loadStations();\n      }\n    },\n    \"xdPro.xdpro_id\": function (val) {\n      let instance = this.xdProInstances.find((instance) => {\n        return instance.id == val;\n      });\n      if (instance) {\n        this.xdPro.download_folder = instance.download_folder;\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n  .catch-up-body {\n    padding-bottom: 0px;\n    min-height: calc(100% - 120px);\n  }\n\n  .catch-up-grid {\n    width: 100%;\n    height: calc(100vh - 230px);\n\n    .ps {\n      width: 100%;\n      height: 100%;//calc(100vh - 320px);\n    }\n  }\n\n  .catch-up-stations-grid {\n    display: flex;\n    text-align: center;\n    min-height: 100%; \n    align-items: stretch;\n\n    .station-head {\n      position: sticky;\n      width: 100%;\n      display: block;\n      height: 50px;\n      line-height: 50px;\n      background: $separator-color-light;\n      border-top: 1px solid $separator-color;\n      border-bottom: 1px solid $separator-color;\n      box-sizing: border-box;\n      -moz-box-sizing: border-box;\n      -webkit-box-sizing: border-box;\n\n      .station-icon {\n        max-height: 24px;\n        vertical-align: middle;\n        margin-right: 0.25rem;\n      }\n\n      .station-title {\n        line-height: 24px;\n        display: inline-block;\n        vertical-align: middle;\n      }\n\n    }\n  }\n\n  .catch-up-station {\n    width: calc((100vh / 4) - 1px);\n    display: inline-block;\n    min-height: 100%;\n\n    &:nth-child(2) {\n      .station-head {\n        border-left: 1px solid $separator-color;\n      }\n    }\n    \n    &:last-child {\n      .station-head {\n        border-right: 1px solid $separator-color;\n      }\n    }\n\n    &:not(:last-child) {\n      border-right: 1px solid $separator-color;\n    }\n\n    .programmes {\n      box-sizing: border-box;\n      -moz-box-sizing: border-box;\n      -webkit-box-sizing: border-box;\n      height: calc(100vh - 300px);\n\n      .ps {\n        width: 100%;\n        height: 100%;\n        box-sizing: border-box;\n        -moz-box-sizing: border-box;\n        -webkit-box-sizing: border-box;\n        padding: 0.25rem;\n      }\n\n    }\n\n    .programme {\n      width: 100%;\n      height: 50px;\n      display: inline-block;\n      text-align: left;\n      box-sizing: border-box;\n      -moz-box-sizing: border-box;\n      -webkit-box-sizing: border-box;\n      cursor: pointer;\n      padding: 5px;\n      \n      &.active {\n        background-color: $theme-color-1;\n        color: $foreground-color;\n        border: 1px solid $theme-color-1;\n      }      \n      \n      &:hover:not(.active) {\n        padding: 4px;\n        background-color: $input-background;\n        color: $theme-color-1;\n        border: 1px solid $theme-color-1;\n      }\n\n      .programme-start-stop {\n        display: block;\n        float: left;\n        height: 100%;\n        width: 44px;\n      }\n\n      .programme-title {\n        display: block;\n        box-sizing: border-box;\n        -moz-box-sizing: border-box;\n        -webkit-box-sizing: border-box;\n        float: left;\n        height: 100%;\n        width: calc(100% - 50px);\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding-right: 5px;\n        font-weight: bold;\n      }\n    }\n  }\n\n  .programme-modal-date {\n    width: 120px;\n    float: left;\n    padding-top: 6px;\n\n    .day {\n      text-transform: capitalize;\n      font-weight: bold;\n    }\n\n    .date {\n\n    }\n  }\n\n  .programme-modal {\n    width: calc(100% - 120px);\n    float: left;\n\n    .title {\n      font-size: 18px;\n      font-weight: bold;\n    }\n\n    .subtitle {\n      font-weight: bold;\n    }\n\n    .description {\n      margin-top: 0.25rem;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n  }\n</style>\n"]}]}