{"remainingRequest":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/vue-loader/lib/index.js??vue-loader-options!/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/src/views/app/xtream/playlists.vue?vue&type=script&lang=js&","dependencies":[{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/src/views/app/xtream/playlists.vue","mtime":1624785692913},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/ernst/63bce43c-5e51-4bf1-a611-3afdf32ac6f6/VueJS/IPTV-Tools/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8qIGVzbGludC1kaXNhYmxlIHZ1ZS9uby1zaWRlLWVmZmVjdHMtaW4tY29tcHV0ZWQtcHJvcGVydGllcyAqLwppbXBvcnQgeyBFdmVudEJ1cyB9IGZyb20gIi4uLy4uLy4uL3NlcnZpY2VzL2VidXMiOwppbXBvcnQgeyBodHRwU2VydmljZSB9IGZyb20gIi4uLy4uLy4uL3NlcnZpY2VzL2h0dHAiOwppbXBvcnQgeyBsYW5ndWFnZXMgfSBmcm9tICIuLi8uLi8uLi9oZWxwZXJzIjsKaW1wb3J0IHsgVXNlclJvbGUsIFN1YnNjcmlwdGlvblR5cGUgfSBmcm9tICIuLi8uLi8uLi9jb25zdGFudHMvY29uZmlnIjsKaW1wb3J0IHsgbWFwR2V0dGVycywgbWFwQWN0aW9ucyB9IGZyb20gInZ1ZXgiOwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsYW5ndWFnZXMsCiAgICAgIGFjdGl2ZVRhYjogMCwKICAgICAgcGxheWxpc3RHcm91cHM6IHsKICAgICAgICBsaXZlOiBbXSwKICAgICAgICBtb3ZpZXM6IFtdLAogICAgICAgIHNlcmllczogW10sCiAgICAgIH0sCiAgICAgIHBsYXlsaXN0czogW10sCiAgICAgIHBsYXlsaXN0OiBudWxsLAogICAgICBlZGl0b3I6IGZhbHNlLAogICAgICBzZWFyY2g6IG51bGwsCiAgICAgIGlzTG9hZGluZzogZmFsc2UsCiAgICAgIGZyb206IDAsCiAgICAgIHRvOiAwLAogICAgICB0b3RhbDogMCwKICAgICAgY3VycmVudFBhZ2U6IDEsCiAgICAgIGZpZWxkczogWwogICAgICAgIHsga2V5OiAiY3JlYXRlZF9hdCIsIGxhYmVsOiB0aGlzLiR0KCJ4dHJlYW0uY3JlYXRlZCIpLCBzb3J0YWJsZTogdHJ1ZSB9LAogICAgICAgIHsKICAgICAgICAgIGtleTogImxhc3RfdXBkYXRlZCIsCiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgieHRyZWFtLmxhc3QtdXBkYXRlZCIpLAogICAgICAgICAgc29ydGFibGU6IHRydWUsCiAgICAgICAgfSwKICAgICAgICB7IGtleTogIm5hbWUiLCBsYWJlbDogdGhpcy4kdCgieHRyZWFtLm5hbWUiKSwgc29ydGFibGU6IHRydWUgfSwKICAgICAgICB7IGtleTogImdyb3VwcyIsIGxhYmVsOiB0aGlzLiR0KCJ4dHJlYW0uZ3JvdXBzIiksIHNvcnRhYmxlOiB0cnVlIH0sCiAgICAgICAgeyBrZXk6ICJzdHJlYW1zIiwgbGFiZWw6IHRoaXMuJHQoInh0cmVhbS5zdHJlYW1zIiksIHNvcnRhYmxlOiB0cnVlIH0sCiAgICAgICAgewogICAgICAgICAga2V5OiAic3luY19pbnRlcnZhbCIsCiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgieHRyZWFtLnN5bmMtaW50ZXJ2YWwiKSwKICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAga2V5OiAic3luY2VkX2F0IiwKICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCJ4dHJlYW0uc3luY2VkLWF0IiksCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGtleTogInNvdXJjZV9leHBfZGF0ZSIsCiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgieHRyZWFtLmV4cGlyZSIpLAogICAgICAgICAgc29ydGFibGU6IHRydWUsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBrZXk6ICJzb3VyY2VfbWF4X2Nvbm5lY3Rpb25zIiwKICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCJ4dHJlYW0ubWF4LWNvbm5lY3Rpb25zIiksCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGtleTogImFjdGlvbnMiLAogICAgICAgICAgbGFiZWw6IHRoaXMuJHQoInVzZXJzLmFjdGlvbnMiKSwKICAgICAgICAgIHNvcnRhYmxlOiBmYWxzZSwKICAgICAgICAgIHRoQ2xhc3M6ICJ0ZXh0LXJpZ2h0IiwKICAgICAgICAgIHRkQ2xhc3M6ICJ0ZXh0LXJpZ2h0IiwKICAgICAgICB9LAogICAgICBdLAogICAgICBzeW5jSW50ZXJ2YWxzOiBbCiAgICAgICAgeyB0ZXh0OiB0aGlzLiR0KCJzeW5jLWludGVydmFsLjQ4IiksIHZhbHVlOiA0OCB9LAogICAgICAgIHsgdGV4dDogdGhpcy4kdCgic3luYy1pbnRlcnZhbC4yNCIpLCB2YWx1ZTogMjQgfSwKICAgICAgICB7IHRleHQ6IHRoaXMuJHQoInN5bmMtaW50ZXJ2YWwuMTIiKSwgdmFsdWU6IDEyIH0sCiAgICAgICAgeyB0ZXh0OiB0aGlzLiR0KCJzeW5jLWludGVydmFsLjYiKSwgdmFsdWU6IDYgfSwKICAgICAgICB7IHRleHQ6IHRoaXMuJHQoInN5bmMtaW50ZXJ2YWwuMSIpLCB2YWx1ZTogMSB9LAogICAgICBdLAogICAgICBvdXRwdXRUeXBlczogWwogICAgICAgIHsgdGV4dDogdGhpcy4kdCgib3V0cHV0LjEiKSwgdmFsdWU6IDEgfSwKICAgICAgICB7IHRleHQ6IHRoaXMuJHQoIm91dHB1dC4yIiksIHZhbHVlOiAyIH0sCiAgICAgIF0sCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoWyJjdXJyZW50VXNlciIsICJzZXR0aW5ncyIsICJzeW5jVE1EQiIsICJzeW5jUGxheWxpc3QiXSksCiAgICBwZXJQYWdlKCkgewogICAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5wZXJQYWdlOwogICAgfSwKICAgIHNlYXJjaEZpbHRlcmVkKCkgewogICAgICBpZiAodGhpcy5zZWFyY2ggPT09IG51bGwpIHsKICAgICAgICByZXR1cm4gdGhpcy5wbGF5bGlzdHM7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHJlID0gbmV3IFJlZ0V4cCh0aGlzLnNlYXJjaCwgImkiKTsKICAgICAgICByZXR1cm4gdGhpcy5wbGF5bGlzdHMuZmlsdGVyKChhY2NvdW50KSA9PiB7CiAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICBTdHJpbmcoYWNjb3VudC50aXRsZSkubWF0Y2gocmUpIHx8CiAgICAgICAgICAgIFN0cmluZyhhY2NvdW50Lmhvc3QpLm1hdGNoKHJlKSB8fAogICAgICAgICAgICBTdHJpbmcoYWNjb3VudC5wb3J0KS5tYXRjaChyZSkgfHwKICAgICAgICAgICAgU3RyaW5nKGFjY291bnQudXNlcm5hbWUpLm1hdGNoKHJlKSB8fAogICAgICAgICAgICBTdHJpbmcoYWNjb3VudC5wYXNzd29yZCkubWF0Y2gocmUpIHx8CiAgICAgICAgICAgIHRoaXMuZm9ybWF0RGF0ZShhY2NvdW50LnN5bmNlZF9hdCkubWF0Y2gocmUpIHx8CiAgICAgICAgICAgIHRoaXMuJHQoYHN5bmMtaW50ZXJ2YWwuJHthY2NvdW50LnN5bmNfaW50ZXJ2YWx9YCkubWF0Y2gocmUpCiAgICAgICAgICApOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgcGFnZWQoKSB7CiAgICAgIHRoaXMudG90YWwgPSB0aGlzLnNlYXJjaEZpbHRlcmVkLmxlbmd0aDsKICAgICAgdGhpcy5mcm9tID0gKHRoaXMuY3VycmVudFBhZ2UgLSAxKSAqIHRoaXMucGVyUGFnZSB8fCAwOwogICAgICB0aGlzLnRvID0KICAgICAgICB0aGlzLmZyb20gKyB0aGlzLnBlclBhZ2UgPiB0aGlzLnRvdGFsCiAgICAgICAgICA/IHRoaXMudG90YWwKICAgICAgICAgIDogdGhpcy5mcm9tICsgdGhpcy5wZXJQYWdlOwogICAgICByZXR1cm4gdGhpcy5zZWFyY2hGaWx0ZXJlZC5zbGljZSh0aGlzLmZyb20sIHRoaXMudG8pOwogICAgfSwKICAgIGFsbG93ZWRJcHM6IHsKICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMucGxheWxpc3QuaXBfYWxsb3dlZCA/IHRoaXMucGxheWxpc3QuaXBfYWxsb3dlZC5qb2luKCIsIikgOiAiIjsKICAgICAgfSwKICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgdGhpcy5wbGF5bGlzdC5pcF9hbGxvd2VkID0gdmFsLnNwbGl0KCIsIikubWFwKChpcCkgPT4gewogICAgICAgICAgcmV0dXJuIGlwLnRyaW0oKTsKICAgICAgICB9KTsKICAgICAgfSwKICAgIH0sCiAgICBjb250ZXh0TGl2ZSgpIHsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgbGV0IGxpdmUgPSBbLi4udm0ucGxheWxpc3RHcm91cHMubGl2ZV07CiAgICAgIHJldHVybiBbCiAgICAgICAgewogICAgICAgICAgdGV4dDogdm0uJHQoImdlbmVyYWwuc2VsZWN0LWFsbCIpLAogICAgICAgICAgb25DbGljazogZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2bS5wbGF5bGlzdC5zeW5jX2xpdmUgPSBbLi4ubGl2ZS5tYXAoKGcpID0+IGcuY2F0ZWdvcnlfaWQpXTsKICAgICAgICAgIH0sCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0ZXh0OiB2bS4kdCgiZ2VuZXJhbC5zZWxlY3Qtbm9uZSIpLAogICAgICAgICAgb25DbGljazogZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2bS5wbGF5bGlzdC5zeW5jX2xpdmUgPSBbXTsKICAgICAgICAgIH0sCiAgICAgICAgfSwKICAgICAgXTsKICAgIH0sCiAgICBjb250ZXh0TW92aWVzKCkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICBsZXQgbW92aWVzID0gWy4uLnZtLnBsYXlsaXN0R3JvdXBzLm1vdmllc107CiAgICAgIHJldHVybiBbCiAgICAgICAgewogICAgICAgICAgdGV4dDogdm0uJHQoImdlbmVyYWwuc2VsZWN0LWFsbCIpLAogICAgICAgICAgb25DbGljazogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAodm0uY2FuVXNlTW92aWVzU2VyaWVzKSB7CiAgICAgICAgICAgICAgdm0ucGxheWxpc3Quc3luY19tb3ZpZXMgPSBbLi4ubW92aWVzLm1hcCgoZykgPT4gZy5jYXRlZ29yeV9pZCldOwogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgZGlzYWJsZWQ6ICF2bS5jYW5Vc2VNb3ZpZXNTZXJpZXMsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0ZXh0OiB2bS4kdCgiZ2VuZXJhbC5zZWxlY3Qtbm9uZSIpLAogICAgICAgICAgb25DbGljazogZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2bS5wbGF5bGlzdC5zeW5jX21vdmllcyA9IFtdOwogICAgICAgICAgfSwKICAgICAgICAgIGRpc2FibGVkOiAhdm0uY2FuVXNlTW92aWVzU2VyaWVzLAogICAgICAgIH0sCiAgICAgIF07CiAgICB9LAogICAgY29udGV4dFNlcmllcygpIHsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgbGV0IHNlcmllcyA9IFsuLi52bS5wbGF5bGlzdEdyb3Vwcy5zZXJpZXNdOwogICAgICByZXR1cm4gWwogICAgICAgIHsKICAgICAgICAgIHRleHQ6IHZtLiR0KCJnZW5lcmFsLnNlbGVjdC1hbGwiKSwKICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKHZtLmNhblVzZU1vdmllc1NlcmllcykgewogICAgICAgICAgICAgIHZtLnBsYXlsaXN0LnN5bmNfc2VyaWVzID0gWy4uLnNlcmllcy5tYXAoKGcpID0+IGcuY2F0ZWdvcnlfaWQpXTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIGRpc2FibGVkOiAhdm0uY2FuVXNlTW92aWVzU2VyaWVzLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGV4dDogdm0uJHQoImdlbmVyYWwuc2VsZWN0LW5vbmUiKSwKICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdm0ucGxheWxpc3Quc3luY19zZXJpZXMgPSBbXTsKICAgICAgICAgIH0sCiAgICAgICAgICBkaXNhYmxlZDogIXZtLmNhblVzZU1vdmllc1NlcmllcywKICAgICAgICB9LAogICAgICBdOwogICAgfSwKICAgIHRtZGJMYW5ndWFnZXMoKSB7CiAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLmxhbmd1YWdlcykubWFwKChsYW5ndWFnZSkgPT4gewogICAgICAgIHJldHVybiB7CiAgICAgICAgICB2YWx1ZTogbGFuZ3VhZ2UsCiAgICAgICAgICB0ZXh0OiBgJHt0aGlzLmxhbmd1YWdlc1tsYW5ndWFnZV0ubmFtZX0gKCR7dGhpcy5sYW5ndWFnZXNbbGFuZ3VhZ2VdLm5hdGl2ZU5hbWV9KWAsCiAgICAgICAgfTsKICAgICAgfSk7CiAgICB9LAogICAgY2FuVXNlQ3VzdG9tVXNlclBhc3MoKSB7CiAgICAgIHJldHVybiBbVXNlclJvbGUuU3VwZXJBZG1pbiwgVXNlclJvbGUuQWRtaW4sIFVzZXJSb2xlLk1vZGVyYXRvcl0uaW5jbHVkZXMoCiAgICAgICAgdGhpcy5jdXJyZW50VXNlci51c2VyLnJvbGUKICAgICAgKTsKICAgIH0sCiAgICBjYW5Vc2VNb3ZpZXNTZXJpZXMoKSB7CiAgICAgIHJldHVybiBbCiAgICAgICAgU3Vic2NyaXB0aW9uVHlwZS5Qcm9mZXNzaW9uYWwsCiAgICAgICAgU3Vic2NyaXB0aW9uVHlwZS5GYW1pbHksCiAgICAgICAgU3Vic2NyaXB0aW9uVHlwZS5CdXNpbmVzc1NtYWxsLAogICAgICAgIFN1YnNjcmlwdGlvblR5cGUuQnVzaW5lc3NQcm9mZXNzaW9uYWwsCiAgICAgICAgU3Vic2NyaXB0aW9uVHlwZS5CdXNpbmVzc0VudGVycHJpc2UsCiAgICAgICAgU3Vic2NyaXB0aW9uVHlwZS5NYW5hZ2VyLAogICAgICBdLmluY2x1ZGVzKHRoaXMuY3VycmVudFVzZXIuc3Vic2NyaXB0aW9uLnN1YnNjcmlwdGlvbl90eXBlKTsKICAgIH0sCiAgICBwbGF5bGlzdElzRW1wdHkoKSB7CiAgICAgIHJldHVybiB0aGlzLnBsYXlsaXN0ICYmIHRoaXMucGxheWxpc3QuZ3JvdXBzID09IDAgfHwgdGhpcy5wbGF5bGlzdC5zdHJlYW1zID09IDA7CiAgICB9LAogICAgY2FuQWRkUGxheWxpc3QgKCkgewogICAgICBpZiAodGhpcy5jdXJyZW50VXNlci5zdWJzY3JpcHRpb24pIHsKICAgICAgICBsZXQgc3Vic2NyaXB0aW9uID0gdGhpcy5jdXJyZW50VXNlci5zdWJzY3JpcHRpb247CiAgICAgICAgaWYgKG5ldyBEYXRlKHN1YnNjcmlwdGlvbi5lbmRfZGF0ZSkuZ2V0VGltZSgpIDwgbmV3IERhdGUoKS5nZXRUaW1lKCkpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgaWYgKHN1YnNjcmlwdGlvbi5jdXN0b21fcGxhbiA9PSAxKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5wbGF5bGlzdHMubGVuZ3RoIDwgc3Vic2NyaXB0aW9uLm1heF9wbGF5bGlzdDsKICAgICAgICB9CiAgICAgICAgaWYgKHN1YnNjcmlwdGlvbi5lbmFibGVkICE9IDEpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgc3dpdGNoIChzdWJzY3JpcHRpb24uc3Vic2NyaXB0aW9uX3R5cGUpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgIGNhc2UgMTogcmV0dXJuIHRoaXMucGxheWxpc3RzLmxlbmd0aCA8IDI7CiAgICAgICAgICBjYXNlIDI6IHJldHVybiB0aGlzLnBsYXlsaXN0cy5sZW5ndGggPCA1OwogICAgICAgICAgY2FzZSAzOiByZXR1cm4gdGhpcy5wbGF5bGlzdHMubGVuZ3RoIDwgNTsKICAgICAgICAgIGNhc2UgNDogcmV0dXJuIHRoaXMucGxheWxpc3RzLmxlbmd0aCA8IDEwOwogICAgICAgICAgY2FzZSA1OiByZXR1cm4gdGhpcy5wbGF5bGlzdHMubGVuZ3RoIDwgMjU7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoWyJzeW5jaHJvbml6ZVRNREIiLCAic3luY2hyb25pemVQbGF5bGlzdCJdKSwKICAgIG9wZW5Db250ZXh0KGNvbnRleHQpIHsKICAgICAgdGhpcy4kcmVmc1tjb250ZXh0XS5vcGVuKCk7CiAgICB9LAogICAgbG9hZEdyb3VwcygpIHsKICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlOwogICAgICBodHRwU2VydmljZQogICAgICAgIC5wb3N0KCJwbGF5bGlzdC9sb2FkLWdyb3VwcyIsIHsKICAgICAgICAgIGhvc3Q6IHRoaXMucGxheWxpc3Quc291cmNlX2hvc3QsCiAgICAgICAgICBwb3J0OiB0aGlzLnBsYXlsaXN0LnNvdXJjZV9wb3J0LAogICAgICAgICAgdXNlcm5hbWU6IHRoaXMucGxheWxpc3Quc291cmNlX3VzZXJuYW1lLAogICAgICAgICAgcGFzc3dvcmQ6IHRoaXMucGxheWxpc3Quc291cmNlX3Bhc3N3b3JkLAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSB0cnVlKSB7CiAgICAgICAgICAgIHRoaXMucGxheWxpc3RHcm91cHMgPSByZXMuZGF0YTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCiAgICBsb2FkUGxheWxpc3RzKCkgewogICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7CiAgICAgIGh0dHBTZXJ2aWNlCiAgICAgICAgLmdldCgicGxheWxpc3QiKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gdHJ1ZSkgewogICAgICAgICAgICB0aGlzLnBsYXlsaXN0cyA9IHJlcy5kYXRhOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICB0aGlzLiRub3RpZnkoCiAgICAgICAgICAgICJlcnJvciIsCiAgICAgICAgICAgIHRoaXMuJHQoInByb2ZpbGUuZmFpbGVkIiksCiAgICAgICAgICAgIHRoaXMuJHQoInh0cmVhbS54dHJlYW0tbG9hZC1lcnJvciIpLAogICAgICAgICAgICAibGEtdXNlci1zaGllbGQiLAogICAgICAgICAgICB7IGR1cmF0aW9uOiA1MDAwLCBwZXJtYW5lbnQ6IGZhbHNlIH0KICAgICAgICAgICk7CiAgICAgICAgfSk7CiAgICB9LAogICAgYWRkUGxheWxpc3QoKSB7CiAgICAgIGlmICh0aGlzLmNhbkFkZFBsYXlsaXN0ICE9PSB0cnVlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGh0dHBTZXJ2aWNlCiAgICAgICAgLnBvc3QoInBsYXlsaXN0L2FkZCIpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IHRydWUgJiYgcmVzLmRhdGEgIT09IGZhbHNlKSB7CiAgICAgICAgICAgIHRoaXMucGxheWxpc3QgPSB7CiAgICAgICAgICAgICAgaWQ6IHJlcy5kYXRhLAogICAgICAgICAgICAgIHVybDogIiIsCiAgICAgICAgICAgICAgZW5hYmxlZDogMSwKICAgICAgICAgICAgICBzb3VyY2VfaG9zdDogIiIsCiAgICAgICAgICAgICAgc291cmNlX3BvcnQ6ICIiLAogICAgICAgICAgICAgIHNvdXJjZV91c2VybmFtZTogIiIsCiAgICAgICAgICAgICAgc291cmNlX3Bhc3N3b3JkOiAiIiwKICAgICAgICAgICAgICBzb3VyY2VfZXhwX2RhdGU6IGZhbHNlLAogICAgICAgICAgICAgIHNvdXJjZV9tYXhfY29ubmVjdGlvbnM6IGZhbHNlLAogICAgICAgICAgICAgIHN5bmNfZW5hYmxlZDogMSwKICAgICAgICAgICAgICBzeW5jX2ludGVydmFsOiA0OCwKICAgICAgICAgICAgICBzeW5jX2xpdmU6IFtdLAogICAgICAgICAgICAgIHN5bmNfbW92aWVzOiBbXSwKICAgICAgICAgICAgICBzeW5jX3NlcmllczogW10sCiAgICAgICAgICAgICAgaXBfcHJvdGVjdGlvbjogMCwKICAgICAgICAgICAgICBpcF9hbGxvd2VkOiBbXSwKICAgICAgICAgICAgICBhcGlfdXNlcm5hbWU6IHRoaXMuY3VycmVudFVzZXIudXNlci51c2VybmFtZSwKICAgICAgICAgICAgICBhcGlfcGFzc3dvcmQ6ICIiLAogICAgICAgICAgICAgIGFwaV9tZXNzYWdlOiAiV2VsY29tZSB0byBJUFRWLVRvb2xzLmNvbSIsCiAgICAgICAgICAgICAgYXBpX291dHB1dF9mb3JtYXQ6IDEsCiAgICAgICAgICAgICAgbmFtZTogIiIsCiAgICAgICAgICAgICAgdG1kYl9sYW5ndWFnZTogdGhpcy4kaTE4bi5sb2NhbGUsCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMucGxheWxpc3RHcm91cHMgPSB7CiAgICAgICAgICAgICAgbGl2ZTogW10sCiAgICAgICAgICAgICAgbW92aWVzOiBbXSwKICAgICAgICAgICAgICBzZXJpZXM6IFtdLAogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLnJhbmRvbVBhc3N3b3JkKCk7CiAgICAgICAgICAgIHRoaXMuZWRpdG9yID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICB0aGlzLiRub3RpZnkoCiAgICAgICAgICAgICJlcnJvciIsCiAgICAgICAgICAgIHRoaXMuJHQoInByb2ZpbGUuZmFpbGVkIiksCiAgICAgICAgICAgIHRoaXMuJHQoInh0cmVhbS54dHJlYW0tbmV3LWVycm9yIiksCiAgICAgICAgICAgICJsYS11c2VyLXNoaWVsZCIsCiAgICAgICAgICAgIHsgZHVyYXRpb246IDUwMDAsIHBlcm1hbmVudDogZmFsc2UgfQogICAgICAgICAgKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBlZGl0UGxheWxpc3QocGxheWxpc3QpIHsKICAgICAgdGhpcy5wbGF5bGlzdCA9IE9iamVjdC5hc3NpZ24oe30sIHBsYXlsaXN0KTsKICAgICAgdGhpcy5wbGF5bGlzdEF1dGgoKTsKICAgICAgdGhpcy5lZGl0b3IgPSB0cnVlOwogICAgfSwKICAgIGNhbmNlbEVkaXRvcigpIHsKICAgICAgdGhpcy5lZGl0b3IgPSBmYWxzZTsKICAgIH0sCiAgICBzYXZlRWRpdG9yKCkgewogICAgICBsZXQgcGxheWxpc3QgPSB0aGlzLnBsYXlsaXN0OwogICAgICBsZXQgcGxheWxpc3RJZCA9IHRoaXMucGxheWxpc3QuaWQ7CiAgICAgIGRlbGV0ZSBwbGF5bGlzdC5pZDsKICAgICAgZGVsZXRlIHBsYXlsaXN0LnVybDsKICAgICAgZGVsZXRlIHBsYXlsaXN0Lmdyb3VwczsKICAgICAgZGVsZXRlIHBsYXlsaXN0LnN0cmVhbXM7CgogICAgICBwbGF5bGlzdC5sYXN0X3VwZGF0ZWQgPSBuZXcgRGF0ZSgpOwogICAgICBodHRwU2VydmljZQogICAgICAgIC5wdXQoYHBsYXlsaXN0LyR7cGxheWxpc3RJZH1gLCBwbGF5bGlzdCkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gdHJ1ZSAmJiByZXMuZGF0YSA9PT0gdHJ1ZSkgewogICAgICAgICAgICB0aGlzLiRub3RpZnkoCiAgICAgICAgICAgICAgInByaW1hcnkiLAogICAgICAgICAgICAgIHRoaXMuJHQoInByb2ZpbGUuc3VjY2VzcyIpLAogICAgICAgICAgICAgIHRoaXMuJHQoInh0cmVhbS54dHJlYW0tc2F2ZS1zdWNjZXNzIiksCiAgICAgICAgICAgICAgImxhLXVzZXItc2hpZWxkIiwKICAgICAgICAgICAgICB7IGR1cmF0aW9uOiA1MDAwLCBwZXJtYW5lbnQ6IGZhbHNlIH0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgdGhpcy5lZGl0b3IgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5sb2FkUGxheWxpc3RzKCk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy4kbm90aWZ5KAogICAgICAgICAgICAiZXJyb3IiLAogICAgICAgICAgICB0aGlzLiR0KCJwcm9maWxlLmZhaWxlZCIpLAogICAgICAgICAgICB0aGlzLiR0KCJ4dHJlYW0ueHRyZWFtLXNhdmUtZXJyb3IiKSwKICAgICAgICAgICAgImxhLXVzZXItc2hpZWxkIiwKICAgICAgICAgICAgeyBkdXJhdGlvbjogNTAwMCwgcGVybWFuZW50OiBmYWxzZSB9CiAgICAgICAgICApOwogICAgICAgIH0pOwogICAgfSwKICAgIGRlbGV0ZVBsYXlsaXN0KGlkKSB7CiAgICAgIGh0dHBTZXJ2aWNlCiAgICAgICAgLmRlbGV0ZShgcGxheWxpc3QvJHtpZH1gKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSB0cnVlKSB7CiAgICAgICAgICAgIHRoaXMuJG5vdGlmeSgKICAgICAgICAgICAgICAicHJpbWFyeSIsCiAgICAgICAgICAgICAgdGhpcy4kdCgicHJvZmlsZS5zdWNjZXNzIiksCiAgICAgICAgICAgICAgdGhpcy4kdCgieHRyZWFtLnh0cmVhbS1kZWxldGUtc3VjY2VzcyIpLAogICAgICAgICAgICAgICJsYS11c2VyLXNoaWVsZCIsCiAgICAgICAgICAgICAgeyBkdXJhdGlvbjogNTAwMCwgcGVybWFuZW50OiBmYWxzZSB9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHRoaXMubG9hZFBsYXlsaXN0cygpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMuJG5vdGlmeSgKICAgICAgICAgICAgImVycm9yIiwKICAgICAgICAgICAgdGhpcy4kdCgicHJvZmlsZS5mYWlsZWQiKSwKICAgICAgICAgICAgdGhpcy4kdCgieHRyZWFtLnh0cmVhbS1kZWxldGUtZXJyb3IiKSwKICAgICAgICAgICAgImxhLXVzZXItc2hpZWxkIiwKICAgICAgICAgICAgeyBkdXJhdGlvbjogNTAwMCwgcGVybWFuZW50OiBmYWxzZSB9CiAgICAgICAgICApOwogICAgICAgIH0pOwogICAgfSwKICAgIHNlYXJjaEFjY291bnQoc2VhcmNoKSB7CiAgICAgIGlmIChzZWFyY2gubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy5zZWFyY2ggPSBudWxsOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2VhcmNoID0gc2VhcmNoOwogICAgICB9CiAgICB9LAogICAgcHJpbnRBY2NvdW50cygpIHsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInBsYXlsaXN0cyIpLnByaW50KCk7CiAgICB9LAogICAgZm9ybWF0RGF0ZShkYXRlKSB7CiAgICAgIHJldHVybiBkYXRlID09PSBmYWxzZQogICAgICAgID8gIiIKICAgICAgICA6IGRhdGUgPT09IG51bGwgfHwKICAgICAgICAgIGRhdGUgPT09ICIwMDAwLTAwLTAwIDAwOjAwOjAwIiB8fAogICAgICAgICAgZGF0ZSA9PT0gMCB8fAogICAgICAgICAgZGF0ZSA9PT0gIiIKICAgICAgICA/IHRoaXMuJHQoInh0cmVhbS51bmxpbWl0ZWQiKQogICAgICAgIDogbmV3IERhdGUoZGF0ZSkudG9Mb2NhbGVTdHJpbmcoCiAgICAgICAgICAgIHRoaXMuJHQoImRhdGUubG9jYWxlIiksCiAgICAgICAgICAgIHRoaXMuZGF0ZU9wdGlvbnMKICAgICAgICAgICk7CiAgICB9LAogICAgZm9ybWF0TWF4Q29ubmVjdGlvbnMobWF4KSB7CiAgICAgIHJldHVybiBtYXggPT09IGZhbHNlCiAgICAgICAgPyAiIgogICAgICAgIDogbWF4ID09PSBudWxsIHx8IG1heCA8PSAwCiAgICAgICAgPyB0aGlzLiR0KCJ4dHJlYW0udW5saW1pdGVkIikKICAgICAgICA6IG1heDsKICAgIH0sCiAgICBkb1RhYkNoYW5nZSh0YWIpIHsKICAgICAgaWYgKHRhYiA9PSAxKSB7CiAgICAgICAgLy90aGlzLmxvYWRHcm91cHMoKTsKICAgICAgfQogICAgICB0aGlzLmFjdGl2ZVRhYiA9IHRhYjsKICAgIH0sCiAgICByYW5kb21QYXNzd29yZCgpIHsKICAgICAgaHR0cFNlcnZpY2UKICAgICAgICAucG9zdCgicGxheWxpc3QvcmFuZG9tLXBhc3N3b3JkIiwgewogICAgICAgICAgdXNlcm5hbWU6IHRoaXMucGxheWxpc3QuYXBpX3VzZXJuYW1lLAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IHRydWUpIHsKICAgICAgICAgICAgdGhpcy5wbGF5bGlzdC5hcGlfcGFzc3dvcmQgPSByZXMuZGF0YTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBwbGF5bGlzdEF1dGgoKSB7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgaHR0cFNlcnZpY2UKICAgICAgICAucG9zdCgicGxheWxpc3QvYXV0aGVudGljYXRlIiwgewogICAgICAgICAgaG9zdDogdGhpcy5wbGF5bGlzdC5zb3VyY2VfaG9zdCwKICAgICAgICAgIHBvcnQ6IHRoaXMucGxheWxpc3Quc291cmNlX3BvcnQsCiAgICAgICAgICB1c2VybmFtZTogdGhpcy5wbGF5bGlzdC5zb3VyY2VfdXNlcm5hbWUsCiAgICAgICAgICBwYXNzd29yZDogdGhpcy5wbGF5bGlzdC5zb3VyY2VfcGFzc3dvcmQsCiAgICAgICAgfSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IHRydWUgJiYgcmVzLmRhdGEuYXV0aCkgewogICAgICAgICAgICB0aGlzLnBsYXlsaXN0LnNvdXJjZV9leHBfZGF0ZSA9IHJlcy5kYXRhLmV4cF9kYXRlOwogICAgICAgICAgICB0aGlzLnBsYXlsaXN0LnNvdXJjZV9tYXhfY29ubmVjdGlvbnMgPSByZXMuZGF0YS5tYXhfY29ubmVjdGlvbnM7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9KTsKICAgIH0sCiAgICBnZXRJUEFkZHJlc3MoKSB7CiAgICAgIGh0dHBTZXJ2aWNlCiAgICAgICAgLmdldCgicGxheWxpc3QvaXAtYWRkcmVzcyIpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IHRydWUpIHsKICAgICAgICAgICAgdGhpcy5wbGF5bGlzdC5pcF9hbGxvd2VkLnB1c2gocmVzLmRhdGEpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgIH0pOwogICAgfSwKICAgIGNoZWNrQXZhaWxhYmlsaXR5KCkgewogICAgICBodHRwU2VydmljZQogICAgICAgIC5wb3N0KCJwbGF5bGlzdC91c2VyLXBhc3MtZXhpc3RzIiwgewogICAgICAgICAgdXNlcm5hbWU6IHRoaXMucGxheWxpc3QuYXBpX3VzZXJuYW1lLAogICAgICAgICAgcGFzc3dvcmQ6IHRoaXMucGxheWxpc3QuYXBpX3Bhc3N3b3JkLAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IHRydWUpIHsKICAgICAgICAgICAgaWYgKHJlcy5kYXRhID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgdGhpcy4kbm90aWZ5KAogICAgICAgICAgICAgICAgImVycm9yIiwKICAgICAgICAgICAgICAgIHRoaXMuJHQoInh0cmVhbS5ub3QtYXZhaWxhYmxlIiksCiAgICAgICAgICAgICAgICB0aGlzLiR0KCJ4dHJlYW0udXNlci1wYXNzLXVzZWQiKSwKICAgICAgICAgICAgICAgICJsYS1leGNsYW1hdGlvbi10cmlhbmdsZSIsCiAgICAgICAgICAgICAgICB7IGR1cmF0aW9uOiA1MDAwLCBwZXJtYW5lbnQ6IGZhbHNlIH0KICAgICAgICAgICAgICApOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuJG5vdGlmeSgKICAgICAgICAgICAgICAgICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgIHRoaXMuJHQoInh0cmVhbS5hdmFpbGFibGUiKSwKICAgICAgICAgICAgICAgIHRoaXMuJHQoInh0cmVhbS51c2VyLXBhc3MtYXZhaWxhYmxlIiksCiAgICAgICAgICAgICAgICAibGEtY2hlY2stY2lyY2xlIiwKICAgICAgICAgICAgICAgIHsgZHVyYXRpb246IDUwMDAsIHBlcm1hbmVudDogZmFsc2UgfQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBleHBvcnRNM1UoKSB7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgaHR0cFNlcnZpY2UuZG93bmxvYWQoYHBsYXlsaXN0L2V4cG9ydC9tM3UvJHt0aGlzLnBsYXlsaXN0LmlkfWApLnRoZW4oKGJsb2IpID0+IHsKICAgICAgICB2YXIgdXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgYS5ocmVmID0gdXJsOwogICAgICAgIGEuZG93bmxvYWQgPSAiZXhwb3J0Lm0zdSI7CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsKICAgICAgICBhLmNsaWNrKCk7CiAgICAgICAgYS5yZW1vdmUoKTsKICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICB9KQogICAgfSwKICAgIGV4cG9ydFNJUFRWKCkgewogICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7CiAgICAgIGh0dHBTZXJ2aWNlLmRvd25sb2FkKGBwbGF5bGlzdC9leHBvcnQvc2lwdHYvJHt0aGlzLnBsYXlsaXN0LmlkfWApLnRoZW4oKGJsb2IpID0+IHsKICAgICAgICB2YXIgdXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgYS5ocmVmID0gdXJsOwogICAgICAgIGEuZG93bmxvYWQgPSAiZXhwb3J0LnR4dCI7CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsKICAgICAgICBhLmNsaWNrKCk7CiAgICAgICAgYS5yZW1vdmUoKTsKICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICB9KQogICAgfSwKICAgIGV4cG9ydEJvdXF1ZXQoKSB7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgaHR0cFNlcnZpY2UuZG93bmxvYWQoYHBsYXlsaXN0L2V4cG9ydC9ib3VxdWV0LyR7dGhpcy5wbGF5bGlzdC5pZH1gKS50aGVuKChibG9iKSA9PiB7CiAgICAgICAgdmFyIHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIGEuaHJlZiA9IHVybDsKICAgICAgICBhLmRvd25sb2FkID0gImV4cG9ydC56aXAiOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7CiAgICAgICAgYS5jbGljaygpOwogICAgICAgIGEucmVtb3ZlKCk7CiAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgfSkKICAgIH0sCiAgICBleHBvcnRDU1YoKSB7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgaHR0cFNlcnZpY2UuZG93bmxvYWQoYHBsYXlsaXN0L2V4cG9ydC9jc3YvJHt0aGlzLnBsYXlsaXN0LmlkfWApLnRoZW4oKGJsb2IpID0+IHsKICAgICAgICB2YXIgdXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgYS5ocmVmID0gdXJsOwogICAgICAgIGEuZG93bmxvYWQgPSAiZXhwb3J0LnppcCI7CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsKICAgICAgICBhLmNsaWNrKCk7CiAgICAgICAgYS5yZW1vdmUoKTsKICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICB9KQogICAgfSwKICAgIGV4cG9ydEpTT04oKSB7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgaHR0cFNlcnZpY2UuZG93bmxvYWQoYHBsYXlsaXN0L2V4cG9ydC9qc29uLyR7dGhpcy5wbGF5bGlzdC5pZH1gKS50aGVuKChibG9iKSA9PiB7CiAgICAgICAgdmFyIHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIGEuaHJlZiA9IHVybDsKICAgICAgICBhLmRvd25sb2FkID0gImV4cG9ydC56aXAiOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7CiAgICAgICAgYS5jbGljaygpOwogICAgICAgIGEucmVtb3ZlKCk7CiAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgfSkKICAgIH0sCiAgICBiYWNrdXBQbGF5bGlzdChwYXRoKSB7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgaHR0cFNlcnZpY2UuZG93bmxvYWQoYHBsYXlsaXN0L2JhY2stdXAvJHtwYXRofS8ke3RoaXMucGxheWxpc3QuaWR9YCkudGhlbigoYmxvYikgPT4gewogICAgICAgIHZhciB1cmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgICAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICBhLmhyZWYgPSB1cmw7CiAgICAgICAgYS5kb3dubG9hZCA9ICJiYWNrdXAuemlwIjsKICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOwogICAgICAgIGEuY2xpY2soKTsKICAgICAgICBhLnJlbW92ZSgpOwogICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pCiAgICB9LAogICAgYmFja3VwRVBHQ29kZXMoKSB7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgaHR0cFNlcnZpY2UuZG93bmxvYWQoYHBsYXlsaXN0L2JhY2stdXAvZXBnLWNvZGVzLyR7dGhpcy5wbGF5bGlzdC5pZH1gKS50aGVuKChibG9iKSA9PiB7CiAgICAgICAgdmFyIHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIGEuaHJlZiA9IHVybDsKICAgICAgICBhLmRvd25sb2FkID0gImJhY2t1cC56aXAiOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7CiAgICAgICAgYS5jbGljaygpOwogICAgICAgIGEucmVtb3ZlKCk7CiAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgfSkKICAgIH0sCiAgICByZXN0b3JlRVBHQ29kZXMoZSkgewogICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7CiAgICAgIGlmIChlICYmIGUudGFyZ2V0LmZpbGVzLmxlbmd0aCA9PSAxKSB7CiAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCJiYWNrdXAuemlwIiwgZS50YXJnZXQuZmlsZXNbMF0pOwogICAgICAgIGh0dHBTZXJ2aWNlLnBvc3RGaWxlKGBwbGF5bGlzdC9yZXN0b3JlL2VwZy1jb2Rlcy8ke3RoaXMucGxheWxpc3QuaWR9YCwgZm9ybURhdGEpCiAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSB0cnVlICYmIHJlcy5kYXRhID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgdGhpcy4kbm90aWZ5KAogICAgICAgICAgICAgICAgInByaW1hcnkiLAogICAgICAgICAgICAgICAgdGhpcy4kdCgicHJvZmlsZS5zdWNjZXNzIiksCiAgICAgICAgICAgICAgICB0aGlzLiR0KCJ4dHJlYW0ucmVzdG9yZS1lcGdjb2Rlcy1zdWNjZXNzIiksCiAgICAgICAgICAgICAgICAibGEtdXNlci1zaGllbGQiLAogICAgICAgICAgICAgICAgeyBkdXJhdGlvbjogNTAwMCwgcGVybWFuZW50OiBmYWxzZSB9CiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLiRub3RpZnkoCiAgICAgICAgICAgICAgICAiZXJyb3IiLAogICAgICAgICAgICAgICAgdGhpcy4kdCgicHJvZmlsZS5mYWlsZWQiKSwKICAgICAgICAgICAgICAgIHRoaXMuJHQoInh0cmVhbS5yZXN0b3JlLWVwZ2NvZGVzLWVycm9yIiksCiAgICAgICAgICAgICAgICAibGEtdXNlci1zaGllbGQiLAogICAgICAgICAgICAgICAgeyBkdXJhdGlvbjogNTAwMCwgcGVybWFuZW50OiBmYWxzZSB9CiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuJG5vdGlmeSgKICAgICAgICAgICAgICAiZXJyb3IiLAogICAgICAgICAgICAgIHRoaXMuJHQoInByb2ZpbGUuZmFpbGVkIiksCiAgICAgICAgICAgICAgdGhpcy4kdCgieHRyZWFtLnJlc3RvcmUtZXBnY29kZXMtZXJyb3IiKSwKICAgICAgICAgICAgICAibGEtdXNlci1zaGllbGQiLAogICAgICAgICAgICAgIHsgZHVyYXRpb246IDUwMDAsIHBlcm1hbmVudDogZmFsc2UgfQogICAgICAgICAgICApOwogICAgICAgICAgfSkKICAgICAgfQogICAgfSwKICAgIHJlc3RvcmVQbGF5bGlzdChlKSB7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgaWYgKGUgJiYgZS50YXJnZXQuZmlsZXMubGVuZ3RoID09IDEpIHsKICAgICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICBmb3JtRGF0YS5hcHBlbmQoImJhY2t1cC56aXAiLCBlLnRhcmdldC5maWxlc1swXSk7CiAgICAgICAgaHR0cFNlcnZpY2UucG9zdEZpbGUoYHBsYXlsaXN0L3Jlc3RvcmUvcGxheWxpc3QvJHt0aGlzLnBsYXlsaXN0LmlkfWAsIGZvcm1EYXRhKQogICAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gdHJ1ZSAmJiByZXMuZGF0YSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgIHRoaXMuJG5vdGlmeSgKICAgICAgICAgICAgICAgICJwcmltYXJ5IiwKICAgICAgICAgICAgICAgIHRoaXMuJHQoInByb2ZpbGUuc3VjY2VzcyIpLAogICAgICAgICAgICAgICAgdGhpcy4kdCgieHRyZWFtLnJlc3RvcmUtcGxheWxpc3Qtc3VjY2VzcyIpLAogICAgICAgICAgICAgICAgImxhLXVzZXItc2hpZWxkIiwKICAgICAgICAgICAgICAgIHsgZHVyYXRpb246IDUwMDAsIHBlcm1hbmVudDogZmFsc2UgfQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy4kbm90aWZ5KAogICAgICAgICAgICAgICAgImVycm9yIiwKICAgICAgICAgICAgICAgIHRoaXMuJHQoInByb2ZpbGUuZmFpbGVkIiksCiAgICAgICAgICAgICAgICB0aGlzLiR0KCJ4dHJlYW0ucmVzdG9yZS1wbGF5bGlzdC1lcnJvciIpLAogICAgICAgICAgICAgICAgImxhLXVzZXItc2hpZWxkIiwKICAgICAgICAgICAgICAgIHsgZHVyYXRpb246IDUwMDAsIHBlcm1hbmVudDogZmFsc2UgfQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLiRub3RpZnkoCiAgICAgICAgICAgICAgImVycm9yIiwKICAgICAgICAgICAgICB0aGlzLiR0KCJwcm9maWxlLmZhaWxlZCIpLAogICAgICAgICAgICAgIHRoaXMuJHQoInh0cmVhbS5yZXN0b3JlLXBsYXlsaXN0LWVycm9yIiksCiAgICAgICAgICAgICAgImxhLXVzZXItc2hpZWxkIiwKICAgICAgICAgICAgICB7IGR1cmF0aW9uOiA1MDAwLCBwZXJtYW5lbnQ6IGZhbHNlIH0KICAgICAgICAgICAgKTsKICAgICAgICAgIH0pCiAgICAgIH0KICAgIH0KICB9LAogIGJlZm9yZU1vdW50KCkgewogICAgdGhpcy5sb2FkUGxheWxpc3RzKCk7CiAgICBFdmVudEJ1cy4kZW1pdCgiY2FuLWFkZC1wbGF5bGlzdCIsIHRoaXMuY2FuQWRkUGxheWxpc3QpOwogICAgRXZlbnRCdXMuJG9uKCJzZWFyY2giLCB0aGlzLnNlYXJjaEFjY291bnQpOwogICAgRXZlbnRCdXMuJG9uKCJwcmludCIsIHRoaXMucHJpbnRBY2NvdW50cyk7CiAgICBFdmVudEJ1cy4kb24oInJlZnJlc2giLCB0aGlzLmxvYWRQbGF5bGlzdHMpOwogICAgRXZlbnRCdXMuJG9uKCJhZGQiLCB0aGlzLmFkZFBsYXlsaXN0KTsKICAgIEV2ZW50QnVzLiRvbigiY2FuY2VsIiwgdGhpcy5jYW5jZWxFZGl0b3IpOwogICAgRXZlbnRCdXMuJG9uKCJzYXZlIiwgdGhpcy5zYXZlRWRpdG9yKTsKICAgIEV2ZW50QnVzLiRvbigidGFiLWNoYW5nZSIsIHRoaXMuZG9UYWJDaGFuZ2UpOwogIH0sCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIEV2ZW50QnVzLiRvZmYoInNlYXJjaCIsIHRoaXMuc2VhcmNoQWNjb3VudCk7CiAgICBFdmVudEJ1cy4kb2ZmKCJwcmludCIsIHRoaXMucHJpbnRBY2NvdW50cyk7CiAgICBFdmVudEJ1cy4kb2ZmKCJyZWZyZXNoIiwgdGhpcy5sb2FkUGxheWxpc3RzKTsKICAgIEV2ZW50QnVzLiRvZmYoImFkZCIsIHRoaXMuYWRkUGxheWxpc3QpOwogICAgRXZlbnRCdXMuJG9mZigiY2FuY2VsIiwgdGhpcy5jYW5jZWxFZGl0b3IpOwogICAgRXZlbnRCdXMuJG9mZigic2F2ZSIsIHRoaXMuc2F2ZUVkaXRvcik7CiAgICBFdmVudEJ1cy4kb2ZmKCJ0YWItY2hhbmdlIiwgdGhpcy5kb1RhYkNoYW5nZSk7CiAgfSwKICB3YXRjaDogewogICAgZnJvbTogZnVuY3Rpb24gKHZhbCkgewogICAgICBFdmVudEJ1cy4kZW1pdCgidXBkYXRlLWZyb20iLCB2YWwpOwogICAgICBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCA9IDA7CiAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgPSAwOwogICAgfSwKICAgIHRvOiBmdW5jdGlvbiAodmFsKSB7CiAgICAgIEV2ZW50QnVzLiRlbWl0KCJ1cGRhdGUtdG8iLCB2YWwpOwogICAgfSwKICAgIHRvdGFsOiBmdW5jdGlvbiAodmFsKSB7CiAgICAgIEV2ZW50QnVzLiRlbWl0KCJ1cGRhdGUtdG90YWwiLCB2YWwpOwogICAgfSwKICAgIGVkaXRvcjogZnVuY3Rpb24gKHZhbCkgewogICAgICBFdmVudEJ1cy4kZW1pdCgidXBkYXRlLWVkaXRvciIsIHZhbCk7CiAgICAgIGlmICghdmFsKSB7CiAgICAgICAgdGhpcy5sb2FkUGxheWxpc3RzKCk7CiAgICAgIH0KICAgIH0sCiAgICBjYW5BZGRQbGF5bGlzdDogZnVuY3Rpb24gKHZhbCkgewogICAgICBFdmVudEJ1cy4kZW1pdCgiY2FuLWFkZC1wbGF5bGlzdCIsIHZhbCk7CiAgICB9LAogICAgInBsYXlsaXN0LnNvdXJjZV9ob3N0IjogZnVuY3Rpb24gKCkgewogICAgICBpZiAoCiAgICAgICAgdGhpcy5wbGF5bGlzdC5zb3VyY2VfaG9zdCAmJgogICAgICAgIHRoaXMucGxheWxpc3Quc291cmNlX2hvc3QubGVuZ3RoICYmCiAgICAgICAgdGhpcy5wbGF5bGlzdC5zb3VyY2VfdXNlcm5hbWUgJiYKICAgICAgICB0aGlzLnBsYXlsaXN0LnNvdXJjZV91c2VybmFtZS5sZW5ndGggJiYKICAgICAgICB0aGlzLnBsYXlsaXN0LnNvdXJjZV9wYXNzd29yZCAmJgogICAgICAgIHRoaXMucGxheWxpc3Quc291cmNlX3Bhc3N3b3JkLmxlbmd0aCAmJgogICAgICAgIHRoaXMuZWRpdG9yCiAgICAgICkgewogICAgICAgIHRoaXMucGxheWxpc3RBdXRoKCk7CiAgICAgICAgdGhpcy5sb2FkR3JvdXBzKCk7CiAgICAgIH0KICAgIH0sCiAgICAicGxheWxpc3QudXJsIjogZnVuY3Rpb24gKHVybCkgewogICAgICBpZiAodXJsICE9PSB1bmRlZmluZWQgJiYgdXJsLmxlbmd0aCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICBsZXQgdSA9IG5ldyBVUkwodXJsKTsKICAgICAgICAgIHRoaXMucGxheWxpc3Quc291cmNlX2hvc3QgPSB1Lmhvc3RuYW1lOwogICAgICAgICAgdGhpcy5wbGF5bGlzdC5zb3VyY2VfcG9ydCA9IHUucG9ydDsKICAgICAgICAgIHRoaXMucGxheWxpc3Quc291cmNlX3VzZXJuYW1lID0gdS5zZWFyY2hQYXJhbXMuZ2V0KCJ1c2VybmFtZSIpOwogICAgICAgICAgdGhpcy5wbGF5bGlzdC5zb3VyY2VfcGFzc3dvcmQgPSB1LnNlYXJjaFBhcmFtcy5nZXQoInBhc3N3b3JkIik7CiAgICAgICAgICBpZiAoIXRoaXMucGxheWxpc3QubmFtZS5sZW5ndGgpIHsKICAgICAgICAgICAgdGhpcy5wbGF5bGlzdC5uYW1lID0gdS5ob3N0bmFtZS50b1VwcGVyQ2FzZSgpOwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggewogICAgICAgICAgLy8KICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgfSwKfTsK"},null]}