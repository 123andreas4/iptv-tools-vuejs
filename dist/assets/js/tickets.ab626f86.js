(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["tickets"],{"119e":function(t,e,i){},"1c06":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("erd-row",{staticClass:"m-0 p-0"},[t.isLoading?i("erd-spinner",{attrs:{size:"lg",overlay:"",absolute:""}}):t._e(),t.editor?t._e():i("erd-col",{attrs:{xl:"12",id:"answered-tickets"}},[i("b-table",{attrs:{items:t.paged,fields:t.fields,striped:"",small:""},scopedSlots:t._u([{key:"cell(user_id)",fn:function(e){return[i("router-link",{attrs:{to:{name:"users",params:{editor:!0,id:e.item.user_id}}}},[t._v(t._s(e.item.user_id))])]}},{key:"cell(priority)",fn:function(e){return[i("erd-badge",{attrs:{variant:t.priorityVariant(e.item.priority)}},[t._v(t._s(t.$t("priority."+e.item.priority)))])]}},{key:"cell(departement)",fn:function(e){return[t._v(" "+t._s(t.$t("departement."+e.item.departement))+" ")]}},{key:"cell(created)",fn:function(e){return[t._v(" "+t._s(t.formatDate(e.item.created))+" ")]}},{key:"cell(last_updated)",fn:function(e){return[t._v(" "+t._s(t.formatDate(e.item.last_updated))+" ")]}},{key:"cell(tags)",fn:function(e){return t._l(e.item.tags,(function(s,a){return i("erd-badge",{key:"tag-"+e.item.id+"-"+a},[t._v(t._s(s))])}))}},{key:"cell(lang)",fn:function(e){return[i("span",{staticClass:"text-capitalize"},[t._v(t._s(t.languages[e.item.lang].name))])]}},{key:"cell(actions)",fn:function(e){return[i("erd-button",{staticClass:"btn-table",attrs:{variant:"info"},on:{click:function(i){return t.replyTicket(e.item)}}},[i("i",{staticClass:"las la-reply"})]),i("erd-button",{staticClass:"btn-table",attrs:{variant:"primary"},on:{click:function(i){return t.closeTicket(e.item.id)}}},[i("i",{staticClass:"las la-times"})]),i("erd-button",{staticClass:"btn-table",attrs:{variant:"danger"},on:{click:function(i){return t.deleteTicket(e.item.id)}}},[i("i",{staticClass:"las la-trash"})])]}}],null,!1,2498508787)}),i("b-pagination",{staticClass:"w-100 my-3",attrs:{size:"sm",align:"center","total-rows":t.total,"per-page":t.perPage},scopedSlots:t._u([{key:"next-text",fn:function(){return[i("i",{staticClass:"las la-angle-right"})]},proxy:!0},{key:"prev-text",fn:function(){return[i("i",{staticClass:"las la-angle-left"})]},proxy:!0},{key:"first-text",fn:function(){return[i("i",{staticClass:"las la-angle-double-left"})]},proxy:!0},{key:"last-text",fn:function(){return[i("i",{staticClass:"las la-angle-double-right"})]},proxy:!0}],null,!1,1414363887),model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t.editor?i("erd-row",{staticClass:"m-0 p-0"},[i("erd-col",{attrs:{xl:"3",lg:"4",md:"5"}},[i("label",{attrs:{for:"priority"}},[t._v(t._s(t.$t("tickets.priority")))]),i("erd-select",{staticClass:"w-100 mb-2",attrs:{items:t.priorities,id:"priority"},model:{value:t.editorTicket.priority,callback:function(e){t.$set(t.editorTicket,"priority",e)},expression:"editorTicket.priority"}}),i("label",{attrs:{for:"departement"}},[t._v(t._s(t.$t("tickets.departement")))]),i("erd-select",{staticClass:"w-100 mb-2",attrs:{items:t.departements,id:"departement"},model:{value:t.editorTicket.departement,callback:function(e){t.$set(t.editorTicket,"departement",e)},expression:"editorTicket.departement"}}),i("label",{attrs:{for:"title"}},[t._v(t._s(t.$t("tickets.tags")))]),i("erd-tag-input",{staticClass:"mb-2 w-100",model:{value:t.editorTicket.tags,callback:function(e){t.$set(t.editorTicket,"tags",e)},expression:"editorTicket.tags"}}),i("label",[t._v(t._s(t.$t("tickets.notes")))]),i("erd-textarea",{staticClass:"mb-2 w-100",model:{value:t.editorTicket.notes,callback:function(e){t.$set(t.editorTicket,"notes",e)},expression:"editorTicket.notes"}})],1),i("erd-col",{attrs:{xl:"9",lg:"8",md:"7"}},[i("label",{attrs:{for:"title"}},[t._v(t._s(t.$t("tickets.title")))]),i("erd-input",{staticClass:"w-100 mb-2",attrs:{id:"title"},model:{value:t.editorTicket.title,callback:function(e){t.$set(t.editorTicket,"title",e)},expression:"editorTicket.title"}}),i("label",[t._v(t._s(t.$t("tickets.message")))]),i("wysiwyg",{staticClass:"mb-2",model:{value:t.editorMessage,callback:function(e){t.editorMessage=e},expression:"editorMessage"}})],1)],1):t._e(),t.editor?i("erd-row",{staticClass:"m-0 p-0"},[i("erd-col",{staticClass:"mt-0",attrs:{xl:"12",sm:"12"}},t._l(t.editorTicket.conversation,(function(e,s){return i("div",{key:"conversation-"+s,staticClass:"ticket-conversation reader",attrs:{id:"ticket"}},[i("div",{staticClass:"ticket-title"},[i("span",{staticClass:"sender"},[i("i",{staticClass:"las la-2x",class:e.user.icon}),i("span",{staticClass:"font-weight-bold"},[t._v(t._s(e.user.title))]),i("erd-badge",{staticClass:"ml-2 pb-1",attrs:{variant:t.roleVariant(e.user.role)}},[t._v(t._s(t.$t("roles."+e.user.role)))])],1),i("span",{staticClass:"date"},[t._v(t._s(t.formatDate(e.date)))])]),i("div",{staticClass:"ticket-body"},[i("div",{domProps:{innerHTML:t._s(e.message)}})])])})),0)],1):t._e()],1)},a=[],r=i("5530"),n=(i("ac1f"),i("841c"),i("4d63"),i("25f0"),i("4de4"),i("466d"),i("fb6a"),i("99af"),i("2ebf")),c=i("0dcc"),o=i("2f62"),l=i("ce96"),d={data:function(){return{dateOptions:{day:"2-digit",month:"numeric",year:"numeric"},search:null,isLoading:!1,from:0,to:0,total:0,currentPage:1,editor:!1,editorTicket:null,editorMessage:"",tickets:[],languages:l["k"],fields:[{key:"user_id",label:this.$t("users.id"),sortable:!0},{key:"priority",label:this.$t("tickets.priority"),sortable:!0},{key:"departement",label:this.$t("tickets.departement"),sortable:!0},{key:"title",label:this.$t("tickets.title"),sortable:!0},{key:"created",label:this.$t("users.created"),sortable:!0},{key:"last_updated",label:this.$t("users.last-updated"),sortable:!0},{key:"notes",label:this.$t("tickets.notes"),sortable:!0},{key:"tags",label:this.$t("tickets.tags"),sortable:!0},{key:"lang",label:this.$t("tickets.lang"),sortable:!0},{key:"actions",label:this.$t("users.actions"),sortable:!1,thClass:"text-right",tdClass:"text-right"}],priorities:[{text:this.$t("priority.0"),value:0},{text:this.$t("priority.1"),value:1},{text:this.$t("priority.2"),value:2},{text:this.$t("priority.3"),value:3}],departements:[{text:this.$t("departement.0"),value:0},{text:this.$t("departement.1"),value:1},{text:this.$t("departement.2"),value:2},{text:this.$t("departement.3"),value:3},{text:this.$t("departement.4"),value:4},{text:this.$t("departement.5"),value:5}]}},computed:Object(r["a"])(Object(r["a"])({},Object(o["c"])(["currentUser","settings"])),{},{perPage:function(){return this.settings.perPage},searchFiltered:function(){var t=this;if(null===this.search)return this.tickets;var e=new RegExp(this.search,"i");return this.tickets.filter((function(i){return String(i.user_id).match(e)||String(i.title).match(e)||t.formatDate(i.created).match(e)||t.formatDate(i.last_updated).match(e)||JSON.stringify(i.conversation).match(e)||String(i.attachments).match(e)||String(i.notes).match(e)||JSON.stringify(i.tags).match(e)||t.$t("priority.".concat(i.priority)).match(e)||t.$t("departement.".concat(i.departement)).match(e)}))},paged:function(){return this.total=this.searchFiltered.length,this.from=(this.currentPage-1)*this.perPage,this.to=this.from+this.perPage>this.total?this.total:this.from+this.perPage,this.searchFiltered.slice(this.from,this.to)},userTitle:function(){return this.currentUser.profile&&this.currentUser.profile.name_first.length>0&&this.currentUser.profile.name_last.length>0?"".concat(this.currentUser.profile.name_first," ").concat(this.currentUser.profile.name_last):this.currentUser.user.username}}),methods:{formatDate:function(t){return new Date(t).toLocaleString(this.$t("date.locale"),this.dateOptions)},priorityVariant:function(t){switch(t){case 0:return"success";case 1:return"info";case 2:return"warning";case 3:return"danger"}},roleVariant:function(t){switch(t){case 1:case 1985:return"danger";case 2:case 4:case 5:return"info";case 3:return"primary"}},loadTickets:function(){var t=this;this.isLoading=!0,c["a"].get("administration/tickets/1").then((function(e){t.isLoading=!1,!0===e.status&&(t.tickets=e.data)})).catch((function(){t.isLoading=!1,t.$notify("error",t.$t("profile.failed"),t.$t("tickets.load-error"),"la-user-shield",{duration:5e3,permanent:!1})}))},deleteTicket:function(t){var e=this;c["a"].post("administration/ticket/delete",{id:t}).then((function(t){e.isLoading=!1,!0===t.status&&(e.$notify("primary",e.$t("profile.success"),e.$t("tickets.delete-success"),"la-user-shield",{duration:5e3,permanent:!1}),e.loadTickets())})).catch((function(){e.isLoading=!1,e.$notify("error",e.$t("profile.failed"),e.$t("tickets.delete-error"),"la-user-shield",{duration:5e3,permanent:!1})}))},closeTicket:function(t){var e=this;c["a"].post("administration/ticket/close",{id:t}).then((function(t){e.isLoading=!1,!0===t.status&&(e.$notify("primary",e.$t("profile.success"),e.$t("tickets.save-success"),"la-user-shield",{duration:5e3,permanent:!1}),e.loadTickets())})).catch((function(){e.isLoading=!1,e.$notify("error",e.$t("profile.failed"),e.$t("tickets.save-error"),"la-user-shield",{duration:5e3,permanent:!1})}))},replyTicket:function(t){this.editorTicket=Object.assign({},t),this.editorMessage="",this.editor=!0},cancelTicket:function(){this.editor=!1},saveTicket:function(){var t=this,e=Object.assign({},this.editorTicket);delete e.id,e.ticket_status=1,e.last_updated=new Date,this.editorMessage.length&&e.conversation.unshift({date:new Date,message:this.editorMessage,user:{icon:"la-user-tie",role:this.currentUser.user.role,title:this.userTitle}});var i=this.editorTicket.id;c["a"].post("administration/ticket/update",{id:i,ticket:e}).then((function(e){t.isLoading=!1,!0===e.status&&(t.$notify("primary",t.$t("profile.success"),t.$t("tickets.save-success"),"la-user-shield",{duration:5e3,permanent:!1}),t.editor=!1,t.loadTickets())})).catch((function(){t.isLoading=!1,t.$notify("error",t.$t("profile.failed"),t.$t("tickets.save-error"),"la-user-shield",{duration:5e3,permanent:!1})}))},searchTicket:function(t){0===t.length?this.search=null:this.search=t},printTickets:function(){this.editor?document.getElementById("ticket").print():document.getElementById("answered-tickets").print()}},beforeMount:function(){this.loadTickets(),n["a"].$on("refresh",this.loadTickets),n["a"].$on("search",this.searchTicket),n["a"].$on("print",this.printTickets),n["a"].$on("save",this.saveTicket),n["a"].$on("cancel",this.cancelTicket)},beforeDestroy:function(){n["a"].$off("refresh",this.loadTickets),n["a"].$off("search",this.searchTicket),n["a"].$off("print",this.printTickets),n["a"].$off("save",this.saveTicket),n["a"].$off("cancel",this.cancelTicket)},watch:{from:function(t){n["a"].$emit("update-from",t)},to:function(t){n["a"].$emit("update-to",t)},total:function(t){n["a"].$emit("update-total",t)},editor:function(t){n["a"].$emit("update-editor",t)}}},u=d,f=(i("bc72"),i("2877")),h=Object(f["a"])(u,s,a,!1,null,"4cd7b0a0",null);e["default"]=h.exports},"33c4":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("erd-row",{staticClass:"m-0 p-0"},[t.isLoading?i("erd-spinner",{attrs:{size:"lg",overlay:"",absolute:""}}):t._e(),t.editor?t._e():i("erd-col",{attrs:{xl:"12",id:"open-tickets"}},[i("b-table",{attrs:{items:t.paged,fields:t.fields,striped:"",small:""},scopedSlots:t._u([{key:"cell(user_id)",fn:function(e){return[i("router-link",{attrs:{to:{name:"users",params:{editor:!0,id:e.item.user_id}}}},[t._v(t._s(e.item.user_id))])]}},{key:"cell(priority)",fn:function(e){return[i("erd-badge",{attrs:{variant:t.priorityVariant(e.item.priority)}},[t._v(t._s(t.$t("priority."+e.item.priority)))])]}},{key:"cell(departement)",fn:function(e){return[t._v(" "+t._s(t.$t("departement."+e.item.departement))+" ")]}},{key:"cell(created)",fn:function(e){return[t._v(" "+t._s(t.formatDate(e.item.created))+" ")]}},{key:"cell(last_updated)",fn:function(e){return[t._v(" "+t._s(t.formatDate(e.item.last_updated))+" ")]}},{key:"cell(tags)",fn:function(e){return t._l(e.item.tags,(function(s,a){return i("erd-badge",{key:"tag-"+e.item.id+"-"+a},[t._v(t._s(s))])}))}},{key:"cell(lang)",fn:function(e){return[i("span",{staticClass:"text-capitalize"},[t._v(t._s(t.languages[e.item.lang].name))])]}},{key:"cell(actions)",fn:function(e){return[i("erd-button",{staticClass:"btn-table",attrs:{variant:"info"},on:{click:function(i){return t.replyTicket(e.item)}}},[i("i",{staticClass:"las la-reply"})]),i("erd-button",{staticClass:"btn-table",attrs:{variant:"primary"},on:{click:function(i){return t.closeTicket(e.item.id)}}},[i("i",{staticClass:"las la-times"})]),i("erd-button",{staticClass:"btn-table",attrs:{variant:"danger"},on:{click:function(i){return t.deleteTicket(e.item.id)}}},[i("i",{staticClass:"las la-trash"})])]}}],null,!1,2498508787)}),i("b-pagination",{staticClass:"w-100 my-3",attrs:{size:"sm",align:"center","total-rows":t.total,"per-page":t.perPage},scopedSlots:t._u([{key:"next-text",fn:function(){return[i("i",{staticClass:"las la-angle-right"})]},proxy:!0},{key:"prev-text",fn:function(){return[i("i",{staticClass:"las la-angle-left"})]},proxy:!0},{key:"first-text",fn:function(){return[i("i",{staticClass:"las la-angle-double-left"})]},proxy:!0},{key:"last-text",fn:function(){return[i("i",{staticClass:"las la-angle-double-right"})]},proxy:!0}],null,!1,1414363887),model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t.editor?i("erd-row",{staticClass:"m-0 p-0"},[i("erd-col",{attrs:{xl:"3",lg:"4",md:"5"}},[i("label",{attrs:{for:"priority"}},[t._v(t._s(t.$t("tickets.priority")))]),i("erd-select",{staticClass:"w-100 mb-2",attrs:{items:t.priorities,id:"priority"},model:{value:t.editorTicket.priority,callback:function(e){t.$set(t.editorTicket,"priority",e)},expression:"editorTicket.priority"}}),i("label",{attrs:{for:"departement"}},[t._v(t._s(t.$t("tickets.departement")))]),i("erd-select",{staticClass:"w-100 mb-2",attrs:{items:t.departements,id:"departement"},model:{value:t.editorTicket.departement,callback:function(e){t.$set(t.editorTicket,"departement",e)},expression:"editorTicket.departement"}}),i("label",{attrs:{for:"title"}},[t._v(t._s(t.$t("tickets.tags")))]),i("erd-tag-input",{staticClass:"mb-2 w-100",model:{value:t.editorTicket.tags,callback:function(e){t.$set(t.editorTicket,"tags",e)},expression:"editorTicket.tags"}}),i("label",[t._v(t._s(t.$t("tickets.notes")))]),i("erd-textarea",{staticClass:"mb-2 w-100",model:{value:t.editorTicket.notes,callback:function(e){t.$set(t.editorTicket,"notes",e)},expression:"editorTicket.notes"}})],1),i("erd-col",{attrs:{xl:"9",lg:"8",md:"7"}},[i("label",{attrs:{for:"title"}},[t._v(t._s(t.$t("tickets.title")))]),i("erd-input",{staticClass:"w-100 mb-2",attrs:{id:"title"},model:{value:t.editorTicket.title,callback:function(e){t.$set(t.editorTicket,"title",e)},expression:"editorTicket.title"}}),i("label",[t._v(t._s(t.$t("tickets.message")))]),i("wysiwyg",{staticClass:"mb-2",model:{value:t.editorMessage,callback:function(e){t.editorMessage=e},expression:"editorMessage"}})],1)],1):t._e(),t.editor?i("erd-row",{staticClass:"m-0 p-0"},[i("erd-col",{staticClass:"mt-0",attrs:{xl:"12",sm:"12"}},t._l(t.editorTicket.conversation,(function(e,s){return i("div",{key:"conversation-"+s,staticClass:"ticket-conversation reader",attrs:{id:"ticket"}},[i("div",{staticClass:"ticket-title"},[i("span",{staticClass:"sender"},[i("i",{staticClass:"las la-2x",class:e.user.icon}),i("span",{staticClass:"font-weight-bold"},[t._v(t._s(e.user.title))]),i("erd-badge",{staticClass:"ml-2 pb-1",attrs:{variant:t.roleVariant(e.user.role)}},[t._v(t._s(t.$t("roles."+e.user.role)))])],1),i("span",{staticClass:"date"},[t._v(t._s(t.formatDate(e.date)))])]),i("div",{staticClass:"ticket-body"},[i("div",{domProps:{innerHTML:t._s(e.message)}})])])})),0)],1):t._e()],1)},a=[],r=i("5530"),n=(i("ac1f"),i("841c"),i("4d63"),i("25f0"),i("4de4"),i("466d"),i("fb6a"),i("99af"),i("2ebf")),c=i("0dcc"),o=i("2f62"),l=i("ce96"),d={data:function(){return{dateOptions:{day:"2-digit",month:"numeric",year:"numeric"},search:null,isLoading:!1,from:0,to:0,total:0,currentPage:1,editor:!1,editorTicket:null,editorMessage:"",tickets:[],languages:l["k"],fields:[{key:"user_id",label:this.$t("users.id"),sortable:!0},{key:"priority",label:this.$t("tickets.priority"),sortable:!0},{key:"departement",label:this.$t("tickets.departement"),sortable:!0},{key:"title",label:this.$t("tickets.title"),sortable:!0},{key:"created",label:this.$t("users.created"),sortable:!0},{key:"last_updated",label:this.$t("users.last-updated"),sortable:!0},{key:"notes",label:this.$t("tickets.notes"),sortable:!0},{key:"tags",label:this.$t("tickets.tags"),sortable:!0},{key:"lang",label:this.$t("tickets.lang"),sortable:!0},{key:"actions",label:this.$t("users.actions"),sortable:!1,thClass:"text-right",tdClass:"text-right"}],priorities:[{text:this.$t("priority.0"),value:0},{text:this.$t("priority.1"),value:1},{text:this.$t("priority.2"),value:2},{text:this.$t("priority.3"),value:3}],departements:[{text:this.$t("departement.0"),value:0},{text:this.$t("departement.1"),value:1},{text:this.$t("departement.2"),value:2},{text:this.$t("departement.3"),value:3},{text:this.$t("departement.4"),value:4},{text:this.$t("departement.5"),value:5}]}},computed:Object(r["a"])(Object(r["a"])({},Object(o["c"])(["currentUser","settings"])),{},{perPage:function(){return this.settings.perPage},searchFiltered:function(){var t=this;if(null===this.search)return this.tickets;var e=new RegExp(this.search,"i");return this.tickets.filter((function(i){return String(i.user_id).match(e)||String(i.title).match(e)||t.formatDate(i.created).match(e)||t.formatDate(i.last_updated).match(e)||JSON.stringify(i.conversation).match(e)||String(i.attachments).match(e)||String(i.notes).match(e)||JSON.stringify(i.tags).match(e)||t.$t("priority.".concat(i.priority)).match(e)||t.$t("departement.".concat(i.departement)).match(e)}))},paged:function(){return this.total=this.searchFiltered.length,this.from=(this.currentPage-1)*this.perPage,this.to=this.from+this.perPage>this.total?this.total:this.from+this.perPage,this.searchFiltered.slice(this.from,this.to)},userTitle:function(){return this.currentUser.profile&&this.currentUser.profile.name_first.length>0&&this.currentUser.profile.name_last.length>0?"".concat(this.currentUser.profile.name_first," ").concat(this.currentUser.profile.name_last):this.currentUser.user.username}}),methods:{formatDate:function(t){return new Date(t).toLocaleString(this.$t("date.locale"),this.dateOptions)},priorityVariant:function(t){switch(t){case 0:return"success";case 1:return"info";case 2:return"warning";case 3:return"danger"}},roleVariant:function(t){switch(t){case 1:case 1985:return"danger";case 2:case 4:case 5:return"info";case 3:return"primary"}},loadTickets:function(){var t=this;this.isLoading=!0,c["a"].get("administration/tickets/0").then((function(e){t.isLoading=!1,!0===e.status&&(t.tickets=e.data)})).catch((function(){t.isLoading=!1,t.$notify("error",t.$t("profile.failed"),t.$t("tickets.load-error"),"la-user-shield",{duration:5e3,permanent:!1})}))},deleteTicket:function(t){var e=this;c["a"].post("administration/ticket/delete",{id:t}).then((function(t){e.isLoading=!1,!0===t.status&&(e.$notify("primary",e.$t("profile.success"),e.$t("tickets.delete-success"),"la-user-shield",{duration:5e3,permanent:!1}),e.loadTickets())})).catch((function(){e.isLoading=!1,e.$notify("error",e.$t("profile.failed"),e.$t("tickets.delete-error"),"la-user-shield",{duration:5e3,permanent:!1})}))},closeTicket:function(t){var e=this;c["a"].post("administration/ticket/close",{id:t}).then((function(t){e.isLoading=!1,!0===t.status&&(e.$notify("primary",e.$t("profile.success"),e.$t("tickets.save-success"),"la-user-shield",{duration:5e3,permanent:!1}),e.loadTickets())})).catch((function(){e.isLoading=!1,e.$notify("error",e.$t("profile.failed"),e.$t("tickets.save-error"),"la-user-shield",{duration:5e3,permanent:!1})}))},replyTicket:function(t){this.editorTicket=Object.assign({},t),this.editorMessage="",this.editor=!0},cancelTicket:function(){this.editor=!1},saveTicket:function(){var t=this,e=Object.assign({},this.editorTicket);delete e.id,e.ticket_status=1,e.last_updated=new Date,this.editorMessage.length&&e.conversation.unshift({date:new Date,message:this.editorMessage,user:{icon:"la-user-tie",role:this.currentUser.user.role,title:this.userTitle}});var i=this.editorTicket.id;c["a"].post("administration/ticket/update",{id:i,ticket:e}).then((function(e){t.isLoading=!1,!0===e.status&&(t.$notify("primary",t.$t("profile.success"),t.$t("tickets.save-success"),"la-user-shield",{duration:5e3,permanent:!1}),t.editor=!1,t.loadTickets())})).catch((function(){t.isLoading=!1,t.$notify("error",t.$t("profile.failed"),t.$t("tickets.save-error"),"la-user-shield",{duration:5e3,permanent:!1})}))},searchTicket:function(t){0===t.length?this.search=null:this.search=t},printTickets:function(){this.editor?document.getElementById("ticket").print():document.getElementById("open-tickets").print()}},beforeMount:function(){this.loadTickets(),n["a"].$on("refresh",this.loadTickets),n["a"].$on("search",this.searchTicket),n["a"].$on("print",this.printTickets),n["a"].$on("save",this.saveTicket),n["a"].$on("cancel",this.cancelTicket)},beforeDestroy:function(){n["a"].$off("refresh",this.loadTickets),n["a"].$off("search",this.searchTicket),n["a"].$off("print",this.printTickets),n["a"].$off("save",this.saveTicket),n["a"].$off("cancel",this.cancelTicket)},watch:{from:function(t){n["a"].$emit("update-from",t)},to:function(t){n["a"].$emit("update-to",t)},total:function(t){n["a"].$emit("update-total",t)},editor:function(t){n["a"].$emit("update-editor",t)}}},u=d,f=(i("3f8f"),i("2877")),h=Object(f["a"])(u,s,a,!1,null,"f6567b58",null);e["default"]=h.exports},"39af":function(t,e,i){},"3f8f":function(t,e,i){"use strict";i("c77d")},"43a0":function(t,e,i){"use strict";i("6bc9")},"6bc9":function(t,e,i){},"7ea5":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("erd-row",{staticClass:"m-0 p-0"},[t.isLoading?i("erd-spinner",{attrs:{size:"lg",overlay:"",absolute:""}}):t._e(),t.editor?t._e():i("erd-col",{attrs:{xl:"12",id:"closed-tickets"}},[i("b-table",{attrs:{items:t.paged,fields:t.fields,striped:"",small:""},scopedSlots:t._u([{key:"cell(user_id)",fn:function(e){return[i("router-link",{attrs:{to:{name:"users",params:{editor:!0,id:e.item.user_id}}}},[t._v(t._s(e.item.user_id))])]}},{key:"cell(priority)",fn:function(e){return[i("erd-badge",{attrs:{variant:t.priorityVariant(e.item.priority)}},[t._v(t._s(t.$t("priority."+e.item.priority)))])]}},{key:"cell(departement)",fn:function(e){return[t._v(" "+t._s(t.$t("departement."+e.item.departement))+" ")]}},{key:"cell(created)",fn:function(e){return[t._v(" "+t._s(t.formatDate(e.item.created))+" ")]}},{key:"cell(last_updated)",fn:function(e){return[t._v(" "+t._s(t.formatDate(e.item.last_updated))+" ")]}},{key:"cell(tags)",fn:function(e){return t._l(e.item.tags,(function(s,a){return i("erd-badge",{key:"tag-"+e.item.id+"-"+a},[t._v(t._s(s))])}))}},{key:"cell(lang)",fn:function(e){return[i("span",{staticClass:"text-capitalize"},[t._v(t._s(t.languages[e.item.lang].name))])]}},{key:"cell(actions)",fn:function(e){return[i("erd-button",{staticClass:"btn-table",attrs:{variant:"info"},on:{click:function(i){return t.replyTicket(e.item)}}},[i("i",{staticClass:"las la-reply"})]),i("erd-button",{staticClass:"btn-table",attrs:{variant:"danger"},on:{click:function(i){return t.deleteTicket(e.item.id)}}},[i("i",{staticClass:"las la-trash"})])]}}],null,!1,3768742229)}),i("b-pagination",{staticClass:"w-100 my-3",attrs:{size:"sm",align:"center","total-rows":t.total,"per-page":t.perPage},scopedSlots:t._u([{key:"next-text",fn:function(){return[i("i",{staticClass:"las la-angle-right"})]},proxy:!0},{key:"prev-text",fn:function(){return[i("i",{staticClass:"las la-angle-left"})]},proxy:!0},{key:"first-text",fn:function(){return[i("i",{staticClass:"las la-angle-double-left"})]},proxy:!0},{key:"last-text",fn:function(){return[i("i",{staticClass:"las la-angle-double-right"})]},proxy:!0}],null,!1,1414363887),model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t.editor?i("erd-row",{staticClass:"m-0 p-0"},[i("erd-col",{attrs:{xl:"3",lg:"4",md:"5"}},[i("label",{attrs:{for:"priority"}},[t._v(t._s(t.$t("tickets.priority")))]),i("erd-select",{staticClass:"w-100 mb-2",attrs:{items:t.priorities,id:"priority"},model:{value:t.editorTicket.priority,callback:function(e){t.$set(t.editorTicket,"priority",e)},expression:"editorTicket.priority"}}),i("label",{attrs:{for:"departement"}},[t._v(t._s(t.$t("tickets.departement")))]),i("erd-select",{staticClass:"w-100 mb-2",attrs:{items:t.departements,id:"departement"},model:{value:t.editorTicket.departement,callback:function(e){t.$set(t.editorTicket,"departement",e)},expression:"editorTicket.departement"}}),i("label",{attrs:{for:"title"}},[t._v(t._s(t.$t("tickets.tags")))]),i("erd-tag-input",{staticClass:"mb-2 w-100",model:{value:t.editorTicket.tags,callback:function(e){t.$set(t.editorTicket,"tags",e)},expression:"editorTicket.tags"}}),i("label",[t._v(t._s(t.$t("tickets.notes")))]),i("erd-textarea",{staticClass:"mb-2 w-100",model:{value:t.editorTicket.notes,callback:function(e){t.$set(t.editorTicket,"notes",e)},expression:"editorTicket.notes"}})],1),i("erd-col",{attrs:{xl:"9",lg:"8",md:"7"}},[i("label",{attrs:{for:"title"}},[t._v(t._s(t.$t("tickets.title")))]),i("erd-input",{staticClass:"w-100 mb-2",attrs:{id:"title"},model:{value:t.editorTicket.title,callback:function(e){t.$set(t.editorTicket,"title",e)},expression:"editorTicket.title"}}),i("label",[t._v(t._s(t.$t("tickets.message")))]),i("wysiwyg",{staticClass:"mb-2",model:{value:t.editorMessage,callback:function(e){t.editorMessage=e},expression:"editorMessage"}})],1)],1):t._e(),t.editor?i("erd-row",{staticClass:"m-0 p-0"},[i("erd-col",{staticClass:"mt-0",attrs:{xl:"12",sm:"12"}},t._l(t.editorTicket.conversation,(function(e,s){return i("div",{key:"conversation-"+s,staticClass:"ticket-conversation reader",attrs:{id:"ticket"}},[i("div",{staticClass:"ticket-title"},[i("span",{staticClass:"sender"},[i("i",{staticClass:"las la-2x",class:e.user.icon}),i("span",{staticClass:"font-weight-bold"},[t._v(t._s(e.user.title))]),i("erd-badge",{staticClass:"ml-2 pb-1",attrs:{variant:t.roleVariant(e.user.role)}},[t._v(t._s(t.$t("roles."+e.user.role)))])],1),i("span",{staticClass:"date"},[t._v(t._s(t.formatDate(e.date)))])]),i("div",{staticClass:"ticket-body"},[i("div",{domProps:{innerHTML:t._s(e.message)}})])])})),0)],1):t._e()],1)},a=[],r=i("5530"),n=(i("ac1f"),i("841c"),i("4d63"),i("25f0"),i("4de4"),i("466d"),i("fb6a"),i("99af"),i("2ebf")),c=i("0dcc"),o=i("2f62"),l=i("ce96"),d={data:function(){return{dateOptions:{day:"2-digit",month:"numeric",year:"numeric"},search:null,isLoading:!1,from:0,to:0,total:0,currentPage:1,editor:!1,editorTicket:null,editorMessage:"",tickets:[],languages:l["k"],fields:[{key:"user_id",label:this.$t("users.id"),sortable:!0},{key:"priority",label:this.$t("tickets.priority"),sortable:!0},{key:"departement",label:this.$t("tickets.departement"),sortable:!0},{key:"title",label:this.$t("tickets.title"),sortable:!0},{key:"created",label:this.$t("users.created"),sortable:!0},{key:"last_updated",label:this.$t("users.last-updated"),sortable:!0},{key:"notes",label:this.$t("tickets.notes"),sortable:!0},{key:"tags",label:this.$t("tickets.tags"),sortable:!0},{key:"lang",label:this.$t("tickets.lang"),sortable:!0},{key:"actions",label:this.$t("users.actions"),sortable:!1,thClass:"text-right",tdClass:"text-right"}],priorities:[{text:this.$t("priority.0"),value:0},{text:this.$t("priority.1"),value:1},{text:this.$t("priority.2"),value:2},{text:this.$t("priority.3"),value:3}],departements:[{text:this.$t("departement.0"),value:0},{text:this.$t("departement.1"),value:1},{text:this.$t("departement.2"),value:2},{text:this.$t("departement.3"),value:3},{text:this.$t("departement.4"),value:4},{text:this.$t("departement.5"),value:5}]}},computed:Object(r["a"])(Object(r["a"])({},Object(o["c"])(["currentUser","settings"])),{},{perPage:function(){return this.settings.perPage},searchFiltered:function(){var t=this;if(null===this.search)return this.tickets;var e=new RegExp(this.search,"i");return this.tickets.filter((function(i){return String(i.user_id).match(e)||String(i.title).match(e)||t.formatDate(i.created).match(e)||t.formatDate(i.last_updated).match(e)||JSON.stringify(i.conversation).match(e)||String(i.attachments).match(e)||String(i.notes).match(e)||JSON.stringify(i.tags).match(e)||t.$t("priority.".concat(i.priority)).match(e)||t.$t("departement.".concat(i.departement)).match(e)}))},paged:function(){return this.total=this.searchFiltered.length,this.from=(this.currentPage-1)*this.perPage,this.to=this.from+this.perPage>this.total?this.total:this.from+this.perPage,this.searchFiltered.slice(this.from,this.to)},userTitle:function(){return this.currentUser.profile&&this.currentUser.profile.name_first.length>0&&this.currentUser.profile.name_last.length>0?"".concat(this.currentUser.profile.name_first," ").concat(this.currentUser.profile.name_last):this.currentUser.user.username}}),methods:{formatDate:function(t){return new Date(t).toLocaleString(this.$t("date.locale"),this.dateOptions)},priorityVariant:function(t){switch(t){case 0:return"success";case 1:return"info";case 2:return"warning";case 3:return"danger"}},roleVariant:function(t){switch(t){case 1:case 1985:return"danger";case 2:case 4:case 5:return"info";case 3:return"primary"}},loadTickets:function(){var t=this;this.isLoading=!0,c["a"].get("administration/tickets/2").then((function(e){t.isLoading=!1,!0===e.status&&(t.tickets=e.data)})).catch((function(){t.isLoading=!1,t.$notify("error",t.$t("profile.failed"),t.$t("tickets.load-error"),"la-user-shield",{duration:5e3,permanent:!1})}))},deleteTicket:function(t){var e=this;c["a"].post("administration/ticket/delete",{id:t}).then((function(t){e.isLoading=!1,!0===t.status&&(e.$notify("primary",e.$t("profile.success"),e.$t("tickets.delete-success"),"la-user-shield",{duration:5e3,permanent:!1}),e.loadTickets())})).catch((function(){e.isLoading=!1,e.$notify("error",e.$t("profile.failed"),e.$t("tickets.delete-error"),"la-user-shield",{duration:5e3,permanent:!1})}))},replyTicket:function(t){this.editorTicket=Object.assign({},t),this.editorMessage="",this.editor=!0},cancelTicket:function(){this.editor=!1},saveTicket:function(){var t=this,e=Object.assign({},this.editorTicket);delete e.id,e.ticket_status=1,e.last_updated=new Date,this.editorMessage.length&&e.conversation.unshift({date:new Date,message:this.editorMessage,user:{icon:"la-user-tie",role:this.currentUser.user.role,title:this.userTitle}});var i=this.editorTicket.id;c["a"].post("administration/ticket/update",{id:i,ticket:e}).then((function(e){t.isLoading=!1,!0===e.status&&(t.$notify("primary",t.$t("profile.success"),t.$t("tickets.save-success"),"la-user-shield",{duration:5e3,permanent:!1}),t.editor=!1,t.loadTickets())})).catch((function(){t.isLoading=!1,t.$notify("error",t.$t("profile.failed"),t.$t("tickets.save-error"),"la-user-shield",{duration:5e3,permanent:!1})}))},searchTicket:function(t){0===t.length?this.search=null:this.search=t},printTickets:function(){this.editor?document.getElementById("ticket").print():document.getElementById("closed-tickets").print()}},beforeMount:function(){this.loadTickets(),n["a"].$on("refresh",this.loadTickets),n["a"].$on("search",this.searchTicket),n["a"].$on("print",this.printTickets),n["a"].$on("save",this.saveTicket),n["a"].$on("cancel",this.cancelTicket)},beforeDestroy:function(){n["a"].$off("refresh",this.loadTickets),n["a"].$off("search",this.searchTicket),n["a"].$off("print",this.printTickets),n["a"].$off("save",this.saveTicket),n["a"].$off("cancel",this.cancelTicket)},watch:{from:function(t){n["a"].$emit("update-from",t)},to:function(t){n["a"].$emit("update-to",t)},total:function(t){n["a"].$emit("update-total",t)},editor:function(t){n["a"].$emit("update-editor",t)}}},u=d,f=(i("43a0"),i("2877")),h=Object(f["a"])(u,s,a,!1,null,"755ea97e",null);e["default"]=h.exports},"85f2":function(t,e,i){"use strict";i("39af")},bb75:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("erd-row",{staticClass:"m-0 p-0"},[t.isLoading?i("erd-spinner",{attrs:{size:"lg",overlay:"",absolute:""}}):t._e(),t.editor?t._e():i("erd-col",{attrs:{xl:"12",id:"archived-tickets"}},[i("b-table",{attrs:{items:t.paged,fields:t.fields,striped:"",small:""},scopedSlots:t._u([{key:"cell(user_id)",fn:function(e){return[i("router-link",{attrs:{to:{name:"users",params:{editor:!0,id:e.item.user_id}}}},[t._v(t._s(e.item.user_id))])]}},{key:"cell(priority)",fn:function(e){return[i("erd-badge",{attrs:{variant:t.priorityVariant(e.item.priority)}},[t._v(t._s(t.$t("priority."+e.item.priority)))])]}},{key:"cell(departement)",fn:function(e){return[t._v(" "+t._s(t.$t("departement."+e.item.departement))+" ")]}},{key:"cell(created)",fn:function(e){return[t._v(" "+t._s(t.formatDate(e.item.created))+" ")]}},{key:"cell(last_updated)",fn:function(e){return[t._v(" "+t._s(t.formatDate(e.item.last_updated))+" ")]}},{key:"cell(tags)",fn:function(e){return t._l(e.item.tags,(function(s,a){return i("erd-badge",{key:"tag-"+e.item.id+"-"+a},[t._v(t._s(s))])}))}},{key:"cell(lang)",fn:function(e){return[i("span",{staticClass:"text-capitalize"},[t._v(t._s(t.languages[e.item.lang].name))])]}},{key:"cell(actions)",fn:function(e){return[i("erd-button",{staticClass:"btn-table",attrs:{variant:"info"},on:{click:function(i){return t.replyTicket(e.item)}}},[i("i",{staticClass:"las la-reply"})]),i("erd-button",{staticClass:"btn-table",attrs:{variant:"danger"},on:{click:function(i){return t.deleteTicket(e.item.id)}}},[i("i",{staticClass:"las la-trash"})])]}}],null,!1,3768742229)}),i("b-pagination",{staticClass:"w-100 my-3",attrs:{size:"sm",align:"center","total-rows":t.total,"per-page":t.perPage},scopedSlots:t._u([{key:"next-text",fn:function(){return[i("i",{staticClass:"las la-angle-right"})]},proxy:!0},{key:"prev-text",fn:function(){return[i("i",{staticClass:"las la-angle-left"})]},proxy:!0},{key:"first-text",fn:function(){return[i("i",{staticClass:"las la-angle-double-left"})]},proxy:!0},{key:"last-text",fn:function(){return[i("i",{staticClass:"las la-angle-double-right"})]},proxy:!0}],null,!1,1414363887),model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t.editor?i("erd-row",{staticClass:"m-0 p-0"},[i("erd-col",{attrs:{xl:"3",lg:"4",md:"5"}},[i("label",{attrs:{for:"priority"}},[t._v(t._s(t.$t("tickets.priority")))]),i("erd-select",{staticClass:"w-100 mb-2",attrs:{items:t.priorities,id:"priority"},model:{value:t.editorTicket.priority,callback:function(e){t.$set(t.editorTicket,"priority",e)},expression:"editorTicket.priority"}}),i("label",{attrs:{for:"departement"}},[t._v(t._s(t.$t("tickets.departement")))]),i("erd-select",{staticClass:"w-100 mb-2",attrs:{items:t.departements,id:"departement"},model:{value:t.editorTicket.departement,callback:function(e){t.$set(t.editorTicket,"departement",e)},expression:"editorTicket.departement"}}),i("label",{attrs:{for:"title"}},[t._v(t._s(t.$t("tickets.tags")))]),i("erd-tag-input",{staticClass:"mb-2 w-100",model:{value:t.editorTicket.tags,callback:function(e){t.$set(t.editorTicket,"tags",e)},expression:"editorTicket.tags"}}),i("label",[t._v(t._s(t.$t("tickets.notes")))]),i("erd-textarea",{staticClass:"mb-2 w-100",model:{value:t.editorTicket.notes,callback:function(e){t.$set(t.editorTicket,"notes",e)},expression:"editorTicket.notes"}})],1),i("erd-col",{attrs:{xl:"9",lg:"8",md:"7"}},[i("label",{attrs:{for:"title"}},[t._v(t._s(t.$t("tickets.title")))]),i("erd-input",{staticClass:"w-100 mb-2",attrs:{id:"title"},model:{value:t.editorTicket.title,callback:function(e){t.$set(t.editorTicket,"title",e)},expression:"editorTicket.title"}}),i("label",[t._v(t._s(t.$t("tickets.message")))]),i("wysiwyg",{staticClass:"mb-2",model:{value:t.editorMessage,callback:function(e){t.editorMessage=e},expression:"editorMessage"}})],1)],1):t._e(),t.editor?i("erd-row",{staticClass:"m-0 p-0"},[i("erd-col",{staticClass:"mt-0",attrs:{xl:"12",sm:"12"}},t._l(t.editorTicket.conversation,(function(e,s){return i("div",{key:"conversation-"+s,staticClass:"ticket-conversation reader",attrs:{id:"ticket"}},[i("div",{staticClass:"ticket-title"},[i("span",{staticClass:"sender"},[i("i",{staticClass:"las la-2x",class:e.user.icon}),i("span",{staticClass:"font-weight-bold"},[t._v(t._s(e.user.title))]),i("erd-badge",{staticClass:"ml-2 pb-1",attrs:{variant:t.roleVariant(e.user.role)}},[t._v(t._s(t.$t("roles."+e.user.role)))])],1),i("span",{staticClass:"date"},[t._v(t._s(t.formatDate(e.date)))])]),i("div",{staticClass:"ticket-body"},[i("div",{domProps:{innerHTML:t._s(e.message)}})])])})),0)],1):t._e()],1)},a=[],r=i("5530"),n=(i("ac1f"),i("841c"),i("4d63"),i("25f0"),i("4de4"),i("466d"),i("fb6a"),i("99af"),i("2ebf")),c=i("0dcc"),o=i("2f62"),l=i("ce96"),d={data:function(){return{dateOptions:{day:"2-digit",month:"numeric",year:"numeric"},search:null,isLoading:!1,from:0,to:0,total:0,currentPage:1,editor:!1,editorTicket:null,editorMessage:"",tickets:[],languages:l["k"],fields:[{key:"user_id",label:this.$t("users.id"),sortable:!0},{key:"priority",label:this.$t("tickets.priority"),sortable:!0},{key:"departement",label:this.$t("tickets.departement"),sortable:!0},{key:"title",label:this.$t("tickets.title"),sortable:!0},{key:"created",label:this.$t("users.created"),sortable:!0},{key:"last_updated",label:this.$t("users.last-updated"),sortable:!0},{key:"notes",label:this.$t("tickets.notes"),sortable:!0},{key:"tags",label:this.$t("tickets.tags"),sortable:!0},{key:"lang",label:this.$t("tickets.lang"),sortable:!0},{key:"actions",label:this.$t("users.actions"),sortable:!1,thClass:"text-right",tdClass:"text-right"}],priorities:[{text:this.$t("priority.0"),value:0},{text:this.$t("priority.1"),value:1},{text:this.$t("priority.2"),value:2},{text:this.$t("priority.3"),value:3}],departements:[{text:this.$t("departement.0"),value:0},{text:this.$t("departement.1"),value:1},{text:this.$t("departement.2"),value:2},{text:this.$t("departement.3"),value:3},{text:this.$t("departement.4"),value:4},{text:this.$t("departement.5"),value:5}]}},computed:Object(r["a"])(Object(r["a"])({},Object(o["c"])(["currentUser","settings"])),{},{perPage:function(){return this.settings.perPage},searchFiltered:function(){var t=this;if(null===this.search)return this.tickets;var e=new RegExp(this.search,"i");return this.tickets.filter((function(i){return String(i.user_id).match(e)||String(i.title).match(e)||t.formatDate(i.created).match(e)||t.formatDate(i.last_updated).match(e)||JSON.stringify(i.conversation).match(e)||String(i.attachments).match(e)||String(i.notes).match(e)||JSON.stringify(i.tags).match(e)||t.$t("priority.".concat(i.priority)).match(e)||t.$t("departement.".concat(i.departement)).match(e)}))},paged:function(){return this.total=this.searchFiltered.length,this.from=(this.currentPage-1)*this.perPage,this.to=this.from+this.perPage>this.total?this.total:this.from+this.perPage,this.searchFiltered.slice(this.from,this.to)},userTitle:function(){return this.currentUser.profile&&this.currentUser.profile.name_first.length>0&&this.currentUser.profile.name_last.length>0?"".concat(this.currentUser.profile.name_first," ").concat(this.currentUser.profile.name_last):this.currentUser.user.username}}),methods:{formatDate:function(t){return new Date(t).toLocaleString(this.$t("date.locale"),this.dateOptions)},priorityVariant:function(t){switch(t){case 0:return"success";case 1:return"info";case 2:return"warning";case 3:return"danger"}},roleVariant:function(t){switch(t){case 1:case 1985:return"danger";case 2:case 4:case 5:return"info";case 3:return"primary"}},loadTickets:function(){var t=this;this.isLoading=!0,c["a"].get("administration/tickets/3").then((function(e){t.isLoading=!1,!0===e.status&&(t.tickets=e.data)})).catch((function(){t.isLoading=!1,t.$notify("error",t.$t("profile.failed"),t.$t("tickets.load-error"),"la-user-shield",{duration:5e3,permanent:!1})}))},deleteTicket:function(t){var e=this;c["a"].post("administration/ticket/delete",{id:t}).then((function(t){e.isLoading=!1,!0===t.status&&(e.$notify("primary",e.$t("profile.success"),e.$t("tickets.delete-success"),"la-user-shield",{duration:5e3,permanent:!1}),e.loadTickets())})).catch((function(){e.isLoading=!1,e.$notify("error",e.$t("profile.failed"),e.$t("tickets.delete-error"),"la-user-shield",{duration:5e3,permanent:!1})}))},replyTicket:function(t){this.editorTicket=Object.assign({},t),this.editorMessage="",this.editor=!0},cancelTicket:function(){this.editor=!1},saveTicket:function(){var t=this,e=Object.assign({},this.editorTicket);delete e.id,e.ticket_status=1,e.last_updated=new Date,this.editorMessage.length&&e.conversation.unshift({date:new Date,message:this.editorMessage,user:{icon:"la-user-tie",role:this.currentUser.user.role,title:this.userTitle}});var i=this.editorTicket.id;c["a"].post("administration/ticket/update",{id:i,ticket:e}).then((function(e){t.isLoading=!1,!0===e.status&&(t.editor=!1,t.$notify("primary",t.$t("profile.success"),t.$t("tickets.save-success"),"la-user-shield",{duration:5e3,permanent:!1}),t.loadTickets())})).catch((function(){t.isLoading=!1,t.$notify("error",t.$t("profile.failed"),t.$t("tickets.save-error"),"la-user-shield",{duration:5e3,permanent:!1})}))},searchTicket:function(t){0===t.length?this.search=null:this.search=t},printTickets:function(){this.editor?document.getElementById("ticket").print():document.getElementById("archived-tickets").print()}},beforeMount:function(){this.loadTickets(),n["a"].$on("refresh",this.loadTickets),n["a"].$on("search",this.searchTicket),n["a"].$on("print",this.printTickets),n["a"].$on("save",this.saveTicket),n["a"].$on("cancel",this.cancelTicket)},beforeDestroy:function(){n["a"].$off("refresh",this.loadTickets),n["a"].$off("search",this.searchTicket),n["a"].$off("print",this.printTickets),n["a"].$off("save",this.saveTicket),n["a"].$off("cancel",this.cancelTicket)},watch:{from:function(t){n["a"].$emit("update-from",t)},to:function(t){n["a"].$emit("update-to",t)},total:function(t){n["a"].$emit("update-total",t)},editor:function(t){n["a"].$emit("update-editor",t)}}},u=d,f=(i("85f2"),i("2877")),h=Object(f["a"])(u,s,a,!1,null,"2953ac60",null);e["default"]=h.exports},bc72:function(t,e,i){"use strict";i("119e")},c77d:function(t,e,i){},d9eb:function(t,e,i){},e50e:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("erd-row",[i("erd-breadcrumb",{attrs:{items:t.breadcrumb,heading:t.heading}},[t.editor?i("erd-button",{staticClass:"mr-1 py-1 px-2",attrs:{icon:"las la-save",variant:"success"},on:{click:t.doSave}},[t._v(t._s(t.$t("general.save")))]):t._e(),t.editor?i("erd-button",{staticClass:"py-1 px-2",attrs:{icon:"las la-ban",variant:"danger"},on:{click:t.doCancel}},[t._v(t._s(t.$t("general.cancel")))]):t._e(),t.editor?t._e():i("erd-button",{staticClass:"mr-2 py-1 px-2",attrs:{icon:"las la-sync"},on:{click:t.doRefresh}},[t._v(t._s(t.$t("general.refresh")))]),t.editor?t._e():i("span",{staticClass:"text-muted"},[t._v(t._s(t.$t("general.from-to-total").format(this.total>0?this.from+1:this.from,this.to,this.total)))])],1),i("div",{staticClass:"seperator page"}),i("router-view",{staticClass:"px-0 mt-0"})],1)},a=[],r=(i("d81d"),i("b0c0"),i("2ebf")),n={data:function(){return{from:0,to:0,total:0,editor:!1}},computed:{breadcrumb:function(){var t=this,e=[];return this.$route.matched.map((function(i){e.push({text:t.$t("menu.".concat(i.name.toLowerCase())),to:""!==i.path?i.path:"/"})})),e},heading:function(){var t=this.breadcrumb;return t[t.length-1].text}},methods:{updateFrom:function(t){this.from=t},updateTo:function(t){this.to=t},updateTotal:function(t){this.total=t},updateEditor:function(t){this.editor=t},doRefresh:function(){r["a"].$emit("refresh")},doCancel:function(){r["a"].$emit("cancel")},doSave:function(){r["a"].$emit("save")}},watch:{$route:function(){!0!==this.$route.params.editor&&(this.editor=!1)}},beforeMount:function(){r["a"].$on("update-from",this.updateFrom),r["a"].$on("update-to",this.updateTo),r["a"].$on("update-total",this.updateTotal),r["a"].$on("update-editor",this.updateEditor)},beforeDestroy:function(){r["a"].$off("update-from",this.updateFrom),r["a"].$off("update-to",this.updateTo),r["a"].$off("update-total",this.updateTotal),r["a"].$off("update-editor",this.updateEditor)}},c=n,o=(i("ec45"),i("2877")),l=Object(o["a"])(c,s,a,!1,null,"3d8809ff",null);e["default"]=l.exports},ec45:function(t,e,i){"use strict";i("d9eb")}}]);